window.txEval=function(source,target){if(typeof source=="function"){return source.call(target||this)}else{if(typeof source=="string"){return(target)?target.eval(source):this.eval(source)}}};(function(){try{EditorJSLoader.readyState="loading"}catch(w){}var c=document,j=window,q=c.documentElement,d=false,y=true,k=null,u;if(!("console" in window)){var n=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];window.console={};for(var s=0;s<n.length;++s){window.console[n[s]]=function(){}}}var a;if(!a){a={}}(function(){function B(H){return H<10?"0"+H:H}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(H){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+B(this.getUTCMonth()+1)+"-"+B(this.getUTCDate())+"T"+B(this.getUTCHours())+":"+B(this.getUTCMinutes())+":"+B(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(H){return this.valueOf()
}}var A=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,D=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,E,i,G={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},F;function e(H){D.lastIndex=0;return D.test(H)?'"'+H.replace(D,function(I){var J=G[I];return typeof J==="string"?J:"\\u"+("0000"+I.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+H+'"'}function C(O,L){var J,I,P,H,M=E,K,N=L[O];if(N&&typeof N==="object"&&typeof N.toJSON==="function"){N=N.toJSON(O)}if(typeof F==="function"){N=F.call(L,O,N)}switch(typeof N){case"string":return e(N);case"number":return isFinite(N)?String(N):"null";case"boolean":case"null":return String(N);case"object":if(!N){return"null"}E+=i;K=[];if(Object.prototype.toString.apply(N)==="[object Array]"){H=N.length;for(J=0;J<H;J+=1){K[J]=C(J,N)||"null"}P=K.length===0?"[]":E?"[\n"+E+K.join(",\n"+E)+"\n"+M+"]":"["+K.join(",")+"]";
E=M;return P}if(F&&typeof F==="object"){H=F.length;for(J=0;J<H;J+=1){if(typeof F[J]==="string"){I=F[J];P=C(I,N);if(P){K.push(e(I)+(E?": ":":")+P)}}}}else{for(I in N){if(Object.prototype.hasOwnProperty.call(N,I)){P=C(I,N);if(P){K.push(e(I)+(E?": ":":")+P)}}}}P=K.length===0?"{}":E?"{\n"+E+K.join(",\n"+E)+"\n"+M+"}":"{"+K.join(",")+"}";E=M;return P}}if(typeof a.stringify!=="function"){a.stringify=function(K,I,J){var H;E="";i="";if(typeof J==="number"){for(H=0;H<J;H+=1){i+=" "}}else{if(typeof J==="string"){i=J}}F=I;if(I&&typeof I!=="function"&&(typeof I!=="object"||typeof I.length!=="number")){throw new Error("JSON.stringify")}return C("",{"":K})}}if(typeof a.parse!=="function"){a.parse=function(K,H){var J;function I(O,N){var M,L,P=O[N];if(P&&typeof P==="object"){for(M in P){if(Object.prototype.hasOwnProperty.call(P,M)){L=I(P,M);if(L!==undefined){P[M]=L}else{delete P[M]}}}}return H.call(O,N,P)}K=String(K);A.lastIndex=0;if(A.test(K)){K=K.replace(A,function(L){return"\\u"+("0000"+L.charCodeAt(0).toString(16)).slice(-4)
})}if(/^[\],:{}\s]*$/.test(K.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){J=txEval("("+K+")");return typeof H==="function"?I({"":J},""):J}throw new SyntaxError("JSON.parse")}}}());var x={};(function(){Object.extend=function(B,D){for(var C in D){B[C]=D[C]}return B};j.Class={create:function(){return function(){this.initialize.apply(this,arguments)}}};j.$break={};Function.prototype.bind=function(){var B=this,D=$A(arguments),C=D.shift();return function(){return B.apply(C,D.concat($A(arguments)))}};Function.prototype.bindAsEventListener=function(){var B=this,D=$A(arguments),C=D.shift();return function(E){return B.apply(C,[E||j.event].concat(D))}};var A=function(D){var B=arguments;if(B.length>1){for(var C=0,F=[],E=B.length;C<E;C++){F.push(x(B[C]))}return F}if(typeof D=="string"){D=c.getElementById(D)}return D};x=A;var i=navigator.userAgent.toLowerCase();var e=function(B){return i.indexOf(B)!=-1
};Object.extend(x,{chrome:e("chrome"),safari:e("safari")&&e("chrome")==d,gecko:e("firefox"),gecko_ver:e("firefox")?parseFloat(i.replace(/.*firefox\/([\d\.]+).*/g,"$1")):0,msie:e("msie"),msie_ver:e("msie")?parseFloat(navigator.appVersion.split("MSIE")[1]):0,webkit:e("applewebkit"),webkit_ver:e("applewebkit")?parseFloat(i.replace(/.*safari\//g,"")):0,opera:e("opera"),presto:e("presto"),os_win:e("win"),os_mac:e("mac"),iphone:e("iphone"),ipod:e("ipod"),ipad:e("ipad"),ios:e("like mac os x")&&e("mobile"),ios_ver:(e("like mac os x")&&e("mobile"))?parseFloat(i.replace(/^.*os (\d+)([_\d]*) .*$/g,"$1.$2").replace(/_/g,"")):0,android:e("android"),android_ver:e("android")?parseFloat(i.replace(/.*android[\s]*([\d\.]+).*/g,"$1")):0,blackberry:e("blackberry"),winphone:e("windows phone os"),wince:e("windows ce")});x.msie6=x.msie&&6<=x.msie_ver&&x.msie_ver<7;Object.extend(x,{extend:Object.extend,browser:function(){if(x.msie){return"msie"}else{if(x.gecko){return"firefox"}else{if(x.chrome){return"chrome"}else{if(x.webkit){return"safari"
}else{if(x.opera){return"opera"}else{return""}}}}}}()});j.$must=function(D,B){var C=x(D);if(!C){throw new Error("[Exception] "+B+" : not exist element("+D+")")}return C};j.txlib=A})();(function(){x.extend(x,{classNames:function(e){return e.className.split(" ")},hasClassName:function(i,e){if(e&&i.className){var A=i.className.split(/\s+/);return A.contains(e)}return d},addClassName:function(e,i){if(!this.hasClassName(e,i)){e.className+=" "+i}},removeClassName:function(i,e){var A=i.className.split(/\s+/);i.className=A.without(e).compact().join(" ")},visible:function(e){return x.getStyle(e,"display")!="none"},toggle:function(e){e=x(e);x[x.visible(e)?"hide":"show"](e);return e},show:function(e){x(e).style.display="block";return e},hide:function(e){x(e).style.display="none";return e}})})();x.extend(x,{getStyle:function(i,A){i=x(i);A=A=="float"?"cssFloat":A.camelize();var B=i.style[A];if(!B){var e=c.defaultView.getComputedStyle(i,k);B=e?e[A]:k}if(A=="opacity"){return B?parseFloat(B):1}return B=="auto"?k:B
},setStyle:function(e,A,i){e=x(e);var C=e.style;for(var B in A){if(A.hasOwnProperty(B)){if(B==="opacity"){x.setOpacity(e,A[B])}else{C[(B==="float"||B==="cssFloat")?(C.styleFloat===u?"cssFloat":"styleFloat"):(i?B:B.camelize())]=A[B]}}}return e},setStyleProperty:function(e,A){var i=y;this.setStyle(e,A,i)},getOpacity:function(e){return x(e).getStyle("opacity")},setOpacity:function(e,i){e=x(e);e.style.opacity=(i==1||i==="")?"":(i<0.00001)?0:i;return e},applyCSSText:function(A,i){var e=A.createElement("style");e.setAttribute("type","text/css");if(e.styleSheet){e.styleSheet.cssText=i}else{e.textContent=i}A.getElementsByTagName("head")[0].appendChild(e)}});(function(){if(x.msie){x.getStyle=function(i,A){i=x(i);A=(A=="float"||A=="cssFloat")?"styleFloat":A.camelize();var B=i.style[A];if(!B&&i.currentStyle){B=i.currentStyle[A]}if(A=="opacity"){if(B=(x.getStyle(i,"filter")||"").match(/alpha\(opacity=(.*)\)/)){if(B[1]){return parseFloat(B[1])/100}}return 1}if(B=="auto"){if((A=="width"||A=="height")&&(x.getStyle(i,"display")!="none")){return i["offset"+A.capitalize()]+"px"
}return k}return B}}if(x.msie){x.setOpacity=function(i,C){i=x(i);var B=x.getStyle(i,"filter"),A=i.style;if(C==1||C===""){A.filter=B.replace(/alpha\([^\)]*\)/gi,"");return i}else{if(C<0.00001){C=0}}A.filter=B.replace(/alpha\([^\)]*\)/gi,"")+"alpha(opacity="+(C*100)+")";return i}}if(x.gecko){x.extend(x,{setOpacity:function(i,A){i=x(i);i.style.opacity=(A==1)?0.999999:(A==="")?"":(A<0.00001)?0:A;return i}})}x.JSONHelper={encodeURIComponentReplacer:function(i,A){if(typeof A==="string"){if(!e(A)){return encodeURIComponent(A)}}return A},decodeURIComponentReviver:function(i,A){if(typeof A==="string"){if(!e(A)){return decodeURIComponent(A)}else{return a.parse(A,arguments.callee)}}return A}};var e=function(i){return(i.charAt(0)=="["&&i.charAt(i.length-1)=="]")}})();(function(){x.extend(x,{cumulativeOffset:function(i){var e=0,A=0;do{e+=i.offsetTop||0;A+=i.offsetLeft||0;i=i.offsetParent}while(i);return[A,e]},positionedOffset:function(i){var e=0,B=0;do{e+=i.offsetTop||0;B+=i.offsetLeft||0;i=i.offsetParent;
if(i){if(i.tagName=="BODY"){break}var A=x.getStyle(i,"position");if(A=="relative"||A=="absolute"){break}}}while(i);return[B,e]},getDimensions:function(A){var E=x.getStyle(A,"display");if(E!="none"&&E!=k){return{width:A.offsetWidth,height:A.offsetHeight}}var i=A.style;var D=i.visibility;var B=i.position;var e=i.display;i.visibility="hidden";i.position="absolute";i.display="block";var F=A.clientWidth;var C=A.clientHeight;i.display=e;i.position=B;i.visibility=D;return{width:F,height:C}},getCoords:function(F,B){var A=B||false;var i=F.offsetWidth;var C=F.offsetHeight;var D={left:0,top:0,right:0,bottom:0};var E;while(F){D.left+=F.offsetLeft||0;D.top+=F.offsetTop||0;F=F.offsetParent;if(A){if(F){if(F.tagName=="BODY"){break}E=x.getStyle(F,"position");if(E!=="static"){break}}}}D.right=D.left+i;D.bottom=D.top+C;return D},getCoordsTarget:function(e){return this.getCoords(e,y)}});if(x.webkit){x.cumulativeOffset=function(i){var e=0,A=0;do{e+=i.offsetTop||0;A+=i.offsetLeft||0;if(i.offsetParent==c.body){if(x.getStyle(i,"position")=="absolute"){break
}}i=i.offsetParent}while(i);return[A,e]}}})();(function(){x.extend(x,{KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,element:function(e){return x(e.target||e.srcElement)},isLeftClick:function(e){return(((e.which)&&(e.which==1))||((e.button)&&(e.button==1)))},pointerX:function(e){return e.pageX||(e.clientX+(c.documentElement.scrollLeft||c.body.scrollLeft))},pointerY:function(e){return e.pageY||(e.clientY+(c.documentElement.scrollTop||c.body.scrollTop))},stop:function(e){if(e.preventDefault){e.preventDefault();e.stopPropagation()}else{e.returnValue=d;e.cancelBubble=y}},findElement:function(A,i){var e=x.element(A);while(e.parentNode&&(!e.tagName||!e.tagName.toUpperCase||(e.tagName.toUpperCase()!=i.toUpperCase()))){e=e.parentNode}return e},observers:d,_observeAndCache:function(B,A,i,e){if(!this.observers){this.observers=[]}if(B.addEventListener){this.observers.push([B,A,i,e]);
B.addEventListener(A,i,e)}else{if(B.attachEvent){this.observers.push([B,A,i,e]);B.attachEvent("on"+A,i)}}},simulateEvent:function(E,A,D){var F=x.observers;if(!F){return}for(var B=0,C=F.length;B<C;B++){var e=F[B];if(e&&e[1]===A&&e[0]===E){e[2](D)}}},unloadCache:function(){if(!x.observers){return}for(var e=0,A=x.observers.length;e<A;e++){x.stopObserving.apply(this,x.observers[e]);x.observers[e][0]=k}x.observers=d},observe:function(B,A,i,e){B=x(B);e=e||d;if(A=="keypress"&&(x.webkit||B.attachEvent)){A="keydown"}x._observeAndCache(B,A,i,e)},stopObserving:function(C,B,A,i){C=x(C);i=i||d;if(B=="keypress"&&(x.webkit||C.attachEvent)){B="keydown"}if(C.removeEventListener){C.removeEventListener(B,A,i)}else{if(C.detachEvent){try{C.detachEvent("on"+B,A)}catch(D){}}}}});if(x.msie){x.observe(window,"unload",x.unloadCache,d)}})();(function(){x.extend(Object,{clone:function(e){return Object.extend({},e)}});x.extend(x,{isPrimitiveType:function(i){var e=new x.Set("string","number","boolean","date","function");
return e.contains(typeof i)},deepcopy:function(B,e){var A=B;if(!e){return A}for(var i in e){switch(typeof(e[i])){case"string":case"number":case"boolean":case"date":case"function":A[i]=e[i];break;default:if(e[i]){if(e[i].constructor==Array){A[i]=[].concat(e[i])}else{A[i]=A[i]||{};this.deepcopy(A[i],e[i])}}else{A[i]=k}break}}return A}})})();(function(){x.extend(String,{interpret:function(e){return e==k?"":String(e)},specialChar:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\"}});x.extend(String.prototype,{gsub:function(C,A){var e="",B=this,i;A=arguments.callee.prepareReplacement(A);while(B.length>0){if(i=B.match(C)){e+=B.slice(0,i.index);e+=String.interpret(A(i));B=B.slice(i.index+i[0].length)}else{e+=B,B=""}}return e},strip:function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")},stripTags:function(){return this.replace(/<\/?[^>]+>/gi,"")},toQueryParams:function(B){var e=this.strip().match(/([^?#]*)(#.*)?$/);if(!e){return{}}var A={};var i=k;e[1].split(B||"&").each(function(F){var E=k,C=k;
var D=F.match(/([\w_]+)=(.*)/);if(D){i=E=decodeURIComponent(D[1]);if(D[2]){C=decodeURIComponent(D[2])}}else{if(i){E=i;C=A[E];C+="&"+decodeURIComponent(F)}else{return}}if(E in A){if(A[E].constructor!=Array){A[E]=[A[E]]}A[E].push(C)}else{A[E]=C}});return A},toArray:function(){return this.split("")},times:function(B){var e="";for(var A=0;A<B;A++){e+=this}return e},camelize:function(){var C=this.split("-"),e=C.length;if(e==1){return C[0]}var B=this.charAt(0)=="-"?C[0].charAt(0).toUpperCase()+C[0].substring(1):C[0];for(var A=1;A<e;A++){B+=C[A].charAt(0).toUpperCase()+C[A].substring(1)}return B},capitalize:function(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()},include:function(e){return this.indexOf(e)>-1},empty:function(){return this==""},blank:function(){return/^\s*$/.test(this)}});String.prototype.gsub.prepareReplacement=function(i){if(typeof i=="function"){return i}var e=new Template(i);return function(A){return e.evaluate(A)}};x.extend(String.prototype,{trim:function(){return this.replace(/(^\s*)|(\s*$)/g,"")
},getRegExp:function(){return this.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\//g,"\\/").replace(/\?/g,"\\?").replace(/\^/g,"\\^").replace(/\)/g,"\\)").replace(/\(/g,"\\(").replace(/\]/g,"\\]").replace(/\[/g,"\\[").replace(/\$/g,"\\$").replace(/\+/g,"\\+").replace(/\|/g,"\\|").replace(/&/g,"(&|&amp;)")},toNumber:function(){return(isNaN(this)?0:parseInt(this,10))},toFloat:function(){return(isNaN(this)?0:parseFloat(this))},getRealLength:function(){var B=this;var e=0;for(var A=0;A<B.length;A++){e+=(escape(B.charAt(A)).charAt(1)=="u")?2:1}return e},cutRealLength:function(B){var C=this;var e=0;for(var A=0;A<C.length;A++){e+=(escape(C.charAt(A)).charAt(1)=="u")?2:1;if(e>B){return C.substring(0,A-3).concat("...")}}return C},getCut:function(e){return this.cutRealLength(e)},parsePx:function(){if(this==k||this.length==0){return 0}else{if(this.indexOf("px")>-1){return this.substring(0,this.indexOf("px")).toNumber()}else{return this.toNumber()}}},toPx:function(){if(this.indexOf("px")>-1){return this+""
}else{return this+"px"}},isPx:function(){var e=this;if(e.trim()==""){return false}else{if(e.indexOf("px")!=-1){e=this.parsePx()}}return !isNaN(e)},toByteUnit:function(){return this.toNumber().toByteUnit()},toCurrency:function(){var A=this;for(var e=0;e<Math.floor((A.length-(1+e))/3);e++){A=A.substring(0,A.length-(4*e+3))+","+A.substring(A.length-(4*e+3))}return A},replaceAll:function(e,i){e=e.replace(new RegExp("(\\W)","g"),"\\$1");i=i.replace(new RegExp("\\$","g"),"$$$$");return this.replace(new RegExp(e,"gm"),i)}})})();(function(){x.extend(Number.prototype,{toPaddedString:function(A,i){var e=this.toString(i||10);return"0".times(A-e.length)+e},toTime:function(){return Math.floor(this/60).toString().toPaddedString(2)+":"+(this%60).toString().toPaddedString(2)},toByteUnit:function(){var B;var e=["GB","MB","KB"];if(this==0){return"0"+e[2]}for(var A=0;A<e.length;A++){B=this/Math.pow(1024,3-A);if(B<1){continue}return(Math.round(B*10)/10)+e[A]}return"1"+e[2]},toPx:function(){return this.toString()+"px"
},parsePx:function(){return this+0},isPx:function(){return y},toNumber:function(){return this+0},toCurrency:function(){return this.toString().toCurrency()},getRegExp:function(){return this.toString().getRegExp()}})})();(function(){x.extend(Array.prototype,{each:function(B){try{for(var A=0,C=this.length;A<C;A++){B(this[A])}}catch(D){if(D!=$break){throw D}}return this},indexOf:function(A){for(var e=0;e<this.length;e++){if(this[e]==A){return e}}return -1},map:function(B){for(var e=[],A=0,C=this.length;A<C;++A){e[A]=B(this[A])}return e},include:function(e){return this.contains(e)},contains:function(e){return this.indexOf(e)>=0},pluck:function(i){var e=[];this.each(function(A){e.push(A[i])});return e},find:function(C){for(var A=0,e=this.length;A<e;A++){var B=this[A];if(C(B,A)){return B}}return k},findAll:function(D){var B=[];for(var A=0,e=this.length;A<e;A++){var C=this[A];if(D(C,A)){B.push(C)}}return B},inject:function(D,B){for(var A=0,e=this.length;A<e;A++){var C=this[A];D=B(D,C,A)}return D
},without:function(){var e=$A(arguments);return this.findAll(function(i){return !e.include(i)})},last:function(){return this[this.length-1]},flatten:function(){return this.inject([],function(i,e){return i.concat(e&&e.constructor==Array?e.flatten():[e])})},compact:function(){return this.findAll(function(e){return(e!=k)&&(e!="")})},uniq:function(e){return this.inject([],function(B,A,i){if(0==i||(e?B.last()!=A:!B.contains(A))){B.push(A)}return B})},toMap:function(i){var e={};this.each(function(A){e[A[i]]=A});return e}});Array.prototype.select=Array.prototype.findAll;Array.prototype.detect=Array.prototype.find;j.$A=function(B){if(!B){return[]}if(typeof B.toArray==="function"){return B.toArray()}else{var C=[];for(var A=0,e=B.length;A<e;A++){C.push(B[A])}return C}};x.Set=function(){var A=arguments;for(var B=0,e=A.length;B<e;B++){this[A[B]]=y}};x.Set.prototype.contains=function(e){return e in this};x.objectToQueryString=function(A){var B=[];for(var e in A){if(A.hasOwnProperty(e)){var i=A[e];if(i===k||i===u){i=""
}B.push(encodeURIComponent(e)+"="+encodeURIComponent(i))}}return B.join("&")}})();(function(){if(typeof(HTMLElement)!=u+""){var A=HTMLElement.prototype;var i=A.__proto__={__proto__:A.__proto__};if(HTMLElement.prototype.__defineSetter__){i.__defineSetter__("innerText",function(D){this.textContent=D})}if(HTMLElement.prototype.__defineGetter__){i.__defineGetter__("innerText",function(){return this.textContent})}}if(typeof(XMLDocument)!=u+""){var C=XMLDocument;if(C.prototype.__defineGetter__){C.prototype.__defineGetter__("xml",function(){return(new XMLSerializer()).serializeToString(this)})}}if(typeof(Node)!=u+""){if(Node.prototype&&Node.prototype.__defineGetter__){Node.prototype.__defineGetter__("xml",function(){return(new XMLSerializer()).serializeToString(this)})}}if(typeof(c.implementation)!=u+""){if(c.implementation.hasFeature("XPath","3.0")){if(typeof(C)!=u+""){C.prototype.selectNodes=function(F,H){if(!H){H=this}var G=this.defaultNS;var D=this.evaluate(F,H,{normalResolver:this.createNSResolver(this.documentElement),lookupNamespaceURI:function(J){switch(J){case"dflt":return G;
default:return this.normalResolver.lookupNamespaceURI(J)}}},XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,k);var I=[];for(var E=0;E<D.snapshotLength;E++){I[E]=D.snapshotItem(E)}return I};C.prototype.setProperty=function(E,D){if(E=="SelectionNamespaces"&&D.indexOf("xmlns:dflt")==0){this.defaultNS=D.replace(/^.*=\'(.+)\'/,"$1")}};C.prototype.defaultNS;C.prototype.selectSingleNode=function(E,F){if(!F){F=this}var D=this.selectNodes(E,F);if(D.length>0){return D[0]}else{return k}};C.prototype.createNode=function(D,F,E){if(D==1){return this.createElementNS(E,F)}else{return k}}}if(typeof(Element)!=u+""){Element.prototype.selectNodes=function(D){if(this.ownerDocument.selectNodes){return this.ownerDocument.selectNodes(D,this)}else{throw"For XML Elements Only"}};Element.prototype.selectSingleNode=function(D){if(this.ownerDocument.selectSingleNode){return this.ownerDocument.selectSingleNode(D,this)}else{throw"For XML Elements Only"}};Element.prototype.text;var B=Element.prototype;var e=B.__proto__={__proto__:B.__proto__};
if(Element.prototype.__defineSetter__){e.__defineSetter__("text",function(D){this.textContent=D})}if(Element.prototype.__defineGetter__){e.__defineGetter__("text",function(){return this.textContent})}if(j.origElement){j.origElement.prototype.selectNodes=Element.prototype.selectNodes;j.origElement.prototype.selectSingleNode=Element.prototype.selectSingleNode}}}}})();j.$tx=x;var g=j.goog=j.goog||{};g.global=j;g.LOCALE="en";g.provide=function(e){g.exportPath_(e)};g.exportPath_=function(A,e,D){var B=A.split(".");var C=D||g.global;if(!(B[0] in C)&&C.execScript){C.execScript("var "+B[0])}for(var i;B.length&&(i=B.shift());){if(!B.length&&g.isDef(e)){C[i]=e}else{if(C[i]){C=C[i]}else{C=C[i]={}}}}};g.abstractMethod=function(){throw Error("unimplemented abstract method")};g.typeOf=function(A){var i=typeof A;if(i=="object"){if(A){if(A instanceof Array){return"array"}else{if(A instanceof Object){return i}}var e=Object.prototype.toString.call((A));if(e=="[object Window]"){return"object"}if((e=="[object Array]"||typeof A.length=="number"&&isTypeOfUndefined(A.splice)!=u+""&&typeof A.propertyIsEnumerable!=u+""&&!A.propertyIsEnumerable("splice"))){return"array"
}if((e=="[object Function]"||typeof A.call!=u+""&&typeof A.propertyIsEnumerable!=u+""&&!A.propertyIsEnumerable("call"))){return"function"}}else{return k+""}}else{if(i=="function"&&typeof A.call==u+""){return"object"}}return i};g.isDef=function(e){return e!==u};g.isNull=function(e){return e===k};g.isDefAndNotNull=function(e){return e!=k};g.isArray=function(e){return g.typeOf(e)=="array"};g.isArrayLike=function(i){var e=g.typeOf(i);return e=="array"||e=="object"&&typeof i.length=="number"};g.isDateLike=function(e){return g.isObject(e)&&typeof e.getFullYear=="function"};g.isString=function(e){return typeof e=="string"};g.isBoolean=function(e){return typeof e=="boolean"};g.isNumber=function(e){return typeof e=="number"};g.isFunction=function(e){return g.typeOf(e)=="function"};g.isObject=function(i){var e=g.typeOf(i);return e=="object"||e=="array"||e=="function"};g.getUid=function(e){return e[g.UID_PROPERTY_]||(e[g.UID_PROPERTY_]=++g.uidCounter_)};g.UID_PROPERTY_="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36);
g.uidCounter_=0;Object.prototype.clone;g.bindNative_=function(e,A,i){return(e.call.apply(e.bind,arguments))};g.bindJs_=function(i,C,A){var e=C||g.global;if(arguments.length>2){var B=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(D,B);return i.apply(e,D)}}else{return function(){return i.apply(e,arguments)}}};g.bind=function(e,A,i){if(Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1){g.bind=g.bindNative_}else{g.bind=g.bindJs_}return g.bind.apply(k,arguments)};g.partial=function(i,A){var e=Array.prototype.slice.call(arguments,1);return function(){var B=Array.prototype.slice.call(arguments);B.unshift.apply(B,e);return i.apply(this,B)}};g.now=Date.now||(function(){return +new Date()});g.inherits=function(i,e){function A(){}A.prototype=e.prototype;i.superClass_=e.prototype;i.prototype=new A();i.prototype.constructor=i};g.base=function(C,e,E){var A=arguments.callee.caller;
if(A.superClass_){return A.superClass_.constructor.apply(C,Array.prototype.slice.call(arguments,1))}var i=Array.prototype.slice.call(arguments,2);var D=d;for(var B=C.constructor;B;B=B.superClass_&&B.superClass_.constructor){if(B.prototype[e]===A){D=y}else{if(D){return B.prototype[e].apply(C,i)}}}if(C[e]===A){return C.constructor.prototype[e].apply(C,i)}else{throw Error("goog.base called from a method of one name to a method of a different name")}};g.provide("goog.string");g.provide("goog.string.Unicode");g.string.Unicode={NBSP:"\xa0"};g.string.startsWith=function(i,e){return i.lastIndexOf(e,0)==0};g.string.isEmpty=function(e){return/^[\s\xa0]*$/.test(e)};g.string.stripNewlines=function(e){return e.replace(/ ?(\r\n|\r|\n)+/g," ")};g.string.canonicalizeNewlines=function(e){return e.replace(/(\r\n|\r|\n)/g,"\n")};g.string.trim=function(e){return e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};g.string.htmlEscape=function(i,e){if(e){return i.replace(g.string.amperRe_,"&amp;").replace(g.string.ltRe_,"&lt;").replace(g.string.gtRe_,"&gt;").replace(g.string.quotRe_,"&quot;")
}else{if(!g.string.allRe_.test(i)){return i}if(i.indexOf("&")!=-1){i=i.replace(g.string.amperRe_,"&amp;")}if(i.indexOf("<")!=-1){i=i.replace(g.string.ltRe_,"&lt;")}if(i.indexOf(">")!=-1){i=i.replace(g.string.gtRe_,"&gt;")}if(i.indexOf('"')!=-1){i=i.replace(g.string.quotRe_,"&quot;")}return i}};g.string.amperRe_=/&/g;g.string.ltRe_=/</g;g.string.gtRe_=/>/g;g.string.quotRe_=/\"/g;g.string.allRe_=/[&<>\"]/;g.string.contains=function(i,e){return i.indexOf(e)!=-1};g.string.buildString=function(e){return Array.prototype.join.call(arguments,"")};g.string.compareVersions=function(i,M){var A=0;var H=g.string.trim(String(i)).split(".");var G=g.string.trim(String(M)).split(".");var D=Math.max(H.length,G.length);for(var E=0;A==0&&E<D;E++){var e=H[E]||"";var L=G[E]||"";var I=new RegExp("(\\d*)(\\D*)","g");var C=new RegExp("(\\d*)(\\D*)","g");do{var K=I.exec(e)||["","",""];var J=C.exec(L)||["","",""];if(K[0].length==0&&J[0].length==0){break}var F=K[1].length==0?0:parseInt(K[1],10);var B=J[1].length==0?0:parseInt(J[1],10);
A=g.string.compareElements_(F,B)||g.string.compareElements_(K[2].length==0,J[2].length==0)||g.string.compareElements_(K[2],J[2])}while(A==0)}return A};g.string.compareElements_=function(i,e){if(i<e){return -1}else{if(i>e){return 1}}return 0};g.string.uniqueStringCounter_=Math.random()*2147483648|0;g.string.createUniqueString=function(){return"goog_"+g.string.uniqueStringCounter_++};g.provide("goog.userAgent");g.userAgent.ASSUME_IE=d;g.userAgent.ASSUME_GECKO=d;g.userAgent.ASSUME_WEBKIT=d;g.userAgent.ASSUME_MOBILE_WEBKIT=d;g.userAgent.ASSUME_OPERA=d;g.userAgent.BROWSER_KNOWN_=g.userAgent.ASSUME_IE||g.userAgent.ASSUME_GECKO||g.userAgent.ASSUME_MOBILE_WEBKIT||g.userAgent.ASSUME_WEBKIT||g.userAgent.ASSUME_OPERA;g.userAgent.getUserAgentString=function(){return g.global.navigator?g.global.navigator.userAgent:k};g.userAgent.getNavigator=function(){return g.global.navigator};g.userAgent.init_=function(){g.userAgent.detectedOpera_=d;g.userAgent.detectedIe_=d;g.userAgent.detectedWebkit_=d;g.userAgent.detectedMobile_=d;
g.userAgent.detectedGecko_=d;var i;if(!g.userAgent.BROWSER_KNOWN_&&(i=g.userAgent.getUserAgentString())){var e=g.userAgent.getNavigator();g.userAgent.detectedOpera_=i.indexOf("Opera")==0;g.userAgent.detectedIe_=!g.userAgent.detectedOpera_&&i.indexOf("MSIE")!=-1;g.userAgent.detectedWebkit_=!g.userAgent.detectedOpera_&&i.indexOf("WebKit")!=-1;g.userAgent.detectedMobile_=g.userAgent.detectedWebkit_&&i.indexOf("Mobile")!=-1;g.userAgent.detectedGecko_=!g.userAgent.detectedOpera_&&!g.userAgent.detectedWebkit_&&e.product=="Gecko"}};if(!g.userAgent.BROWSER_KNOWN_){g.userAgent.init_()}g.userAgent.OPERA=g.userAgent.BROWSER_KNOWN_?g.userAgent.ASSUME_OPERA:g.userAgent.detectedOpera_;g.userAgent.IE=g.userAgent.BROWSER_KNOWN_?g.userAgent.ASSUME_IE:g.userAgent.detectedIe_;g.userAgent.GECKO=g.userAgent.BROWSER_KNOWN_?g.userAgent.ASSUME_GECKO:g.userAgent.detectedGecko_;g.userAgent.WEBKIT=g.userAgent.BROWSER_KNOWN_?g.userAgent.ASSUME_WEBKIT||g.userAgent.ASSUME_MOBILE_WEBKIT:g.userAgent.detectedWebkit_;g.userAgent.MOBILE=g.userAgent.ASSUME_MOBILE_WEBKIT||g.userAgent.detectedMobile_;
g.userAgent.SAFARI=g.userAgent.WEBKIT;g.userAgent.determinePlatform_=function(){var e=g.userAgent.getNavigator();return e&&e.platform||""};g.userAgent.PLATFORM=g.userAgent.determinePlatform_();g.userAgent.ASSUME_MAC=d;g.userAgent.ASSUME_WINDOWS=d;g.userAgent.ASSUME_LINUX=d;g.userAgent.ASSUME_X11=d;g.userAgent.PLATFORM_KNOWN_=g.userAgent.ASSUME_MAC||g.userAgent.ASSUME_WINDOWS||g.userAgent.ASSUME_LINUX||g.userAgent.ASSUME_X11;g.userAgent.initPlatform_=function(){g.userAgent.detectedMac_=g.string.contains(g.userAgent.PLATFORM,"Mac");g.userAgent.detectedWindows_=g.string.contains(g.userAgent.PLATFORM,"Win");g.userAgent.detectedLinux_=g.string.contains(g.userAgent.PLATFORM,"Linux");g.userAgent.detectedX11_=!!g.userAgent.getNavigator()&&g.string.contains(g.userAgent.getNavigator()["appVersion"]||"","X11")};if(!g.userAgent.PLATFORM_KNOWN_){g.userAgent.initPlatform_()}g.userAgent.MAC=g.userAgent.PLATFORM_KNOWN_?g.userAgent.ASSUME_MAC:g.userAgent.detectedMac_;g.userAgent.WINDOWS=g.userAgent.PLATFORM_KNOWN_?g.userAgent.ASSUME_WINDOWS:g.userAgent.detectedWindows_;
g.userAgent.LINUX=g.userAgent.PLATFORM_KNOWN_?g.userAgent.ASSUME_LINUX:g.userAgent.detectedLinux_;g.userAgent.X11=g.userAgent.PLATFORM_KNOWN_?g.userAgent.ASSUME_X11:g.userAgent.detectedX11_;g.userAgent.determineVersion_=function(){var i="",C;if(g.userAgent.OPERA&&g.global.opera){var B=g.global.opera.version;i=typeof B=="function"?B():B}else{if(g.userAgent.GECKO){C=/rv\:([^\);]+)(\)|;)/}else{if(g.userAgent.IE){C=/MSIE\s+([^\);]+)(\)|;)/}else{if(g.userAgent.WEBKIT){C=/WebKit\/(\S+)/}}}if(C){var e=C.exec(g.userAgent.getUserAgentString());i=e?e[1]:""}}if(g.userAgent.IE){var A=g.userAgent.getDocumentMode_();if(A>parseFloat(i)){return String(A)}}return i};g.userAgent.getDocumentMode_=function(){var e=g.global.document;return e?e.documentMode:u};g.userAgent.VERSION=g.userAgent.determineVersion_();g.userAgent.isVersionCache_={};g.userAgent.isVersion=function(e){return g.userAgent.isVersionCache_[e]||(g.userAgent.isVersionCache_[e]=g.string.compareVersions(g.userAgent.VERSION,e)>=0)};g.userAgent.isDocumentModeCache_={};
g.userAgent.isDocumentMode=function(e){return g.userAgent.isDocumentModeCache_[e]||(g.userAgent.isDocumentModeCache_[e]=g.userAgent.IE&&c.documentMode&&c.documentMode>=e)};g.provide("goog.array");g.provide("goog.array.ArrayLike");g.NATIVE_ARRAY_PROTOTYPES=y;g.array.ArrayLike;g.array.peek=function(e){return e[e.length-1]};g.array.ARRAY_PROTOTYPE_=Array.prototype;g.array.indexOf=g.NATIVE_ARRAY_PROTOTYPES&&g.array.ARRAY_PROTOTYPE_.indexOf?function(e,A,i){return g.array.ARRAY_PROTOTYPE_.indexOf.call(e,A,i)}:function(e,D,A){var C=A==k?0:(A<0?Math.max(0,e.length+A):A);if(g.isString(e)){if(!g.isString(D)||D.length!=1){return -1}return e.indexOf(D,C)}for(var B=C;B<e.length;B++){if(B in e&&e[B]===D){return B}}return -1};g.array.forEach=g.NATIVE_ARRAY_PROTOTYPES&&g.array.ARRAY_PROTOTYPE_.forEach?function(e,A,i){g.array.ARRAY_PROTOTYPE_.forEach.call(e,A,i)}:function(e,E,D){var A=e.length;var B=g.isString(e)?e.split(""):e;for(var C=0;C<A;C++){if(C in B){E.call(D,B[C],C,e)}}};g.array.forEachRight=function(e,E,D){var A=e.length;
var B=g.isString(e)?e.split(""):e;for(var C=A-1;C>=0;--C){if(C in B){E.call(D,B[C],C,e)}}};g.array.filter=g.NATIVE_ARRAY_PROTOTYPES&&g.array.ARRAY_PROTOTYPE_.filter?function(e,A,i){return g.array.ARRAY_PROTOTYPE_.filter.call(e,A,i)}:function(D,E,e){var B=D.length;var F=[];var H=0;var G=g.isString(D)?D.split(""):D;for(var C=0;C<B;C++){if(C in G){var A=G[C];if(E.call(e,A,C,D)){F[H++]=A}}}return F};g.array.map=g.NATIVE_ARRAY_PROTOTYPES&&g.array.ARRAY_PROTOTYPE_.map?function(e,A,i){return g.array.ARRAY_PROTOTYPE_.map.call(e,A,i)}:function(e,F,E){var A=e.length;var D=new Array(A);var B=g.isString(e)?e.split(""):e;for(var C=0;C<A;C++){if(C in B){D[C]=F.call(E,B[C],C,e)}}return D};g.array.some=g.NATIVE_ARRAY_PROTOTYPES&&g.array.ARRAY_PROTOTYPE_.some?function(e,A,i){return g.array.ARRAY_PROTOTYPE_.some.call(e,A,i)}:function(e,E,D){var A=e.length;var B=g.isString(e)?e.split(""):e;for(var C=0;C<A;C++){if(C in B&&E.call(D,B[C],C,e)){return y}}return d};g.array.every=g.NATIVE_ARRAY_PROTOTYPES&&g.array.ARRAY_PROTOTYPE_.every?function(e,A,i){return g.array.ARRAY_PROTOTYPE_.every.call(e,A,i)
}:function(e,E,D){var A=e.length;var B=g.isString(e)?e.split(""):e;for(var C=0;C<A;C++){if(C in B&&!E.call(D,B[C],C,e)){return d}}return y};g.array.contains=function(e,i){return g.array.indexOf(e,i)>=0};g.array.isEmpty=function(e){return e.length==0};g.array.clear=function(e){if(!g.isArray(e)){for(var A=e.length-1;A>=0;A--){delete e[A]}}e.length=0};g.array.insertAt=function(e,A,i){g.array.splice(e,i,0,A)};g.array.remove=function(e,B){var A=g.array.indexOf(e,B);var C;if((C=A>=0)){g.array.removeAt(e,A)}return C};g.array.removeAt=function(e,A){return g.array.ARRAY_PROTOTYPE_.splice.call(e,A,1).length==1};g.array.concat=function(e){return g.array.ARRAY_PROTOTYPE_.concat.apply(g.array.ARRAY_PROTOTYPE_,arguments)};g.array.clone=function(A){if(g.isArray(A)){return g.array.concat((A))}else{var C=[];for(var B=0,e=A.length;B<e;B++){C[B]=A[B]}return C}};g.array.toArray=function(e){if(g.isArray(e)){return g.array.concat((e))}return g.array.clone((e))};g.array.splice=function(e,i,A,B){return g.array.ARRAY_PROTOTYPE_.splice.apply(e,g.array.slice(arguments,1))
};g.array.slice=function(i,A,e){if(arguments.length<=2){return g.array.ARRAY_PROTOTYPE_.slice.call(i,A)}else{return g.array.ARRAY_PROTOTYPE_.slice.call(i,A,e)}};g.array.sort=function(e,i){g.array.ARRAY_PROTOTYPE_.sort.call(e,i||g.array.defaultCompare)};g.array.equals=function(B,A,E){if(!g.isArrayLike(B)||!g.isArrayLike(A)||B.length!=A.length){return d}var e=B.length;var D=E||g.array.defaultCompareEquality;for(var C=0;C<e;C++){if(!D(B[C],A[C])){return d}}return y};g.array.compare=function(i,e,A){return g.array.equals(i,e,A)};g.array.defaultCompare=function(i,e){return i>e?1:i<e?-1:0};g.array.defaultCompareEquality=function(i,e){return i===e};g.array.repeat=function(A,C){var B=[];for(var e=0;e<C;e++){B[e]=A}return B};g.provide("goog.dom.classes");g.dom.classes.get=function(e){var i=e.className;return i&&typeof i.split=="function"?i.split(/\s+/):[]};g.dom.classes.add=function(B,C){var A=g.dom.classes.get(B);var i=g.array.slice(arguments,1);var e=g.dom.classes.add_(A,i);B.className=A.join(" ");
return e};g.dom.classes.add_=function(B,e){var C=0;for(var A=0;A<e.length;A++){if(!g.array.contains(B,e[A])){B.push(e[A]);C++}}return C==e.length};g.provide("goog.object");g.object.forEach=function(B,A,i){for(var e in B){A.call(i,B[e],e,B)}};g.object.filter=function(C,B,A){var i={};for(var e in C){if(B.call(A,C[e],e,C)){i[e]=C[e]}}return i};g.object.map=function(C,B,A){var i={};for(var e in C){i[e]=B.call(A,C[e],e,C)}return i};g.object.every=function(B,A,i){for(var e in B){if(!A.call(i,B[e],e,B)){return d}}return y};g.object.getCount=function(i){var A=0;for(var e in i){A++}return A};g.object.contains=function(e,i){return g.object.containsValue(e,i)};g.object.getValues=function(C){var B=[];var A=0;for(var e in C){B[A++]=C[e]}return B};g.object.getKeys=function(C){var B=[];var A=0;for(var e in C){B[A++]=e}return B};g.object.containsValue=function(i,A){for(var e in i){if(i[e]==A){return y}}return d};g.object.isEmpty=function(i){for(var e in i){return d}return y};g.object.clear=function(A){for(var e in A){delete A[e]
}};g.object.remove=function(i,e){var A;if((A=e in i)){delete i[e]}return A};g.object.add=function(i,e,A){if(e in i){throw Error('The object already contains the key "'+e+'"')}g.object.set(i,e,A)};g.object.get=function(A,e,i){if(e in A){return A[e]}return i};g.object.set=function(A,e,i){A[e]=i};g.object.clone=function(A){var i={};for(var e in A){i[e]=A[e]}return i};g.object.PROTOTYPE_FIELDS_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];g.object.extend=function(D,E){var B,C;for(var A=1;A<arguments.length;A++){C=arguments[A];for(B in C){D[B]=C[B]}for(var e=0;e<g.object.PROTOTYPE_FIELDS_.length;e++){B=g.object.PROTOTYPE_FIELDS_[e];if(Object.prototype.hasOwnProperty.call(C,B)){D[B]=C[B]}}}};g.object.create=function(A){var C=arguments.length;if(C==1&&g.isArray(arguments[0])){return g.object.create.apply(k,arguments[0])}if(C%2){throw Error("Uneven number of arguments")}var B={};for(var e=0;e<C;e+=2){B[arguments[e]]=arguments[e+1]
}return B};g.provide("goog.dom.TagName");g.dom.TagName={A:"A",ABBR:"ABBR",ACRONYM:"ACRONYM",ADDRESS:"ADDRESS",APPLET:"APPLET",AREA:"AREA",B:"B",BASE:"BASE",BASEFONT:"BASEFONT",BDO:"BDO",BIG:"BIG",BLOCKQUOTE:"BLOCKQUOTE",BODY:"BODY",BR:"BR",BUTTON:"BUTTON",CANVAS:"CANVAS",CAPTION:"CAPTION",CENTER:"CENTER",CITE:"CITE",CODE:"CODE",COL:"COL",COLGROUP:"COLGROUP",DD:"DD",DEL:"DEL",DFN:"DFN",DIR:"DIR",DIV:"DIV",DL:"DL",DT:"DT",EM:"EM",FIELDSET:"FIELDSET",FONT:"FONT",FORM:"FORM",FRAME:"FRAME",FRAMESET:"FRAMESET",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",HEAD:"HEAD",HR:"HR",HTML:"HTML",I:"I",IFRAME:"IFRAME",IMG:"IMG",INPUT:"INPUT",INS:"INS",ISINDEX:"ISINDEX",KBD:"KBD",LABEL:"LABEL",LEGEND:"LEGEND",LI:"LI",LINK:"LINK",MAP:"MAP",MENU:"MENU",META:"META",NOFRAMES:"NOFRAMES",NOSCRIPT:"NOSCRIPT",OBJECT:"OBJECT",OL:"OL",OPTGROUP:"OPTGROUP",OPTION:"OPTION",P:"P",PARAM:"PARAM",PRE:"PRE",Q:"Q",S:"S",SAMP:"SAMP",SCRIPT:"SCRIPT",SELECT:"SELECT",SMALL:"SMALL",SPAN:"SPAN",STRIKE:"STRIKE",STRONG:"STRONG",STYLE:"STYLE",SUB:"SUB",SUP:"SUP",TABLE:"TABLE",TBODY:"TBODY",TD:"TD",TEXTAREA:"TEXTAREA",TFOOT:"TFOOT",TH:"TH",THEAD:"THEAD",TITLE:"TITLE",TR:"TR",TT:"TT",U:"U",UL:"UL",VAR:"VAR"};
g.provide("goog.math.Size");g.math.Size=function(i,e){this.width=i;this.height=e};g.math.Size.equals=function(i,e){if(i==e){return y}if(!i||!e){return d}return i.width==e.width&&i.height==e.height};g.math.Size.prototype.clone=function(){return new g.math.Size(this.width,this.height)};g.math.Size.prototype.area=function(){return this.width*this.height};g.math.Size.prototype.isEmpty=function(){return !this.area()};g.provide("goog.dom.BrowserFeature");g.dom.BrowserFeature={CAN_ADD_NAME_OR_TYPE_ATTRIBUTES:!g.userAgent.IE||g.userAgent.isVersion("9"),CAN_USE_CHILDREN_ATTRIBUTE:!g.userAgent.GECKO&&!g.userAgent.IE||g.userAgent.IE&&g.userAgent.isVersion("9")||g.userAgent.GECKO&&g.userAgent.isVersion("1.9.1"),CAN_USE_INNER_TEXT:g.userAgent.IE&&!g.userAgent.isVersion("9"),INNER_HTML_NEEDS_SCOPED_ELEMENT:g.userAgent.IE};g.provide("goog.math.Coordinate");g.math.Coordinate=function(i,e){this.x=g.isDef(i)?i:0;this.y=g.isDef(e)?e:0};g.math.Coordinate.prototype.clone=function(){return new g.math.Coordinate(this.x,this.y)
};g.math.Coordinate.equals=function(i,e){if(i==e){return y}if(!i||!e){return d}return i.x==e.x&&i.y==e.y};g.provide("goog.dom");g.provide("goog.dom.DomHelper");g.provide("goog.dom.NodeType");g.dom.ASSUME_QUIRKS_MODE=d;g.dom.ASSUME_STANDARDS_MODE=d;g.dom.COMPAT_MODE_KNOWN_=g.dom.ASSUME_QUIRKS_MODE||g.dom.ASSUME_STANDARDS_MODE;g.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};g.dom.getDomHelper=function(e){return e?new g.dom.DomHelper(g.dom.getOwnerDocument(e)):(g.dom.defaultDomHelper_||(g.dom.defaultDomHelper_=new g.dom.DomHelper()))};g.dom.defaultDomHelper_;g.dom.getDocument=function(){return document};g.dom.getElement=function(e){return g.isString(e)?c.getElementById(e):e};g.dom.$=g.dom.getElement;g.dom.getElementsByTagNameAndClass=function(A,e,i){return g.dom.getElementsByTagNameAndClass_(document,A,e,i)};g.dom.getElementsByClass=function(A,i){var e=i||document;
if(g.dom.canUseQuerySelector_(e)){return e.querySelectorAll("."+A)}else{if(e.getElementsByClassName){return e.getElementsByClassName(A)}}return g.dom.getElementsByTagNameAndClass_(document,"*",A,i)};g.dom.getElementByClass=function(A,i){var e=i||document;var B=k;if(g.dom.canUseQuerySelector_(e)){B=e.querySelector("."+A)}else{B=g.dom.getElementsByClass(A,i)[0]}return B||k};g.dom.canUseQuerySelector_=function(e){return e.querySelectorAll&&e.querySelector&&(!g.userAgent.WEBKIT||g.dom.isCss1CompatMode_(document)||g.userAgent.isVersion("528"))};g.dom.getElementsByTagNameAndClass_=function(I,H,B,K){var J=K||I;var A=(H&&H!="*")?H.toUpperCase():"";if(g.dom.canUseQuerySelector_(J)&&(A||B)){var G=A+(B?"."+B:"");return J.querySelectorAll(G)}if(B&&J.getElementsByClassName){var C=J.getElementsByClassName(B);if(A){var L={};var E=0;for(var D=0,e;e=C[D];D++){if(A==e.nodeName){L[E++]=e}}L.length=E;return L}else{return C}}var C=J.getElementsByTagName(A||"*");if(B){var L={};var E=0;for(var D=0,e;e=C[D];D++){var F=e.className;
if(typeof F.split=="function"&&g.array.contains(F.split(/\s+/),B)){L[E++]=e}}L.length=E;return L}else{return C}};g.dom.$$=g.dom.getElementsByTagNameAndClass;g.dom.setProperties=function(i,e){g.object.forEach(e,function(B,A){if(A=="style"){i.style.cssText=B}else{if(A=="class"){i.className=B}else{if(A=="for"){i.htmlFor=B}else{if(A in g.dom.DIRECT_ATTRIBUTE_MAP_){i.setAttribute(g.dom.DIRECT_ATTRIBUTE_MAP_[A],B)}else{i[A]=B}}}}})};g.dom.DIRECT_ATTRIBUTE_MAP_={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};g.dom.getViewportSize=function(e){return g.dom.getViewportSize_(e||window)};g.dom.getViewportSize_=function(C){var B=C.document;if(g.userAgent.WEBKIT&&!g.userAgent.isVersion("500")&&!g.userAgent.MOBILE){if(typeof C.innerHeight==u+""){C=window}var A=C.innerHeight;var i=C.document.documentElement.scrollHeight;if(C==C.top){if(i<A){A-=15
}}return new g.math.Size(C.innerWidth,A)}var e=g.dom.isCss1CompatMode_(B)?B.documentElement:B.body;return new g.math.Size(e.clientWidth,e.clientHeight)};g.dom.getWindow=function(e){return e?g.dom.getWindow_(e):window};g.dom.getWindow_=function(e){return e.parentWindow||e.defaultView};g.dom.createDom=function(i,e,A){return g.dom.createDom_(document,arguments)};g.dom.createDom_=function(C,i){var B=i[0];var e=i[1];if(!g.dom.BrowserFeature.CAN_ADD_NAME_OR_TYPE_ATTRIBUTES&&e&&(e.name||e.type)){var E=["<",B];if(e.name){E.push(' name="',g.string.htmlEscape(e.name),'"')}if(e.type){E.push(' type="',g.string.htmlEscape(e.type),'"');var D={};g.object.extend(D,e);e=D;delete e.type}E.push(">");B=E.join("")}var A=C.createElement(B);if(e){if(g.isString(e)){A.className=e}else{if(g.isArray(e)){g.dom.classes.add.apply(k,[A].concat(e))}else{g.dom.setProperties(A,e)}}}if(i.length>2){g.dom.append_(C,A,i,2)}return A};g.dom.append_=function(E,D,A,F){function C(i){if(i){D.appendChild(g.isString(i)?E.createTextNode(i):i)
}}for(var B=F;B<A.length;B++){var e=A[B];if(g.isArrayLike(e)&&!g.dom.isNodeLike(e)){g.array.forEach(g.dom.isNodeList(e)?g.array.clone(e):e,C)}else{C(e)}}};g.dom.$dom=g.dom.createDom;g.dom.createElement=function(e){return c.createElement(e)};g.dom.createTextNode=function(e){return c.createTextNode(e)};g.dom.isCss1CompatMode_=function(e){if(g.dom.COMPAT_MODE_KNOWN_){return g.dom.ASSUME_STANDARDS_MODE}return e.compatMode=="CSS1Compat"};g.dom.canHaveChildren_OLD=function(e){if(e.nodeType!=g.dom.NodeType.ELEMENT){return d}switch(e.tagName){case g.dom.TagName.APPLET:case g.dom.TagName.AREA:case g.dom.TagName.BASE:case g.dom.TagName.BR:case g.dom.TagName.COL:case g.dom.TagName.FRAME:case g.dom.TagName.HR:case g.dom.TagName.IMG:case g.dom.TagName.INPUT:case g.dom.TagName.IFRAME:case g.dom.TagName.ISINDEX:case g.dom.TagName.LINK:case g.dom.TagName.NOFRAMES:case g.dom.TagName.NOSCRIPT:case g.dom.TagName.META:case g.dom.TagName.OBJECT:case g.dom.TagName.PARAM:case g.dom.TagName.SCRIPT:case g.dom.TagName.STYLE:return d
}return y};g.dom.TAGS_CANT_HAVE_CHILDREN={APPLET:y,AREA:y,BASE:y,BR:y,COL:y,FRAME:y,HR:y,IMG:y,INPUT:y,IFRAME:y,ISINDEX:y,LINK:y,NOFRAMES:y,NOSCRIPT:y,META:y,OBJECT:y,PARAM:y,SCRIPT:y,STYLE:y};g.dom.canHaveChildren=function(e){return e.nodeType==g.dom.NodeType.ELEMENT&&!g.dom.TAGS_CANT_HAVE_CHILDREN[e.tagName]};g.dom.appendChild=function(e,i){e.appendChild(i)};g.dom.append=function(e,i){g.dom.append_(g.dom.getOwnerDocument(e),e,arguments,1)};g.dom.removeChildren=function(e){var i;while((i=e.firstChild)){e.removeChild(i)}};g.dom.insertSiblingBefore=function(i,e){if(e.parentNode){e.parentNode.insertBefore(i,e)}};g.dom.insertSiblingAfter=function(i,e){if(e.parentNode){e.parentNode.insertBefore(i,e.nextSibling)}};g.dom.removeNode=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):k};g.dom.replaceNode=function(e,A){var i=A.parentNode;if(i){i.replaceChild(e,A)}};g.dom.flattenElement=function(e){var A,i=e.parentNode;if(i&&i.nodeType!=g.dom.NodeType.DOCUMENT_FRAGMENT){if(e.removeNode){return(e.removeNode(d))
}else{while((A=e.firstChild)){i.insertBefore(A,e)}return(g.dom.removeNode(e))}}};g.dom.isNodeLike=function(e){return g.isObject(e)&&e.nodeType>0};g.dom.contains=function(i,e){if(i.contains&&e.nodeType==g.dom.NodeType.ELEMENT){return i==e||i.contains(e)}if(typeof i.compareDocumentPosition!=u+""){return i==e||Boolean(i.compareDocumentPosition(e)&16)}while(e&&i!=e){e=e.parentNode}return e==i};g.dom.compareNodeOrder=function(F,E){if(F==E){return 0}if(F.compareDocumentPosition){return F.compareDocumentPosition(E)&2?1:-1}if("sourceIndex" in F||(F.parentNode&&"sourceIndex" in F.parentNode)){var A=F.nodeType==g.dom.NodeType.ELEMENT;var e=E.nodeType==g.dom.NodeType.ELEMENT;if(A&&e){return F.sourceIndex-E.sourceIndex}else{var B=F.parentNode;var i=E.parentNode;if(B==i){return g.dom.compareSiblingOrder_(F,E)}if(!A&&g.dom.contains(B,E)){return -1*g.dom.compareParentsDescendantNodeIe_(F,E)}if(!e&&g.dom.contains(i,F)){return g.dom.compareParentsDescendantNodeIe_(E,F)}return(A?F.sourceIndex:B.sourceIndex)-(e?E.sourceIndex:i.sourceIndex)
}}var C=g.dom.getOwnerDocument(F);var G,D;G=C.createRange();G.selectNode(F);G.collapse(y);D=C.createRange();D.selectNode(E);D.collapse(y);return G.compareBoundaryPoints(g.global.Range.START_TO_END,D)};g.dom.compareParentsDescendantNodeIe_=function(B,A){var i=B.parentNode;if(i==A){return -1}var e=A;while(e.parentNode!=i){e=e.parentNode}return g.dom.compareSiblingOrder_(e,B)};g.dom.compareSiblingOrder_=function(i,e){var A=e;while((A=A.previousSibling)){if(A==i){return -1}}return 1};g.dom.findCommonAncestor=function(G){var D,F=arguments.length;if(!F){return k}else{if(F==1){return arguments[0]}}var H=[];var e=Infinity;for(D=0;D<F;D++){var I=[];var B=arguments[D];while(B){I.unshift(B);B=B.parentNode}H.push(I);e=Math.min(e,I.length)}var A=k;for(D=0;D<e;D++){var E=H[0][D];for(var C=1;C<F;C++){if(E!=H[C][D]){return A}}A=E}return A};g.dom.getOwnerDocument=function(e){return(e.nodeType==g.dom.NodeType.DOCUMENT?e:e.ownerDocument||e.document)};g.dom.getOuterHtml=function(e){if("outerHTML" in e){return e.outerHTML
}else{var i=g.dom.getOwnerDocument(e);var A=i.createElement("div");A.appendChild(e.cloneNode(y));return A.innerHTML}};g.dom.TAGS_TO_IGNORE_={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1};g.dom.PREDEFINED_TAG_VALUES_={IMG:" ",BR:"\n"};g.dom.getTextContent=function(A){var i;if(g.dom.BrowserFeature.CAN_USE_INNER_TEXT&&("innerText" in A)){i=g.string.canonicalizeNewlines(A.innerText)}else{var e=[];g.dom.getTextContent_(A,e,y);i=e.join("")}i=i.replace(/ \xAD /g," ").replace(/\xAD/g,"");i=i.replace(/\u200B/g,"");if(!g.userAgent.IE){i=i.replace(/ +/g," ")}if(i!=" "){i=i.replace(/^\s*/,"")}return i};g.dom.getRawTextContent=function(i){var e=[];g.dom.getTextContent_(i,e,d);return e.join("")};g.dom.getTextContent_=function(A,i,e){if(A.nodeName in g.dom.TAGS_TO_IGNORE_){}else{if(A.nodeType==g.dom.NodeType.TEXT){if(e){i.push(String(A.nodeValue).replace(/(\r\n|\r|\n)/g,""))}else{i.push(A.nodeValue)}}else{if(A.nodeName in g.dom.PREDEFINED_TAG_VALUES_){i.push(g.dom.PREDEFINED_TAG_VALUES_[A.nodeName])}else{var B=A.firstChild;
while(B){g.dom.getTextContent_(B,i,e);B=B.nextSibling}}}}};g.dom.isNodeList=function(e){if(e&&typeof e.length=="number"){if(g.isObject(e)){return typeof e.item=="function"||typeof e.item=="string"}else{if(g.isFunction(e)){return typeof e.item=="function"}}}return d};g.dom.DomHelper=function(e){this.document_=e||g.global.document||document};g.dom.DomHelper.prototype.getDomHelper=g.dom.getDomHelper;g.dom.DomHelper.prototype.setDocument=function(e){this.document_=e};g.dom.DomHelper.prototype.getDocument=function(){return this.document_};g.dom.DomHelper.prototype.getElement=function(e){if(g.isString(e)){return this.document_.getElementById(e)}else{return e}};g.dom.DomHelper.prototype.$=g.dom.DomHelper.prototype.getElement;g.dom.DomHelper.prototype.getElementsByTagNameAndClass=function(A,e,i){return g.dom.getElementsByTagNameAndClass_(this.document_,A,e,i)};g.dom.DomHelper.prototype.getElementsByClass=function(i,e){var A=e||this.document_;return g.dom.getElementsByClass(i,A)};g.dom.DomHelper.prototype.getElementByClass=function(i,e){var A=e||this.document_;
return g.dom.getElementByClass(i,A)};g.dom.DomHelper.prototype.$$=g.dom.DomHelper.prototype.getElementsByTagNameAndClass;g.dom.DomHelper.prototype.setProperties=g.dom.setProperties;g.dom.DomHelper.prototype.getViewportSize=function(e){return g.dom.getViewportSize(e||this.getWindow())};g.dom.Appendable;g.dom.DomHelper.prototype.createDom=function(i,e,A){return g.dom.createDom_(this.document_,arguments)};g.dom.DomHelper.prototype.$dom=g.dom.DomHelper.prototype.createDom;g.dom.DomHelper.prototype.createElement=function(e){return this.document_.createElement(e)};g.dom.DomHelper.prototype.createTextNode=function(e){return this.document_.createTextNode(e)};g.dom.DomHelper.prototype.getWindow=function(){return g.dom.getWindow_(this.document_)};g.dom.DomHelper.prototype.appendChild=g.dom.appendChild;g.dom.DomHelper.prototype.append=g.dom.append;g.dom.DomHelper.prototype.removeChildren=g.dom.removeChildren;g.dom.DomHelper.prototype.insertSiblingBefore=g.dom.insertSiblingBefore;g.dom.DomHelper.prototype.insertSiblingAfter=g.dom.insertSiblingAfter;
g.dom.DomHelper.prototype.removeNode=g.dom.removeNode;g.dom.DomHelper.prototype.replaceNode=g.dom.replaceNode;g.dom.DomHelper.prototype.flattenElement=g.dom.flattenElement;g.dom.DomHelper.prototype.isNodeLike=g.dom.isNodeLike;g.dom.DomHelper.prototype.contains=g.dom.contains;g.dom.DomHelper.prototype.getOwnerDocument=g.dom.getOwnerDocument;g.dom.DomHelper.prototype.getTextContent=g.dom.getTextContent;g.provide("goog.iter");g.provide("goog.iter.Iterator");g.provide("goog.iter.StopIteration");g.iter.Iterable;if("StopIteration" in g.global){g.iter.StopIteration=g.global.StopIteration}else{g.iter.StopIteration=Error("StopIteration")}g.iter.Iterator=function(){};g.iter.Iterator.prototype.next=function(){throw g.iter.StopIteration};g.iter.Iterator.prototype.__iterator__=function(e){return this};g.iter.toIterator=function(A){if(A instanceof g.iter.Iterator){return A}if(typeof A.__iterator__=="function"){return A.__iterator__(d)}if(g.isArrayLike(A)){var e=0;var B=new g.iter.Iterator;B.next=function(){while(y){if(e>=A.length){throw g.iter.StopIteration
}if(!(e in A)){e++;continue}return A[e++]}};return B}throw Error("Not implemented")};g.iter.forEach=function(B,A,i){if(g.isArrayLike(B)){try{g.array.forEach((B),A,i)}catch(e){if(e!==g.iter.StopIteration){throw e}}}else{B=g.iter.toIterator(B);try{while(y){A.call(i,B.next(),u,B)}}catch(e){if(e!==g.iter.StopIteration){throw e}}}};g.iter.filter=function(A,i,e){A=g.iter.toIterator(A);var B=new g.iter.Iterator;B.next=function(){while(y){var C=A.next();if(i.call(e,C,u,A)){return C}}};return B};g.iter.join=function(i,e){return g.iter.toArray(i).join(e)};g.iter.map=function(A,i,e){A=g.iter.toIterator(A);var B=new g.iter.Iterator;B.next=function(){while(y){var C=A.next();return i.call(e,C,u,A)}};return B};g.iter.some=function(B,A,i){B=g.iter.toIterator(B);try{while(y){if(A.call(i,B.next(),u,B)){return y}}}catch(e){if(e!==g.iter.StopIteration){throw e}}return d};g.iter.every=function(B,A,i){B=g.iter.toIterator(B);try{while(y){if(!A.call(i,B.next(),u,B)){return d}}}catch(e){if(e!==g.iter.StopIteration){throw e
}}return y};g.iter.toArray=function(e){if(g.isArrayLike(e)){return g.array.toArray((e))}e=g.iter.toIterator(e);var i=[];g.iter.forEach(e,function(A){i.push(A)});return i};g.iter.equals=function(i,e){i=g.iter.toIterator(i);e=g.iter.toIterator(e);var B,A;try{while(y){B=A=d;var F=i.next();B=y;var E=e.next();A=y;if(F!=E){return d}}}catch(C){if(C!==g.iter.StopIteration){throw C}else{if(B&&!A){return d}if(!A){try{E=e.next();return d}catch(D){if(D!==g.iter.StopIteration){throw D}return y}}}}return d};g.provide("goog.dom.TagIterator");g.provide("goog.dom.TagWalkType");g.dom.TagWalkType={START_TAG:1,OTHER:0,END_TAG:-1};g.dom.TagIterator=function(C,e,A,B,i){this.reversed=!!e;if(C){this.setPosition(C,B)}this.depth=i!=u?i:this.tagType||0;if(this.reversed){this.depth*=-1}this.constrained=!A};g.inherits(g.dom.TagIterator,g.iter.Iterator);g.dom.TagIterator.prototype.node=k;g.dom.TagIterator.prototype.tagType=g.dom.TagWalkType.OTHER;g.dom.TagIterator.prototype.depth;g.dom.TagIterator.prototype.reversed;
g.dom.TagIterator.prototype.constrained;g.dom.TagIterator.prototype.started_=d;g.dom.TagIterator.prototype.setPosition=function(i,A,e){this.node=i;if(i){if(g.isNumber(A)){this.tagType=A}else{this.tagType=this.node.nodeType!=g.dom.NodeType.ELEMENT?g.dom.TagWalkType.OTHER:this.reversed?g.dom.TagWalkType.END_TAG:g.dom.TagWalkType.START_TAG}}if(g.isNumber(e)){this.depth=e}};g.dom.TagIterator.prototype.copyFrom=function(e){this.node=e.node;this.tagType=e.tagType;this.depth=e.depth;this.reversed=e.reversed;this.constrained=e.constrained};g.dom.TagIterator.prototype.clone=function(){return new g.dom.TagIterator(this.node,this.reversed,!this.constrained,this.tagType,this.depth)};g.dom.TagIterator.prototype.skipTag=function(){var e=this.reversed?g.dom.TagWalkType.END_TAG:g.dom.TagWalkType.START_TAG;if(this.tagType==e){this.tagType=(e*-1);this.depth+=this.tagType*(this.reversed?-1:1)}};g.dom.TagIterator.prototype.restartTag=function(){var e=this.reversed?g.dom.TagWalkType.START_TAG:g.dom.TagWalkType.END_TAG;
if(this.tagType==e){this.tagType=(e*-1);this.depth+=this.tagType*(this.reversed?-1:1)}};g.dom.TagIterator.prototype.next=function(){var A;if(this.started_){if(!this.node||this.constrained&&this.depth==0){throw g.iter.StopIteration}A=this.node;var e=this.reversed?g.dom.TagWalkType.END_TAG:g.dom.TagWalkType.START_TAG;if(this.tagType==e){var B=this.reversed?A.lastChild:A.firstChild;if(B){this.setPosition(B)}else{this.setPosition(A,(e*-1))}}else{var i=this.reversed?A.previousSibling:A.nextSibling;if(i&&A.parentNode==i.parentNode){this.setPosition(i)}else{this.setPosition(A.parentNode,(e*-1))}}this.depth+=this.tagType*(this.reversed?-1:1)}else{this.started_=y}A=this.node;if(!this.node){throw g.iter.StopIteration}return A};g.dom.TagIterator.prototype.isStarted=function(){return this.started_};g.dom.TagIterator.prototype.isStartTag=function(){return this.tagType==g.dom.TagWalkType.START_TAG};g.dom.TagIterator.prototype.isEndTag=function(){return this.tagType==g.dom.TagWalkType.END_TAG};g.dom.TagIterator.prototype.equals=function(e){return e.node==this.node&&(!this.node||e.tagType==this.tagType)
};g.dom.TagIterator.prototype.splice=function(C){var B=this.node;this.restartTag();this.reversed=!this.reversed;g.dom.TagIterator.prototype.next.call(this);this.reversed=!this.reversed;var e=g.isArrayLike(arguments[0])?arguments[0]:arguments;for(var A=e.length-1;A>=0;A--){g.dom.insertSiblingAfter(e[A],B)}g.dom.removeNode(B)};g.provide("goog.structs");g.structs.getCount=function(e){if(typeof e.getCount=="function"){return e.getCount()}if(g.isArrayLike(e)||g.isString(e)){return e.length}return g.object.getCount(e)};g.structs.getValues=function(A){if(typeof A.getValues=="function"){return A.getValues()}if(g.isString(A)){return A.split("")}if(g.isArrayLike(A)){var C=[];var e=A.length;for(var B=0;B<e;B++){C.push(A[B])}return C}return g.object.getValues(A)};g.structs.getKeys=function(A){if(typeof A.getKeys=="function"){return A.getKeys()}if(typeof A.getValues=="function"){return u}if(g.isArrayLike(A)||g.isString(A)){var C=[];var e=A.length;for(var B=0;B<e;B++){C.push(B)}return C}return g.object.getKeys(A)
};g.structs.contains=function(e,i){if(typeof e.contains=="function"){return e.contains(i)}if(typeof e.containsValue=="function"){return e.containsValue(i)}if(g.isArrayLike(e)||g.isString(e)){return g.array.contains((e),i)}return g.object.containsValue(e,i)};g.structs.isEmpty=function(e){if(typeof e.isEmpty=="function"){return e.isEmpty()}if(g.isArrayLike(e)||g.isString(e)){return g.array.isEmpty((e))}return g.object.isEmpty(e)};g.structs.clear=function(e){if(typeof e.clear=="function"){e.clear()}else{if(g.isArrayLike(e)){g.array.clear((e))}else{g.object.clear(e)}}};g.structs.forEach=function(B,F,E){if(typeof B.forEach=="function"){B.forEach(F,E)}else{if(g.isArrayLike(B)||g.isString(B)){g.array.forEach((B),F,E)}else{var D=g.structs.getKeys(B);var A=g.structs.getValues(B);var e=A.length;for(var C=0;C<e;C++){F.call(E,A[C],D&&D[C],B)}}}};g.structs.filter=function(B,F,E){if(typeof B.filter=="function"){return B.filter(F,E)}if(g.isArrayLike(B)||g.isString(B)){return g.array.filter((B),F,E)}var G;
var D=g.structs.getKeys(B);var A=g.structs.getValues(B);var e=A.length;if(D){G={};for(var C=0;C<e;C++){if(F.call(E,A[C],D[C],B)){G[D[C]]=A[C]}}}else{G=[];for(var C=0;C<e;C++){if(F.call(E,A[C],u,B)){G.push(A[C])}}}return G};g.structs.map=function(B,F,E){if(typeof B.map=="function"){return B.map(F,E)}if(g.isArrayLike(B)||g.isString(B)){return g.array.map((B),F,E)}var G;var D=g.structs.getKeys(B);var A=g.structs.getValues(B);var e=A.length;if(D){G={};for(var C=0;C<e;C++){G[D[C]]=F.call(E,A[C],D[C],B)}}else{G=[];for(var C=0;C<e;C++){G[C]=F.call(E,A[C],u,B)}}return G};g.structs.some=function(B,F,E){if(typeof B.some=="function"){return B.some(F,E)}if(g.isArrayLike(B)||g.isString(B)){return g.array.some((B),F,E)}var D=g.structs.getKeys(B);var A=g.structs.getValues(B);var e=A.length;for(var C=0;C<e;C++){if(F.call(E,A[C],D&&D[C],B)){return y}}return d};g.structs.every=function(B,F,E){if(typeof B.every=="function"){return B.every(F,E)}if(g.isArrayLike(B)||g.isString(B)){return g.array.every((B),F,E)
}var D=g.structs.getKeys(B);var A=g.structs.getValues(B);var e=A.length;for(var C=0;C<e;C++){if(!F.call(E,A[C],D&&D[C],B)){return d}}return y};g.provide("goog.structs.Map");g.structs.Map=function(A,B){this.map_={};this.keys_=[];var C=arguments.length;if(C>1){if(C%2){throw Error("Uneven number of arguments")}for(var e=0;e<C;e+=2){this.set(arguments[e],arguments[e+1])}}else{if(A){this.addAll((A))}}};g.structs.Map.prototype.count_=0;g.structs.Map.prototype.version_=0;g.structs.Map.prototype.getCount=function(){return this.count_};g.structs.Map.prototype.getValues=function(){this.cleanupKeysArray_();var B=[];for(var A=0;A<this.keys_.length;A++){var e=this.keys_[A];B.push(this.map_[e])}return B};g.structs.Map.prototype.getKeys=function(){this.cleanupKeysArray_();return(this.keys_.concat())};g.structs.Map.prototype.containsKey=function(e){return g.structs.Map.hasKey_(this.map_,e)};g.structs.Map.prototype.containsValue=function(B){for(var A=0;A<this.keys_.length;A++){var e=this.keys_[A];if(g.structs.Map.hasKey_(this.map_,e)&&this.map_[e]==B){return y
}}return d};g.structs.Map.prototype.equals=function(B,e){if(this===B){return y}if(this.count_!=B.getCount()){return d}var A=e||g.structs.Map.defaultEquals;this.cleanupKeysArray_();for(var D,C=0;D=this.keys_[C];C++){if(!A(this.get(D),B.get(D))){return d}}return y};g.structs.Map.defaultEquals=function(i,e){return i===e};g.structs.Map.prototype.isEmpty=function(){return this.count_==0};g.structs.Map.prototype.clear=function(){this.map_={};this.keys_.length=0;this.count_=0;this.version_=0};g.structs.Map.prototype.remove=function(e){if(g.structs.Map.hasKey_(this.map_,e)){delete this.map_[e];this.count_--;this.version_++;if(this.keys_.length>2*this.count_){this.cleanupKeysArray_()}return y}return d};g.structs.Map.prototype.cleanupKeysArray_=function(){if(this.count_!=this.keys_.length){var A=0;var i=0;while(A<this.keys_.length){var B=this.keys_[A];if(g.structs.Map.hasKey_(this.map_,B)){this.keys_[i++]=B}A++}this.keys_.length=i}if(this.count_!=this.keys_.length){var e={};var A=0;var i=0;while(A<this.keys_.length){var B=this.keys_[A];
if(!(g.structs.Map.hasKey_(e,B))){this.keys_[i++]=B;e[B]=1}A++}this.keys_.length=i}};g.structs.Map.prototype.get=function(e,i){if(g.structs.Map.hasKey_(this.map_,e)){return this.map_[e]}return i};g.structs.Map.prototype.set=function(e,i){if(!(g.structs.Map.hasKey_(this.map_,e))){this.count_++;this.keys_.push(e);this.version_++}this.map_[e]=i};g.structs.Map.prototype.addAll=function(C){var B,e;if(C instanceof g.structs.Map){B=C.getKeys();e=C.getValues()}else{B=g.object.getKeys(C);e=g.object.getValues(C)}for(var A=0;A<B.length;A++){this.set(B[A],e[A])}};g.structs.Map.prototype.clone=function(){return new g.structs.Map(this)};g.structs.Map.prototype.toObject=function(){this.cleanupKeysArray_();var B={};for(var A=0;A<this.keys_.length;A++){var e=this.keys_[A];B[e]=this.map_[e]}return B};g.structs.Map.prototype.__iterator__=function(F){this.cleanupKeysArray_();var A=0;var B=this.keys_;var C=this.map_;var e=this.version_;var E=this;var D=new g.iter.Iterator;D.next=function(){while(y){if(e!=E.version_){throw Error("The map has changed since the iterator was created")
}if(A>=B.length){throw g.iter.StopIteration}var i=B[A++];return F?i:C[i]}};return D};g.structs.Map.hasKey_=function(i,e){return Object.prototype.hasOwnProperty.call(i,e)};g.provide("goog.structs.Set");g.structs.Set=function(e){this.map_=new g.structs.Map;if(e){this.addAll(e)}};g.structs.Set.getKey_=function(i){var e=typeof i;if(e=="object"&&i||e=="function"){return"o"+g.getUid((i))}else{return e.substr(0,1)+i}};g.structs.Set.prototype.getCount=function(){return this.map_.getCount()};g.structs.Set.prototype.add=function(e){this.map_.set(g.structs.Set.getKey_(e),e)};g.structs.Set.prototype.addAll=function(B){var A=g.structs.getValues(B);var e=A.length;for(var C=0;C<e;C++){this.add(A[C])}};g.structs.Set.prototype.remove=function(e){return this.map_.remove(g.structs.Set.getKey_(e))};g.structs.Set.prototype.clear=function(){this.map_.clear()};g.structs.Set.prototype.isEmpty=function(){return this.map_.isEmpty()};g.structs.Set.prototype.contains=function(e){return this.map_.containsKey(g.structs.Set.getKey_(e))
};g.structs.Set.prototype.containsAll=function(e){return g.structs.every(e,this.contains,this)};g.structs.Set.prototype.getValues=function(){return this.map_.getValues()};g.structs.Set.prototype.clone=function(){return new g.structs.Set(this)};g.structs.Set.prototype.equals=function(e){return this.getCount()==g.structs.getCount(e)&&this.isSubsetOf(e)};g.structs.Set.prototype.isSubsetOf=function(e){var i=g.structs.getCount(e);if(this.getCount()>i){return d}if(!(e instanceof g.structs.Set)&&i>5){e=new g.structs.Set(e)}return g.structs.every(this,function(A){return g.structs.contains(e,A)})};g.structs.Set.prototype.__iterator__=function(e){return this.map_.__iterator__(d)};g.provide("goog.disposable.IDisposable");g.disposable.IDisposable=function(){};g.disposable.IDisposable.prototype.dispose;g.disposable.IDisposable.prototype.isDisposed;g.provide("goog.Disposable");g.provide("goog.dispose");g.Disposable=function(){if(g.Disposable.ENABLE_MONITORING){g.Disposable.instances_[g.getUid(this)]=this
}};g.Disposable.ENABLE_MONITORING=d;g.Disposable.instances_={};g.Disposable.prototype.disposed_=d;g.Disposable.prototype.isDisposed=function(){return this.disposed_};g.Disposable.prototype.getDisposed=g.Disposable.prototype.isDisposed;g.Disposable.prototype.dispose=function(){if(!this.disposed_){this.disposed_=y;this.disposeInternal();if(g.Disposable.ENABLE_MONITORING){var e=g.getUid(this);if(!g.Disposable.instances_.hasOwnProperty(e)){throw Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call")}delete g.Disposable.instances_[e]}}};g.Disposable.prototype.disposeInternal=function(){};g.dispose=function(e){if(e&&typeof e.dispose=="function"){e.dispose()}};g.provide("goog.dom.SavedRange");g.dom.SavedRange=function(){g.Disposable.call(this)};g.inherits(g.dom.SavedRange,g.Disposable);g.dom.SavedRange.prototype.restore=function(i){var e=this.restoreInternal();if(!i){this.dispose()}return e};g.dom.SavedRange.prototype.restoreInternal=g.abstractMethod;
g.provide("goog.dom.SavedCaretRange");g.dom.SavedCaretRange=function(e){g.dom.SavedRange.call(this);this.startCaretId_=g.string.createUniqueString();this.endCaretId_=g.string.createUniqueString();this.dom_=g.dom.getDomHelper(e.getDocument());e.surroundWithNodes(this.createCaret_(y),this.createCaret_(d));this.removeIncidentalTextNode_()};g.inherits(g.dom.SavedCaretRange,g.dom.SavedRange);g.dom.SavedCaretRange.prototype.getCaret=function(e){return this.dom_.getElement(e?this.startCaretId_:this.endCaretId_)};g.dom.SavedCaretRange.prototype.removeIncidentalTextNode_=function(){var i=this.getCaret(y);this.removeIfEmptyText_(i.previousSibling);this.removeIfEmptyText_(i.nextSibling);var e=this.getCaret(d);this.removeIfEmptyText_(e.previousSibling);this.removeIfEmptyText_(e.nextSibling)};g.dom.SavedCaretRange.prototype.removeIfEmptyText_=function(e){if(e&&e.nodeType===g.dom.NodeType.TEXT&&!e.nodeValue){g.dom.removeNode(e)}};g.dom.SavedCaretRange.prototype.removeCarets=function(e){g.dom.removeNode(this.getCaret(y));
g.dom.removeNode(this.getCaret(d));return e};g.dom.SavedCaretRange.prototype.restoreInternal=function(){var B=k;var E=this.getCaret(y);var A=this.getCaret(d);if(E&&A){var D=E.parentNode;var i=g.array.indexOf(D.childNodes,E);var e=A.parentNode;var C=g.array.indexOf(e.childNodes,A);B=g.dom.Range.createFromNodes(D,i+1,e,C);B.select()}return B};g.dom.SavedCaretRange.prototype.disposeInternal=function(){this.removeCarets();this.dom_=k};g.dom.SavedCaretRange.prototype.createCaret_=function(e){return this.dom_.createDom(g.dom.TagName.SPAN,{id:e?this.startCaretId_:this.endCaretId_})};g.dom.SavedCaretRange.CARET_REGEX=/<span\s+id="?goog_\d+"?><\/span>/ig;g.provide("goog.dom.AbstractRange");g.provide("goog.dom.RangeIterator");g.provide("goog.dom.RangeType");g.dom.RangeType={TEXT:"text",CONTROL:"control",MULTI:"mutli"};g.dom.AbstractRange=function(){};g.dom.AbstractRange.getBrowserSelectionForWindow=function(D){if(D.getSelection){return D.getSelection()}else{var C=D.document;var A=C.selection;if(A){try{var i=A.createRange();
if(i.parentElement){if(i.parentElement().document!=C){return k}}else{if(!i.length||i.item(0).document!=C){return k}}}catch(B){return k}return A}return k}};g.dom.AbstractRange.isNativeControlRange=function(e){return !!e&&!!e.addElement};g.dom.AbstractRange.prototype.clone=g.abstractMethod;g.dom.AbstractRange.prototype.getType=g.abstractMethod;g.dom.AbstractRange.prototype.getBrowserRangeObject=g.abstractMethod;g.dom.AbstractRange.prototype.setBrowserRangeObject=function(e){return d};g.dom.AbstractRange.prototype.getTextRangeCount=g.abstractMethod;g.dom.AbstractRange.prototype.getTextRange=g.abstractMethod;g.dom.AbstractRange.prototype.getTextRanges=function(){var A=[];for(var B=0,e=this.getTextRangeCount();B<e;B++){A.push(this.getTextRange(B))}return A};g.dom.AbstractRange.prototype.getContainer=g.abstractMethod;g.dom.AbstractRange.prototype.getStartNode=g.abstractMethod;g.dom.AbstractRange.prototype.getStartOffset=g.abstractMethod;g.dom.AbstractRange.prototype.getEndNode=g.abstractMethod;
g.dom.AbstractRange.prototype.getEndOffset=g.abstractMethod;g.dom.AbstractRange.prototype.getAnchorNode=function(){return this.isReversed()?this.getEndNode():this.getStartNode()};g.dom.AbstractRange.prototype.getAnchorOffset=function(){return this.isReversed()?this.getEndOffset():this.getStartOffset()};g.dom.AbstractRange.prototype.getFocusNode=function(){return this.isReversed()?this.getStartNode():this.getEndNode()};g.dom.AbstractRange.prototype.getFocusOffset=function(){return this.isReversed()?this.getStartOffset():this.getEndOffset()};g.dom.AbstractRange.prototype.isReversed=function(){return d};g.dom.AbstractRange.prototype.getDocument=function(){return g.dom.getOwnerDocument(g.userAgent.IE?this.getContainer():this.getStartNode())};g.dom.AbstractRange.prototype.getWindow=function(){return g.dom.getWindow(this.getDocument())};g.dom.AbstractRange.prototype.containsRange=g.abstractMethod;g.dom.AbstractRange.prototype.containsNode=function(e,i){return this.containsRange(g.dom.Range.createFromNodeContents(e),i)
};g.dom.AbstractRange.prototype.isRangeInDocument=g.abstractMethod;g.dom.AbstractRange.prototype.isCollapsed=g.abstractMethod;g.dom.AbstractRange.prototype.getText=g.abstractMethod;g.dom.AbstractRange.prototype.getHtmlFragment=g.abstractMethod;g.dom.AbstractRange.prototype.getValidHtml=g.abstractMethod;g.dom.AbstractRange.prototype.getPastableHtml=g.abstractMethod;g.dom.AbstractRange.prototype.__iterator__=g.abstractMethod;g.dom.AbstractRange.prototype.select=g.abstractMethod;g.dom.AbstractRange.prototype.removeContents=g.abstractMethod;g.dom.AbstractRange.prototype.insertNode=g.abstractMethod;g.dom.AbstractRange.prototype.surroundWithNodes=g.abstractMethod;g.dom.AbstractRange.prototype.saveUsingDom=g.abstractMethod;g.dom.AbstractRange.prototype.saveUsingCarets=function(){return(this.getStartNode()&&this.getEndNode())?new g.dom.SavedCaretRange(this):k};g.dom.AbstractRange.prototype.collapse=g.abstractMethod;g.dom.RangeIterator=function(e,i){g.dom.TagIterator.call(this,e,i,y)};g.inherits(g.dom.RangeIterator,g.dom.TagIterator);
g.dom.RangeIterator.prototype.getStartTextOffset=g.abstractMethod;g.dom.RangeIterator.prototype.getEndTextOffset=g.abstractMethod;g.dom.RangeIterator.prototype.getStartNode=g.abstractMethod;g.dom.RangeIterator.prototype.getEndNode=g.abstractMethod;g.dom.RangeIterator.prototype.isLast=g.abstractMethod;g.provide("goog.dom.AbstractMultiRange");g.dom.AbstractMultiRange=function(){};g.inherits(g.dom.AbstractMultiRange,g.dom.AbstractRange);g.dom.AbstractMultiRange.prototype.containsRange=function(C,B){var e=this.getTextRanges();var A=C.getTextRanges();var i=B?g.array.some:g.array.every;return i(A,function(D){return g.array.some(e,function(E){return E.containsRange(D,B)})})};g.dom.AbstractMultiRange.prototype.insertNode=function(e,i){if(i){g.dom.insertSiblingBefore(e,this.getStartNode())}else{g.dom.insertSiblingAfter(e,this.getEndNode())}return e};g.dom.AbstractMultiRange.prototype.surroundWithNodes=function(i,e){this.insertNode(i,y);this.insertNode(e,d)};g.provide("goog.dom.TextRangeIterator");
g.dom.TextRangeIterator=function(A,E,B,F,D){var G;if(A){this.startNode_=A;this.startOffset_=E;this.endNode_=B;this.endOffset_=F;if(A.nodeType==g.dom.NodeType.ELEMENT&&A.tagName!=g.dom.TagName.BR){var i=A.childNodes;var H=i[E];if(H){this.startNode_=H;this.startOffset_=0}else{if(i.length){this.startNode_=(g.array.peek(i))}G=y}}if(B.nodeType==g.dom.NodeType.ELEMENT){this.endNode_=B.childNodes[F];if(this.endNode_){this.endOffset_=0}else{this.endNode_=B}}}g.dom.RangeIterator.call(this,D?this.endNode_:this.startNode_,D);if(G){try{this.next()}catch(C){if(C!=g.iter.StopIteration){throw C}}}};g.inherits(g.dom.TextRangeIterator,g.dom.RangeIterator);g.dom.TextRangeIterator.prototype.startNode_=k;g.dom.TextRangeIterator.prototype.endNode_=k;g.dom.TextRangeIterator.prototype.startOffset_=0;g.dom.TextRangeIterator.prototype.endOffset_=0;g.dom.TextRangeIterator.prototype.getStartTextOffset=function(){return this.node.nodeType!=g.dom.NodeType.TEXT?-1:this.node==this.startNode_?this.startOffset_:0};g.dom.TextRangeIterator.prototype.getEndTextOffset=function(){return this.node.nodeType!=g.dom.NodeType.TEXT?-1:this.node==this.endNode_?this.endOffset_:this.node.nodeValue.length
};g.dom.TextRangeIterator.prototype.getStartNode=function(){return this.startNode_};g.dom.TextRangeIterator.prototype.setStartNode=function(e){if(!this.isStarted()){this.setPosition(e)}this.startNode_=e;this.startOffset_=0};g.dom.TextRangeIterator.prototype.getEndNode=function(){return this.endNode_};g.dom.TextRangeIterator.prototype.setEndNode=function(e){this.endNode_=e;this.endOffset_=0};g.dom.TextRangeIterator.prototype.isLast=function(){return this.isStarted()&&this.node==this.endNode_&&(!this.endOffset_||!this.isStartTag())};g.dom.TextRangeIterator.prototype.next=function(){if(this.isLast()){throw g.iter.StopIteration}return g.dom.TextRangeIterator.superClass_.next.call(this)};g.dom.TextRangeIterator.prototype.skipTag=function(){g.dom.TextRangeIterator.superClass_.skipTag.apply(this);if(g.dom.contains(this.node,this.endNode_)){throw g.iter.StopIteration}};g.dom.TextRangeIterator.prototype.copyFrom=function(e){this.startNode_=e.startNode_;this.endNode_=e.endNode_;this.startOffset_=e.startOffset_;
this.endOffset_=e.endOffset_;this.isReversed_=e.isReversed_;g.dom.TextRangeIterator.superClass_.copyFrom.call(this,e)};g.dom.TextRangeIterator.prototype.clone=function(){var e=new g.dom.TextRangeIterator(this.startNode_,this.startOffset_,this.endNode_,this.endOffset_,this.isReversed_);e.copyFrom(this);return e};g.provide("goog.userAgent.jscript");g.userAgent.jscript.ASSUME_NO_JSCRIPT=d;g.userAgent.jscript.init_=function(){var e="ScriptEngine" in g.global;g.userAgent.jscript.DETECTED_HAS_JSCRIPT_=e&&g.global.ScriptEngine()=="JScript";g.userAgent.jscript.DETECTED_VERSION_=g.userAgent.jscript.DETECTED_HAS_JSCRIPT_?(g.global.ScriptEngineMajorVersion()+"."+g.global.ScriptEngineMinorVersion()+"."+g.global.ScriptEngineBuildVersion()):"0"};if(!g.userAgent.jscript.ASSUME_NO_JSCRIPT){g.userAgent.jscript.init_()}g.userAgent.jscript.HAS_JSCRIPT=g.userAgent.jscript.ASSUME_NO_JSCRIPT?d:g.userAgent.jscript.DETECTED_HAS_JSCRIPT_;g.userAgent.jscript.VERSION=g.userAgent.jscript.ASSUME_NO_JSCRIPT?"0":g.userAgent.jscript.DETECTED_VERSION_;
g.userAgent.jscript.isVersion=function(e){return g.string.compareVersions(g.userAgent.jscript.VERSION,e)>=0};g.provide("goog.string.StringBuffer");g.string.StringBuffer=function(e,i){this.buffer_=g.userAgent.jscript.HAS_JSCRIPT?[]:"";if(e!=k){this.append.apply(this,arguments)}};g.string.StringBuffer.prototype.set=function(e){this.clear();this.append(e)};if(g.userAgent.jscript.HAS_JSCRIPT){g.string.StringBuffer.prototype.bufferLength_=0;g.string.StringBuffer.prototype.append=function(i,e,A){if(e==k){this.buffer_[this.bufferLength_++]=i}else{this.buffer_.push.apply((this.buffer_),arguments);this.bufferLength_=this.buffer_.length}return this}}else{g.string.StringBuffer.prototype.append=function(A,e,C){this.buffer_+=A;if(e!=k){for(var B=1;B<arguments.length;B++){this.buffer_+=arguments[B]}}return this}}g.string.StringBuffer.prototype.clear=function(){if(g.userAgent.jscript.HAS_JSCRIPT){this.buffer_.length=0;this.bufferLength_=0}else{this.buffer_=""}};g.string.StringBuffer.prototype.getLength=function(){return this.toString().length
};g.string.StringBuffer.prototype.toString=function(){if(g.userAgent.jscript.HAS_JSCRIPT){var e=this.buffer_.join("");this.clear();if(e){this.append(e)}return e}else{return(this.buffer_)}};g.provide("goog.dom.RangeEndpoint");g.dom.RangeEndpoint={START:1,END:0};g.provide("goog.dom.browserrange.AbstractRange");g.dom.browserrange.AbstractRange=function(){};g.dom.browserrange.AbstractRange.prototype.clone=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.getBrowserRange=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.getContainer=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.getStartNode=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.getStartOffset=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.getEndNode=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.getEndOffset=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.compareBrowserRangeEndpoints=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.containsRange=function(F,D){var B=D&&!F.isCollapsed();
var A=F.getBrowserRange();var E=g.dom.RangeEndpoint.START,i=g.dom.RangeEndpoint.END;try{if(B){return this.compareBrowserRangeEndpoints(A,i,E)>=0&&this.compareBrowserRangeEndpoints(A,E,i)<=0}else{return this.compareBrowserRangeEndpoints(A,i,i)>=0&&this.compareBrowserRangeEndpoints(A,E,E)<=0}}catch(C){if(!g.userAgent.IE){throw C}return d}};g.dom.browserrange.AbstractRange.prototype.containsNode=function(e,i){return this.containsRange(g.dom.browserrange.createRangeFromNodeContents(e),i)};g.dom.browserrange.AbstractRange.prototype.isCollapsed=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.getText=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.getHtmlFragment=function(){var e=new g.string.StringBuffer();g.iter.forEach(this,function(C,E,B){if(C.nodeType==g.dom.NodeType.TEXT){e.append(g.string.htmlEscape(C.nodeValue.substring(B.getStartTextOffset(),B.getEndTextOffset())))}else{if(C.nodeType==g.dom.NodeType.ELEMENT){if(B.isEndTag()){if(g.dom.canHaveChildren(C)){e.append("</"+C.tagName+">")
}}else{var D=C.cloneNode(d);var A=g.dom.getOuterHtml(D);if(g.userAgent.IE&&C.tagName==g.dom.TagName.LI){e.append(A)}else{var i=A.lastIndexOf("<");e.append(i?A.substr(0,i):A)}}}}},this);return e.toString()};g.dom.browserrange.AbstractRange.prototype.getValidHtml=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.__iterator__=function(e){return new g.dom.TextRangeIterator(this.getStartNode(),this.getStartOffset(),this.getEndNode(),this.getEndOffset())};g.dom.browserrange.AbstractRange.prototype.select=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.removeContents=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.surroundContents=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.insertNode=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.surroundWithNodes=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.collapse=g.abstractMethod;g.provide("goog.dom.browserrange.W3cRange");g.dom.browserrange.W3cRange=function(e){this.range_=e};g.inherits(g.dom.browserrange.W3cRange,g.dom.browserrange.AbstractRange);
g.dom.browserrange.W3cRange.getBrowserRangeForNode=function(B){var D=g.dom.getOwnerDocument(B).createRange();if(B.nodeType==g.dom.NodeType.TEXT){D.setStart(B,0);D.setEnd(B,B.length)}else{if(!g.dom.browserrange.canContainRangeEndpoint(B)){var A=B.parentNode;var i=g.array.indexOf(A.childNodes,B);D.setStart(A,i);D.setEnd(A,i+1)}else{var C,e=B;while((C=e.firstChild)&&g.dom.browserrange.canContainRangeEndpoint(C)){e=C}D.setStart(e,0);e=B;while((C=e.lastChild)&&g.dom.browserrange.canContainRangeEndpoint(C)){e=C}D.setEnd(e,e.nodeType==g.dom.NodeType.ELEMENT?e.childNodes.length:e.length)}}return D};g.dom.browserrange.W3cRange.getBrowserRangeForNodes=function(B,i,e,A){var C=g.dom.getOwnerDocument(B).createRange();C.setStart(B,i);C.setEnd(e,A);return C};g.dom.browserrange.W3cRange.createFromNodeContents=function(e){return new g.dom.browserrange.W3cRange(g.dom.browserrange.W3cRange.getBrowserRangeForNode(e))};g.dom.browserrange.W3cRange.createFromNodes=function(B,i,e,A){return new g.dom.browserrange.W3cRange(g.dom.browserrange.W3cRange.getBrowserRangeForNodes(B,i,e,A))
};g.dom.browserrange.W3cRange.prototype.clone=function(){return new this.constructor(this.range_.cloneRange())};g.dom.browserrange.W3cRange.prototype.getBrowserRange=function(){return this.range_};g.dom.browserrange.W3cRange.prototype.getContainer=function(){return this.range_.commonAncestorContainer};g.dom.browserrange.W3cRange.prototype.getStartNode=function(){return this.range_.startContainer};g.dom.browserrange.W3cRange.prototype.getStartOffset=function(){return this.range_.startOffset};g.dom.browserrange.W3cRange.prototype.getEndNode=function(){return this.range_.endContainer};g.dom.browserrange.W3cRange.prototype.getEndOffset=function(){return this.range_.endOffset};g.dom.browserrange.W3cRange.prototype.compareBrowserRangeEndpoints=function(i,A,e){return this.range_.compareBoundaryPoints(e==g.dom.RangeEndpoint.START?(A==g.dom.RangeEndpoint.START?g.global.Range.START_TO_START:g.global.Range.START_TO_END):(A==g.dom.RangeEndpoint.START?g.global.Range.END_TO_START:g.global.Range.END_TO_END),(i))
};g.dom.browserrange.W3cRange.prototype.isCollapsed=function(){return this.range_.collapsed};g.dom.browserrange.W3cRange.prototype.getText=function(){return this.range_.toString()};g.dom.browserrange.W3cRange.prototype.getValidHtml=function(){var B=g.dom.getDomHelper(this.range_.startContainer).createDom("div");B.appendChild(this.range_.cloneContents());var e=B.innerHTML;if(g.string.startsWith(e,"<")||!this.isCollapsed()&&!g.string.contains(e,"<")){return e}var i=this.getContainer();i=i.nodeType==g.dom.NodeType.ELEMENT?i:i.parentNode;var A=g.dom.getOuterHtml((i.cloneNode(d)));return A.replace(">",">"+e)};g.dom.browserrange.W3cRange.prototype.select=function(e){var i=g.dom.getWindow(g.dom.getOwnerDocument(this.getStartNode()));this.selectInternal(i.getSelection(),e)};g.dom.browserrange.W3cRange.prototype.selectInternal=function(i,e){i.removeAllRanges();i.addRange(this.range_)};g.dom.browserrange.W3cRange.prototype.removeContents=function(){var e=this.range_;e.extractContents();if(e.startContainer.hasChildNodes()){var A=e.startContainer.childNodes[e.startOffset];
if(A){var i=A.previousSibling;if(g.dom.getRawTextContent(A)==""){g.dom.removeNode(A)}if(i&&g.dom.getRawTextContent(i)==""){g.dom.removeNode(i)}}}};g.dom.browserrange.W3cRange.prototype.surroundContents=function(e){this.range_.surroundContents(e);return e};g.dom.browserrange.W3cRange.prototype.insertNode=function(i,A){var e=this.range_.cloneRange();e.collapse(A);e.insertNode(i);e.detach();return i};g.dom.browserrange.W3cRange.prototype.surroundWithNodes=function(i,B){var C=g.dom.getWindow(g.dom.getOwnerDocument(this.getStartNode()));var e=g.dom.Range.createFromWindow(C);if(e){var D=e.getStartNode();var H=e.getEndNode();var I=e.getStartOffset();var A=e.getEndOffset()}var F=this.range_.cloneRange();var E=this.range_.cloneRange();F.collapse(d);E.collapse(y);F.insertNode(B);E.insertNode(i);F.detach();E.detach();if(e){var G=function(J){return J==i||J==B};if(D.nodeType==g.dom.NodeType.TEXT){while(I>D.length){I-=D.length;do{D=D.nextSibling}while(G(D))}}if(H.nodeType==g.dom.NodeType.TEXT){while(A>H.length){A-=H.length;
do{H=H.nextSibling}while(G(H))}}g.dom.Range.createFromNodes(D,(I),H,(A)).select()}};g.dom.browserrange.W3cRange.prototype.collapse=function(e){this.range_.collapse(e)};g.provide("goog.dom.browserrange.WebKitRange");g.dom.browserrange.WebKitRange=function(e){g.dom.browserrange.W3cRange.call(this,e)};g.inherits(g.dom.browserrange.WebKitRange,g.dom.browserrange.W3cRange);g.dom.browserrange.WebKitRange.createFromNodeContents=function(e){return new g.dom.browserrange.WebKitRange(g.dom.browserrange.W3cRange.getBrowserRangeForNode(e))};g.dom.browserrange.WebKitRange.createFromNodes=function(B,i,e,A){return new g.dom.browserrange.WebKitRange(g.dom.browserrange.W3cRange.getBrowserRangeForNodes(B,i,e,A))};g.dom.browserrange.WebKitRange.prototype.compareBrowserRangeEndpoints=function(i,A,e){if(g.userAgent.isVersion("528")){return(g.dom.browserrange.WebKitRange.superClass_.compareBrowserRangeEndpoints.call(this,i,A,e))}return this.range_.compareBoundaryPoints(e==g.dom.RangeEndpoint.START?(A==g.dom.RangeEndpoint.START?g.global.Range.START_TO_START:g.global.Range.END_TO_START):(A==g.dom.RangeEndpoint.START?g.global.Range.START_TO_END:g.global.Range.END_TO_END),(i))
};g.dom.browserrange.WebKitRange.prototype.selectInternal=function(e,i){e.removeAllRanges();if(i){e.setBaseAndExtent(this.getEndNode(),this.getEndOffset(),this.getStartNode(),this.getStartOffset())}else{e.setBaseAndExtent(this.getStartNode(),this.getStartOffset(),this.getEndNode(),this.getEndOffset())}};g.provide("goog.dom.NodeIterator");g.dom.NodeIterator=function(B,e,A,i){g.dom.TagIterator.call(this,B,e,A,k,i)};g.inherits(g.dom.NodeIterator,g.dom.TagIterator);g.dom.NodeIterator.prototype.next=function(){do{g.dom.NodeIterator.superClass_.next.call(this)}while(this.isEndTag());return this.node};g.provide("goog.dom.browserrange.IeRange");g.dom.browserrange.IeRange=function(e,i){this.range_=e;this.doc_=i};g.inherits(g.dom.browserrange.IeRange,g.dom.browserrange.AbstractRange);g.dom.browserrange.IeRange.getBrowserRangeForNode_=function(A){var C=g.dom.getOwnerDocument(A).body.createTextRange();if(A.nodeType==g.dom.NodeType.ELEMENT){C.moveToElementText(A);if(g.dom.browserrange.canContainRangeEndpoint(A)&&!A.childNodes.length){C.collapse(d)
}}else{var B=0;var i=A;while(i=i.previousSibling){var e=i.nodeType;if(e==g.dom.NodeType.TEXT){B+=i.length}else{if(e==g.dom.NodeType.ELEMENT){C.moveToElementText(i);break}}}if(!i){C.moveToElementText(A.parentNode)}C.collapse(!i);if(B){C.move("character",B)}C.moveEnd("character",A.length)}return C};g.dom.browserrange.IeRange.getBrowserRangeForNodes_=function(B,i,e,A){var F,E=d;if(B.nodeType==g.dom.NodeType.ELEMENT){F=B.childNodes[i];E=!F;B=F||B.lastChild||B;i=0}var C=g.dom.browserrange.IeRange.getBrowserRangeForNode_(B);if(i){C.move("character",i)}if(B==e&&i==A){C.collapse(y);return C}if(E){C.collapse(d)}E=d;if(e.nodeType==g.dom.NodeType.ELEMENT){F=e.childNodes[A];e=F||e.lastChild||e;A=0;E=!F}var D=g.dom.browserrange.IeRange.getBrowserRangeForNode_(e);D.collapse(!E);if(A){D.moveEnd("character",A)}C.setEndPoint("EndToEnd",D);return C};g.dom.browserrange.IeRange.createFromNodeContents=function(A){var i=new g.dom.browserrange.IeRange(g.dom.browserrange.IeRange.getBrowserRangeForNode_(A),g.dom.getOwnerDocument(A));
if(!g.dom.browserrange.canContainRangeEndpoint(A)){i.startNode_=i.endNode_=i.parentNode_=A.parentNode;i.startOffset_=g.array.indexOf(i.parentNode_.childNodes,A);i.endOffset_=i.startOffset_+1}else{var B,e=A;while((B=e.firstChild)&&g.dom.browserrange.canContainRangeEndpoint(B)){e=B}i.startNode_=e;i.startOffset_=0;e=A;while((B=e.lastChild)&&g.dom.browserrange.canContainRangeEndpoint(B)){e=B}i.endNode_=e;i.endOffset_=e.nodeType==g.dom.NodeType.ELEMENT?e.childNodes.length:e.length;i.parentNode_=A}return i};g.dom.browserrange.IeRange.createFromNodes=function(C,i,e,B){var A=new g.dom.browserrange.IeRange(g.dom.browserrange.IeRange.getBrowserRangeForNodes_(C,i,e,B),g.dom.getOwnerDocument(C));A.startNode_=C;A.startOffset_=i;A.endNode_=e;A.endOffset_=B;return A};g.dom.browserrange.IeRange.prototype.parentNode_=k;g.dom.browserrange.IeRange.prototype.startNode_=k;g.dom.browserrange.IeRange.prototype.endNode_=k;g.dom.browserrange.IeRange.prototype.startOffset_=-1;g.dom.browserrange.IeRange.prototype.endOffset_=-1;
g.dom.browserrange.IeRange.prototype.clone=function(){var e=new g.dom.browserrange.IeRange(this.range_.duplicate(),this.doc_);e.parentNode_=this.parentNode_;e.startNode_=this.startNode_;e.endNode_=this.endNode_;return e};g.dom.browserrange.IeRange.prototype.getBrowserRange=function(){return this.range_};g.dom.browserrange.IeRange.prototype.clearCachedValues_=function(){this.parentNode_=this.startNode_=this.endNode_=k;this.startOffset_=this.endOffset_=-1};g.dom.browserrange.IeRange.prototype.getContainer=function(){if(!this.parentNode_){var B=this.range_.text;var e=this.range_.duplicate();var A=B.replace(/ +$/,"");var D=B.length-A.length;if(D){e.moveEnd("character",-D)}var i=e.parentElement();var E=e.htmlText;var C=g.string.stripNewlines(E).length;if(this.isCollapsed()&&C>0){return(this.parentNode_=i)}while(C>g.string.stripNewlines(i.outerHTML).length){i=i.parentNode}while(i.childNodes.length==1&&i.firstChild&&i.innerText==g.dom.browserrange.IeRange.getNodeText_(i.firstChild)){if(!g.dom.browserrange.canContainRangeEndpoint(i.firstChild)){break
}i=i.firstChild}if(B.length==0){i=this.findDeepestContainer_(i)}this.parentNode_=i}return this.parentNode_};g.dom.browserrange.IeRange.prototype.findDeepestContainer_=function(C){var J=C.childNodes;for(var F=0,H=J.length;F<H;F++){var A=J[F];if(g.dom.browserrange.canContainRangeEndpoint(A)){var D=g.dom.browserrange.IeRange.getBrowserRangeForNode_(A);var e=g.dom.RangeEndpoint.START;var E=g.dom.RangeEndpoint.END;var G=(D.htmlText!=A.outerHTML);var I=this.isCollapsed()&&G;var B=I?(this.compareBrowserRangeEndpoints(D,e,e)>=0&&this.compareBrowserRangeEndpoints(D,e,E)<=0):this.range_.inRange(D);if(B){return this.findDeepestContainer_(A)}}}return C};g.dom.browserrange.IeRange.prototype.getStartNode=function(){if(!this.startNode_){this.startNode_=this.getEndpointNode_(g.dom.RangeEndpoint.START);if(this.isCollapsed()){this.endNode_=this.startNode_}}return this.startNode_};g.dom.browserrange.IeRange.prototype.getStartOffset=function(){if(this.startOffset_<0){this.startOffset_=this.getOffset_(g.dom.RangeEndpoint.START);
if(this.isCollapsed()){this.endOffset_=this.startOffset_}}return this.startOffset_};g.dom.browserrange.IeRange.prototype.getEndNode=function(){if(this.isCollapsed()){return this.getStartNode()}if(!this.endNode_){this.endNode_=this.getEndpointNode_(g.dom.RangeEndpoint.END)}return this.endNode_};g.dom.browserrange.IeRange.prototype.getEndOffset=function(){if(this.isCollapsed()){return this.getStartOffset()}if(this.endOffset_<0){this.endOffset_=this.getOffset_(g.dom.RangeEndpoint.END);if(this.isCollapsed()){this.startOffset_=this.endOffset_}}return this.endOffset_};g.dom.browserrange.IeRange.prototype.compareBrowserRangeEndpoints=function(i,A,e){return this.range_.compareEndPoints((A==g.dom.RangeEndpoint.START?"Start":"End")+"To"+(e==g.dom.RangeEndpoint.START?"Start":"End"),i)};g.dom.browserrange.IeRange.prototype.getEndpointNode_=function(M,H){var F=H||this.getContainer();if(!F||!F.firstChild){return F}var B=g.dom.RangeEndpoint.START,I=g.dom.RangeEndpoint.END;var E=M==B;for(var J=0,D=F.childNodes.length;
J<D;J++){var K=E?J:D-J-1;var C=F.childNodes[K];var G;try{G=g.dom.browserrange.createRangeFromNodeContents(C)}catch(L){continue}var A=G.getBrowserRange();if(this.isCollapsed()){if(!g.dom.browserrange.canContainRangeEndpoint(C)){if(this.compareBrowserRangeEndpoints(A,B,B)==0){this.startOffset_=this.endOffset_=K;return F}}else{if(G.containsRange(this)){return this.getEndpointNode_(M,C)}}}else{if(this.containsRange(G)){if(!g.dom.browserrange.canContainRangeEndpoint(C)){if(E){this.startOffset_=K}else{this.endOffset_=K+1}return F}while(C.childNodes.length==1){C=C.firstChild}return this.getEndpointNode_(M,C)}else{if(this.compareBrowserRangeEndpoints(A,B,I)<0&&this.compareBrowserRangeEndpoints(A,I,B)>0){while(C.childNodes.length==1&&C.firstChild){C=C.firstChild}return this.getEndpointNode_(M,C)}}}}return F};g.dom.browserrange.IeRange.prototype.compareNodeEndpoints_=function(A,i,e){return this.range_.compareEndPoints((i==g.dom.RangeEndpoint.START?"Start":"End")+"To"+(e==g.dom.RangeEndpoint.START?"Start":"End"),g.dom.browserrange.createRangeFromNodeContents(A).getBrowserRange())
};g.dom.browserrange.IeRange.prototype.getOffset_=function(M,A){var E=M==g.dom.RangeEndpoint.START;var B=A||(E?this.getStartNode():this.getEndNode());if(B.nodeType==g.dom.NodeType.ELEMENT){var F=B.childNodes;var L=F.length;var D=E?0:L-1;var I=E?1:-1;for(var J=D;J>=0&&J<L;J+=I){var C=F[J];if(g.dom.browserrange.canContainRangeEndpoint(C)){continue}var e=this.compareNodeEndpoints_(C,M,M);if(e==0){return E?J:J+1}}return J==-1?0:J}else{var K=this.range_.duplicate();var H=g.dom.browserrange.IeRange.getBrowserRangeForNode_(B);K.setEndPoint(E?"EndToEnd":"StartToStart",H);var G=K.text.length;return E?B.length-G:G}};g.dom.browserrange.IeRange.getNodeText_=function(e){return e.nodeType==g.dom.NodeType.TEXT?e.nodeValue:e.innerText};g.dom.browserrange.IeRange.prototype.isRangeInDocument=function(){var e=this.doc_.body.createTextRange();e.moveToElementText(this.doc_.body);return this.containsRange(new g.dom.browserrange.IeRange(e,this.doc_),y)};g.dom.browserrange.IeRange.prototype.isCollapsed=function(){return this.range_.compareEndPoints("StartToEnd",this.range_)==0
};g.dom.browserrange.IeRange.prototype.getText=function(){return this.range_.text};g.dom.browserrange.IeRange.prototype.getValidHtml=function(){return this.range_.htmlText};g.dom.browserrange.IeRange.prototype.select=function(e){this.range_.select()};g.dom.browserrange.IeRange.prototype.removeContents=function(){if(this.range_.htmlText){var A=this.getStartNode();var D=this.getEndNode();var I=this.range_.text;var F=this.range_.duplicate();F.moveStart("character",1);F.moveStart("character",-1);if(F.text!=I){var G=new g.dom.NodeIterator(A,d,y);var C=[];g.iter.forEach(G,function(e){if(e.nodeType!=g.dom.NodeType.TEXT&&this.containsNode(e)){C.push(e);G.skipTag()}if(e==D){throw g.iter.StopIteration}});this.collapse(y);g.array.forEach(C,g.dom.removeNode);this.clearCachedValues_();return}this.range_=F;this.range_.text="";this.clearCachedValues_();var i=this.getStartNode();var B=this.getStartOffset();try{var H=A.nextSibling;if(A==D&&A.parentNode&&A.nodeType==g.dom.NodeType.TEXT&&H&&H.nodeType==g.dom.NodeType.TEXT){A.nodeValue+=H.nodeValue;
g.dom.removeNode(H);this.range_=g.dom.browserrange.IeRange.getBrowserRangeForNode_(i);this.range_.move("character",B);this.clearCachedValues_()}}catch(E){}}};g.dom.browserrange.IeRange.getDomHelper_=function(e){return g.dom.getDomHelper(e.parentElement())};g.dom.browserrange.IeRange.pasteElement_=function(i,B,A){A=A||g.dom.browserrange.IeRange.getDomHelper_(i);var C;var e=C=B.id;if(!C){C=B.id=g.string.createUniqueString()}i.pasteHTML(B.outerHTML);B=A.getElement(C);if(B){if(!e){B.removeAttribute("id")}}return B};g.dom.browserrange.IeRange.prototype.surroundContents=function(e){g.dom.removeNode(e);e.innerHTML=this.range_.htmlText;e=g.dom.browserrange.IeRange.pasteElement_(this.range_,e);if(e){this.range_.moveToElementText(e)}this.clearCachedValues_();return e};g.dom.browserrange.IeRange.insertNode_=function(D,B,C,i){i=i||g.dom.browserrange.IeRange.getDomHelper_(D);var e;if(B.nodeType!=g.dom.NodeType.ELEMENT){e=y;B=i.createDom(g.dom.TagName.DIV,k,B)}D.collapse(C);B=g.dom.browserrange.IeRange.pasteElement_(D,(B),i);
if(e){var A=B.firstChild;i.flattenElement(B);B=A}return B};g.dom.browserrange.IeRange.prototype.insertNode=function(i,A){var e=g.dom.browserrange.IeRange.insertNode_(this.range_.duplicate(),i,A);this.clearCachedValues_();return e};g.dom.browserrange.IeRange.prototype.surroundWithNodes=function(i,e){var B=this.range_.duplicate();var A=this.range_.duplicate();g.dom.browserrange.IeRange.insertNode_(B,i,y);g.dom.browserrange.IeRange.insertNode_(A,e,d);this.clearCachedValues_()};g.dom.browserrange.IeRange.prototype.collapse=function(e){this.range_.collapse(e);if(e){this.endNode_=this.startNode_;this.endOffset_=this.startOffset_}else{this.startNode_=this.endNode_;this.startOffset_=this.endOffset_}};g.provide("goog.dom.browserrange.GeckoRange");g.dom.browserrange.GeckoRange=function(e){g.dom.browserrange.W3cRange.call(this,e)};g.inherits(g.dom.browserrange.GeckoRange,g.dom.browserrange.W3cRange);g.dom.browserrange.GeckoRange.createFromNodeContents=function(e){return new g.dom.browserrange.GeckoRange(g.dom.browserrange.W3cRange.getBrowserRangeForNode(e))
};g.dom.browserrange.GeckoRange.createFromNodes=function(B,i,e,A){return new g.dom.browserrange.GeckoRange(g.dom.browserrange.W3cRange.getBrowserRangeForNodes(B,i,e,A))};g.dom.browserrange.GeckoRange.prototype.selectInternal=function(A,D){var i=D?this.getEndNode():this.getStartNode();var B=D?this.getEndOffset():this.getStartOffset();var C=D?this.getStartNode():this.getEndNode();var e=D?this.getStartOffset():this.getEndOffset();A.collapse(i,B);if(i!=C||B!=e){A.extend(C,e)}};g.provide("goog.dom.browserrange.OperaRange");g.dom.browserrange.OperaRange=function(e){g.dom.browserrange.W3cRange.call(this,e)};g.inherits(g.dom.browserrange.OperaRange,g.dom.browserrange.W3cRange);g.dom.browserrange.OperaRange.createFromNodeContents=function(e){return new g.dom.browserrange.OperaRange(g.dom.browserrange.W3cRange.getBrowserRangeForNode(e))};g.dom.browserrange.OperaRange.createFromNodes=function(B,i,e,A){return new g.dom.browserrange.OperaRange(g.dom.browserrange.W3cRange.getBrowserRangeForNodes(B,i,e,A))
};g.dom.browserrange.OperaRange.prototype.selectInternal=function(e,i){e.collapse(this.getStartNode(),this.getStartOffset());if(this.getEndNode()!=this.getStartNode()||this.getEndOffset()!=this.getStartOffset()){e.extend(this.getEndNode(),this.getEndOffset())}if(e.rangeCount==0){e.addRange(this.range_)}};g.provide("goog.dom.browserrange");g.provide("goog.dom.browserrange.Error");g.dom.browserrange.Error={NOT_IMPLEMENTED:"Not Implemented"};g.dom.browserrange.createRange=function(e){if(g.userAgent.IE&&!g.userAgent.isDocumentMode(9)){return new g.dom.browserrange.IeRange((e),g.dom.getOwnerDocument(e.parentElement()))}else{if(g.userAgent.WEBKIT){return new g.dom.browserrange.WebKitRange((e))}else{if(g.userAgent.GECKO){return new g.dom.browserrange.GeckoRange((e))}else{if(g.userAgent.OPERA){return new g.dom.browserrange.OperaRange((e))}else{return new g.dom.browserrange.W3cRange((e))}}}}};g.dom.browserrange.createRangeFromNodeContents=function(e){if(g.userAgent.IE&&!g.userAgent.isDocumentMode(9)){return g.dom.browserrange.IeRange.createFromNodeContents(e)
}else{if(g.userAgent.WEBKIT){return g.dom.browserrange.WebKitRange.createFromNodeContents(e)}else{if(g.userAgent.GECKO){return g.dom.browserrange.GeckoRange.createFromNodeContents(e)}else{if(g.userAgent.OPERA){return g.dom.browserrange.OperaRange.createFromNodeContents(e)}else{return g.dom.browserrange.W3cRange.createFromNodeContents(e)}}}}};g.dom.browserrange.createRangeFromNodes=function(B,i,e,A){if(g.userAgent.IE&&!g.userAgent.isDocumentMode(9)){return g.dom.browserrange.IeRange.createFromNodes(B,i,e,A)}else{if(g.userAgent.WEBKIT){return g.dom.browserrange.WebKitRange.createFromNodes(B,i,e,A)}else{if(g.userAgent.GECKO){return g.dom.browserrange.GeckoRange.createFromNodes(B,i,e,A)}else{if(g.userAgent.OPERA){return g.dom.browserrange.OperaRange.createFromNodes(B,i,e,A)}else{return g.dom.browserrange.W3cRange.createFromNodes(B,i,e,A)}}}}};g.dom.browserrange.canContainRangeEndpoint=function(e){return g.dom.canHaveChildren(e)||e.nodeType==g.dom.NodeType.TEXT};g.provide("goog.dom.TextRange");
g.dom.TextRange=function(){};g.inherits(g.dom.TextRange,g.dom.AbstractRange);g.dom.TextRange.createFromBrowserRange=function(e,i){return g.dom.TextRange.createFromBrowserRangeWrapper_(g.dom.browserrange.createRange(e),i)};g.dom.TextRange.createFromBrowserRangeWrapper_=function(A,i){var e=new g.dom.TextRange();e.browserRangeWrapper_=A;e.isReversed_=!!i;return e};g.dom.TextRange.createFromNodeContents=function(i,e){return g.dom.TextRange.createFromBrowserRangeWrapper_(g.dom.browserrange.createRangeFromNodeContents(i),e)};g.dom.TextRange.createFromNodes=function(A,C,D,e){var i=new g.dom.TextRange();i.isReversed_=g.dom.Range.isReversed(A,C,D,e);if(A.tagName=="BR"){var B=A.parentNode;C=g.array.indexOf(B.childNodes,A);A=B}if(D.tagName=="BR"){var B=D.parentNode;e=g.array.indexOf(B.childNodes,D);D=B}if(i.isReversed_){i.startNode_=D;i.startOffset_=e;i.endNode_=A;i.endOffset_=C}else{i.startNode_=A;i.startOffset_=C;i.endNode_=D;i.endOffset_=e}return i};g.dom.TextRange.prototype.browserRangeWrapper_=k;
g.dom.TextRange.prototype.startNode_=k;g.dom.TextRange.prototype.startOffset_=k;g.dom.TextRange.prototype.endNode_=k;g.dom.TextRange.prototype.endOffset_=k;g.dom.TextRange.prototype.isReversed_=d;g.dom.TextRange.prototype.clone=function(){var e=new g.dom.TextRange();e.browserRangeWrapper_=this.browserRangeWrapper_;e.startNode_=this.startNode_;e.startOffset_=this.startOffset_;e.endNode_=this.endNode_;e.endOffset_=this.endOffset_;e.isReversed_=this.isReversed_;return e};g.dom.TextRange.prototype.getType=function(){return g.dom.RangeType.TEXT};g.dom.TextRange.prototype.getBrowserRangeObject=function(){return this.getBrowserRangeWrapper_().getBrowserRange()};g.dom.TextRange.prototype.setBrowserRangeObject=function(e){if(g.dom.AbstractRange.isNativeControlRange(e)){return d}this.browserRangeWrapper_=g.dom.browserrange.createRange(e);this.clearCachedValues_();return y};g.dom.TextRange.prototype.clearCachedValues_=function(){this.startNode_=this.startOffset_=this.endNode_=this.endOffset_=k};g.dom.TextRange.prototype.getTextRangeCount=function(){return 1
};g.dom.TextRange.prototype.getTextRange=function(e){return this};g.dom.TextRange.prototype.getBrowserRangeWrapper_=function(){return this.browserRangeWrapper_||(this.browserRangeWrapper_=g.dom.browserrange.createRangeFromNodes(this.getStartNode(),this.getStartOffset(),this.getEndNode(),this.getEndOffset()))};g.dom.TextRange.prototype.getContainer=function(){return this.getBrowserRangeWrapper_().getContainer()};g.dom.TextRange.prototype.getStartNode=function(){return this.startNode_||(this.startNode_=this.getBrowserRangeWrapper_().getStartNode())};g.dom.TextRange.prototype.getStartOffset=function(){return this.startOffset_!=k?this.startOffset_:(this.startOffset_=this.getBrowserRangeWrapper_().getStartOffset())};g.dom.TextRange.prototype.getEndNode=function(){return this.endNode_||(this.endNode_=this.getBrowserRangeWrapper_().getEndNode())};g.dom.TextRange.prototype.getEndOffset=function(){return this.endOffset_!=k?this.endOffset_:(this.endOffset_=this.getBrowserRangeWrapper_().getEndOffset())
};g.dom.TextRange.prototype.moveToNodes=function(B,i,e,A,C){this.startNode_=B;this.startOffset_=i;this.endNode_=e;this.endOffset_=A;this.isReversed_=C;this.browserRangeWrapper_=k};g.dom.TextRange.prototype.isReversed=function(){return this.isReversed_};g.dom.TextRange.prototype.containsRange=function(C,B){var e=C.getType();if(e==g.dom.RangeType.TEXT){return this.getBrowserRangeWrapper_().containsRange(C.getBrowserRangeWrapper_(),B)}else{if(e==g.dom.RangeType.CONTROL){var A=C.getElements();var i=B?g.array.some:g.array.every;return i(A,function(D){return this.containsNode(D,B)},this)}}return d};g.dom.TextRange.isAttachedNode=function(A){if(g.userAgent.IE&&!g.userAgent.isDocumentMode(9)){var i=d;try{i=A.parentNode}catch(B){}return !!i}else{return g.dom.contains(A.ownerDocument.body,A)}};g.dom.TextRange.prototype.isRangeInDocument=function(){return(!this.startNode_||g.dom.TextRange.isAttachedNode(this.startNode_))&&(!this.endNode_||g.dom.TextRange.isAttachedNode(this.endNode_))&&(!(g.userAgent.IE&&!g.userAgent.isDocumentMode(9))||this.getBrowserRangeWrapper_().isRangeInDocument())
};g.dom.TextRange.prototype.isCollapsed=function(){return this.getBrowserRangeWrapper_().isCollapsed()};g.dom.TextRange.prototype.getText=function(){return this.getBrowserRangeWrapper_().getText()};g.dom.TextRange.prototype.getHtmlFragment=function(){return this.getBrowserRangeWrapper_().getHtmlFragment()};g.dom.TextRange.prototype.getValidHtml=function(){return this.getBrowserRangeWrapper_().getValidHtml()};g.dom.TextRange.prototype.getPastableHtml=function(){var i=this.getValidHtml();if(i.match(/^\s*<td\b/i)){i="<table><tbody><tr>"+i+"</tr></tbody></table>"}else{if(i.match(/^\s*<tr\b/i)){i="<table><tbody>"+i+"</tbody></table>"}else{if(i.match(/^\s*<tbody\b/i)){i="<table>"+i+"</table>"}else{if(i.match(/^\s*<li\b/i)){var e=this.getContainer();var A=g.dom.TagName.UL;while(e){if(e.tagName==g.dom.TagName.OL){A=g.dom.TagName.OL;break}else{if(e.tagName==g.dom.TagName.UL){break}}e=e.parentNode}i=g.string.buildString("<",A,">",i,"</",A,">")}}}}return i};g.dom.TextRange.prototype.__iterator__=function(e){return new g.dom.TextRangeIterator(this.getStartNode(),this.getStartOffset(),this.getEndNode(),this.getEndOffset())
};g.dom.TextRange.prototype.select=function(){this.getBrowserRangeWrapper_().select(this.isReversed_)};g.dom.TextRange.prototype.removeContents=function(){this.getBrowserRangeWrapper_().removeContents();this.clearCachedValues_()};g.dom.TextRange.prototype.surroundContents=function(i){var e=this.getBrowserRangeWrapper_().surroundContents(i);this.clearCachedValues_();return e};g.dom.TextRange.prototype.insertNode=function(i,A){var e=this.getBrowserRangeWrapper_().insertNode(i,A);this.clearCachedValues_();return e};g.dom.TextRange.prototype.surroundWithNodes=function(i,e){this.getBrowserRangeWrapper_().surroundWithNodes(i,e);this.clearCachedValues_()};g.dom.TextRange.prototype.saveUsingDom=function(){return new g.dom.DomSavedTextRange_(this)};g.dom.TextRange.prototype.collapse=function(i){var e=this.isReversed()?!i:i;if(this.browserRangeWrapper_){this.browserRangeWrapper_.collapse(e)}if(e){this.endNode_=this.startNode_;this.endOffset_=this.startOffset_}else{this.startNode_=this.endNode_;this.startOffset_=this.endOffset_
}this.isReversed_=d};g.dom.DomSavedTextRange_=function(e){this.anchorNode_=e.getAnchorNode();this.anchorOffset_=e.getAnchorOffset();this.focusNode_=e.getFocusNode();this.focusOffset_=e.getFocusOffset()};g.inherits(g.dom.DomSavedTextRange_,g.dom.SavedRange);g.dom.DomSavedTextRange_.prototype.restoreInternal=function(){return g.dom.Range.createFromNodes(this.anchorNode_,this.anchorOffset_,this.focusNode_,this.focusOffset_)};g.dom.DomSavedTextRange_.prototype.disposeInternal=function(){g.dom.DomSavedTextRange_.superClass_.disposeInternal.call(this);this.anchorNode_=k;this.focusNode_=k};g.provide("goog.dom.MultiRange");g.provide("goog.dom.MultiRangeIterator");g.dom.MultiRange=function(){this.browserRanges_=[];this.ranges_=[];this.sortedRanges_=k;this.container_=k};g.inherits(g.dom.MultiRange,g.dom.AbstractMultiRange);g.dom.MultiRange.createFromBrowserSelection=function(C){var A=new g.dom.MultiRange();for(var B=0,e=C.rangeCount;B<e;B++){A.browserRanges_.push(C.getRangeAt(B))}return A};g.dom.MultiRange.createFromBrowserRanges=function(i){var e=new g.dom.MultiRange();
e.browserRanges_=g.array.clone(i);return e};g.dom.MultiRange.createFromTextRanges=function(i){var e=new g.dom.MultiRange();e.ranges_=i;e.browserRanges_=i.map(function(A){return A.getBrowserRangeObject()});return e};g.dom.MultiRange.prototype.clearCachedValues_=function(){this.ranges_=[];this.sortedRanges_=k;this.container_=k};g.dom.MultiRange.prototype.clone=function(){return g.dom.MultiRange.createFromBrowserRanges(this.browserRanges_)};g.dom.MultiRange.prototype.getType=function(){return g.dom.RangeType.MULTI};g.dom.MultiRange.prototype.getBrowserRangeObject=function(){return this.browserRanges_[0]};g.dom.MultiRange.prototype.setBrowserRangeObject=function(e){return d};g.dom.MultiRange.prototype.getTextRangeCount=function(){return this.browserRanges_.length};g.dom.MultiRange.prototype.getTextRange=function(e){if(!this.ranges_[e]){this.ranges_[e]=g.dom.TextRange.createFromBrowserRange(this.browserRanges_[e])}return this.ranges_[e]};g.dom.MultiRange.prototype.getContainer=function(){if(!this.container_){var A=[];
for(var B=0,e=this.getTextRangeCount();B<e;B++){A.push(this.getTextRange(B).getContainer())}this.container_=g.dom.findCommonAncestor.apply(k,A)}return this.container_};g.dom.MultiRange.prototype.getSortedRanges=function(){if(!this.sortedRanges_){this.sortedRanges_=this.getTextRanges();this.sortedRanges_.sort(function(i,e){var B=i.getStartNode();var C=i.getStartOffset();var A=e.getStartNode();var D=e.getStartOffset();if(B==A&&C==D){return 0}return g.dom.Range.isReversed(B,C,A,D)?1:-1})}return this.sortedRanges_};g.dom.MultiRange.prototype.getStartNode=function(){return this.getSortedRanges()[0].getStartNode()};g.dom.MultiRange.prototype.getStartOffset=function(){return this.getSortedRanges()[0].getStartOffset()};g.dom.MultiRange.prototype.getEndNode=function(){return this.getSortedRanges().last().getEndNode()};g.dom.MultiRange.prototype.getEndOffset=function(){return this.getSortedRanges().last().getEndOffset()};g.dom.MultiRange.prototype.isRangeInDocument=function(){return this.getTextRanges().every(function(e){return e.isRangeInDocument()
})};g.dom.MultiRange.prototype.isCollapsed=function(){return this.browserRanges_.length==0||this.browserRanges_.length==1&&this.getTextRange(0).isCollapsed()};g.dom.MultiRange.prototype.getText=function(){return this.getTextRanges().map(function(e){return e.getText()}).join("")};g.dom.MultiRange.prototype.getHtmlFragment=function(){return this.getValidHtml()};g.dom.MultiRange.prototype.getValidHtml=function(){return this.getTextRanges().map(function(e){return e.getValidHtml()}).join("")};g.dom.MultiRange.prototype.getPastableHtml=function(){return this.getValidHtml()};g.dom.MultiRange.prototype.__iterator__=function(e){return new g.dom.MultiRangeIterator(this)};g.dom.MultiRange.prototype.select=function(){var B=g.dom.AbstractRange.getBrowserSelectionForWindow(this.getWindow());B.removeAllRanges();for(var A=0,e=this.getTextRangeCount();A<e;A++){B.addRange(this.getTextRange(A).getBrowserRangeObject())}};g.dom.MultiRange.prototype.removeContents=function(){this.getTextRanges().each(function(e){e.removeContents()
})};g.dom.MultiRange.prototype.saveUsingDom=function(){return new g.dom.DomSavedMultiRange_(this)};g.dom.MultiRange.prototype.collapse=function(i){if(!this.isCollapsed()){var e=i?this.getTextRange(0):this.getTextRange(this.getTextRangeCount()-1);this.clearCachedValues_();e.collapse(i);this.ranges_=[e];this.sortedRanges_=[e];this.browserRanges_=[e.getBrowserRangeObject()]}};g.dom.DomSavedMultiRange_=function(e){this.savedRanges_=e.getTextRanges().map(function(i){return i.saveUsingDom()})};g.inherits(g.dom.DomSavedMultiRange_,g.dom.SavedRange);g.dom.DomSavedMultiRange_.prototype.restoreInternal=function(){var e=this.savedRanges_.map(function(i){return i.restore()});return g.dom.MultiRange.createFromTextRanges(e)};g.dom.DomSavedMultiRange_.prototype.disposeInternal=function(){g.dom.DomSavedMultiRange_.superClass_.disposeInternal.call(this);this.savedRanges_.map(function(e){e.dispose()});delete this.savedRanges_};g.dom.MultiRangeIterator=function(e){if(e){this.iterators_=e.getSortedRanges().map(function(i){return g.iter.toIterator(i)
})}g.dom.RangeIterator.call(this,e?this.getStartNode():k,d)};g.inherits(g.dom.MultiRangeIterator,g.dom.RangeIterator);g.dom.MultiRangeIterator.prototype.iterators_=k;g.dom.MultiRangeIterator.prototype.currentIdx_=0;g.dom.MultiRangeIterator.prototype.getStartTextOffset=function(){return this.iterators_[this.currentIdx_].getStartTextOffset()};g.dom.MultiRangeIterator.prototype.getEndTextOffset=function(){return this.iterators_[this.currentIdx_].getEndTextOffset()};g.dom.MultiRangeIterator.prototype.getStartNode=function(){return this.iterators_[0].getStartNode()};g.dom.MultiRangeIterator.prototype.getEndNode=function(){return this.iterators_.last().getEndNode()};g.dom.MultiRangeIterator.prototype.isLast=function(){return this.iterators_[this.currentIdx_].isLast()};g.dom.MultiRangeIterator.prototype.next=function(){try{var A=this.iterators_[this.currentIdx_];var i=A.next();this.setPosition(A.node,A.tagType,A.depth);return i}catch(e){if(e!==g.iter.StopIteration||this.iterators_.length-1==this.currentIdx_){throw e
}else{this.currentIdx_++;return this.next()}}};g.dom.MultiRangeIterator.prototype.copyFrom=function(e){this.iterators_=g.array.clone(e.iterators_);g.dom.MultiRangeIterator.superClass_.copyFrom.call(this,e)};g.dom.MultiRangeIterator.prototype.clone=function(){var e=new g.dom.MultiRangeIterator(k);e.copyFrom(this);return e};g.provide("goog.dom.ControlRange");g.provide("goog.dom.ControlRangeIterator");g.dom.ControlRange=function(){};g.inherits(g.dom.ControlRange,g.dom.AbstractMultiRange);g.dom.ControlRange.createFromBrowserRange=function(i){var e=new g.dom.ControlRange();e.range_=i;return e};g.dom.ControlRange.createFromElements=function(C){var A=g.dom.getOwnerDocument(arguments[0]).body.createControlRange();for(var B=0,e=arguments.length;B<e;B++){A.addElement(arguments[B])}return g.dom.ControlRange.createFromBrowserRange(A)};g.dom.ControlRange.prototype.range_=k;g.dom.ControlRange.prototype.elements_=k;g.dom.ControlRange.prototype.sortedElements_=k;g.dom.ControlRange.prototype.clearCachedValues_=function(){this.elements_=k;
this.sortedElements_=k};g.dom.ControlRange.prototype.clone=function(){return g.dom.ControlRange.createFromElements.apply(this,this.getElements())};g.dom.ControlRange.prototype.getType=function(){return g.dom.RangeType.CONTROL};g.dom.ControlRange.prototype.getBrowserRangeObject=function(){return this.range_||c.body.createControlRange()};g.dom.ControlRange.prototype.setBrowserRangeObject=function(e){if(!g.dom.AbstractRange.isNativeControlRange(e)){return d}this.range_=e;return y};g.dom.ControlRange.prototype.getTextRangeCount=function(){return this.range_?this.range_.length:0};g.dom.ControlRange.prototype.getTextRange=function(e){return g.dom.TextRange.createFromNodeContents(this.range_.item(e))};g.dom.ControlRange.prototype.getContainer=function(){return g.dom.findCommonAncestor.apply(k,this.getElements())};g.dom.ControlRange.prototype.getStartNode=function(){return this.getSortedElements()[0]};g.dom.ControlRange.prototype.getStartOffset=function(){return 0};g.dom.ControlRange.prototype.getEndNode=function(){var i=this.getSortedElements();
var e=(i.last());return(i.find(function(A){return g.dom.contains(A,e)}))};g.dom.ControlRange.prototype.getEndOffset=function(){return this.getEndNode().childNodes.length};g.dom.ControlRange.prototype.getElements=function(){if(!this.elements_){this.elements_=[];if(this.range_){for(var e=0;e<this.range_.length;e++){this.elements_.push(this.range_.item(e))}}}return this.elements_};g.dom.ControlRange.prototype.getSortedElements=function(){if(!this.sortedElements_){this.sortedElements_=this.getElements().concat();this.sortedElements_.sort(function(i,e){return i.sourceIndex-e.sourceIndex})}return this.sortedElements_};g.dom.ControlRange.prototype.isRangeInDocument=function(){var i=d;try{i=this.getElements().every(function(e){return g.userAgent.IE?e.parentNode:g.dom.contains(e.ownerDocument.body,e)})}catch(A){}return i};g.dom.ControlRange.prototype.isCollapsed=function(){return !this.range_||!this.range_.length};g.dom.ControlRange.prototype.getText=function(){return""};g.dom.ControlRange.prototype.getHtmlFragment=function(){return this.getSortedElements().map(g.dom.getOuterHtml).join("")
};g.dom.ControlRange.prototype.getValidHtml=function(){return this.getHtmlFragment()};g.dom.ControlRange.prototype.getPastableHtml=g.dom.ControlRange.prototype.getValidHtml;g.dom.ControlRange.prototype.__iterator__=function(e){return new g.dom.ControlRangeIterator(this)};g.dom.ControlRange.prototype.select=function(){if(this.range_){this.range_.select()}};g.dom.ControlRange.prototype.removeContents=function(){if(this.range_){var A=[];for(var B=0,e=this.range_.length;B<e;B++){A.push(this.range_.item(B))}A.each(g.dom.removeNode);this.collapse(d)}};g.dom.ControlRange.prototype.saveUsingDom=function(){return new g.dom.DomSavedControlRange_(this)};g.dom.ControlRange.prototype.collapse=function(e){this.range_=k;this.clearCachedValues_()};g.dom.DomSavedControlRange_=function(e){this.elements_=e.getElements()};g.inherits(g.dom.DomSavedControlRange_,g.dom.SavedRange);g.dom.DomSavedControlRange_.prototype.restoreInternal=function(){var C=this.elements_.length?g.dom.getOwnerDocument(this.elements_[0]):document;
var B=C.body.createControlRange();for(var A=0,e=this.elements_.length;A<e;A++){B.addElement(this.elements_[A])}return g.dom.ControlRange.createFromBrowserRange(B)};g.dom.DomSavedControlRange_.prototype.disposeInternal=function(){g.dom.DomSavedControlRange_.superClass_.disposeInternal.call(this);delete this.elements_};g.dom.ControlRangeIterator=function(e){if(e){this.elements_=e.getSortedElements();this.startNode_=this.elements_.shift();this.endNode_=(this.elements_.last())||this.startNode_}g.dom.RangeIterator.call(this,this.startNode_,d)};g.inherits(g.dom.ControlRangeIterator,g.dom.RangeIterator);g.dom.ControlRangeIterator.prototype.startNode_=k;g.dom.ControlRangeIterator.prototype.endNode_=k;g.dom.ControlRangeIterator.prototype.elements_=k;g.dom.ControlRangeIterator.prototype.getStartTextOffset=function(){return 0};g.dom.ControlRangeIterator.prototype.getEndTextOffset=function(){return 0};g.dom.ControlRangeIterator.prototype.getStartNode=function(){return this.startNode_};g.dom.ControlRangeIterator.prototype.getEndNode=function(){return this.endNode_
};g.dom.ControlRangeIterator.prototype.isLast=function(){return !this.depth&&!this.elements_.length};g.dom.ControlRangeIterator.prototype.next=function(){if(this.isLast()){throw g.iter.StopIteration}else{if(!this.depth){var e=this.elements_.shift();this.setPosition(e,g.dom.TagWalkType.START_TAG,g.dom.TagWalkType.START_TAG);return e}}return g.dom.ControlRangeIterator.superClass_.next.call(this)};g.dom.ControlRangeIterator.prototype.copyFrom=function(e){this.elements_=e.elements_;this.startNode_=e.startNode_;this.endNode_=e.endNode_;g.dom.ControlRangeIterator.superClass_.copyFrom.call(this,e)};g.dom.ControlRangeIterator.prototype.clone=function(){var e=new g.dom.ControlRangeIterator(k);e.copyFrom(this);return e};g.provide("goog.dom.Range");g.dom.Range.createFromWindow=function(i){var e=g.dom.AbstractRange.getBrowserSelectionForWindow(i||window);return e&&g.dom.Range.createFromBrowserSelection(e)};g.dom.Range.createFromBrowserSelection=function(A){var i;var B=d;if(A.createRange){try{i=A.createRange()
}catch(C){return k}}else{if(A.rangeCount){if(A.rangeCount>1){return g.dom.MultiRange.createFromBrowserSelection((A))}else{i=A.getRangeAt(0);B=g.dom.Range.isReversed(A.anchorNode,A.anchorOffset,A.focusNode,A.focusOffset)}}else{return k}}return g.dom.Range.createFromBrowserRange(i,B)};g.dom.Range.createFromBrowserRange=function(e,i){return g.dom.AbstractRange.isNativeControlRange(e)?g.dom.ControlRange.createFromBrowserRange(e):g.dom.TextRange.createFromBrowserRange(e,i)};g.dom.Range.createFromNodeContents=function(i,e){return g.dom.TextRange.createFromNodeContents(i,e)};g.dom.Range.createCaret=function(e,i){return g.dom.TextRange.createFromNodes(e,i,e,i)};g.dom.Range.createFromNodes=function(B,i,e,A){return g.dom.TextRange.createFromNodes(B,i,e,A)};g.dom.Range.clearSelection=function(A){var i=g.dom.AbstractRange.getBrowserSelectionForWindow(A||window);if(!i){return}if(i.empty){try{i.empty()}catch(B){}}else{i.removeAllRanges()}};g.dom.Range.isReversed=function(i,A,B,e){if(i==B){return e<A}var C;
if(i.nodeType==g.dom.NodeType.ELEMENT&&A){C=i.childNodes[A];if(C){i=C;A=0}else{if(g.dom.contains(i,B)){return y}}}if(B.nodeType==g.dom.NodeType.ELEMENT&&e){C=B.childNodes[e];if(C){B=C;e=0}else{if(g.dom.contains(B,i)){return d}}}return(g.dom.compareNodeOrder(i,B)||A-e)>0};g.provide("export_dep");j.tx={};function b(A,C){for(var B=0,e=A.length;B<e;B++){C(A[B])}}j.installHyperscript=function(i,e){b("a big blockquote br b center code dd dl dt div em font form h1 h2 h3 h4 h5 h6 hr img iframe input i li ol option pre p script select small span strike strong style sub sup table tbody td textarea tr ul u".split(" "),function(A){i[A]=function(){var B=e.createElement(A);b(arguments,function(D){if(D.nodeType){B.appendChild(D)}else{if(typeof D=="string"||typeof D=="number"){if(A=="textarea"){if(x.msie){B.value+=D}else{B.text+=D}}else{B.innerHTML+=D}}else{if(typeof D=="array"){for(var F=0;F<D.length;F++){B.appendChild(D[F])}}else{for(var C in D){if(C=="style"){for(var E in D[C]){if((E=="float"||E=="cssFloat")){B[C][B[C].styleFloat===u?"cssFloat":"styleFloat"]=D[C][E]
}else{B[C][E]=D[C][E]}}}else{if(["more","less","longDesc"].contains(C)){if(B.setAttribute){B.setAttribute(C,D[C])}}else{if(["colSpan","rowSpan","cellPadding","cellSpacing"].contains(C)){if(B.setAttribute){B.setAttribute(C,D[C])}}else{if(D[C]){B[C]=D[C]}}}}}}}}});return B}})};installHyperscript(j.tx,c);(function(){function i(B,A){if(!B){return""}if(A.indexOf("{if:")>-1){A=A.replace(/#\{if:([_\w]+)([=><!]+)([_'"\-\w]+)\}([\s\S]*?)#\{\/if:\1\}/gm,function(G,D,F,J,I){if(B[D]==k){return G}var E=d;try{F=((F=="=")?"==":F);var K='"'+(B[D]+"").replace(/['"]/g,"")+'"';var C='"'+J.replace(/['"]/g,"")+'"';E=txEval("("+K+F+C+")")}catch(H){E=d}if(E){return i(B,I)}else{return""}})}if(A.indexOf("{for:")>-1){A=A.replace(/#\{for:([_\w]+):?(\d*):?(\d*)\}([\s\S]*?)#\{\/for:\1\}/gm,function(J,C,K,E,H){if(!B[C]||!B[C].length){return J}var F=B[C];var D=[];K=!!K?(isNaN(K)?F.length:parseInt(K)):F.length;E=!!E?(isNaN(E)?0:parseInt(E)):0;for(var G=0,I=Math.min(F.length,K);G<I;G++){D.push(i(F[G],H))}return D.join("").substring(E)
})}return A.replace(/#\{([_\w]+)\}/g,function(D,C){if(B[C]!=k){return B[C]}else{return D}})}var e=j.Template=function(A){this.template=A};e.prototype={evaluate:function(A){return i(A,this.template)},evaluateToDom:function(B,A){if(typeof(A)==="string"){A=c.getElementById(A)}A.innerHTML=i(B,this.template)},evaluateAsDom:function(C,B){var A=(B||document).createElement("div");A.innerHTML=i(C,this.template);return A.firstChild}}})();(function(){var e,C,A;var D={"#":function(G,H){if((e=/(\S*)#(\S+)/.exec(H))!==k){var F=e[1];var I=e[2];if(!G.getElementById){G=G.ownerDocument}if(C=G.getElementById(I)){if(F.length<1||C.nodeName.toLowerCase()==F){return[C]}}}return[]},".":function(H,L){if((e=/(\S*)\.(\S+)/.exec(L))!==k){var G=((e[1]==="")?"*":e[1]);var F=e[2];if((A=H.getElementsByTagName(G)).length>0){var J=[];for(var I=0;I<A.length;I++){var K=A[I];if((new RegExp("(^| )"+F+"($| )")).test(K.className)){J.push(K)}}return J}}return[]},"*":function(F,I){if((A=F.getElementsByTagName(I)).length>0){var H=[];
for(var G=0;G<A.length;G++){H.push(A[G])}return H}return[]}};var i=function(F,J){if(F.length<1){return[]}var I;if((f=/(\.|#)/.exec(J))!==k){if(D[f[1]]){I=f[1]}}I=I||"*";var H=[];for(var G=0;G<F.length;G++){H=H.concat(D[I](F[G],J))}return H};var E=function(F,I){var H=[F];var J=I.split(" ");for(var G=0;G<J.length;G++){H=i(H,J[G])}return H};var B=function(I,F,J){J=!!J;if(I.nodeType!==1&&I.nodeType!==9){return(J?[]:k)}if(!F||typeof F!=="string"){return(J?[]:k)}var H;var K=[];var L=F.split(",");for(var G=0;G<L.length;G++){H=E(I,L[G]);if(H&&H.length>0){K=K.concat(H);if(!J){break}}}if(J){return K}else{return K[0]}};j.dGetty=function(){var F=arguments;if(F.length==1){if(typeof(F[0])==="string"){return B(c,F[0])}}else{if(F.length==2){if(F[0].nodeType&&typeof(F[1])==="string"){return B(F[0],F[1])}}}return k};j.dGetties=function(){var F=arguments;if(F.length==1){if(typeof(F[0])==="string"){return B(c,F[0],y)}}else{if(F.length==2){if(F[0].nodeType&&typeof(F[1])==="string"){return B(F[0],F[1],y)}}}return[]
}})();(function(){var e,C,A;var D={"#":function(F,G){if((e=/(\S*)#(\S+)/.exec(G))!==k){var E=e[1];var H=e[2];if(E.length<1||F.nodeName.toLowerCase()==E){if(F.id==H){return y}}}return d},".":function(G,H){if((e=/(\S*)\.(\S+)/.exec(H))!==k){var F=e[1];var E=e[2];if(F.length<1||G.nodeName.toLowerCase()==F){if(G.className.indexOf(E)>-1){return y}}}return d},"*":function(F,G){var E=G;if(F.nodeName.toLowerCase()==E){return y}return d}};var i=function(E,G){var F;if((f=/(\.|#)/.exec(G))!==k){if(D[f[1]]){F=f[1]}}F=F||"*";return D[F](E,G)};var B=function(G,E){if(G.nodeType!==1){return d}var H=d;var I=E.split(",");for(var F=0;F<I.length;F++){H=i(G,I[F]);if(H){break}}return H};j.dChecky=function(){var E=arguments;if(E.length==2){if(E[0].nodeType&&typeof(E[1])==="string"){return B(E[0],E[1])}}return d}})();(function(){var e,B,A;var C={"#":function(F,H){if((e=/(\S*)#(\S+)/.exec(H))!==k){var E=((e[1]==="")?"*":e[1]);var I=e[2];var G=F;while(G){if(G.nodeName.toLowerCase()=="body"){break}if(E=="*"||G.nodeName.toLowerCase()==E){if(G.id==I){return G
}}G=G.parentNode}}return k},".":function(G,I){if((e=/(\S*)\.(\S+)/.exec(I))!==k){var F=((e[1]==="")?"*":e[1]);var E=e[2];var H=G;while(H){if(H.nodeName.toLowerCase()=="body"){break}if(F=="*"||H.nodeName.toLowerCase()==F){if(H.className.indexOf(E)>-1){return H}}H=H.parentNode}}return k},"*":function(F,J){var H=F;var I={};var K=J.split(",");for(var G=0,E=K.length;G<E;G++){I[K[G]]=y}while(H){if(H.nodeName.toLowerCase()=="body"){break}if(I[H.nodeName.toLowerCase()]){return H}H=H.parentNode}return k}};var D=function(F,H){var G;if((f=/(\.|#|:\w+)/.exec(H))!==k){if(C[f[1]]){G=f[1]}}G=G||"*";var E=k;if((E=C[G](F,H))!=k){return E}return k};var i=function(I,F){if(!F||typeof F!=="string"){return k}var H=I;var J=F.split(" ");for(var G=0,E=J.length;G<E;G++){if((H=D(H,J[G]))==k){return k}}return H};j.dFindy=function(){var E=arguments;if(E.length==1){throw new Error("need more arguments")}else{if(E.length==2){if(E[0].nodeType&&typeof(E[1])==="string"){return i(E[0],E[1])}}}return k}})();(function(){var e=function(A){this.selectSingleNode=function(B){if(!A){return k
}return A.selectSingleNode(B)};this.selectNodes=function(B){if(!A){return[]}return A.selectNodes(B)};this.getAttributeNode=function(B){if(!A){return k}return A.getAttributeNode(B)};this.hasChildNodes=function(){if(!A){return d}return A.hasChildNodes()};this.text=A?(A.textContent||A.text):k;this.type=A?A.nodeType:0;this.name=(A&&A.nodeType==1)?(A.nodeName||""):"";return this};e.prototype={getValueOrDefault:function(B,A){if(B===""){return A}else{if(typeof(A)==="number"){return(isNaN(B)?0:parseInt(B))}else{if(typeof(A)==="boolean"){return !!B}else{return B}}}},xText:function(A){A=A||"";var B=this.text;B=(B||"").trim();return this.getValueOrDefault(B,A)},xAttr:function(C,B){B=B||"";var A=this.getAttributeNode(C);var D=(!A)?"":A.nodeValue.trim();return this.getValueOrDefault(D,B)},xGet:function(A){return xGetty(this,A)},xGets:function(A){return xGetties(this,A)}};var i=["MSXML2.DOMDocument.6.0","MSXML2.DOMDocument.5.0","MSXML2.DOMDocument.4.0","MSXML4.DOMDocument","MSXML3.DOMDocument","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XmlDom"];
j.xCreate=function(C){if(!!(j.attachEvent&&!j.opera)){var B=(function(){var E=k;for(var D=0;D<i.length;D++){try{E=new ActiveXObject(i[D])}catch(F){}if(E!==k){return E}}return k})();if(B===k){return k}B.async=d;B.loadXML(C);if(B.parseError.errorCode!==0){return k}return new e(B)}else{var A=new DOMParser();var B=A.parseFromString(new String(C),"text/xml");return new e(B)}};j.xGetty=function(A,B){if(A===k){return k}return new e(A.selectSingleNode(B))};j.xGetties=function(D,F){if(D===k){return[]}var E=[];var B=D.selectNodes(F);for(var C=0,A=B.length;C<A;C++){E.push(new e(B[C]))}return E}})();(function(){var A={yyyy:/(\d{4})/,MM:/(\d{2})/,dd:/(\d{2})/,HH:/(\d{2})/,mm:/(\d{2})/,ss:/(\d{2})/,yy:/(\d{2})/,M:/([0-1]*\d)/,d:/([0-3]*\d)/,EEE:/(\uc77c|\uc6d4|\ud654|\uc218|\ubaa9|\uae08|\ud1a0)/};var e=["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"];function i(B){this.pattern=B}i.prototype={parse:function(B){var C={};this.pattern.replace(/(\w)\1*/g,function(D){if(A[D]){B=B.replace(A[D],function(E,F){C[D]=F;
return""})}return D});return new Date(Date.parse([Math.max(1,parseInt(C.MM||C.M||"01",10)),"/",Math.max(1,parseInt(C.dd||C.d||"01",10)),"/",(C.yyyy||C.yy||new Date().getFullYear())," ",C.HH||"00",":",C.mm||"00",":",C.ss||"00"].join("")))},format:function(B){return this.pattern.replace("yyyy",B.getFullYear()).replace("MM",(B.getMonth()+1).toPaddedString(2)).replace("dd",B.getDate().toPaddedString(2)).replace("HH",B.getHours().toPaddedString(2)).replace("mm",B.getMinutes().toPaddedString(2)).replace("ss",B.getSeconds().toPaddedString(2)).replace("yy",B.getYear()).replace("M",B.getMonth()+1).replace("d",B.getDate()).replace("EEE",e[B.getDay()])}};j.DateFormat=i})();j.swfobject=function(){var ab=u+"",P="object",aq="Shockwave Flash",av="ShockwaveFlash.ShockwaveFlash",O="application/x-shockwave-flash",ap="SWFObjectExprInst",V="onreadystatechange",am=j,H=c,R=navigator,ar=d,at=[F],M=[],al=[],ag=[],J,ao,ac,Z,ah=d,e=d,L,ae,K=y,ak=function(){var az=typeof H.getElementById!=ab&&typeof H.getElementsByTagName!=ab&&typeof H.createElement!=ab,aG=R.userAgent.toLowerCase(),ax=R.platform.toLowerCase(),aD=ax?/win/.test(ax):/win/.test(aG),aB=ax?/mac/.test(ax):/mac/.test(aG),aE=/webkit/.test(aG)?parseFloat(aG.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):d,aw=!+"\v1",aF=[0,0,0],aA=k;
if(typeof R.plugins!=ab&&typeof R.plugins[aq]==P){aA=R.plugins[aq].description;if(aA&&!(typeof R.mimeTypes!=ab&&R.mimeTypes[O]&&!R.mimeTypes[O].enabledPlugin)){ar=y;aw=d;aA=aA.replace(/^.*\s+(\S+\s+\S+$)/,"$1");aF[0]=parseInt(aA.replace(/^(.*)\..*$/,"$1"),10);aF[1]=parseInt(aA.replace(/^.*\.(.*)\s.*$/,"$1"),10);aF[2]=/[a-zA-Z]/.test(aA)?parseInt(aA.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof am.ActiveXObject!=ab){try{var aC=new ActiveXObject(av);if(aC){aA=aC.GetVariable("$version");if(aA){aw=y;aA=aA.split(" ")[1].split(",");aF=[parseInt(aA[0],10),parseInt(aA[1],10),parseInt(aA[2],10)]}}}catch(ay){}}}return{w3:az,pv:aF,wk:aE,ie:aw,win:aD,mac:aB}}(),I=function(){if(!ak.w3){return}if((typeof H.readyState!=ab&&H.readyState=="complete")||(typeof H.readyState==ab&&(H.getElementsByTagName("body")[0]||H.body))){D()}if(!ah){if(typeof H.addEventListener!=ab){H.addEventListener("DOMContentLoaded",D,d)}if(ak.ie&&ak.win){H.attachEvent(V,function(){if(H.readyState=="complete"){H.detachEvent(V,arguments.callee);
D()}});if(am==top){(function(){if(ah){return}try{H.documentElement.doScroll("left")}catch(aw){setTimeout(arguments.callee,0);return}D()})()}}if(ak.wk){(function(){if(ah){return}if(!/loaded|complete/.test(H.readyState)){setTimeout(arguments.callee,0);return}D()})()}Q(D)}}();function D(){if(ah){return}try{var ay=H.getElementsByTagName("body")[0].appendChild(aa("span"));ay.parentNode.removeChild(ay)}catch(az){return}ah=y;var aw=at.length;for(var ax=0;ax<aw;ax++){at[ax]()}}function ai(aw){if(ah){aw()}else{at[at.length]=aw}}function Q(ax){if(typeof am.addEventListener!=ab){am.addEventListener("load",ax,d)}else{if(typeof H.addEventListener!=ab){H.addEventListener("load",ax,d)}else{if(typeof am.attachEvent!=ab){G(am,"onload",ax)}else{if(typeof am.onload=="function"){var aw=am.onload;am.onload=function(){aw();ax()}}else{am.onload=ax}}}}}function F(){if(ar){au()}else{af()}}function au(){var aw=H.getElementsByTagName("body")[0];var az=aa(P);az.setAttribute("type",O);var ay=aw.appendChild(az);if(ay){var ax=0;
(function(){if(typeof ay.GetVariable!=ab){var aA=ay.GetVariable("$version");if(aA){aA=aA.split(" ")[1].split(",");ak.pv=[parseInt(aA[0],10),parseInt(aA[1],10),parseInt(aA[2],10)]}}else{if(ax<10){ax++;setTimeout(arguments.callee,10);return}}aw.removeChild(az);ay=k;af()})()}else{af()}}function af(){var aF=M.length;if(aF>0){for(var aE=0;aE<aF;aE++){var ax=M[aE].id;var aA=M[aE].callbackFn;var az={success:d,id:ax};if(ak.pv[0]>0){var aD=A(ax);if(aD){if(ad(M[aE].swfVersion)&&!(ak.wk&&ak.wk<312)){U(ax,y);if(aA){az.success=y;az.ref=X(ax);aA(az)}}else{if(M[aE].expressInstall&&Y()){var aH={};aH.data=M[aE].expressInstall;aH.width=aD.getAttribute("width")||"0";aH.height=aD.getAttribute("height")||"0";if(aD.getAttribute("class")){aH.styleclass=aD.getAttribute("class")}if(aD.getAttribute("align")){aH.align=aD.getAttribute("align")}var aG={};var aw=aD.getElementsByTagName("param");var aB=aw.length;for(var aC=0;aC<aB;aC++){if(aw[aC].getAttribute("name").toLowerCase()!="movie"){aG[aw[aC].getAttribute("name")]=aw[aC].getAttribute("value")
}}an(aH,aG,ax,aA)}else{N(aD);if(aA){aA(az)}}}}}else{U(ax,y);if(aA){var ay=X(ax);if(ay&&typeof ay.SetVariable!=ab){az.success=y;az.ref=ay}aA(az)}}}}}function X(az){var aw=k;var ax=A(az);if(ax&&ax.nodeName=="OBJECT"){if(typeof ax.SetVariable!=ab){aw=ax}else{var ay=ax.getElementsByTagName(P)[0];if(ay){aw=ay}}}return aw}function Y(){return !e&&ad("6.0.65")&&(ak.win||ak.mac)&&!(ak.wk&&ak.wk<312)}function an(az,aA,aw,ay){e=y;ac=ay||k;Z={success:d,id:aw};var aD=A(aw);if(aD){if(aD.nodeName=="OBJECT"){J=E(aD);ao=k}else{J=aD;ao=aw}az.id=ap;if(typeof az.width==ab||(!/%$/.test(az.width)&&parseInt(az.width,10)<310)){az.width="310"}if(typeof az.height==ab||(!/%$/.test(az.height)&&parseInt(az.height,10)<137)){az.height="137"}H.title=H.title.slice(0,47)+" - Flash Player Installation";var aC=ak.ie&&ak.win?"ActiveX":"PlugIn",aB="MMredirectURL="+am.location.toString().replace(/&/g,"%26")+"&MMplayerType="+aC+"&MMdoctitle="+H.title;if(typeof aA.flashvars!=ab){aA.flashvars+="&"+aB}else{aA.flashvars=aB}if(ak.ie&&ak.win&&aD.readyState!=4){var ax=aa("div");
aw+="SWFObjectNew";ax.setAttribute("id",aw);aD.parentNode.insertBefore(ax,aD);aD.style.display="none";(function(){if(aD.readyState==4){aD.parentNode.removeChild(aD)}else{setTimeout(arguments.callee,10)}})()}S(az,aA,aw)}}function N(ax){if(ak.ie&&ak.win&&ax.readyState!=4){var aw=aa("div");ax.parentNode.insertBefore(aw,ax);aw.parentNode.replaceChild(E(ax),aw);ax.style.display="none";(function(){if(ax.readyState==4){ax.parentNode.removeChild(ax)}else{setTimeout(arguments.callee,10)}})()}else{ax.parentNode.replaceChild(E(ax),ax)}}function E(aA){var az=aa("div");if(ak.win&&ak.ie){az.innerHTML=aA.innerHTML}else{var ax=aA.getElementsByTagName(P)[0];if(ax){var aB=ax.childNodes;if(aB){var aw=aB.length;for(var ay=0;ay<aw;ay++){if(!(aB[ay].nodeType==1&&aB[ay].nodeName=="PARAM")&&!(aB[ay].nodeType==8)){az.appendChild(aB[ay].cloneNode(y))}}}}}return az}function S(aH,aF,ax){var aw,az=A(ax);if(ak.wk&&ak.wk<312){return aw}if(az){if(typeof aH.id==ab){aH.id=ax}if(ak.ie&&ak.win){var aG="";for(var aD in aH){if(aH[aD]!=Object.prototype[aD]){if(aD.toLowerCase()=="data"){aF.movie=aH[aD]
}else{if(aD.toLowerCase()=="styleclass"){aG+=' class="'+aH[aD]+'"'}else{if(aD.toLowerCase()!="classid"){aG+=" "+aD+'="'+aH[aD]+'"'}}}}}var aE="";for(var aC in aF){if(aF[aC]!=Object.prototype[aC]){aE+='<param name="'+aC+'" value="'+aF[aC]+'" />'}}az.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+aG+">"+aE+"</object>";al[al.length]=aH.id;aw=A(aH.id)}else{var ay=aa(P);ay.setAttribute("type",O);for(var aB in aH){if(aH[aB]!=Object.prototype[aB]){if(aB.toLowerCase()=="styleclass"){ay.setAttribute("class",aH[aB])}else{if(aB.toLowerCase()!="classid"){ay.setAttribute(aB,aH[aB])}}}}for(var aA in aF){if(aF[aA]!=Object.prototype[aA]&&aA.toLowerCase()!="movie"){C(ay,aA,aF[aA])}}az.parentNode.replaceChild(ay,az);aw=ay}}return aw}function C(ay,aw,ax){var az=aa("param");az.setAttribute("name",aw);az.setAttribute("value",ax);ay.appendChild(az)}function W(ax){var aw=A(ax);if(aw&&aw.nodeName=="OBJECT"){if(ak.ie&&ak.win){aw.style.display="none";(function(){if(aw.readyState==4){i(ax)
}else{setTimeout(arguments.callee,10)}})()}else{aw.parentNode.removeChild(aw)}}}function i(ay){var ax=A(ay);if(ax){for(var aw in ax){if(typeof ax[aw]=="function"){ax[aw]=k}}ax.parentNode.removeChild(ax)}}function A(ay){var aw=k;try{aw=H.getElementById(ay)}catch(ax){}return aw}function aa(aw){return H.createElement(aw)}function G(ay,aw,ax){ay.attachEvent(aw,ax);ag[ag.length]=[ay,aw,ax]}function ad(ay){var ax=ak.pv,aw=ay.split(".");aw[0]=parseInt(aw[0],10);aw[1]=parseInt(aw[1],10)||0;aw[2]=parseInt(aw[2],10)||0;return(ax[0]>aw[0]||(ax[0]==aw[0]&&ax[1]>aw[1])||(ax[0]==aw[0]&&ax[1]==aw[1]&&ax[2]>=aw[2]))?y:d}function T(aB,ax,aC,aA){if(ak.ie&&ak.mac){return}var az=H.getElementsByTagName("head")[0];if(!az){return}var aw=(aC&&typeof aC=="string")?aC:"screen";if(aA){L=k;ae=k}if(!L||ae!=aw){var ay=aa("style");ay.setAttribute("type","text/css");ay.setAttribute("media",aw);L=az.appendChild(ay);if(ak.ie&&ak.win&&typeof H.styleSheets!=ab&&H.styleSheets.length>0){L=H.styleSheets[H.styleSheets.length-1]
}ae=aw}if(ak.ie&&ak.win){if(L&&typeof L.addRule==P){L.addRule(aB,ax)}}else{if(L&&typeof H.createTextNode!=ab){L.appendChild(H.createTextNode(aB+" {"+ax+"}"))}}}function U(ay,aw){if(!K){return}var ax=aw?"visible":"hidden";if(ah&&A(ay)){A(ay).style.visibility=ax}else{T("#"+ay,"visibility:"+ax)}}function aj(ax){var ay=/[\\\"<>\.;]/;var aw=ay.exec(ax)!=k;return aw&&typeof encodeURIComponent!=ab?encodeURIComponent(ax):ax}var B=function(){if(ak.ie&&ak.win){j.attachEvent("onunload",function(){var aB=ag.length;for(var aA=0;aA<aB;aA++){ag[aA][0].detachEvent(ag[aA][1],ag[aA][2])}var ay=al.length;for(var az=0;az<ay;az++){W(al[az])}for(var ax in ak){ak[ax]=k}ak=k;for(var aw in swfobject){swfobject[aw]=k}swfobject=k})}}();return{registerObject:function(aA,aw,az,ay){if(ak.w3&&aA&&aw){var ax={};ax.id=aA;ax.swfVersion=aw;ax.expressInstall=az;ax.callbackFn=ay;M[M.length]=ax;U(aA,d)}else{if(ay){ay({success:d,id:aA})}}},getObjectById:function(aw){if(ak.w3){return X(aw)}},embedSWF:function(aA,aG,aD,aF,ax,az,ay,aC,aE,aB){var aw={success:d,id:aG};
if(ak.w3&&!(ak.wk&&ak.wk<312)&&aA&&aG&&aD&&aF&&ax){U(aG,d);ai(function(){aD+="";aF+="";var aI={};if(aE&&typeof aE===P){for(var aK in aE){aI[aK]=aE[aK]}}aI.data=aA;aI.width=aD;aI.height=aF;var aL={};if(aC&&typeof aC===P){for(var aJ in aC){aL[aJ]=aC[aJ]}}if(ay&&typeof ay===P){for(var aH in ay){if(typeof aL.flashvars!=ab){aL.flashvars+="&"+aH+"="+ay[aH]}else{aL.flashvars=aH+"="+ay[aH]}}}if(ad(ax)){var aM=S(aI,aL,aG);if(aI.id==aG){U(aG,y)}aw.success=y;aw.ref=aM}else{if(az&&Y()){aI.data=az;an(aI,aL,aG,aB);return}else{U(aG,y)}}if(aB){aB(aw)}})}else{if(aB){aB(aw)}}},switchOffAutoHideShow:function(){K=d},ua:ak,getFlashPlayerVersion:function(){return{major:ak.pv[0],minor:ak.pv[1],release:ak.pv[2]}},hasFlashPlayerVersion:ad,createSWF:function(ay,ax,aw){if(ak.w3){return S(ay,ax,aw)}else{return u}},showExpressInstall:function(ay,az,aw,ax){if(ak.w3&&Y()){an(ay,az,aw,ax)}},removeSWF:function(aw){if(ak.w3){W(aw)}},createCSS:function(az,ay,ax,aw){if(ak.w3){T(az,ay,ax,aw)}},addDomLoadEvent:ai,addLoadEvent:Q,getQueryParamValue:function(az){var ay=H.location.search||H.location.hash;
if(ay){if(/\?/.test(ay)){ay=ay.split("?")[1]}if(az==k){return aj(ay)}var ax=ay.split("&");for(var aw=0;aw<ax.length;aw++){if(ax[aw].substring(0,ax[aw].indexOf("="))==az){return aj(ax[aw].substring((ax[aw].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(e){var aw=A(ap);if(aw&&J){aw.parentNode.replaceChild(J,aw);if(ao){U(ao,y);if(ak.ie&&ak.win){J.style.display="block"}}if(ac){ac(Z)}}e=d}}}}();function v(e,A){for(var i in A){e[i]=A[i]}return e}var o=function(){this.empty=true;this.shorthand=false;this.properties={}};o.TAGS_FOR_PRESENTATION={U:{textDecoration:"underline"},B:{fontWeight:"bold"},STRONG:{fontWeight:"bold"},I:{fontStyle:"italic"},EM:{fontStyle:"italic"},S:{textDecoration:"line-through"},STRIKE:{textDecoration:"line-through"},INS:{textDecoration:"underline"},DEL:{textDecoration:"line-through"},FONT:function(i){var e={};if(i.face){e.fontFamily=i.face}if(i.color){e.color=i.color}var A=["","x-small","small","medium","large","x-large","xx-large"];if(i.size){var B=i.size;
e.fontSize=isNaN(B)?B:A[Math.min(Math.max(1,B),6)]}return e}};o.FONT_RELATED_CSS_PROPERTIES={font:"font","font-style":"fontStyle","font-weight":"fontWeight","font-size":"fontSize","font-family":"fontFamily","text-decoration":"textDecoration",color:"color","background-color":"backgroundColor"};o.create=function(H,D){var I=new o();var C=o.TAGS_FOR_PRESENTATION[H];if(C){var G=(typeof C=="function")?C(D):C;for(var e in G){I.setProperty(e,G[e])}}var B=D.style;if(B){B=B.replace(/[\w-]+:\s?;/g,"");var F=B.split(/; ?|: ?/);for(var E=0;E<F.length-1;E+=2){var A=o.FONT_RELATED_CSS_PROPERTIES[F[E].toLowerCase()];if(A){if(A!="backgroundColor"||(o.TAGS_FOR_PRESENTATION[H]||H=="SPAN")){I.setProperty(A,F[E+1])}}}}return I.getComputedStyles()};o.FONT_CSS_REGEXP=/(.*?)(\w+)(\/\w+)?\s+(['"]?[\w\uac00-\ud7a3]+['"]?)$/;o.NORMAL_VALUE="normal";o.prototype.isEmpty=function(){return this.empty};o.prototype.setProperty=function(e,i){if(/^font$/i.test(e)){var A=this.fromShorthand(i);if(A){this.shorthand=true;v(this.properties,this.fromShorthand(i))
}}else{this.properties[e]=i}this.empty=false};o.prototype.getComputedStyles=function(){if(this.shorthand){return this.toShorthand()}else{return v({},this.properties)}};o.prototype.fromShorthand=function(B){var i=B.indexOf(","),A="";if(i>0){A=B.substring(i);B=B.substring(0,i)}var E=B.match(o.FONT_CSS_REGEXP);if(E===k){return k}var D=o.NORMAL_VALUE;var e={fontSize:E[2],lineHeight:(E[3]||D).replace("/",""),fontFamily:E[4]+A,fontWeight:D,fontStyle:D,fontVariant:D};var C=E[1];if(/bold|700/i.test(C)){e.fontWeight="bold"}if(/italic/i.test(C)){e.fontStyle="italic"}if(/small-caps/i.test(C)){e.fontVarient="small-caps"}return e};o.prototype.toShorthand=function(){var B=v({},this.properties);var A=o.NORMAL_VALUE;var i=[];["fontWeight","fontStyle","fontVarient"].each(function(C){if(B[C]!=A){i.push(B[C])}});if(B.lineHeight!=A){i.push(B.fontSize+"/"+B.lineHeight)}else{i.push(B.fontSize)}i.push(B.fontFamily);["fontWeight","fontStyle","fontVarient","fontSize","lineHeight","fontFamily"].each(function(C){delete B[C]
});var e={font:i.join(" ")};e=v(e,B);return e};(function(){function E(I,K){for(var J in K){I[J]=K[J]}return I}function A(L){var K={},I=L.split(",");for(var J=0;J<I.length;J++){K[I[J]]=true;K[I[J].toUpperCase()]=true}return K}var D=/<(?:(?:\/([A-Za-z][-A-Za-z0-9_:]*)[^>]*>)|(?:!--([\S\s]*?)-->)|(?:([A-Za-z][-A-Za-z0-9_:]*)((?:\s+(?:\/(?!>)|[^>\s=])+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*?)\s*(\/?)>))/g;var C=A("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed");var i=A("address,applet,blockquote,button,center,dd,del,dir,div,dl,dt,fieldset,form,frameset,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,p,pre,script,table,tbody,td,tfoot,th,thead,tr,ul");var F=A("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var");var B=A("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");var G=A("script,style,textarea");
var H={isEmpty:function(J){for(var I in J){return false}return true},intersection:function(L,J){var I={};for(var K in L){if(K in J&&L[K]===J[K]){I[K]=L[K]}}return I},difference:function(L,J){var I=E({},L);for(var K in J){delete I[K]}return I},union:function(L,J){var I=E({},L);for(var K in J){I[K]=J[K]}return I},isSubset:function(K,I){for(var J in I){if(I[J]!==K[J]){return false}}return true}};var e=this.HTMLTree=function(){this.current=null;this.depth=0;this.maxDepth=0};e.create=function(){var I=new e();I.openTag(1,"ROOT","",false,false);return I};e.parseAttributes=function(N){var M=/\s*([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g;var L,K={};if(N){while((L=M.exec(N))){var J=L[1].toLowerCase(),I=L[2]||L[3]||L[4]||"";if(J=="class"){J="className"}K[J]=I}}return K};e.prototype.openTag=function(M,I,P,K){var J=M==1?I.toUpperCase():null;var N={parent:this.current,nodeType:M,tagName:J,nodeData:I,restText:P||"",children:[],inheritingFontStyle:{},fontStyle:{},hasText:M==8||(M==3&&!/^(\r|\n)*$/.test(I)),valid:true,unary:M==1?K:true,hasKeyAttribute:false};
if(M==1){var Q=N.parent?N.parent.inheritingFontStyle:{};if(J=="TABLE"){Q={}}var L=e.parseAttributes(P);if(L.id||L.className){N.hasKeyAttribute=true}var R=o.create(J,L);N.fontStyle=R;var O=E({},Q);O=E(Q,R);N.inheritingFontStyle=O}if(this.current){this.current.children.push(N)}else{this.root=N;N.valid=false}this.depth+=1;this.maxDepth=Math.max(this.depth,this.maxDepth);this.current=N};e.prototype.unaryTag=function(I,J,K){this.openTag(I,J,K,true);this.closeTag()};e.prototype.closeTag=function(){this.depth-=1;this.current=this.current.parent};e.prototype.toString=function(){var I=[];var J=this.root;K(J);return I.join("");function K(M){if(J!=M){if(M.nodeType==1){I.push("<");I.push(M.nodeData);I.push(M.restText);I.push(">")}else{if(M.nodeType==3){I.push(M.nodeData)}else{if(M.nodeType==8){I.push("<!--");I.push(M.nodeData);I.push("-->")}}}}for(var L=0;L<M.children.length;L++){K(M.children[L])}if(J!=M&&!M.unary){I.push("</");I.push(M.nodeData);I.push(">")}}};e.prototype.cleanHTML=function(){if(!this.cleanedUp){this.removeUseless();
this.cleanedUp=true}var I=[];J(this.root);return I.join("");function J(L){if(L.valid){if(L.nodeType==1){I.push("<");I.push(L.nodeData);I.push(L.restText);I.push(">")}else{if(L.nodeType==3){I.push(L.nodeData)}else{if(L.nodeType==8){I.push("<!--");I.push(L.nodeData);I.push("-->")}}}}for(var K=0;K<L.children.length;K++){J(L.children[K])}if(L.valid&&!L.unary){I.push("</");I.push(L.nodeData);I.push(">")}}};e.prototype.postOrder=function(J){I(this.root);function I(L){for(var K=0;K<L.children.length;K++){I(L.children[K])}J(L)}};e.prototype.removeUseless=function(){var J=new Date().getTime();var I=0;this.postOrder(function(N){switch(N.nodeType){case 1:var L=N.tagName;var P={};for(var K=0;K<N.children.length;K++){var O=N.children[K];if(K==0){P=E({},O.fontStyle)}else{P=H.intersection(P,O.fontStyle)}if(!N.hasText){N.hasText=O.hasText}}var M=H.difference(N.fontStyle,P);N.fontStyle=H.union(N.fontStyle,P);if(!N.hasKeyAttribute&&(o.TAGS_FOR_PRESENTATION[L]||L=="SPAN")){if(H.isEmpty(M)||!N.hasText){I++;
N.valid=false}}break;case 3:N.fontStyle={};break;case 8:N.fontStyle={};break}})};this.HTMLParser=function(O){var I=true,M,J,P=0,V=[],Y=e.create(),W;V.empty=function(){return this.length===0};V.last=function(){return this[this.length-1]};while((M=D.exec(O))){var S=M.index;if(S>P){var X=O.substring(P,S);if(W){W.push(X)}else{T(X)}}P=D.lastIndex;if((J=M[1])){if(W&&G[J]){R(W.join(""));W=null}if(!W){K(J);continue}}if(W){W.push(M[0]);continue}if((J=M[3])){if(/="/.test(J)){continue}var L=!!(M[4]&&M[4].charAt(M[4].length-1)=="/");U(J,M[4],L);if(!W&&G[J]){W=[]}continue}if((J=M[2])){Q(J)}}T(O.substring(P));N();return{wellFormed:I,maxDepth:Y.maxDepth,cleanHTML:Y.cleanHTML()};function U(ab,ac,Z){if(B[ab]&&!V.empty()&&V.last().tagName==ab){K(ab)}var ad=[];Z=C[ab]||!!Z;if(!Z){V.push({tagName:ab,rest:ac,unary:Z});Y.openTag(1,ab,ac,Z);for(var aa=ad.length-1;aa>=0;aa--){U(ad[aa].tagName,ad[aa].rest,ad[aa].unary)}}else{Y.unaryTag(1,ab,ac)}}function K(ab){if(V.empty()){I=false;return}var ad=[],ac=-1,aa;for(aa=V.length-1;
aa>=0;aa--){var Z=V[aa];if(Z.tagName==ab){ac=aa;break}else{I=false;if(B[Z.tagName]){}else{ad.push(Z)}}}if(ac==-1){I=false;return}for(aa=V.length-1;aa>=ac;aa--){V.pop();Y.closeTag()}for(aa=ad.length-1;aa>=0;aa--){U(ad[aa].tagName,ad[aa].rest,ad[aa].unary)}}function T(Z){Y.unaryTag(3,Z)}function R(Z){Y.unaryTag(3,Z)}function Q(Z){Y.unaryTag(8,Z)}function N(){if(V.length>0){I=false;for(var Z=V.length-1;Z>=0;Z--){if(B[V[Z].tagName]){}else{}Y.closeTag()}}}}})();var h={__WORD_JOINER:"\ufeff",__WORD_JOINER_REGEXP:/\ufeff/g,__KEY:{ENTER:"13",DELETE:"46",SPACE:"32",BACKSPACE:"8",TAB:"9",PASTE:"86",CUT:"88"},I:{},X:{},define:function(e,i){return Object.extend(e,i)},available:function(i,e){if(!x("tx_"+e)){return d}if(!i){return d}if(i.use==d){return d}return y},getSWF:j.getSWF};(function(i){function A(C){var B=C;while(B.$reference){B=B.$reference}return B}function e(F){var D=F.constructor.superclass;if(D){var H=D.prototype.initialize;D.prototype.initialize=function(){this.$reference=F};var G=new D();
D.prototype.initialize=H;var C=function(I){if(!G[I]){return k}return function(){var M=arguments;var L=A(F);var J=L.$super;L.$super=G.$super;var K=G[I].apply(L,M);L.$super=J;return K}};var E={};for(var B in G){if(B.charAt(0)!="$"){if(typeof(G[B])=="function"){E[B]=C(B)}}}F.$super=E}}i.Class={create:function(C){var B=function(){var E=this.constructor.prototype;for(var D in E){if(E[D]&&typeof(E[D])==="object"){if(E[D].constructor==Array){this[D]=[].concat(E[D])}else{this[D]=Object.extend({},E[D])}}}e(this);var F=arguments;this.initialize.apply(this,F)};return i.Class.draft(C,B)},draft:function(E,F){var C=F?F:function(){e(this)};if(E.$const){Object.extend(C,E.$const)}if(E.$extend){Object.extend(C.prototype,E.$extend.prototype);C.superclass=E.$extend}if(E.$mixins){var D=$A(E.$mixins);D.each(function(G){Object.extend(C.prototype,G)})}for(var B in E){if(B.charAt(0)!="$"){C.prototype[B]=E[B]}}return C},overwrite:function(C,B){if(C.prototype){Object.extend(C.prototype,B)}return C}};i.Mixin=i.Faculty={create:function(D){var C={};
for(var B in D){if(D[B]&&typeof(D[B])==="object"){if(D[B].constructor==Array){C[B]=[].concat(D[B])}else{C[B]=Object.extend({},D[B])}}else{C[B]=D[B]}}return C},toClass:function(B,C){return i.Class.create(Object.extend({initialize:C?C:function(){}},B))}}})(h);(function(e){Object.extend(e,{installs:[],registers:[],modules:[],modulesX:[],install:function(A,i){i.desc="[install] "+A;e.installs.push(i)},register:function(A,i){i.desc="[register] "+A;e.registers.push(i)},module:function(A,i){i.desc="[module] "+A;e.modules.push(i)},moduleX:function(A,i){i.desc="[moduleX] "+A;e.modulesX.push(i)},invoke:function(I,E,H,A,B,C){for(var D=0,F=I.length;D<F;D++){var G=I[D];G(E,H,A,B,C)}},invokeInstallation:function(B,C,D,A,i){e.invoke(e.installs,B,C,D,A,i)},invokeRegisters:function(B,C,D,A,i){e.invoke(e.registers,B,C,D,A,i)},invokeModules:function(B,C,D,A,i){e.invoke(e.modules,B,C,D,A,i)},group:function(){},groupEnd:function(){}})})(h);j.Trex=h;(function(e){e.Ev={__EDITOR_PANEL_MOUSEDOWN:"editor.panel.mousedown",__CANVAS_PANEL_KEYDOWN:"canvas.panel.keydown",__CANVAS_PANEL_KEYUP:"canvas.panel.keyup",__CANVAS_PANEL_MOUSEDOWN:"canvas.panel.mousedown",__CANVAS_PANEL_MOUSEUP:"canvas.panel.mouseup",__CANVAS_PANEL_MOUSEOVER:"canvas.panel.mouseover",__CANVAS_PANEL_MOUSEOUT:"canvas.panel.mouseout",__CANVAS_PANEL_CLICK:"canvas.panel.click",__CANVAS_PANEL_DBLCLICK:"canvas.panel.dbclick",__CANVAS_PANEL_PASTE:"canvas.panel.paste",__CANVAS_PANEL_SCROLLING:"canvas.panel.scrolling",__IFRAME_LOAD_COMPLETE:"iframe.load.complete",__IFRAME_LOADING_TIME:"iframe.loading.time",__CANVAS_SOURCE_PANEL_CLICK:"canvas.source.panel.click",__CANVAS_SOURCE_PANEL_KEYDOWN:"canvas.source.panel.mousedown",__CANVAS_SOURCE_PANEL_MOUSEDOWN:"canvas.source.panel.mousedown",__CANVAS_TEXT_PANEL_CLICK:"canvas.text.panel.click",__CANVAS_MODE_CHANGE:"canvas.mode.change",__TOOL_CLICK:"toolbar.button.click",__TOOL_SHORTCUT_KEY:"toolbar.shortcut",__ON_SUBMIT:"editor.submit",__CANVAS_WRAP_WIDTH_CHANGE:"canvas.wrap.width.change",__CANVAS_HEIGHT_CHANGE:"canvas.height.change",__CANVAS_PANEL_QUERY_STATUS:"canvas.panel.style.change",__CANVAS_PANEL_DELETE_SOMETHING:"canvas.panel.delkey.press",__ENTRYBOX_ENTRY_ADDED:"entrybox.entryadded",__ENTRYBOX_ENTRY_MODIFIED:"entrybox.entrymodified",__ENTRYBOX_ENTRY_REMOVED:"entrybox.entryremoved",__ENTRYBOX_ALL_ENTRY_REMOVED:"entrybox.removed.all.perfectly",__ENTRYBOX_CAPACITY_UPDATE:"entrybox.capacity.update",__ATTACHBOX_SHOW:"attachbox.show",__ATTACHBOX_HIDE:"attachbox.hide",__CANVAS_BEFORE_UNLOAD:"canvas.unload",__CANVAS_ENTRY_ADDED:"canvas.entry.added",__COMMAND_NODE_ADDED:"cmd.entry.added",__CMD_ALIGN_LEFT:"align.left",__CMD_ALIGN_CENTER:"align.center",__CMD_ALIGN_RIGHT:"align.right",__CMD_ALIGN_FULL:"align.full",__CMD_ALIGN_IMG_LEFT:"align.img.left",__CMD_ALIGN_IMG_CENTER:"align.img.center",__CMD_ALIGN_IMG_FLOAT_LEFT:"align.img.floatleft",__CMD_ALIGN_IMG_FLOAT_RIGHT:"align.img.floatright",__TOOL_CELL_LINE_CHANGE:"tool.cell.line.change",__CANVAS_MODE_INITIALIZE:"canvas.mode.initialize",__CANVAS_DATA_INITIALIZE:"canvas.load.data",__ENTRYBOX_ENTRY_REFRESH:"entrybox.entryrefresh",__PASTE_SEARCHRESULT:"trex.paste.info",__RUNTIME_EXCEPTION:"editor.runtime.exception",__REPORT_TO_MAGPIE:"editor.report.magpie",__SHOULD_CLOSE_MENUS:"editor.shouldclosemenus",__AUTOSAVER_LIST_OPENED:"editor.autosaver.listopened"}
})(h);var m={fire:function(A,e){if(A&&A.tagName){var i=e[A.tagName.toLowerCase()];if(i){i(A,e)}else{m.propagateToParent(A,e)}}else{}},propagateToParent:function(i,e){var B=i.parentNode;if(B&&B.tagName&&B.tagName.toLowerCase){var A=e[B.tagName.toLowerCase()];if(A){A(B,e)}else{m.propagateToParent(B,e)}}},stopPropagation:function(){}};var p=function(A,B,e,i){return{data:A,style:{padding:B,backgroundColor:e,border:i}}};h.__CONFIG_COMMON={thumbs:{options:[{color:"#FF0000"},{color:"#FF5E00"},{color:"#FFBB00"},{color:"#FFE400"},{color:"#ABF200"},{color:"#1FDA11"},{color:"#00D8FF"},{color:"#0055FF"},{color:"#0900FF"},{color:"#6600FF"},{color:"#FF00DD"},{color:"#FF007F"},{color:"#000000"},{color:"#FFFFFF"},{color:"#FFD8D8"},{color:"#FAE0D4"},{color:"#FAECC5"},{color:"#FAF4C0"},{color:"#E4F7BA"},{color:"#CEFBC9"},{color:"#D4F4FA"},{color:"#D9E5FF"},{color:"#DAD9FF"},{color:"#E8D9FF"},{color:"#FFD9FA"},{color:"#FFD9EC"},{color:"#F6F6F6"},{color:"#EAEAEA"},{color:"#FFA7A7"},{color:"#FFC19E"},{color:"#FFE08C"},{color:"#FAED7D"},{color:"#CEF279"},{color:"#B7F0B1"},{color:"#B2EBF4"},{color:"#B2CCFF"},{color:"#B5B2FF"},{color:"#D1B2FF"},{color:"#FFB2F5"},{color:"#FFB2D9"},{color:"#D5D5D5"},{color:"#BDBDBD"},{color:"#F15F5F"},{color:"#F29661"},{color:"#F2CB61"},{color:"#E5D85C"},{color:"#BCE55C"},{color:"#86E57F"},{color:"#5CD1E5"},{color:"#6699FF"},{color:"#6B66FF"},{color:"#A366FF"},{color:"#F261DF"},{color:"#F261AA"},{color:"#A6A6A6"},{color:"#8C8C8C"},{color:"#CC3D3D"},{color:"#CC723D"},{color:"#CCA63D"},{color:"#C4B73B"},{color:"#9FC93C"},{color:"#47C83E"},{color:"#3DB7CC"},{color:"#4174D9"},{color:"#4641D9"},{color:"#7E41D9"},{color:"#D941C5"},{color:"#D9418D"},{color:"#747474"},{color:"#5D5D5D"},{color:"#980000"},{color:"#993800"},{color:"#997000"},{color:"#998A00"},{color:"#6B9900"},{color:"#2F9D27"},{color:"#008299"},{color:"#003399"},{color:"#050099"},{color:"#3D0099"},{color:"#990085"},{color:"#99004C"},{color:"#4C4C4C"},{color:"#353535"},{color:"#670000"},{color:"#662500"},{color:"#664B00"},{color:"#665C00"},{color:"#476600"},{color:"#22741C"},{color:"#005766"},{color:"#002266"},{color:"#030066"},{color:"#290066"},{color:"#660058"},{color:"#660033"},{color:"#212121"},{color:"#000000"}],transparent:{color:"transparent",border:"#999999",image:"#iconpath/ic_transparent4.gif?v=2",thumb:"#iconpath/txt_transparent.gif?v=2",thumbImage:"#iconpath/color_transparent_prev.gif?v=2"}},textbox:{options:[p("txc-textbox1","10px","#ffffff","1px solid #f7f7f7"),p("txc-textbox2","10px","#eeeeee","1px solid #eeeeee"),p("txc-textbox3","10px","#fefeb8","1px solid #fefeb8"),p("txc-textbox4","10px","#fedec7","1px solid #fedec7"),p("txc-textbox5","10px","#e7fdb5","1px solid #e7fdb5"),p("txc-textbox6","10px","#dbe8fb","1px solid #dbe8fb"),p("txc-textbox7","10px","#ffffff","1px dashed #cbcbcb"),p("txc-textbox8","10px","#eeeeee","1px dashed #c1c1c1"),p("txc-textbox9","10px","#fefeb8","1px dashed #f3c534"),p("txc-textbox10","10px","#fedec7","1px dashed #fe8943"),p("txc-textbox11","10px","#e7fdb5","1px dashed #9fd331"),p("txc-textbox12","10px","#dbe8fb","1px dashed #79a5e4"),p("txc-textbox13","10px","#ffffff","1px solid #cbcbcb"),p("txc-textbox14","10px","#eeeeee","1px solid #c1c1c1"),p("txc-textbox15","10px","#fefeb8","1px solid #f3c534"),p("txc-textbox16","10px","#fedec7","1px solid #fe8943"),p("txc-textbox17","10px","#e7fdb5","1px solid #9fd331"),p("txc-textbox18","10px","#dbe8fb","1px solid #79a5e4"),p("txc-textbox19","10px","#ffffff","3px double #cbcbcb"),p("txc-textbox20","10px","#eeeeee","3px double #c1c1c1"),p("txc-textbox21","10px","#fefeb8","3px double #f3c534"),p("txc-textbox22","10px","#fedec7","3px double #fe8943"),p("txc-textbox23","10px","#e7fdb5","3px double #9fd331"),p("txc-textbox24","10px","#dbe8fb","3px double #79a5e4")]}};
var t=function(){var i=d;var e=[];var E={};var H={dinoHost:"http://editor.daum.net",cdnHost:"http://s1.daumcdn.net/editor",wrapper:"tx_trex_container",form:"tx_editor_form",txIconPath:"images/icon/editor/",txDecoPath:"images/deco/contents/",params:[],events:{preventUnload:y,useHotKey:y},save:{},adaptor:{},toolbar:{},sidebar:{attachbox:{},embeder:{},attacher:{},searcher:{}},plugin:{}};var B=function(){return{Tool:H.toolbar,Sidebar:H.sidebar,Plugin:H.plugin,Adaptor:H.adaptor,Save:H.save,Attacher:H.sidebar.attacher,Embeder:H.sidebar.embeder,Searcher:H.sidebar.searcher}};var G=function(K,J){if(i){throw new Error("configure is already setup (addParameter)")}E[K]=J};var A={getUrl:function(L,M){if(L==k){return k}L=L.replace(/#host#path\/pages\//g,EditorJSLoader.getPageBasePath());L=L.replace(/#host/g,H.txHost);L=L.replace(/#path\/?/g,H.txPath);L=L.replace(/#cmnhost/g,H.dinoHost);L=L.replace(/#cdnhost/g,H.cdnHost);for(var J in E){L=L.replace(new RegExp("#".concat(J),"g"),H[E[J]])}if(M){for(var K in M){L=L.replace(new RegExp("#".concat(K),"g"),M[K])
}}return L},getPopFeatures:function(J){if(J==k){return k}if(typeof(J)==="string"){return J}var K=[];["toolbar","location","directories","menubar"].each(function(L){K.push(L+"="+(J[L]||"no"))});["scrollbars","resizable"].each(function(L){K.push(L+"="+(J[L]||"yes"))});["width","height"].each(function(L){K.push(L+"="+(J[L]||"500"))});["left","top"].each(function(L){K.push(L+"="+(J[L]||"100"))});return K.join(",")},getDecoPath:function(J){return J.replace(/#decopath\/?/,this.getUrl(H.txDecoPath))},getIconPath:function(J){return J.replace(/#iconpath\/?/,this.getUrl(H.txIconPath))},setup:function(J){x.deepcopy(H,J);H.params.each(function(K){G(K,K)});e.each(function(K){K(H)});i=y;this.setupVersion();return H},setupVersion:function(){H.txVersion=Editor.version},addParameter:function(K,J){G(K,J)},clone:function(J){return x.deepcopy({},J)},merge:function(){var J={};$A(arguments).each(function(K){x.deepcopy(J,K)});return J}};A.add=function(J,K){if(i){throw new Error("configure is already setup (mergeConfig)")
}x.deepcopy(H,J);if(K){e.push(K)}};A.get=function(J){return H[J]};var D=function(K,J,L){if(i){throw new Error("configure is already setup (mergeConfig)")}this[K]=this[K]||{};x.deepcopy(this[K],J);if(L){e.push(L)}};var C=function(J){return this[J]};var I=B();for(var F in I){A["add"+F]=D.bind(I[F]);A["get"+F]=C.bind(I[F])}return A}();j.TrexConfig=t;var l=function(){var A={};function e(B){return(B.indexOf("#iconpath")>-1)?t.getIconPath(B):B}function i(B){return(B.indexOf("#decopath")>-1)?t.getDecoPath(B):B}return{getMsg:function(C){var B=A[C]||"";return e(i(B))},addMsg:function(B){x.deepcopy(A,B)},printAll:function(){for(var B in A){if(A.hasOwnProperty(B)){}}}}}();j.TXMSG=l.getMsg;j.TrexMessage=l;var r=function(e){this.config=e||{}};r.prototype.set=function(F,E){var D=F.split(".");var e=D[D.length-1];var A=this.config;for(var C=0;C<D.length-1;C++){var B=D[C];if(!A[B]){A[B]={}}A=A[B]}if(x.isPrimitiveType(E)){A[e]=E}else{if(!A[e]){A[e]={}}x.deepcopy(A[e],E)}};r.prototype.getConfig=function(){return this.config
};j.EditorConfigBuilder=r;h.MarkupTemplate={};(function(){var e={};h.define(h.MarkupTemplate,{add:function(i,A){e[i]=A},get:function(i){if(!e[i]){return{evaluate:function(){return""},evaluateToDom:function(){return""}}}if(typeof(e[i])=="string"){var A=e[i].replace(/@[\w\.]+/g,function(B){return TXMSG(B)});e[i]=new Template(A)}return e[i]},splitList:function(I,E,C){var B={row:[]};var G=C.length;var F=B.row;for(var H=0;H<I;H++){F.push({col:[]});var i=F.last().col;for(var A=0;A<E;A++){var D={image:"",data:"&nbsp;",klass:""};if(H*E+A<G){if(typeof(C[H*E+A])=="string"){D.data=C[H*E+A]}else{D=Object.extend(D,C[H*E+A])}}i.push(D)}}return B}})})();var z={};(function(){var D={"%body":["body"],"%text":["#text","br"],"%element":["#element"],"%control":["img","object","hr","table","button","iframe"],"%inline":["span","font","u","i","b","em","strong","big","small","a","sub","sup","span"],"%block":["p","div","ul","ol","h1","h2","h3","h4","h5","h6","pre","dl","hr","table","button"],"%paragraph":["p","li","dd","dt","h1","h2","h3","h4","h5","h6","td","th","div","caption"],"%wrapper":["div","ul","ol","dl","pre","xmp","table","button"],"%innergroup":["li","dd","dt","td","th"],"%outergroup":["ul","ol","dl","tr","tbody","thead","tfoot","table"],"%tablegroup":["td","th","tr","tbody","thead","tfoot","table"],"%listgroup":["li","ul","ol"],"%datagroup":["dd","dt","dl"],"%listhead":["ul","ol"]};
var i={};for(var A in D){i[A]={};if(D[A]){$A(D[A]).each(function(E){i[A][E]=y})}}function e(E){var G={};var F=E.split(",");F.each(function(I){if(i[I]){for(var H in i[I]){G[H]=y}}else{G[I]=y}});return G}var C=h.Class.create({initialize:function(E){this.patterns=E;this.map=e(E)},hasParts:function(){return(this.patterns.length>0)},include:function(G){var F=e(G);for(var E in F){if(this.map[E]){return y}}return d},memberOf:function(G){var F=e(G);for(var E in this.map){if(F[E]){return y}}return d},extract:function(H){var G=e(H);var F=[];for(var E in this.map){if(G[E]){F.push(E)}}return z.translate(F.join(","))},getExpression:function(){if(!this.exprs){var F=[];for(var E in this.map){F.push(E)}this.exprs=F.join(",")}return this.exprs}});var B={};Object.extend(z,{translate:function(E){if(!B[E]){B[E]=new C(E)}return B[E]}})})();Object.extend(z,{__POSITION:{__START_OF_TEXT:-1,__MIDDLE_OF_TEXT:0,__END_OF_TEXT:1,__EMPTY_TEXT:-2}});Object.extend(z,{isElement:function(e){return e&&e.nodeType==1},isBody:function(e){return z.isElement(e)&&e.tagName=="BODY"
},isBlock:function(e){return z.kindOf(e,"%block")},isParagraph:function(e){return z.kindOf(e,"%paragraph")},isText:function(e){return z.kindOf(e,"%text")},isControl:function(e){return z.kindOf(e,"%control")},getOwnerDocument:function(e){return e.ownerDocument||e.document},getName:function(e){return((e&&e.nodeType==1)?e.nodeName.toLowerCase():"")},getText:function(e){return e.textContent||e.text||e.innerText||""},getLength:function(e){if(!e){return 0}if(e.nodeType==1){return e.childNodes.length}else{if(e.nodeType==3){return e.nodeValue.length}}return 0},indexOf:function(B){if(!B){return -1}var D=B.parentNode;for(var A=0,e=D.childNodes.length,C=D.childNodes;A<e;A++){if(C[A]==B){return A}}return -1},hasContent:function(i,e){if(!i||i.nodeType!=3){return y}var A=z.removeMeaninglessSpace(i.nodeValue);if(e){A=A.replace(h.__WORD_JOINER_REGEXP,"")}return(A!="")},removeEmptyTextNode:function(e){if(e&&e.nodeType==3&&!e.nodeValue){z.remove(e)}},hasUsefulChildren:function(i,e){if(!i){return d}var A=z.removeMeaninglessSpace(i.innerHTML);
if(e){A=A.replace(h.__WORD_JOINER_REGEXP,"")}if(!A){return d}if(A.stripTags()){return y}if(A.search(/<(img|br|hr)\s?[^>]*>/i)>-1){return y}if(A.search(/<span\sid="?tx_(start|end)_marker"?><\/span>/i)>-1){return y}return d},hasData:function(i,e){if(!i){return d}var A="";if(i.nodeType==1){A=i.innerHTML}else{A=i.nodeValue}A=z.removeMeaninglessSpace(A);if(A==""){return d}if(A.stripTags()!=""){return y}if(e){return d}if(A.search(/<br\s?\/?>/i)>-1){return y}return d},removeMeaninglessSpace:function(e){return e.replace(/(^[\f\n\r\t\v\u2028\u2029]*)|([\f\n\r\t\v\u2028\u2029]*$)/g,"")}});Object.extend(z,{search:function(B,E,e){var C=(B.length==1)?c:B[0];var D=B[B.length-1];var A=(!D||!C||!C.nodeType||typeof D!="string");if(A){return e}var i=z.translate(D);return E(C,i.getExpression())},find:function(){return this.search(arguments,dFindy,k)},collect:function(){return this.search(arguments,dGetty,k)},collectAll:function(){return this.search(arguments,dGetties,[])}});(function(){function A(C){if(C){if(typeof(C)==="function"){return C
}else{var D=z.translate(C);return function(E){if(E.nodeType==1){if(D.include("#element")){return y}else{return dChecky(E,D.getExpression())}}else{return D.include("#text")}}}}else{return k}}var B={};function e(D){D=D||"#element,#text";if(B[D]){return B[D]}var C=new i(D);B[D]=C;return C}var i=h.Class.create({initialize:function(C){this.pattern=C;this.translator=z.translate(C);this.hasClassPattern=C.indexOf(".")>=0;this.hasIdPattern=C.indexOf("#")>=0;this.matchesText=this.translator.include("#text");this.matchesElement=this.translator.include("#element")},test:function(F){var C=F.nodeType;var H=this.translator.map;if(C==1){if(this.matchesElement){return y}var E=F.tagName.toLowerCase();if(H[E]){return y}var G=[];if(this.hasClassPattern&&F.className){F.className.split(/\s/).each(function(J){G.push("."+J);G.push(E+"."+J)})}if(this.hasIdPattern&&F.id){var I=F.id;G.push("#"+I);G.push(E+"#"+I)}for(var D=0;D<G.length;D++){if(H[G[D]]){return y}}return d}else{if(C==3){return this.matchesText}}}});
Object.extend(z,{tagName:function(D,C){if(!D){return k}return D.tagName},kindOf:function(D,E){if(!D||!E){return d}var C=e(E);return C.test(D)},kindOf_old:function(C,D){if(!C||!D){return d}return A(D)(C)},ancestor:function(E,F){if(!E||!E.parentNode){return k}var D=e(F);var C=E.parentNode;while(C){if(z.isBody(C)){return k}if(D.test(C)){break}C=C.parentNode}return C},findAncestor:function(E,C,D){while(!D(E)){if(C(E)){return E}E=E.parentNode}return k},descendant:function(C,D){var E=z.descendants(C,D,y);if(E.length==0){return k}return E[0]},descendants:function(D,G,I){I=I||d;if(!D||!D.firstChild){return[]}var C=d;var E=e(G);var H=[];var F=function(L){if(I&&C){return}if(!z.first(L)){return}var M=z.children(L);for(var K=0,J=M.length;K<J;K++){if(E.test(M[K])){H.push(M[K]);C=y}else{F(M[K])}}};F(D);return H},children:function(E,F){var G=[];if(!E||!E.firstChild){return G}var D=e(F);var C=z.first(E);while(C){if(D.test(C)){G.push(C)}C=C.nextSibling}return G},next:function(E,F){if(!E||!E.nextSibling){return k
}var D=e(F);var C=E.nextSibling;while(C){if(z.hasContent(C)){if(D.test(C)){break}}C=C.nextSibling}return C},previous:function(E,F){if(!E||!E.previousSibling){return k}var D=e(F);var C=E.previousSibling;while(C){if(z.hasContent(C)){if(D.test(C)){break}}C=C.previousSibling}return C},first:function(E,F){if(!E||!E.firstChild){return k}var D=e(F);var C=E.firstChild;while(C){if(z.hasContent(C)){if(D.test(C)){break}}C=C.nextSibling}return C},last:function(E,F){if(!E||!E.lastChild){return k}var D=e(F);var C=E.lastChild;while(C){if(z.hasContent(C)){if(D.test(C)){break}}C=C.previousSibling}return C},extract:function(F,I,G){var H=[];if(!F||!I||!G){return H}var E=e(G);var C=d;var D=F.firstChild;while(D){if(z.include(D,I)){C=y}if(E.test(D)){H.push(D)}else{if(C){break}else{H=[]}}D=D.nextSibling}return C?H:[]},parent:function(C){if(!C||!C.parentNode){return k}return C.parentNode},body:function(D){if(!D||!D.parentNode){return k}var C=D.parentNode;while(C){if(z.isBody(C)){return C}C=C.parentNode}return k
},top:function(D,E){E=E||d;var C=D;while(z.first(C)){C=z.first(C)}if(E){return C}else{if(z.kindOf(C,"#tx_start_marker,#tx_end_marker")){C=C.nextSibling||C.parentNode}else{if(z.kindOf(C,"%control")){C=C.parentNode}}return C}},bottom:function(D,E){E=E||d;var C=D;while(z.last(C)){C=z.last(C)}if(E){return C}else{if(z.kindOf(C,"#tx_start_marker,#tx_end_marker")){C=C.previousSibling||C.parentNode}else{if(z.kindOf(C,"%control")){C=C.parentNode}}return C}},include:function(D,E){if(!D||!E){return d}if(D==E){return y}var C=E;while(C){if(z.isBody(C)){return d}else{if(C==D){return y}}C=C.parentNode}return d}})})();Object.extend(z,{insertFirst:function(e,i){if(!e||!i){return}if(e.firstChild){e.insertBefore(i,e.firstChild)}else{e.appendChild(i)}return i},insertAt:function(e,i){if(!e||!i){return}i.parentNode.insertBefore(e,i);return e},insertNext:function(i,A){if(!i||!A){return}var e=A.nextSibling;if(e){e.parentNode.insertBefore(i,e)}else{A.parentNode.appendChild(i)}return i},append:function(e,i){if(!e||!i){return
}e.appendChild(i);return i},remove:function(e){if(!e){return}if(e.parentNode){e.parentNode.removeChild(e)}e=k},html:function(i,e){if(!i){return}i.innerHTML=e||"";return i},clean:function(e){return z.html(e)},stuff:function(A,i){if(!A){return A}if(z.hasUsefulChildren(A,y)){return A}if(A.lastChild){var e=A;while(e.lastChild){e=e.lastChild}z.insertNext(i,e)}else{z.append(A,i)}return A}});Object.extend(z,{removeListIfEmpty:function(e){while(z.kindOf(e,"%listhead")&&e.childNodes.length==1&&z.kindOf(e.firstChild,"%listhead")){e=e.firstChild}while(z.kindOf(e,"%listhead")&&e.childNodes.length==0){var i=e.parentNode;z.remove(e);e=i}}});Object.extend(z,{moveChild:function(e,A,i,C){if(!e||!A){return}i=Math.min(Math.max(i||0),e.childNodes.length);C=Math.min(Math.max(C||e.childNodes.length),e.childNodes.length);if(i>=C){return}var B=i;while(B++<C&&i<e.childNodes.length){A.appendChild(e.childNodes[i])}},moveChildToParent:function(e){if(!e){return}while(e.firstChild){e.parentNode.insertBefore(e.firstChild,e)
}}});Object.extend(z,{replace:function(D,E){if(!D||!E){return k}if(z.getName(D)==z.getName(E)){z.remove(E);return D}else{var B=[],F=D.childNodes,e=F.length;for(var A=0;A<e;A++){B.push(F[A])}for(A=0;A<e;A++){var G=B[A];if(G.lastChild===D){var C=z.clone(G);z.moveChild(G,C);G.innerHTML="";E.appendChild(C)}else{E.appendChild(G)}}z.insertAt(E,D);z.remove(D);return E}},clone:function(A,e){var i=A.cloneNode(!!e);if(A.nodeType==1){i.removeAttribute("id")}return i}});Object.extend(z,{wrap:function(e,i){if(!e||!i){return k}if(i instanceof Array==d){i=[].concat(i)}z.insertAt(e,i[0]);i.each((function(A){z.append(e,A)}));return e},unwrap:function(e){if(!e){return k}var i=z.first(e);if(x.msie){e.removeNode()}else{z.moveChildToParent(e);z.remove(e)}return i}});Object.extend(z,{divideText:function(i,A){if(!z.isText(i)){return i}if(A<=0||A>=i.length){return i}var e=i.cloneNode(d);i.deleteData(A,i.length-A);e.deleteData(0,A);z.insertNext(e,i);return e},divideNode:function(C,D){if(!z.isElement(C)){return k
}var A=C.childNodes.length-D;var e=C.cloneNode(d);for(var B=0;B<A;B++){z.insertFirst(e,C.lastChild)}z.insertNext(e,C);return e},splitAt:function(i,e){if(!z.isElement(i)){return}var A=z.clone(i);z.moveChild(i,A,e+1,i.childNodes.length);z.insertNext(A,i);return A},divideTree:function(e,B){var i=B,C,A;do{A=i.parentNode;C=z.indexOf(i);i=z.divideNode(A,C)}while(i.previousSibling!=e);return i},divideParagraph:function(B){var i=B;var e=z.indexOf(B);var A=i;while(i){if(z.isBody(i)){break}else{if(z.kindOf(i,"td,th,%wrapper,%outergroup")){break}else{if(z.kindOf(i,"#tx_start_marker,#tx_end_marker")){e=z.indexOf(i)}else{if(z.isControl(i)){e=z.indexOf(i)}else{if(z.isText(i)){i=z.divideText(i,e);e=z.indexOf(i)}else{i=z.divideNode(i,e);e=z.indexOf(i);A=i;if(z.kindOf(i,"p,li,dd,dt,h1,h2,h3,h4,h5,h6")){break}}}}}}i=i.parentNode}return A},wrapInlinesWithP:function(C,B){var e=z.getOwnerDocument(C);var A=z.extract(B||e.body,C,"%text,%inline,%control");if(this.hasOnlySavedCaret(A,C)){return k}var i=e.createElement("p");
z.wrap(i,A);return i},hasOnlySavedCaret:function(e,A){var i=e.findAll(function(B){return B.nodeType!=3||B.nodeValue.trim()!=""});return this.isGoogRangeCaret(A)&&i.length==1&&i[0]==A},isGoogRangeCaret:function(e){return e&&/goog_[0-9]+/.test(e.id)}});Object.extend(z,{paragraphOf:function(e){if(!e){return"p"}var i=z.translate(e);if(i.memberOf("ul,ol")){return"li"}else{if(i.memberOf("dl")){return"dd"}else{if(i.memberOf("tr,tbody,thead,tfoot,table")){return"td"}else{return"p"}}}},inlineOf:function(){return"span"},outerOf:function(e){if(!e){return"span"}var i=z.translate(e);if(i.memberOf("li")){return"ol"}else{if(i.memberOf("dd,dt")){return"dl"}else{if(i.memberOf("td,th,tr")){return"table"}else{return"p"}}}}});(function(){var i=0;var B=h.Class.create({$const:{__FONT_SIZE_BASIS:9,__REG_EXT_NUMBER:new RegExp("[0-9.]+"),__REG_EXT_UNIT:new RegExp("px|pt|em")},initialize:function(){this.unitConverter={px2em:1/12,px2pt:9/12,em2px:12,em2pt:9,pt2px:12/9,pt2em:1/9}},calculate:function(G,E){if(G==k||G.length==0){G="0em"
}if(E==k||E.length==0){E="0em"}var J=this.extractSign(E);var H=this.extractUnit(G);var F=this.extractUnit(E);var D=this.extractNumber(G).toNumber();var C=this.extractNumber(E).toNumber();if(H!=F){if(this.unitConverter[H+"2"+F]){D*=this.unitConverter[H+"2"+F]}}var I=0;if(J=="-"){I=Math.max(D-C,0)}else{I=(D+C)}I=(Math.round(I*10)/10);if(I==0){return k}else{return I+F}},needCalculation:function(C){if(C==k||typeof C!="string"){return d}else{return(C.charAt(0)=="+"||C.charAt(0)=="-")}},extractSign:function(C){var D="+";if(C.charAt(0)=="+"||C.charAt(0)=="-"){D=C.charAt(0)}return D},extractNumber:function(E){var C=0;var D;if((D=E.match(B.__REG_EXT_NUMBER))!=k){C=D[0]}if(E.indexOf("%")>-1){C=C/100}return C},extractUnit:function(E){var C="em";var D;if((D=E.match(B.__REG_EXT_UNIT))!=k){C=D[0]}return C}});var A=new B();var e={colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",datetime:"dateTime",accesskey:"accessKey",tabindex:"tabIndex",enctype:"encType",maxlength:"maxLength",readonly:"readOnly",longdesc:"longDesc",cellPadding:"cellPadding",cellSpacing:"cellSpacing",more:"more",less:"less",style:"style"};
Object.extend(z,{applyAttributes:function(E,D){if(!z.isElement(E)){return}for(var C in D){if(C=="style"){z.applyStyles(E,D[C])}else{z.setAttribute(E,C,D[C])}}},removeAttributes:function(E,D){if(!z.isElement(E)){return}for(var C in D){if(C=="style"){z.removeStyles(D[C])}else{E.removeAttribute(C,i)}}},getAttribute:function(D,C){if(!z.isElement(D)){return k}if(D&&D.getAttribute){return D.getAttribute(e[C]||C)}else{return k}},setAttribute:function(D,C,F){if(!z.isElement(D)){return}if(F==k||F.length==0||F==0){D.removeAttribute(C,i)}else{if(e[C]){D.setAttribute(e[C],F)}else{try{D[C]=F}catch(E){D.setAttribute(e[C]||C,F)}}}},setStyles:function(C,I,F){var G=C.style.cssText;var H;var K=Object.extend({},I);if(K.font){if(F){C.style.font=K.font}else{if(C.style.cssText.indexOf("font:")==-1){C.style.cssText="font: "+K.font+"; "+C.style.cssText}}delete K.font}for(var D in K){var J;if(A.needCalculation(K[D])){J=A.calculate(C.style[D],K[D])}else{J=K[D]}if(J==k){J=""}if(D=="float"){D=x.msie?"styleFloat":"cssFloat"
}H=(!C.style[D]&&(D.indexOf("font")!=0||G.indexOf("font:")==-1))||F;var E=(D=="textDecoration")&&!C.style[D].include(J);if(H){C.style[D]=J}else{if(E){C.style[D]+=" "+J}}}z._clearUselessStyle(C)},applyStyles:function(D,C){this.setStyles(D,C,y)},addStyles:function(D,C){this.setStyles(D,C,d)},removeStyles:function(G,F){var E=G.style.cssText;var D=E;for(var C in F){C=C.replace(/([A-Z])/g,"-$1");E=E.replace(new RegExp("(^| )"+C+"\\s*:[^;]+;? ?","ig"),"")}if(D!=E){G.style.cssText=E;z._clearUselessStyle(G)}},_clearUselessStyle:function(C){var D=z.getAttribute(C,"style");if(!D){C.removeAttribute("style",i)}},getStyleText:function(C){return C.style.cssText},setStyleText:function(C,D){C.style.cssText=D;!D&&z._clearUselessStyle(C)}})})();Object.extend(z,{goInto:function(i,e){if(!i||!i.scrollIntoView){return}i.scrollIntoView(e)},getScrollTop:function(e){if(!e){return 0}return(e.documentElement.scrollTop||e.body.scrollTop)},setScrollTop:function(i,e){if(!i){return}if(i.documentElement.scrollTop){i.documentElement.scrollTop=e
}else{i.body.scrollTop=e}},getScrollLeft:function(e){if(!e){return 0}return(e.documentElement.scrollLeft||e.body.scrollLeft)},setScrollLeft:function(e,i){if(!e){return}if(e.documentElement.scrollLeft){e.documentElement.scrollLeft=i}else{e.body.scrollLeft=i}},getPosition:function(C,I){if(!C){return{x:0,y:0,width:0,height:0}}I=!!I;C=x(C);var G=(I)?x.cumulativeOffset(C):x.positionedOffset(C);var D;var F=C.style.display;if(F!="none"&&F!=k){D={width:C.offsetWidth,height:C.offsetHeight}}else{var A=C.style;var H=A.visibility;var E=A.position;var i=A.display;A.visibility="hidden";A.position="absolute";A.display="block";var e=C.clientWidth;var B=C.clientHeight;A.display=i;A.position=E;A.visibility=H;D={width:e,height:B}}return{x:G[0],y:G[1],width:D.width,height:D.height}},getWidth:function(i){var e=i.style.width;if(e.isPx()){return e.parsePx()}return i.offsetWidth},setWidth:function(i,e){z.applyStyles(i,{width:e})},getHeight:function(i){var e=i.style.height;if(e.isPx()){return e.parsePx()}return i.offsetHeight
},setHeight:function(i,e){z.applyStyles(i,{height:e})},replacePngPath:function(B){if(x.msie6){if(c.location.href.indexOf("http://")>-1){return}try{var E=x.getStyle(B,"filter");var A=/src='([^']+)'/.exec(E)[1];if(!A||A=="none"){return}else{if(A.indexOf("http://")>-1){return}}var i=c.location.href.split("/");i.push("css");i.pop();A=A.replace(/\.\.\//g,function(){i.pop();return""});var C=i.join("/")+"/"+A;B.style.filter=E.replace(/src='([^']+)'/,"src='"+C+"'")}catch(D){alert(D)}}}});Object.extend(z,{EMPTY_PARAGRAPH_HTML:(x.msie?"<p>&nbsp;</p>":"<p><br></p>")});j.$tom=z;(function(e){e.Util={_dispElIds:[],getDispElId:function(){var A;do{A="tx_entry_"+(Math.floor(Math.random()*90000)+10000)+"_"}while(e.Util._dispElIds.contains(A));e.Util._dispElIds.push(A);return A},generateKey:function(){return parseInt(Math.random()*100000000)},toStyleString:function(B){var C=[];for(var A in B){if(B[A]){C.push(A.replace(/([A-Z])/g,"-$1").toLowerCase());C.push(":");C.push(B[A]);C.push(";")}}return C.join("")
},toAttrString:function(B){var C=[];for(var A in B){if(B[A]){C.push(" "+A+'="'+B[A]+'"')}}return C.join("")},getMatchValue:function(C,B,D){var A;if((A=C.exec(B))!=k){return A[D]}else{return k}},getAttachmentType:function(B){B=(B||"").toLowerCase();var A=["image/jpg","image/jpeg","image/png","image/tiff","image/gif","image/bmp","image/x-jg","image/ief","image/pict","jpg","bmp","gif","png"];if(A.contains(B)){return"image"}return"file"},thumburl:function(A){A=(A||"").toLowerCase();switch(A){case"doc":case"docx":return i("#iconpath/pn_word.gif");case"xls":case"xlsx":return i("#iconpath/pn_xls.gif");case"ppt":case"pptx":return i("#iconpath/pn_ppt.gif");case"pdf":return i("#iconpath/pn_pdf.gif");case"txt":return i("#iconpath/pn_txt.gif");case"hwp":return i("#iconpath/pn_hwp.gif");case"zip":case"alz":return i("#iconpath/pn_zip.gif");case"mp3":case"wav":case"ogg":case"wma":case"mp4":case"ape":case"ra":case"ram":return i("#iconpath/pn_mp3.gif");case"avi":case"mpeg":case"wmv":case"asf":return i("#iconpath/pn_movie.gif");
case"swf":return i("#iconpath/pn_swf.gif");case"htm":case"html":return i("#iconpath/pn_html.gif");case"jpg":case"gif":case"png":case"bmp":return i("#iconpath/pn_etc.gif");default:return i("#iconpath/pn_etc.gif")}},prevurl:function(A){A=(A||"").toLowerCase();switch(A){case"doc":case"docx":return i("#iconpath/p_word_s.gif");case"xls":case"xlsx":return i("#iconpath/p_xls_s.gif");case"ppt":case"pptx":return i("#iconpath/p_ppt_s.gif");case"pdf":return i("#iconpath/p_pdf_s.gif");case"txt":return i("#iconpath/p_txt_s.gif");case"hwp":return i("#iconpath/p_hwp_s.gif");case"zip":case"alz":return i("#iconpath/p_zip_s.gif");case"mp3":case"wav":case"ogg":case"wma":case"mp4":case"ape":case"ra":case"ram":return i("#iconpath/p_mp3_s.gif");case"avi":case"mpeg":case"wmv":case"asf":return i("#iconpath/p_movie_s.gif");case"swf":return i("#iconpath/p_swf_s.gif");case"htm":case"html":return i("#iconpath/p_html_s.gif");case"jpg":return i("#iconpath/p_jpg_s.gif");case"gif":return i("#iconpath/p_gif_s.gif");case"png":case"bmp":return i("#iconpath/p_png_s.gif");
default:return i("#iconpath/p_etc_s.gif")}},getMatchedClassName:function(E,D){var A=d;var B="";for(var C=0;C<D.length;C++){B=D[C];if(x.hasClassName(E,B)){A=B;break}}return A},getAllAttributesFromEmbed:function(B){var E={};B=B.replace(/<embed|>/ig,"");try{var D=/(\w+)=((?:\")[^\"]+(?:\"|$)|(?:')[^']+(?:'|$)|(?:[^\"'][^ \n]+($| |\n)))/ig;var A;while((A=D.exec(B))!=k){E[A[1].trim().toLowerCase()]=A[2].replace(/^(\"|')/i,"").replace(/(\"|')$/i,"").trim()}}catch(C){}return E},getAllAttributes:function(C){var D={};var A;var B=new RegExp('style="[^"]*(?:width|WIDTH)\\s*:\\s*([0-9]+)px[^"]*"',"g");while((A=B.exec(C))!=k){D.width=A[1]}B=new RegExp('style="[^"]*(?:height|HEIGHT)\\s*:\\s*([0-9]+)px[^"]*"',"g");while((A=B.exec(C))!=k){D.height=A[1]}B=new RegExp('\\s+([a-zA-Z]+)="([^"]*)"',"g");while((A=B.exec(C))!=k){if(!D[A[1].toLowerCase()]){D[A[1].toLowerCase()]=A[2]}}B=new RegExp("\\s+([a-zA-Z]+)='([^']*)'","g");while((A=B.exec(C))!=k){if(!D[A[1].toLowerCase()]){D[A[1].toLowerCase()]=A[2]}}B=new RegExp("\\s+([a-zA-Z]+)=([^\\s>]*)","g");
while((A=B.exec(C))!=k){if(!D[A[1].toLowerCase()]){D[A[1].toLowerCase()]=A[2]}}return D}};e.HtmlCreator={createTableMarkup:function(I,E,C){var B=[];B.push('<table unselectable="on">');B.push("<tbody>");var G=C.length;var D;for(var H=0;H<I;H++){B.push("<tr>");for(var A=0;A<E;A++){if(H*E+A<G){D=C[H*E+A];if(D.image){var F=t.getIconPath(D.image);B.push('<td class="tx-menu-list-item"><a href="javascript:;"><span class="'+(D.klass||"")+'"><img src="'+F+'" data="'+D.data+'"/></span></a></td>')}else{B.push('<td class="tx-menu-list-item"><a href="javascript:;"><span class="'+(D.klass||"")+'">'+D.data+"</span></a></td>")}}else{B.push('<td class="tx-menu-list-item"><a href="javascript:;"><span class="">&nbsp;</span></a></td>')}}B.push("</tr>")}B.push("</tbody>");B.push("</table>");return B.join("\n")}};e.String={escapeQuot:function(A){return A.replace(new RegExp('"',"g"),"&quot;").replace(new RegExp("'","g"),"&#39;")},unescapeQuot:function(A){return A.replace(new RegExp("&quot;","gi"),'"').replace(new RegExp("&#39;","g"),"'")
},htmlspecialchars:function(A){return e.String.escapeQuot(A.replace(new RegExp("&","g"),"&amp;").replace(new RegExp("<","g"),"&lt;").replace(new RegExp(">","g"),"&gt;"))},unHtmlspecialchars:function(A){return e.String.unescapeQuot(A.replace(new RegExp("&amp;","gi"),"&").replace(new RegExp("&lt;","gi"),"<").replace(new RegExp("&gt;","gi"),">"))},parseAttribute:function(B,E){var F=new RegExp("(^|\\W)"+E+'="([^"]*)"',"gi");var D=new RegExp("(^|\\W)"+E+"='([^']*)'","gi");var C=new RegExp("(^|\\W)"+E+"=([^\\s>]*)","gi");var A;if(A=F.exec(B)){return A[2]}else{if(A=D.exec(B)){return A[2]}else{if(A=C.exec(B)){return A[2]}else{return""}}}},changeAttribute:function(A,E,H){var F=new RegExp("(^|\\W)"+E+'="([^"]*)"',"gi");var D=new RegExp("(^|\\W)"+E+"='([^']*)'","gi");var C=new RegExp("(^|\\W)"+E+"=([^\\s>]*)","gi");var B=new RegExp("<([\\w]+\\s*)","gi");var G=d;if(A.search(F)>-1){G=y;A=A.replace(F,H)}if(A.search(D)>-1){G=y;A=A.replace(D,H)}if(A.search(C)>-1){G=y;A=A.replace(C,H)}if(!G){A=A.replace(B,"<$1"+H+" ")
}return A}};e.Validator=e.Class.create({initialize:function(){},strip:function(A){return A.stripTags().replace(/&nbsp;/g,"").replace(e.__WORD_JOINER_REGEXP,"").trim()},exists:function(A){if(!A){return d}if(this.strip(A)==""){if(A.search(/<(img|iframe|embed|table|hr|script|TXDB)/i)<0){return d}}return y},equals:function(A,B){if(!A||!B){return d}if(A.search(/<(img|iframe|embed|table|hr|script|TXDB)/i)<0){if(this.strip(A)==this.strip(B)){return y}}return d}});e.Repeater=e.Class.create({initialize:function(A){this.execHandler=A},start:function(A){if(this.tItv){this.clear()}this.tItv=j.setInterval(this.onTimer.bind(this),A)},clear:function(){j.clearInterval(this.tItv);this.tItv=k},onTimer:function(){if(this.execHandler!=k){this.execHandler()}}});e.Timer=e.Class.create({initialize:function(A){this.execHandler=A},start:function(A){j.setTimeout(this.onTimer.bind(this),A)},onTimer:function(){if(this.execHandler!=k){this.execHandler()}}});e.Paging=e.Class.create({$const:{DEFAULT_PAGE_SIZE:5,DEFAULT_BLOCK_SIZE:10},initialize:function(B,A){this.data=B;
this.currentpage=A.initPage||1;this.totalrow=A.totalrow||this.getTotalRow();this.pagesize=A.pagesize||e.Paging.DEFAULT_PAGE_SIZE;this.blocksize=A.blocksize||e.Paging.DEFAULT_PAGE_SIZE;this.totalpage=Math.ceil(this.totalrow/this.pagesize);this.totalblock=Math.ceil(this.totalpage/this.blocksize)},getNextPage:function(){return(this.currentpage<this.totalpage)?this.currentpage+1:0},getPrevPage:function(){return(this.currentpage>1)?this.currentpage-1:0},getNextBlock:function(){var A=Math.ceil(this.currentpage/this.blocksize);return(A<this.totalblock)?A*this.blocksize+1:0},getPrevBlock:function(){var A=Math.ceil(this.currentpage/this.blocksize);return(A>1)?(A-2)*this.blocksize+1:0},getPageList:function(){var B=[];var A=Math.ceil(this.currentpage/this.blocksize)-1;var D=(A*this.blocksize+1);var E=Math.min(this.totalpage,(D+this.blocksize-1));for(var C=D;C<=E;C++){B.push(C)}return B},movePage:function(A){this.currentpage=A||this.currentpage},getOnePageData:function(){var A=[];var D=(this.currentpage-1)*this.pagesize;
var B=Math.min(this.currentpage*this.pagesize,this.totalrow);for(var C=D;C<B;C++){A.push(this.data[C])}return A},getTotalRow:function(){return this.data.length}});e.Slidebar=e.Class.create({initialize:function(A){this.elContext=A.el;this.knobWidth=A.knobWidth;this.isDisabled=d;this.handler=function(C){if(!this.isDisabled&&typeof A.handler=="function"){A.handler(C)}};this.logicObj={interval:A.interval||5,min:A.min||0,max:A.max||100};this.physicObj={min:0,width:A.barSize||100};this.physicObj.max=this.physicObj.width-this.knobWidth;this.physicObj.interval=this.logicObj.interval*this.physicObj.max/this.logicObj.max;this.startPos=0;this.startX=0;this.isDrag=d;this.result=0;var B=z.collect(this.elContext,"dd.tx-slide");z.collect(B,"span.tx-slide-min").innerHTML="";z.collect(B,"span.tx-slide-max").innerHTML="";this.bindEvent();this.setKnobPosition(A.defaultValue||A.min||0)},regenerate:function(A){A=parseInt(A*this.physicObj.width/this.logicObj.max);this.setKnobPosition(A)},bindEvent:function(){var C=z.collect(this.elContext,"dd.tx-slide");
var B=z.collect(C,"a.tx-slide-prev");var A=z.collect(C,"a.tx-slide-next");var E=z.collect(C,"div.tx-slide-bar");var D=this.elKnob=z.collect(C,"div.tx-slide-knob");x.observe(D,"mousedown",function(F){this.isDrag=y;this.startPos=this.getKnobPosition();this.startX=F.clientX;x.stop(F)}.bind(this));x.observe(D,"mouseup",function(){this.isDrag=d}.bind(this));x.observe(this.elContext,"mousemove",function(F){if(this.isDrag){this.setKnobPosition(this.startPos+F.clientX-this.startX);x.stop(F);this.handler(this.result)}}.bind(this));x.observe(B,"click",function(H){var G=Math.round(this.physicObj.interval)-1;var F=this;var I=function(){var J=F.getKnobPosition();F.setKnobPosition(J-1);if(G-->0){setTimeout(I,10)}else{F.handler(F.result)}};I();x.stop(H)}.bind(this));x.observe(A,"click",function(H){var G=Math.round(this.physicObj.interval);var F=this;var I=function(){var J=F.getKnobPosition();F.setKnobPosition(J+1);if(--G>0){setTimeout(I,10)}else{F.handler(F.result)}};I();x.stop(H)}.bind(this));x.observe(this.elContext,"mouseup",function(){if(this.isDrag){this.isDrag=d
}}.bind(this));x.observe(D,"click",function(F){x.stop(F)}.bind(this));x.observe(E,"click",function(G){if(!this.isDrag){var F=G.layerX||G.x;this.setKnobPosition(F-this.knobWidth/2);this.handler(this.result)}}.bind(this))},getKnobPosition:function(){var A=x.getStyle(this.elKnob,"left");return A.parsePx()},setKnobPosition:function(A){A=(A<this.physicObj.max)?A:this.physicObj.max;A=(A>this.physicObj.min)?A:this.physicObj.min;x.setStyle(this.elKnob,{left:A.toPx()});this.result=Math.round(A*this.logicObj.interval/this.physicObj.interval)},setDisable:function(){this.isDisabled=y},setEnable:function(){this.isDisabled=d},getDisabled:function(){return this.isDisabled}});e.DynamicSizer=e.Class.create({initialize:function(A){this.config=A;this.wrapper=A.el;this.elEventContext=tx.div({className:"tx-dynamic-sizer-context"});this.currentSize={row:0,col:0};this.dynamicSizingEnabled=y;if(!A.moveHandler){A.moveHandler=function(){}}if(!A.clickHandler){A.clickHandler=function(){}}this.wrapper.appendChild(this.elEventContext);
this.previewTable=new e.DynamicSizer.PreviewTable({parentEl:this.elEventContext,mouseOverHandler:this.changeSize.bind(this),mouseClickHandler:this.selectSize.bind(this)})},clear:function(){this.dynamicSizingEnabled=y;this.changeSize(0,0)},changeSize:function(B,A){if(this.dynamicSizingEnabled){this.currentSize.row=B;this.currentSize.col=A;this._changeSelectionSize(B,A);this.config.moveHandler(B,A)}},_changeSelectionSize:function(B,A){this.previewTable.moveSelectionPos(B,A)},toggleDynamicSizing:function(){this.dynamicSizingEnabled=!this.dynamicSizingEnabled;if(this.dynamicSizingEnabled){this.selection.enableResize()}else{this.selection.disableResize()}},selectSize:function(A){this.config.clickHandler(A,this.currentSize)},getCurruentSize:function(){return this.currentSize}});e.DynamicSizer.PreviewTable=e.Class.create({$const:{DEFAULT_TD_STYLE:{},DEFAULT_TABLE_PROPERTY:{cellpadding:"0",cellspacing:"1"},MAX_SIZE:{COL:10,ROW:10}},initialize:function(B){this.config=B;this.elTable=k;this.elTable=this.generateTable("tx-event");
this.elSelection=tx.div({className:"tx-selection"},this.generateTable("tx-selection"));var C=this.generateTable("tx-panel");this.eventBinding();B.parentEl.appendChild(this.elTable);B.parentEl.appendChild(this.elSelection);B.parentEl.appendChild(C);var D=z.getPosition(this.elTable);var A=e.DynamicSizer.PreviewTable.MAX_SIZE;this.cellSize={width:Math.round((D.width-D.x)/A.COL),height:(D.height-D.y)/A.ROW}},generateTable:function(E){var C=tx.tbody();var B=e.DynamicSizer.PreviewTable;for(var D=0;D<B.MAX_SIZE.ROW;D++){var G=tx.tr();for(var A=0;A<B.MAX_SIZE.COL;A++){var H=tx.td(tx.div({style:B.DEFAULT_TD_STYLE}));H=this.setCoordToAttr(H,A+1,D+1);G.appendChild(H)}C.appendChild(G)}var F=tx.table(B.DEFAULT_TABLE_PROPERTY);x.addClassName(F,E||"");F.appendChild(C);return F},moveSelectionPos:function(D,B){var C=(B*this.cellSize.width).toPx();var A=(D*this.cellSize.height).toPx();x.setStyle(this.elSelection,{width:C,height:A})},setCoordToAttr:function(B,A,C){B.setAttribute("col",A);B.setAttribute("row",C);
return B},getCoordFromAttr:function(A){return{col:A.getAttribute("col")||0,row:A.getAttribute("row")||0}},eventBinding:function(){this.mouseOverHandler=this.config.mouseOverHandler;this.mouseClickHandler=this.config.mouseClickHandler;var A=this;var C=function(F){var E=x.element(F)||{};var D=(E.tagName||"").toUpperCase();if(E&&D=="TD"){var G=A.getCoordFromAttr(E);A.mouseOverHandler(G.row,G.col)}x.stop(F)};var B=function(D){A.mouseClickHandler(D)};x.observe(this.elTable,"mouseover",C);x.observe(this.elTable,"click",B)}});e.ImageScale=e.Class.create({initialize:function(C,B){if(!C.imageurl){return}if(C.actualwidth){return}var A=function(E,D){C.actualwidth=E;C.actualheight=D;if(B){B(E,D)}};setTimeout(function(){var D=new Image();D.onerror=function(){D=k};if(D.onreadystatechange){D.onreadystatechange=function(){if(this.readyState=="complete"){A(this.width,this.height);D=k}}}else{D.onload=function(){A(this.width,this.height);D=k}}D.src=C.imageurl},10)}});function i(A){var B=t.getIconPath(A);return B+""
}})(h);h.ImageResizer=h.Class.create({initialize:function(F,A){var C=F;var E=A.maxWidth||200;var D=A.maxHeight||200;var B=A.defImgUrl;var e=A.onComplete||function(){};function i(L,I){var J,H;var K=L.width;var G=L.height;if(K==E&&G==D){H=E;J=D}else{if(K<E&&G<D){H=K;J=G}else{J=D;H=Math.floor(D*(K/G));if(H>E){H=E;J=Math.floor(E*(G/K))}}}C.width=H;C.height=J;C.src=I;e(H,J)}this.execResize=function(G){var H=new Image();H.onerror=function(){C.width=E;C.height=D;C.src=B;H=k};if(H.onreadystatechange){H.onreadystatechange=function(){if(this.readyState=="complete"){i(H,G)}}}else{H.onload=function(){i(H,G)}}H.src=G}}});h.Flash={DEFAULT:{flashvar:{debug:d+""},paraObj:{allowScriptAccess:"always",quality:"low",menu:d+"",scale:"noscale",salign:"tl",loop:d+""},attrObj:{bgcolor:"#FFFFFF"}},minFlashVer:"9.0.45",load:function(e,A,E,H,i){var G=x.extend({},h.Flash.DEFAULT.flashvar);var B=x.extend({},h.Flash.DEFAULT.paraObj);var C=x.extend({},h.Flash.DEFAULT.attrObj);var F=H?H:{};x.extend(G,F.flashvarObj);x.extend(B,F.paraObj);
x.extend(C,F.attrObj);C.id=E;if(!x(A)){c.body.appendChild(tx.div({id:A}))}var D=k;if(i){D=function(I){i(I.success)}}swfobject.embedSWF(e,A,F.width?F.width:"0",F.height?F.height:"0",this.minFlashVer,d,G,B,C,D)},get:function(e){return swfobject.getObjectById(e)},getPlayerVersion:function(){return swfobject.getFlashPlayerVersion()},hasPlayerVersion:function(e){return swfobject.hasFlashPlayerVersion(e)},ready:function(i,e){if(!h.Flash.get(i)){setTimeout(function(){h.Flash.ready(i,e)},500);return}setTimeout(e,500)}};j.$txSWF=function(e){return h.Flash.get(e)};h.TableUtil={isDaumTable:function(e){return x.hasClassName(e,"txc-table")},cloneNodeForEmptyTd:function(i){var e;e=i.cloneNode(d);h.TableUtil.emptyTd(e);return e},emptyTd:function(e){e.innerHTML="&nbsp;"},splitWidthByColSpan:function(i){var e;if(1<i.colSpan&&i.style.width){e=parseInt(i.style.width,10);z.setStyles(i,{width:Math.floor(e/i.colSpan)+"px"},y)}},splitHeightByRowSpan:function(i){var e;if(1<i.rowSpan&&i.style.height){e=parseInt(i.style.height,10);
z.setStyles(i,{height:Math.floor(e/i.rowSpan)+"px"},y)}},collapseCaret:function(A,i){var e;try{e=A.getProcessor().createGoogRangeFromNodes(i,0,i,0);e.select()}catch(B){}},getClosestByTagNames:function(e,A){var i;if(A&&typeof A.tagName==="string"){i=A.tagName.toLowerCase();if(i!=="body"){if(e.contains(i)){return A}else{return arguments.callee(e,A.parentNode)}}}return k},getTableIndexerFromTd:function(i){var e;e=h.TableUtil.getClosestByTagNames(["table"],i);return new h.TableUtil.Indexer(e)}};h.TableUtil.Boundary=h.Class.create({initialize:function(e){this.top=-1;this.left=-1;this.bottom=-1;this.right=-1;if(e){this.set(e)}},getTop:function(){return this.top},getLeft:function(){return this.left},getBottom:function(){return this.bottom},getRight:function(){return this.right},setTop:function(e){this.top=e},setLeft:function(e){this.left=e},setBottom:function(e){this.bottom=e},setRight:function(e){this.right=e},set:function(e){if("top" in e){this.setTop(e.top)}if("left" in e){this.setLeft(e.left)
}if("bottom" in e){this.setBottom(e.bottom)}if("right" in e){this.setRight(e.right)}},isValid:function(){if(this.top===-1){return d}if(this.left===-1){return d}if(this.bottom===-1){return d}if(this.right===-1){return d}return y},addBoundary:function(B,i){var A,e;A=this.addStartBoundary(B,i);e=this.addEndBoundary(B,i);return A||e},merge:function(A){var i,e;i=this.addStartBoundary(A.top,A.left);e=this.addEndBoundary(A.bottom,A.right);return i||e},addStartBoundary:function(A,e){var i;i=d;if(this.top===-1||A<this.top){this.top=A;i=y}if(this.left===-1||e<this.left){this.left=e;i=y}return i},addEndBoundary:function(A,e){var i;i=d;if(this.bottom===-1||this.bottom<A){this.bottom=A;i=y}if(this.right===-1||this.right<e){this.right=e;i=y}return i}});h.TableUtil.Indexer=h.Class.create({initialize:function(e){this.indexData=k;this.table=k;this.resetIndex();this.setTable(e);this.makeIndex()},getRowSize:function(){return this.indexData.length},getColSize:function(){if(0<this.indexData.length){return this.indexData[0].length
}return 0},getTd:function(i,e){if(this.indexData[i]){if(this.indexData[i][e]){return this.indexData[i][e]}}return k},getTdArr:function(C){var e,B,A,i;e=[];B=C.top;while(B<=C.bottom){A=this.indexData[B];i=C.left;while(i<=C.right){if(e.contains(A[i])===d){e.push(A[i])}i+=1}B+=1}return e},getTdArrHasTop:function(B){var A,E,D,e,C;A=[];e=this.getColSize();for(C=0;C<e;C+=1){E=this.getTd(B,C);D=this.getTd(B-1,C);this.uniquePushWhenDifferent(A,E,D)}return A},getTdArrHasBottom:function(B){var A,E,D,e,C;A=[];e=this.getColSize();for(C=0;C<e;C+=1){E=this.getTd(B,C);D=this.getTd(B+1,C);this.uniquePushWhenDifferent(A,E,D)}return A},getTdArrHasLeft:function(B){var A,E,D,e,C;A=[];e=this.getRowSize();for(C=0;C<e;C+=1){E=this.getTd(C,B);D=this.getTd(C,B-1);this.uniquePushWhenDifferent(A,E,D)}return A},getTdArrHasRight:function(B){var A,E,D,e,C;A=[];e=this.getRowSize();for(C=0;C<e;C+=1){E=this.getTd(C,B);D=this.getTd(C,B+1);this.uniquePushWhenDifferent(A,E,D)}return A},getBoundary:function(F){var e,D,C,E,A,B,i;
e=new h.TableUtil.Boundary();D=this.indexData;C=D.length;for(E=0;E<C;E+=1){A=D[E];if(A){B=A.length;for(i=0;i<B;i+=1){if(A[i]===F){e.addBoundary(E,i)}}}}return e},reload:function(){this.resetIndex();this.makeIndex()},uniquePushWhenDifferent:function(e,A,i){if(A!==i){if(e.contains(A)===d){e.push(A)}}},resetIndex:function(){this.indexData=[]},setTable:function(e){this.table=e},makeIndex:function(){var D,C,F,E,A,B,i,e;D=this.table.rows;C=D.length;for(F=0;F<C;F+=1){E=D[F];A=E.cells;B=A.length;for(i=0;i<B;i+=1){e=A[i];this.addCellIndex(F,e)}}},addCellIndex:function(F,e){var E,D,B,i,A,C;E=this.getNextCellIndex(this.indexData[F]);B=e.rowSpan;for(D=0;D<B;D+=1){i=F+D;if(!this.indexData[i]){this.indexData[i]=[]}C=e.colSpan;for(A=0;A<C;A+=1){this.indexData[i][E+A]=e}}},getNextCellIndex:function(A){var B,e;if(!A){return 0}e=A.length;for(B=0;B<e;B+=1){if(!A[B]){break}}return B}});h.I.XHRequester=h.Faculty.create({createXMLHttp:function(){var A=k;try{if(j.XMLHttpRequest){A=new XMLHttpRequest()}else{if(j.ActiveXObject){A=new ActiveXObject("Msxml2.XMLHTTP");
if(!A){A=new ActiveXObject("Microsoft.XMLHTTP")}}}return A}catch(i){return k}},sendRequest:function(i,A,B,C,G,H){if(A==k&&A!=""){return k}var E=k;var D=this.createXMLHttp();if(D==k){return k}var I=function(){if(D.status==200){if(i.toUpperCase()=="HEAD"){E=G(D.getAllResponseHeaders())}else{E=G(D.responseText)}}else{E=H(D.status)}D=k};try{if(C){D.onreadystatechange=function(){if(D.readyState==4){I()}}}if(i.toUpperCase()=="POST"){D.open("POST",A,C);D.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8");D.setRequestHeader("X-Requested-With","XMLHttpRequest");D.setRequestHeader("Content-Length",B.length);D.setRequestHeader("Connetion","close");D.send(B)}else{if(B&&B.length>0){A=A+((A.indexOf("?")>-1)?"&":"?")+B}D.open(i.toUpperCase(),A,C);D.setRequestHeader("X-Requested-With","XMLHttpRequest");D.send(k)}if(!C){I()}return E}catch(F){return k}}});h.Responder={callbacks:{},process:function(){},newKey:function(){var e="exe_"+Math.floor(Math.random()*100000);if(this[e]){return this.newKey()
}else{return e}},register:function(i){var e=this.newKey();this.callbacks[e]=function(A){i(A);this.callbacks[e]=k}.bind(this);return e}};h.I.FHRequester=h.Faculty.create({sendRequest:function(e,i,A,C,F,J,I){var B=h.Flash.get("tx_fhr");if(!B){B=function(){var K=t.getUrl("#cmnhost/swf/FHR3.swf?v=2");h.Flash.load(K,"tx_fhr_target","tx_fhr");return h.Flash.get("tx_fhr")}();setTimeout(this.sendRequest.bind(this,e,i,A,C,F,J),100);return}if(!B.send){setTimeout(this.sendRequest.bind(this,e,i,A,C,F,J),50);return}var H=h.Responder.register(F);var E='Trex.Responder.callbacks["'+H+'"]';var G="Trex.Responder.process";if(J){var D=h.Responder.register(function(L,K){if(L==-1){J(L,K)}else{if(typeof I=="function"){I(L,K)}}});G='Trex.Responder.callbacks["'+D+'"]'}if(i.charAt(0)==="/"){i="http://"+c.location.host+i}if(e.toUpperCase()=="GET"){if(!A){A=""}else{i=i+((i.indexOf("?")>-1)?"&":"?")+A}}if(i){B.send(e,i,A,E,G)}}});h.I.JSRequester=h.Faculty.create({importScript:function(B,E,D,G){if(B==k&&B!=""){return k
}E=E||"utf-8";D=D||c;try{var C=D.getElementsByTagName("head")[0]||D.documentElement;var A=D.createElement("script");A.type="text/javascript";A.charset=E;A.src=B;var i=d;A.onload=A.onreadystatechange=function(){if(!i&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){i=y;if(G){G()}A.onload=A.onreadystatechange=k;if(C&&A.parentNode){C.removeChild(A)}}};C.insertBefore(A,C.firstChild)}catch(F){console.log(F)}}});j.$stop={};j.$propagate={};h.I.JobObservable=h.Faculty.create({jobObservers:{},observeJob:function(i,e){if(!this.jobObservers[i]){this.jobObservers[i]=[]}this.jobObservers[i].push(e)},reserveJob:function(B,i,A){A=A||500;if(!this.jobObservers[B]){this.jobObservers[B]=[]}var e=this;this.jobObservers[B].push(function(){var C=$A(arguments);setTimeout(function(){i.apply(e,C)},A)})},fireJobs:function(B){var i=this;var A=$A(arguments).slice(1);if(!this.jobObservers[B]){return}try{this.jobObservers[B].each(function(e){e.apply(i,A)})}catch(C){if(C!=$stop){throw C}}}});
h.I.KeyObservable=h.Faculty.create({keyObservers:{},observeKey:function(A,i){var e=function(B){return(B.ctrlKey?"T":"F")+(B.altKey?"T":"F")+(B.shiftKey?"T":"F")+"_"+B.keyCode}(A);if(!this.keyObservers[e]){this.keyObservers[e]=[]}this.keyObservers[e].push(i)},fireKeys:function(B){var A=function(D){return(D.ctrlKey?"T":"F")+(D.altKey?"T":"F")+(D.shiftKey?"T":"F")+"_"+D.keyCode}(B);if(!this.keyObservers[A]){return}var i=this;var C=d;var e=function(){if(!C){x.stop(B);C=y}};this.keyObservers[A].each(function(D){try{D.apply(i,[B]);e()}catch(E){if(E===$stop){e()}else{if(E!==$propagate){}}}})},registerKeyEvent:function(i){try{x.observe(i,"keydown",this.fireKeys.bind(this),y)}catch(A){}}});h.I.ElementObservable=h.Faculty.create({elementObservers:{},observeElement:function(B,e){if(B==k){this.observeElement({tag:"*tx-final-body*"},e)}else{if(B.length){for(var A=0;A<B.length;A++){var C=B[A];this.observeElement(C,e)}}else{if(!this.elementObservers[B.tag]){this.elementObservers[B.tag]={}}if(!B.klass){B.klass="*tx-all-class*"
}if(!this.elementObservers[B.tag][B.klass]){this.elementObservers[B.tag][B.klass]=[]}this.elementObservers[B.tag][B.klass].push(e)}}},fireElements:function(C){if(!C){return}var B=C;var A=$A(arguments).slice(1);var i=this;try{var E;if(z.kindOf(B,"img,hr,table,button,iframe")){E=this.collectObserverByElement(B.nodeName.toLowerCase(),B.className);if(E){E.each(function(e){e.apply(i,[B].concat(A))})}}else{while(B){E=this.collectObserverByElement(B.nodeName.toLowerCase(),B.className);if(E){E.each(function(e){e.apply(i,[B].concat(A))})}if(z.isBody(B)){break}B=z.parent(B)}}}catch(D){if(D!=$stop){throw D}}this.fireFinally()},fireFinally:function(){var e=this;var i=$A(arguments).slice(1);var A=this.collectObserverByElement("*tx-final-body*");if(A){A.each(function(B){B.apply(e,[k].concat(i))})}},collectObserverByElement:function(i,e){if(!this.elementObservers[i]){return k}var C=[];e=e||"";if(e!=""){var A=e.split(" ");for(var B in this.elementObservers[i]){if(A.contains(B)){C.push(this.elementObservers[i][B])
}}}if(this.elementObservers[i]["*tx-all-class*"]){C.push(this.elementObservers[i]["*tx-all-class*"])}return C.flatten()}});h.I.MouseoverObservable=h.Faculty.create({mouseoverObservers:{},observeMouseover:function(e,i,A){if(!this.mouseoverObservers[e]){this.mouseoverObservers[e]={success:[],fail:[],flag:d}}this.mouseoverObservers[e]["success"].push(i);if(A){this.mouseoverObservers[e]["fail"].push(A)}},fireMouseover:function(D){if(!D){return}var C=D;var A=this;try{for(var B in this.mouseoverObservers){this.mouseoverObservers[B].flag=d}while(C){var G=this.collectMouseoverObserver(C);if(G.length>0){var F=this.getPositionByNode(C);G.each(function(e){e.apply(A,[C,F])})}if(z.isBody(C)){break}C=z.parent(C)}}catch(E){if(E!=$stop){throw E}}this.runMouseoverFailHandler()},runMouseoverFailHandler:function(){var A=[];for(var e in this.mouseoverObservers){if(!this.mouseoverObservers[e].flag){A.push(this.mouseoverObservers[e]["fail"])}}A.flatten().each(function(i){i()})},collectMouseoverObserver:function(F){var G=[];
var B=F.className||"";var A=F.tagName;if(A){A=A.toLowerCase();if(this.mouseoverObservers[A]){G.push(this.mouseoverObservers[A]["success"]);this.mouseoverObservers[A]["flag"]=y}}if(B!=""){var C=B.split(" ");for(var E=0,e=C.length;E<e;E++){var D=A+"."+C[E];if(this.mouseoverObservers[D]){G.push(this.mouseoverObservers[D]["success"]);this.mouseoverObservers[D]["flag"]=y}}}return G.flatten()}});h.I.Runnable=h.Faculty.create({isRunning:d,repeater:k,threads:[],startThread:function(e){if(this.repeater){this.repeater.clear()}else{this.repeater=new h.Repeater(this.runThread.bind(this))}this.repeater.start(e)},stopThread:function(){this.repeater.clear()},runThread:function(){if(this.isRunning){return}if(this.threads.length>0){this.isRunning=y;(this.threads.shift())();this.isRunning=d}},putThread:function(e,i){if(i){this.threads.unshift(e)}else{this.threads.push(e)}}});l.addMsg({"@menu.pallete.revert":"\uae30\ubcf8\uc0c9\uc73c\ub85c","@adoptor.label":"\uac00\ub098\ub2e4","@adoptor.transparent":"\ud22c\uba85"});
h.MarkupTemplate.add("menu.colorpallete.text",'#{for:items}<li class="tx-menu-list-item" style="background-color:#{color}"><a unselectable="on" style="color:#{text}">#{label}</a></li>#{/for:items}');h.MarkupTemplate.add("menu.colorpallete.thumb",'#{for:items}<li class="tx-menu-list-item" unselectable="on" style="background-color:#{color};border:none;#{if:image!=null}background-image:url(#{image})#{/if:image};"></li>#{/for:items}');h.MarkupTemplate.add("menu.colorpallete.revert",'<p class="tx-pallete-revert"><a unselectable="on" href="javascript:;" title="@menu.pallete.revert">@menu.pallete.revert</a></p>');h.I.ColorPallete=h.Faculty.create({isGradeInit:d,isPickerDisplayed:d,onregenerated:function(e,i){this.setColorValueAtInputbox(i)},setColorValueAtInputbox:function(A){if(!A){return}if(typeof A!="string"&&A.toString){A=A.toString()}var B=A.split("|")[0];if(!h.Color.getValidColor(B)){B="#000000"}var e=z.collect(this.elInner,"p.tx-pallete-input input");var i=z.collect(this.elInner,"p.tx-pallete-input span");
if(A&&e&&i){e.value=B;i.style.backgroundColor=B}},hookEvent:function(A){var H=this.elMenu;var K=this.elInner=z.collect(H,"div.tx-menu-inner");var G=z.collect(K,"ul.tx-pallete-text-list");if(A.texts){var N=A.texts.options;h.MarkupTemplate.get("menu.colorpallete.text").evaluateToDom({items:N},G);var C=z.collectAll(G,"li");this.addColorClickEvent(C,N)}else{K.removeChild(G);G=k}if(A.thumbs){var I=!!A.needTrans;var F=[].concat(A.thumbs.options);if(I){F.pop();F.push(Object.extend({},A.thumbs.transparent))}var L=z.collect(K,"ul.tx-pallete-thumb-list");h.MarkupTemplate.get("menu.colorpallete.thumb").evaluateToDom({items:F},L);var D=z.collectAll(L,"li");this.addColorClickEvent(D,F)}this.elPicker=z.collect(K,"div.tx-pallete-picker");var i=z.collect(K,"div.tx-pallete-buttons");var e=this.elMore=z.collect(i,"p.tx-pallete-more a");x.observe(e,"click",this.togglePicker.bind(this));if(A.needRevert){z.insertFirst(i,h.MarkupTemplate.get("menu.colorpallete.revert").evaluateAsDom({}));x.observe(z.collect(i,"p.tx-pallete-revert a"),"click",function(O){this.onSelect(O,k);
this.hide()}.bind(this))}var M=z.collect(this.elInner,"p.tx-pallete-input");this.elPreview=z.collect(M,"span");var E=this.elInput=z.collect(M,"input");var B=this.elEnter=z.collect(M,"a");var J=this;x.observe(E,"blur",function(){J.lastValue=E.value});x.observe(B,"click",this.onColorEnter.bind(this))},addColorClickEvent:function(E,A){for(var C=0,e=E.length;C<e;C++){var B=E[C];var D=A[C];x.observe(B,"click",this.onSelect.bindAsEventListener(this,D.color+(D.text?"|"+D.text:"")))}},_generatePicker:function(){var i=this.elPicker;var A=z.collect(i,"div.tx-pallete-pickerbox");x.observe(A,"mouseout",this.onMouseOut.bind(this));var B=this.elChromaBar=z.collect(A,"div.tx-chromabar");z.replacePngPath(B);x.observe(B,"mousedown",this.onChromDown.bindAsEventListener(this));x.observe(B,"mousemove",this.onChromMove.bindAsEventListener(this));x.observe(B,"mouseup",this.onChromUp.bindAsEventListener(this));this.elHueBar=z.collect(A,"div.tx-huebar");var e=this.elHueBar;this.hueDownHandler=this.onHueDown.bindAsEventListener(this);
this.hueMoveHandler=this.onHueMove.bindAsEventListener(this);this.hueUpHandler=this.onHueUp.bindAsEventListener(this);this.hueClickHandler=this.onHueClick.bindAsEventListener(this);x.observe(e,"mousedown",this.hueDownHandler);x.observe(e,"click",this.hueClickHandler);this.nColWidth=150;this.nColHeight=120;this.nHueHeight=120;this.mRGB={r:0,g:0,b:0};this.mHSV={h:0,s:100,v:100};this.setHueColor("FF0000")},reinitGrade:function(){var i=x.cumulativeOffset(this.elMenu);var e=x.positionedOffset(this.elChromaBar);this.iChromPos={x:(i[0]+e[0]),y:(i[1]+e[1])};e=x.positionedOffset(this.elHueBar);this.iHuePos={x:(i[0]+e[0]),y:(i[1]+e[1])}},onColorEnter:function(i){var e;if(this.elInput.value==TXMSG("@adoptor.transparent")){e="transparent"}else{e=h.Color.getValidColor(this.elInput.value)}if(e!==k){this.onSelect(i,e)}this.hide()},previewColor:function(e){this.changeColor(e)},onMouseOut:function(){if(this.lastValue!==k&&this.lastValue!==u&&this.mousedownDetected){this.changeColor(this.lastValue)}},changeColor:function(e){e=h.Color.getHexColor(e);
this.elPreview.style.backgroundColor=e;if(e=="transparent"){this.elInput.value=TXMSG("@adoptor.transparent")}else{this.elInput.value=e}},enterColor:function(){if(this.elInput.value==TXMSG("@adoptor.transparent")){this.changeColor("transparent")}else{if(this.elInput.value.length==7){var e=h.Color.getValidColor(this.elInput.value);if(e!==k){this.changeColor(e)}}}},togglePicker:function(A){var e=this.elMore;var i=this.elPicker;if(this.isPickerDisplayed){e.className="tx-more-down";x.hide(i)}else{e.className="tx-more-up";x.show(i);if(x.msie6){i.style.padding="1px";setTimeout(function(){i.style.padding="0px"},0)}if(!this.isGradeInit){this._generatePicker();this.isGradeInit=y;this.reinitGrade()}}this.isPickerDisplayed=!this.isPickerDisplayed;x.stop(A)},getChromCoords:function(i){var A=(i.clientX-this.iChromPos.x)+q.scrollLeft;var e=(i.clientY-this.iChromPos.y)+q.scrollTop;A=Math.min(this.nColWidth,Math.max(0,A));e=Math.min(this.nColHeight,Math.max(0,e));return{x:A,y:e}},getHueCoords:function(e){var i=e.offsetY||e.layerY;
return Math.min(this.nHueHeight,Math.max(0,i))},getColorByEvent:function(e,C){var A=(e/(this.nColWidth))*100;var i=(1-C/(this.nColHeight))*100;var B=3;A=Math.floor(Math.min(Math.max(A,0),100));if(A<B){A=0}else{if(A>100-B){A=100}}i=Math.floor(Math.min(Math.max(i,0),100));if(i<B){i=0}else{if(i>100-B){i=100}}this.mHSV.s=A;this.mHSV.v=i;this.mRGB=this.hsv2rgb(this.mHSV.h,this.mHSV.s,this.mHSV.v);return this.rgb2hex(this.mRGB.r,this.mRGB.g,this.mRGB.b)},onChromDown:function(){this.mousedownDetected=y},onChromMove:function(i){if(this.mousedownDetected){var A=this.getChromCoords(i);var e=this.getColorByEvent(A.x,A.y);this.previewColor(e)}},onChromUp:function(i){var A=this.getChromCoords(i);var e=this.getColorByEvent(A.x,A.y);this.previewColor(e);this.lastValue=e;this.mousedownDetected=d},getHueByEvent:function(A){var e=parseInt((A/(this.nHueHeight))*360);this.mHSV.h=Math.floor(Math.min(Math.max(e,0),360));var i=this.hsv2rgb(this.mHSV.h,100,100);return this.rgb2hex(i.r,i.g,i.b)},setHueColor:function(e){this.elChromaBar.style.backgroundColor=e
},onHueDown:function(){x.observe(c,"mousemove",this.hueMoveHandler);x.observe(c,"mouseup",this.hueUpHandler)},onHueMove:function(i){var A=this.getHueCoords(i);var e=this.getHueByEvent(A);this.setHueColor(e)},onHueClick:function(i){var A=this.getHueCoords(i);var e=this.getHueByEvent(A);this.setHueColor(e)},onHueUp:function(){x.stopObserving(c,"mousemove",this.hueMoveHandler);x.stopObserving(c,"mouseup",this.hueUpHandler)},hex2rgb:function(e){this.mRGB.r=(this.toDec(e.substr(0,1))*16)+this.toDec(e.substr(1,1));this.mRGB.g=(this.toDec(e.substr(2,1))*16)+this.toDec(e.substr(3,1));this.mRGB.b=(this.toDec(e.substr(4,1))*16)+this.toDec(e.substr(5,1));return this.mRGB},toDec:function(i){var e="0123456789ABCDEF";return e.indexOf(i.toUpperCase())},rgb2hex:function(A,i,e){A=A.toString(16);if(A.length==1){A="0"+A}i=i.toString(16);if(i.length==1){i="0"+i}e=e.toString(16);if(e.length==1){e="0"+e}return"#"+A+i+e},hsv2rgb:function(A,L,K){A%=360;L/=100;K/=100;var e=0,B=0,F=0;if(L===0){e=Math.floor(K*255);
B=Math.floor(K*255);F=Math.floor(K*255)}else{var D=A/60;var C=Math.floor(D);var J=K*(1-L);var H=K*(1-L*(D-C));var G=K*(1-L*(1-(D-C)));var i=0,E=0,I=0;if(C===0){i=K;E=G;I=J}else{if(C==1){i=H;E=K;I=J}else{if(C==2){i=J;E=K;I=G}else{if(C==3){i=J;E=H;I=K}else{if(C==4){i=G;E=J;I=K}else{if(C==5){i=K;E=J;I=H}}}}}}e=Math.floor(i*255);B=Math.floor(E*255);F=Math.floor(I*255)}return{r:e,g:B,b:F}},rgb2hsv:function(i,E,J){var B=(i/255);var H=(E/255);var L=(J/255);var D=0,M=0,K=0;var I=Math.min(B,H,L);var A=Math.max(B,H,L);var G=A-I;K=G;if(G===0){D=0;M=0}else{M=G/A;var F=(((A-B)/6)+(G/2))/G;var e=(((A-H)/6)+(G/2))/G;var C=(((A-L)/6)+(G/2))/G;if(B==A){D=C-e}else{if(H==A){D=(1/3)+F-C}else{if(L==A){D=(2/3)+e-F}}}if(D<0){D+=1}if(D>1){D-=1}}return{h:D,s:M,v:K}}});h.Color={getHexColor:function(i){i=i.trim();if(i.indexOf("rgb")<0){if(i.length>0&&(i.indexOf("-moz-use")>-1||i=="transparent")){return"transparent"}else{return i}}if(/rgba\s?\((0,\s?){3}0\)/i.test(i)){return"transparent"}var e=i.match(/rgba?\((\d+),\s*(\d+),\s*(\d+),?\s*\d*\)/i);
if(!e){return i}e.shift();if(e.length<3){return i}var C;var B="#";for(var A=0;A<3;A++){C=parseInt(e[A].trim()).toString(16).toUpperCase();if(C.length==1){B=B.concat("0"+C)}else{if(C.length>2){B=B.concat("FF")}else{B=B.concat(""+C)}}}return B},getValidColor:function(i){if(i===k||i=="transparent"){return"transparent"}var e=i.match(/#?([0-9a-f]{6}|[0-9a-f]{3})/i);if(e===k||i.length>8){return k}if(e[1].length==3){return"#"+e[1]+e[1]}else{return"#"+e[1]}},getOptColor:function(i,A){if(!i||i.length!=7||i.charAt(0)!="#"){return"#e5e5e5"}i=i.substring(1,7).toLowerCase();A=isNaN(A)?100:A;var B="#";var D,e;for(var C=0;C<3;C++){D=parseInt(i.substr(C*2,2),16);e=Math.round(Math.floor((255-D)*(1-A*0.01)+D*(A*0.02))).toString(16);if(e.length==1){B+="0"+e}else{if(e.length>2){B+="ff"}else{B+=e}}}return B}};h.I.CookieBaker=h.Faculty.create({cookieName:k,cookieValue:k,initCookie:function(e,i){this.cookieName=e;this.cookieValue=function(){var C=c.cookie.split(";");for(var B=0;B<C.length;B++){var A=C[B].replace(/^\s+/,"");
if(A.indexOf(e+"=")==0){return A.substring(e.length+1)}}return k}()||"";this.maxCnt=i||3},writeCookie:function(i,C){var e=this.cookieName,B;if(C){var A=new Date();A.setTime(new Date().getTime()+C*24*60*60*1000);B="; expires="+A.toGMTString()}else{B=""}if(i===k){i=""}c.cookie=e+"="+i+B+"; path=/";this.cookieValue=i},readCookie:function(){if(this.cookieValue===k+""){return k}return this.cookieValue},eraseCookie:function(){var e=this.cookieName;this.writeCookie(e,"",-1)},extractOptions:function(e,A){var B=e.toMap("data");var i=[];A.split("|").compact().each(function(C){if(B[C]){i.push(B[C])}}.bind(this));return i},mergeValues:function(A,i){var e=A.split("|").compact();if(e.contains(i)){return A}if(e.length>=this.maxCnt){e.pop()}e.unshift(i);return e.join("|")}});h.MarkupTemplate.add("button.itsnew",'<em class="tx-itsnew" title="new">new</em>');h.MarkupTemplate.add("button.select.text","<span>#{data}</span>");h.Button=h.Class.create({$const:{__borderClasses:{"tx-btn-trans":y,"tx-btn-lbg":y,"tx-btn-bg":y,"tx-btn-rbg":y,"tx-btn-lrbg":y,"tx-slt-tlbg":y,"tx-slt-tbg":y,"tx-slt-trbg":y,"tx-slt-blbg":y,"tx-slt-bbg":y,"tx-slt-brbg":y,"tx-slt-31bg":y,"tx-slt-31lbg":y,"tx-slt-31rbg":y,"tx-slt-70lbg":y,"tx-slt-70bg":y,"tx-slt-59bg":y,"tx-slt-42bg":y,"tx-slt-56bg":y,"tx-btn-nlrbg":y,"tx-btn-43lrbg":y,"tx-btn-52lrbg":y,"tx-btn-57lrbg":y,"tx-btn-71lrbg":y,"tx-btn-48lbg":y,"tx-btn-48rbg":y,"tx-btn-30lrbg":y,"tx-btn-46lrbg":y,"tx-btn-67lrbg":y,"tx-btn-49lbg":y,"tx-btn-58bg":y,"tx-btn-46bg":y,"tx-btn-49rbg":y,"tx-btn-widget":y,"tx-btn-widget-tbg":y,"tx-btn-widget-brbg":y},addBorderClass:function(e){h.Button.__borderClasses[e]=y
},getBorderClass:function(C){var e=x.classNames(C);for(var B=0;B<e.length;B++){var A=e[B];var D=h.Button.__borderClasses[A];if(D){return A}}}},hasState:k,isDisabled:k,lastValue:k,lastText:k,elButton:k,elIcon:k,borderClass:k,_command:function(){},setCommand:function(e){this._command=e},initialize:function(e){var C=this.config=e;if(C.borderClass){h.Button.addBorderClass(C.borderClass)}this.itsNew=!!C.itsnew;this.hasState=!!C.status;this.isDisabled=d;this.lastValue=C.selectedValue||k;if(e.el){this.elButton=e.el}else{var i=C.id||"tx_"+C.identity;this.elButton=$must(i+(C.initializedId||""))}var B=this.elButton;var A=this.elIcon=z.collect(B,"a");if(!A){throw new Error("[Exception]Trex.Button : can't find elIcon for button '"+i+"'")}this.borderClass=h.Button.getBorderClass(B);if(this.oninitialized){this.oninitialized.bind(this)(C)}this.generate();if(this.itsNew){z.append(A,h.MarkupTemplate.get("button.itsnew").evaluateAsDom({}))}if(C.selectedValue&&this.setValue){this.setValue(C.selectedValue)
}if(C.selectedText&&this.setText){this.setText(C.selectedText)}if(C.selectedState&&this.setState){this.setState(C.selectedState)}},generate:function(){var e=this.elIcon;this.hdlMouseDown=this.onMouseDown.bindAsEventListener(this);this.hdlMouseOver=this.onMouseOver.bindAsEventListener(this);this.hdlMouseOut=this.onMouseOut.bindAsEventListener(this);this.hdlKeydown=this.onKeyDown.bindAsEventListener(this);this.hdlClick=this.onClick.bindAsEventListener(this);x.observe(e,"mousedown",this.hdlMouseDown);x.observe(e,"mouseover",this.hdlMouseOver);x.observe(e,"mouseout",this.hdlMouseOut);x.observe(e,"keydown",this.hdlKeydown);x.observe(e,"click",this.hdlClick);if(this.ongenerated){this.ongenerated.bind(this)(this.config)}},removeHandler:function(){if(!this.hdlMouseDown){return}var e=this.elIcon;x.stopObserving(e,"mousedown",this.hdlMouseDown);x.stopObserving(e,"mouseover",this.hdlMouseOver);x.stopObserving(e,"mouseout",this.hdlMouseOut);x.stopObserving(e,"keydown",this.hdlKeydown);x.stopObserving(e,"click",this.hdlClick)
},getCurrentBorderClass:function(C){var e=x.classNames(C);for(var B=0;B<e.length;B++){var A=e[B];if(A.indexOf(this.borderClass)!=-1){return A}}return u+""},normalState:function(){var e=this.getCurrentBorderClass(this.elButton);if(e==this.borderClass){return}x.removeClassName(this.elButton,e);x.addClassName(this.elButton,this.borderClass)},hoveredState:function(){var e=this.getCurrentBorderClass(this.elButton);x.removeClassName(this.elButton,e);x.addClassName(this.elButton,this.borderClass+"-hovered");this.decreaseZindex()},pushedState:function(){var e=this.getCurrentBorderClass(this.elButton);x.removeClassName(this.elButton,e);x.addClassName(this.elButton,this.borderClass+"-pushed")},currentState:function(){var i=this.getCurrentBorderClass(this.elButton);var e="normal";if(i.indexOf("-pushed")!=-1){e="pushed"}else{if(i.indexOf("-hovered")!=-1){e="hovered"}}return e},isPushed:function(){return("pushed"==this.currentState())},hasMenu:function(){return this.tool?!!(this.tool.menu):d},onMouseDown:function(e){if(e){x.stop(e)
}if(this.isDisabled){return}if(this.hasMenu()||this.hasState){if(this._command(e)===d){return}}else{this.evsessionstarted=y}if(this.isPushed()){this.normalState()}else{this.pushedState()}},onMouseOver:function(){if(this.isDisabled||this.isPushed()){return}this.hoveredState()},onMouseOut:function(){if(this.evsessionstarted){this.normalState();this.evsessionstarted=d}if(this.isDisabled||this.isPushed()){return}this.normalState()},onClick:function(e){if(e){x.stop(e)}if(this.isDisabled){return}if(!this.hasState){this._command();this.normalState();this.evsessionstarted=d}},onKeyDown:function(e){if(e.keyCode===13){this.onMouseDown(e);this.onClick(e)}},updateAfterCommand:function(e,i){this.setValueAndText(e,i);this.normalState()},setValueAndText:function(e,i){this.setValue(e);this.setText(i)},setValue:function(e){if(e){this.lastValue=e}},setText:function(e){this.lastText=e},getValue:function(){return this.lastValue},getText:function(){return this.lastText},setState:function(e){if(e){this.pushedState()
}else{this.normalState()}},setClassName:function(e){this.elIcon.className=e},disable:function(){if(this.elButton){this.isDisabled=y;x.addClassName(this.elButton,"tx-disable")}},enable:function(){if(this.elButton){this.isDisabled=d;x.removeClassName(this.elButton,"tx-disable")}},release:function(){if(this.isDisabled){return}if(this.hasMenu()||!this.hasState){this.normalState()}},increaseZindex:function(){var e=10;if(z.parent(this.elButton)){x.setStyle(z.parent(this.elButton),{zIndex:e})}},decreaseZindex:function(){var e=4;if(z.parent(this.elButton)){x.setStyle(z.parent(this.elButton),{zIndex:e})}}});h.Button.Select=h.Class.create({$extend:h.Button,ongenerated:function(){h.MarkupTemplate.get("button.select.text").evaluateToDom({data:z.getText(this.elIcon)},this.elIcon);this.elText=z.collect(this.elIcon,"span");var e=z.collect(this.elButton,"a.tx-arrow");if(e){x.observe(e,"mousedown",this.onMouseDown.bindAsEventListener(this));x.observe(e,"mouseover",this.onArrowMouseOver.bindAsEventListener(this));
x.observe(e,"mouseout",this.onArrowMouseOut.bindAsEventListener(this));x.observe(e,"click",this.onClick.bindAsEventListener(this))}},setText:function(e){this.elText.innerText=e},onArrowMouseOver:function(){if(this.isDisabled||this.isPushed()){return}this.hoveredState()},onArrowMouseOut:function(){if(this.isDisabled||this.isPushed()){return}this.normalState()}});h.Button.Splits=h.Class.create({$extend:h.Button,ongenerated:function(){var i=this.elButton;var e=this.elArrow=z.collect(i,"a.tx-arrow");if(!e){throw new Error("[Exception]Trex.Button.Splits : not exist element(a.tx-arrow)")}x.observe(e,"mousedown",this.onArrowMouseDown.bindAsEventListener(this));x.observe(e,"mouseover",this.onArrowMouseOver.bindAsEventListener(this));x.observe(e,"mouseout",this.onArrowMouseOut.bindAsEventListener(this));x.observe(e,"click",this.onArrowClick.bindAsEventListener(this))},arrowHoveredState:function(){var e=this.getCurrentBorderClass(this.elButton);x.removeClassName(this.elButton,e);x.addClassName(this.elButton,this.borderClass+"-arrow-hovered")
},arrowPushedState:function(){var e=this.getCurrentBorderClass(this.elButton);x.removeClassName(this.elButton,e);x.addClassName(this.elButton,this.borderClass+"-arrow-pushed")},onMouseDown:function(){if(this.isDisabled){return}if(this.isPushed()){this._command();this.normalState();this.commandexecuted=y}else{this.pushedState();this.commandexecuted=d;this.evsessionstarted=y}},onClick:function(e){if(e){x.stop(e)}if(this.isDisabled){return}if(!this.commandexecuted){this.tool.execute(this.lastValue,this.lastText);this.evsessionstarted=d}else{this.commandexecuted=d}this.normalState()},onArrowMouseDown:function(){if(this.isDisabled){return}if(this._command()===d){return}if(this.isPushed()){this.normalState()}else{this.arrowPushedState()}},onArrowClick:function(e){if(e){x.stop(e)}if(this.isDisabled){return}},onArrowMouseOver:function(){if(this.isDisabled||this.isPushed()){return}this.arrowHoveredState()},onArrowMouseOut:function(){if(this.isDisabled||this.isPushed()){return}if(this.commandexecuted){this.commandexecuted=d
}this.normalState()}});h.Button.Toggle=h.Class.create({$extend:h.Button,setValue:function(e){if(e){this.pushedState()}else{this.normalState()}}});h.Button.Widget=h.Class.create({$extend:h.Button.Select,setText:function(e){this.elIcon.innerText=e;if(this.lastText){x.removeClassName(this.elIcon,this.lastText)}x.addClassName(this.elIcon,e);this.lastText=e},setMenu:function(A,e){this.hasState=y;var i=this;A.setCommand(function(){var B=e.apply(this,arguments);i.updateAfterCommand.apply(i,arguments);return B});i.setCommand(function(){if(!i.isPushed()){var B=i.getValue();A.show(B)}else{A.hide()}return y})}});h.Button.ColorWidget=h.Class.create({$extend:h.Button.Widget,setValue:function(e){x.setStyle(this.elIcon.parentNode,{backgroundColor:e});this.lastValue=e},setText:function(){}});l.addMsg({"@menu.pallete.enter":"\uc785\ub825","@menu.pallete.more":"\ub354\ubcf4\uae30"});h.Menu=h.Class.create({isInit:d,isDisplayed:d,_command:function(){},setCommand:function(e){this._command=e},initialize:function(e){var A=this.config=e;
var B;if(A.el){B=A.el;if(!B){throw new Error("[Exception]Trex.Menu : not exist element("+A.el+")")}}else{var i=A.id;var C=((A.initializedId)?A.initializedId:"");if(!i){if(!A.identity){throw new Error("[Exception]Trex.Menu : not exist config - id")}i="tx_"+A.identity+"_menu"}B=x(i+C);if(!B){throw new Error("[Exception]Trex.Menu : not exist element("+i+")")}}this.elMenu=B;if(A.top){B.style.top=A.top+"px"}if(A.left){B.style.left=A.left+"px"}if(this.oninitialized){this.oninitialized.bind(this)(e)}if(this.ongenerated){this.generateHandler=this.ongenerated.bind(this)}if(this.onregenerated){this.regenerateHandler=this.onregenerated.bind(this)}},generate:function(e){if(this.generateHandler){var i=this.config;this.generateHandler(i,e)}},regenerate:function(e){if(this.initHandler){this.initHandler()}if(this.regenerateHandler){var i=this.config;this.regenerateHandler(i,e)}},getValidOptions:function(e){return e.options.findAll(function(i){return !i.expired})},onSelect:function(){var e=$A(arguments);
var i=e.shift();this._command.apply(this,e);this.hide();x.stop(i)},onCancel:function(){if(this.cancelHandler){this.cancelHandler()}this.hide()},visible:function(){return this.isDisplayed},show:function(e){x.show(this.elMenu);if(this.isInit){this.regenerate(e)}else{if(!!this.config.listseturl){this.lazyGenerate(e)}else{this.generate(e);this.isInit=y;this.regenerate(e)}}if(this.showSpecial){this.showSpecial()}this.isDisplayed=y},lazyGenerate:function(e){var i=this;new (h.Class.create({$mixins:[h.I.JSRequester],initialize:function(){this.importScript(i.config.listseturl,"utf-8",c,function(){i.generate();i.isInit=y;i.regenerate(e)})}}))()},hide:function(){x.hide(this.elMenu);this.isDisplayed=d},toggle:function(){if(this.isDisplayed){this.hide()}else{this.show()}},release:function(e){if(!this.isInit){return}this.hide(e)}});h.MarkupTemplate.add("menu.select",'<ul class="tx-menu-list" unselectable="on">#{items}</ul>');h.MarkupTemplate.add("menu.select.item",'<li class="tx-menu-list-item"><a class="#{klass}" href="javascript:;" unselectable="on">#{label}</a></li>');
h.Menu.Select=h.Class.create({$extend:h.Menu,generate:function(){var A=this.config;var e=this.getValidOptions(A);var i=this.generateList(e);z.insertFirst(this.elMenu,i);if(this.generateHandler){this.generateHandler(A)}if(this.ongeneratedList){this.generateList=this.ongeneratedList.bind(this)}if(this.ongeneratedListItem){this.generateListItem=this.ongeneratedListItem.bind(this)}},generateList:function(D){var A=h.MarkupTemplate.get("menu.select").evaluateAsDom({items:this.generateListItem(D)});var C=z.collectAll(A,"li a");for(var e=0;e<D.length;e++){var E=D[e];var B=C[e];x.observe(B,"click",this.onSelect.bindAsEventListener(this,E.data,E.title))}return A},generateListItem:function(B){var e=[];for(var A=0;A<B.length;A++){e.push(h.MarkupTemplate.get("menu.select.item").evaluate(B[A]))}return e.join("")},onSelect:function(){var i=$A(arguments);var e=i.shift();this._command.apply(this,i);this.hide();x.stop(e)}});h.MarkupTemplate.add("menu.items",['<table unselectable="on"><tbody>',"	#{for:row}<tr>",'		#{for:col}<td class="tx-menu-list-item">','<a href="javascript:;"><span class="#{klass}">','#{if:image!=""}<img src="#{image}" data="#{data}"/>#{/if:image}','#{if:image=""}#{data}#{/if:image}',"</span></a>","		</td>#{/for:col}","	</tr>#{/for:row}","</tbody></table>"].join(""));
h.MarkupTemplate.add("menu.list",['<div class="tx-menu-inner">','	<div class="tx-menu-list">',"   	#{items}","    </div>","</div>"].join(""));h.Menu.List=h.Class.create({$extend:h.Menu,generate:function(){var A=this.config;var e=this.getValidOptions(A);this.cols=A.cols||1;this.rows=A.rows||e.length;var i=this.generateList(e);z.insertFirst(this.elMenu,i);if(this.ongeneratedList){this.generateList=this.ongeneratedList.bind(this)}if(this.ongeneratedListItem){this.generateListItem=this.ongeneratedListItem.bind(this)}if(this.generateHandler){this.generateHandler(A)}},generateList:function(i){var e=h.MarkupTemplate.splitList(this.rows,this.cols,i);var A=h.MarkupTemplate.get("menu.list").evaluateAsDom({items:h.MarkupTemplate.get("menu.items").evaluate(e)});x.observe(A,"click",this.onSelect.bindAsEventListener(this));x.observe(A,"mouseover",this.onItemMouseOver.bindAsEventListener(this));x.observe(A,"mouseout",this.onItemMouseOut.bindAsEventListener(this));return A},onItemMouseOver:function(e){var i=x.findElement(e,"span");
if(i.tagName&&i.tagName.toLowerCase()=="span"){x.addClassName(i,"tx-item-hovered")}x.stop(e)},onItemMouseOut:function(e){var i=x.findElement(e,"span");if(i.tagName&&i.tagName.toLowerCase()=="span"){x.removeClassName(i,"tx-item-hovered")}x.stop(e)},onSelect:function(i){var A=x.findElement(i,"span");if(A.tagName&&A.tagName.toLowerCase()=="span"){var e;if(A.firstChild&&A.firstChild.nodeType==1&&A.firstChild.tagName.toLowerCase()=="img"){e=z.getAttribute(A.firstChild,"data")||""}else{e=A.innerText}this._command(e);this.hide()}x.stop(i)}});h.MarkupTemplate.add("menu.matrix",['<div class="tx-menu-inner">','	<ul class="tx-menu-matrix-title">','		#{for:matrices}<li class=""><a href="javascript:;" class="tx-menu-matrix-title-item">#{title}</a></li>#{/for:matrices}',"	</ul>",'	<div class="tx-menu-matrix-listset">','   	#{for:matrices}<div class="tx-menu-matrix-list #{klass}">',"       	#{items}","		</div>#{/for:matrices}","    </div>","</div>"].join(""));h.Menu.Matrix=h.Class.create({$extend:h.Menu,generate:function(){var A=this.config;
var e=this.matrices=A.matrices.findAll(function(B){return !B.onlyIE||x.msie});this.cols=A.cols||10;this.rows=A.rows||5;var i=this.generateMatrix(e);z.insertFirst(this.elMenu,i);if(this.ongeneratedList){this.generateList=this.ongeneratedList.bind(this)}if(this.ongeneratedListItem){this.generateListItem=this.ongeneratedListItem.bind(this)}if(this.generateHandler){this.generateHandler(A)}this.showTab()},regenerate:function(){this.showTab();if(this.regenerateHandler){var e=this.config;this.regenerateHandler(e)}},showTab:function(){var A=this.lastElList;var i=this.lastElTitleItem;var e=(!A||!i);if(e){A=this.defaultElListItem;i=this.defaultElTitleItem}this.onTitleClick(k,i,A)},generateMatrix:function(I){var J=this;var E=this.cols;var H=this.rows;I.each(function(K){var i=h.MarkupTemplate.splitList(H,E,K.options);K.items=h.MarkupTemplate.get("menu.items").evaluate(i)});var G=h.MarkupTemplate.get("menu.matrix").evaluateAsDom({matrices:I});var F=z.collectAll(G,"div.tx-menu-matrix-listset div.tx-menu-matrix-list");
var A=z.collectAll(G,"ul.tx-menu-matrix-title li");var C=function(){for(var K=0,L=I.length;K<L;K++){if(I[K].defaultshow){return K}}return 0}();this.defaultElListItem=F[C];this.defaultElTitleItem=A[C];for(var B=0;B<I.length;B++){var e=F[B];x.observe(e,"click",J.onSelect.bindAsEventListener(J));x.observe(e,"mouseover",J.onItemMouseOver.bindAsEventListener(J));x.observe(e,"mouseout",J.onItemMouseOut.bindAsEventListener(J));var D=A[B];x.observe(D,"click",J.onTitleClick.bindAsEventListener(J,D,e))}return G},onTitleClick:function(A,i,e){if(this.lastElList!=e){x.show(e);if(this.lastElList){x.hide(this.lastElList)}this.lastElList=e;if(this.lastElTitleItem){x.removeClassName(this.lastElTitleItem,"tx-selected")}x.addClassName(i,"tx-selected");this.lastElTitleItem=i}if(A){x.stop(A)}},onItemMouseOver:function(e){var i=x.findElement(e,"span");if(i.tagName&&i.tagName.toLowerCase()=="span"){x.addClassName(i,"tx-item-hovered")}x.stop(e)},onItemMouseOut:function(e){var i=x.findElement(e,"span");if(i.tagName&&i.tagName.toLowerCase()=="span"){x.removeClassName(i,"tx-item-hovered")
}x.stop(e)},onSelect:function(e){var i=x.findElement(e,"span");if(i.tagName&&i.tagName.toLowerCase()=="span"){this._command(i.innerText);this.hide()}x.stop(e)}});h.MarkupTemplate.add("menu.colorPallete",['<div class="tx-menu-inner">','<ul class="tx-pallete-text-list"></ul>','<ul class="tx-pallete-thumb-list"></ul>','<p class="tx-pallete-input"><span style="background-color: rgb(7, 3, 3);"></span><input type="text" class="tx-color-value"/><a class="tx-enter">@menu.pallete.enter</a></p>','<div class="tx-pallete-buttons">','	<p class="tx-pallete-more"><a class="tx-more-down" href="javascript:;">@menu.pallete.more</a></p>',"</div>",'<div class="tx-pallete-picker">','	<div class="tx-pallete-pickerbox">','		<div class="tx-chromabar" style="background-color: rgb(255, 0, 0);"></div><div class="tx-huebar"></div>',"	</div>","</div>","</div>"].join(""));h.Menu.ColorPallete=h.Class.create({$extend:h.Menu,$mixins:[h.I.ColorPallete],generate:function(){var i=this.config;var A=this.elMenu;h.MarkupTemplate.get("menu.colorPallete").evaluateToDom({},A);
var e=i.thumbs.transparent;i.thumbs.transparent=Object.extend(i.thumbs.transparent,{image:t.getIconPath(e.image),thumb:t.getIconPath(e.thumb),thumbImage:t.getIconPath(e.thumbImage)});if(!this.hookEvent){throw new Error("[Exception]Trex.Menu.ColorPallete : not implement function(hookEvent)")}this.hookEvent(i);if(this.generateHandler){this.generateHandler(i)}},onSelect:function(){var i=$A(arguments);var e=i.shift();this._command.apply(this,i);this.remainColor(i);this.hide();x.stop(e)},remainColor:function(e){if(e){this.setColorValueAtInputbox(e)}}});h.MarkupTemplate.add("blackbox",'<div class="tx-blackbox">		<div class="tx-blackbox-panel"></div>		<div class="tx-content"></div>	</div>');h.BlackBox=h.Class.create({initialize:function(){},make:function(A){var i=this.elBlackbox=h.MarkupTemplate.get("blackbox").evaluateAsDom({});var B=this.holder=A||c.body;z.insertFirst(B,i);this.elBlackboxPanel=z.collect(i,"div.tx-blackbox-panel");this.elContentArea=z.collect(i,"div.tx-content");var e=this.calculatePanelSize();
this.panelWidth=e[0];this.panelHeight=e[1]},show:function(e){this.makeScrollbar();this._append(e)},_append:function(i){if(this.elContentArea.firstChild!=k){return d}z.append(this.elContentArea,i);var e=this.calculatePanelSize();this.panelWidth=e[0];this.panelHeight=e[1];x.setStyle(this.elBlackbox,{width:this.panelWidth.toPx(),height:this.panelHeight.toPx()});x.setStyle(this.elBlackboxPanel,{width:this.panelWidth.toPx(),height:this.panelHeight.toPx()});x.show(this.elBlackbox);this.alignCenter()},hide:function(){x.hide(this.elBlackbox);this.elContentArea.removeChild(this.elContentArea.firstChild);this.removeScrollbar()},makeScrollbar:function(){if(x.msie){c.body.scroll="yes"}else{c.body.style.overflow="scroll"}},removeScrollbar:function(){if(x.msie){c.body.scroll=""}else{c.body.style.overflow=""}},calculatePanelSize:function(){var e=z.getPosition(this.holder);return[e.width,e.height]},resizeBlackbox:function(e){this.panelHeight=e;x.setStyle(this.elBlackbox,{height:this.panelHeight.toPx()});
x.setStyle(this.elBlackboxPanel,{height:this.panelHeight.toPx()});this.alignCenter()},alignCenter:function(){var D=x.getStyle(this.elBlackbox,"width");var e=x.getStyle(this.elBlackbox,"height");var A=this.calculatePanelSize();this.panelWidth=A[0];this.panelHeight=A[1];var C=z.getPosition(this.elContentArea.firstChild);var i=C.width.parsePx();var E=C.height.parsePx();var B=(this.panelWidth-i)/2;var F=(this.panelHeight>E*2)?(this.panelHeight-E)/2:0;x.setStyle(this.elContentArea,{marginLeft:B.toPx(),marginTop:"30px"})}});h.install("editor.getBlackBox & canvas.getBlackBox",function(i,A,B,e){var C=new h.BlackBox();i.getBlackBox=function(){return C};e.getBlackBox=function(){return C}});h.module("generate blackbox",function(A,B,C,e){var D=A.getBlackBox();var i=A.getWrapper();D.make(i);e.observeKey({ctrlKey:d,altKey:d,shiftKey:d,keyCode:27},D.hide.bind(D));A.observeKey({ctrlKey:d,altKey:d,shiftKey:d,keyCode:27},D.hide.bind(D));e.observeJob(h.Ev.__CANVAS_HEIGHT_CHANGE,function(E){D.resizeBlackbox(E.parsePx())
})});h.MarkupTemplate.add("noticebox",'<div class="tx-noticebox">	<dl>		<dt>			<span>#{head}</span>			<a href="javascript:;">close</a>		</dt>		<dd>			<p>#{body}</p>			<div>				<a href="javascript:;"><img src="#{confirm}" border="0"/></a>				<a href="javascript:;"><img src="#{cancel}" border="0" /></a>			</div>		</dd>	</dl></div>');h.NoticeBox=h.Class.create({initialize:function(i,e){this.make({head:i.head,body:i.body,confirm:i.confirm||"http://i1.daumcdn.net/icon/editor/btn_confirm_s1.gif?v=2",cancel:i.cancel||"http://i1.daumcdn.net/icon/editor/btn_cancel_s1.gif?v=2"});this.blackbox=e},make:function(e){if(this.elBox){return this}e=e||{};var i=this.elBox=h.MarkupTemplate.get("noticebox").evaluateAsDom(e);x.observe(z.collect(i,"dt a"),"click",this.cancel.bind(this));x.observe(z.collectAll(i,"dd div a")[0],"click",this.confirm.bind(this));x.observe(z.collectAll(i,"dd div a")[1],"click",this.cancel.bind(this));return this},weave:function(A,i,e){this.confirmHandler=A;this.cancelHandler=i;this.completeHandler=e;
return this},show:function(){this.blackbox.show(this.elBox)},hide:function(){this.blackbox.hide();return d},confirm:function(){if(this.confirmHandler){this.confirmHandler()}return d},cancel:function(e){if(this.cancelHandler){this.cancelHandler()}this.hide(e);return d},complete:function(e){if(this.completeHandler){this.completeHandler()}this.hide(e);return d}});h.install("editor.newNoticeBox",function(e){e.newNoticeBox=function(i){return new h.NoticeBox(i,e.getBlackBox())}});h.Editor=h.Class.create({$mixins:[h.I.JobObservable,h.I.KeyObservable],toolbar:k,sidebar:k,canvas:k,config:k,initialConfig:k,initialize:function(A){this.initialConfig=A;var F=this,E=this.config=t.setup(A);var D=this.canvas=new h.Canvas(F,E);var i=this.toolbar=new h.Toolbar(F,E);var C=this.sidebar=new h.Sidebar(F,E);h.invokeInstallation(F,i,C,D,E);var e=E.events;var B=function(G){if(e.useHotKey){F.fireKeys(G)}};x.observe(c,"keydown",B.bindAsEventListener(this),d);D.observeJob(h.Ev.__IFRAME_LOAD_COMPLETE,function(){var G=new Date().getTime();
var J=Math.round((G-Editor.initStartTime)/100)/10;F.fireJobs(h.Ev.__IFRAME_LOADING_TIME,J);var I=F.getInitializedId();var H=x("tx_loading"+I);if(!H){return}if(D.mode!=h.Canvas.__WYSIWYG_MODE){D.fireJobs(h.Ev.__CANVAS_MODE_INITIALIZE,h.Canvas.__WYSIWYG_MODE,D.mode)}x.hide(H)});h.invokeRegisters(F,i,C,D,E);h.invokeModules(F,i,C,D,E)},getToolbar:function(){return this.toolbar},getSidebar:function(){return this.sidebar},getCanvas:function(){return this.canvas},getUsedWebfont:function(){return this.canvas.getUsedWebfont()},getConfig:function(){return this.config},getParam:function(i){var e={},A=this.config;A.params.each(function(B){if(A[B]){e[B]=A[B]}});return e[i]},getWrapper:function(){return $must(this.initialConfig.wrapper)},getInitializedId:function(){return this.initialConfig.initializedId||""},saveEditor:function(){this.setDisableUnloadHandler();this.getSaver().submit()},loadEditor:function(e){this.getSaver().load(e)},getContent:function(){return this.getSaver().getContent()},getAttachments:function(i,e){return this.getSaver().getAttachments(i,e)
},getEmbeddedData:function(e){return this.getSaver().getEmbeddedData(e)},getResults:function(e){return this.getSaver().getResults(e)},getAutosaveSeq:function(){return(this.getAutoSaver&&this.getAutoSaver())?this.getAutoSaver().getCurSeq():"0"}});(function(){j.Editor=h.Class.create({$const:{__ACTIVE:d,__PANEL_LOADED:d,__EDITOR_LOADED:d,__MULTI_LIST:[],__SELECTED_INDEX:0},initialize:function(A){if(h.hmailLogging){h.hmailLogging(A)}Editor.initStartTime=new Date().getTime();var C;try{Editor.__EDITOR_LOADED=d;Editor.__PANEL_LOADED=d;C=new h.Editor(A);var D=C.getInitializedId();if(D!=k){var i=D==""?0:D;Editor.__MULTI_LIST[i]=C;Editor.__SELECTED_INDEX=i}Object.extend(Editor,C);Editor.__EDITOR_LOADED=y;Editor.__ACTIVE=y}catch(B){if(C){C.fireJobs(h.Ev.__RUNTIME_EXCEPTION,B)}else{C.fireJobs(h.Ev.__RUNTIME_EXCEPTION,"_editor_not_defined!"+B)}throw B}}});Editor.modify=function(e){if(Editor.__PANEL_LOADED&&Editor.__EDITOR_LOADED){if(this.loadEditor){this.loadEditor(e)}}else{setTimeout(this.modify.bind(this,e),10)
}};Editor.restore=function(e){if(Editor.__PANEL_LOADED&&Editor.__EDITOR_LOADED){if(this.getAutoSaver&&this.getAutoSaver()){this.getAutoSaver().load(e)}}else{setTimeout(this.restore.bind(this,e),10)}};Editor.save=function(){if(Editor.__PANEL_LOADED&&Editor.__EDITOR_LOADED){if(this.saveEditor){this.saveEditor()}}else{setTimeout(this.saveEditor.bind(this),10)}return d};Editor.focus=function(){if(Editor.__PANEL_LOADED&&Editor.__EDITOR_LOADED){var e=this.getCanvas();if(e){e.focus()}}else{setTimeout(this.focus.bind(this),10)}return d};Editor.focusOnTop=function(){if(Editor.__PANEL_LOADED&&Editor.__EDITOR_LOADED){var e=this.getCanvas();if(e){e.focusOnTop()}}else{setTimeout(this.focusOnTop.bind(this),10)}return d};Editor.focusOnBottom=function(){if(Editor.__PANEL_LOADED&&Editor.__EDITOR_LOADED){var e=this.getCanvas();if(e){e.focusOnBottom()}}else{setTimeout(this.focusOnBottom.bind(this),10)}return d};Editor.permitUnload=function(){if(Editor.__PANEL_LOADED&&Editor.__EDITOR_LOADED){this.setDisableUnloadHandler()
}else{setTimeout(this.permitUnload.bind(this),500)}};Editor.onPanelLoadComplete=function(e){if(Editor.__PANEL_LOADED==y&&Editor.__EDITOR_LOADED==y){if(e){e()}}else{setTimeout(Editor.onPanelLoadComplete.bind(Editor,e),500)}};Editor.switchEditor=function(e){Editor.__SELECTED_INDEX=e;Object.extend(Editor,Editor.__MULTI_LIST[e])};Editor.editorForAsyncLoad=Editor;Editor.forEachEditor=function(e){var A,i=Editor.__MULTI_LIST;for(A in i){if(i.hasOwnProperty(A)){e(i[A])}}};Editor.focusOnForm=function(e){if(Editor.__PANEL_LOADED&&Editor.__EDITOR_LOADED){j.focus();var i=Editor.getForm();if(i.getElementByName(e)){i.getElementByName(e).focus()}}else{setTimeout(Editor.focusOnForm.bind(Editor,e),500)}return d};Editor.fromHdrive=function(D){var A=[];for(var C=0;C<D.length;C++){A.push(D[C])}var e={content:"",attachments:A};if(Editor.__PANEL_LOADED&&Editor.__EDITOR_LOADED){if(this.loadEditor){this.loadEditor(e);var E=Editor.getAttachBox().datalist;for(var B=0;B<E.length;B++){E[B].execAppend()}}}else{setTimeout(this.fromHdrive.bind(this,D),10)
}};Editor.refreshSize=function(){this.canvas.fireJobs(h.Ev.__CANVAS_WRAP_WIDTH_CHANGE)};Editor.prototype.switchEditor=Editor.switchEditor;Editor.prototype.focusOnForm=Editor.focusOnForm})();h.Toolbar=h.Class.create({$mixins:[h.I.JobObservable],el:k,tools:k,initialize:function(e,i){this.canvas=e.getCanvas();var A=i.initializedId||"";this.el=$must("tx_toolbar_basic"+A,"Trex.Toolbar")},disableToolbar:function(){var i=this.tools;for(var e in i){if(i[e].button){i[e].button.disable()}}},serializeToolValues:function(){var B=this.tools;var e={};for(var A in B){var i=B[A];e[A]=i.button.lastValue}return e},widgetSeq:0,makeWidget:function(A,D,B){var i=this;var C=this.canvas;var e=new (function(){this.identity="widget"+(++i.widgetSeq);this.wysiwygonly=y;this.menuFoldAuto=y;this.canvas=C;this.toolbar=i})();h.Tool.prototype.weave.bind(e)(A,D,B);this.tools[e.identity]=e;return e}});h.install("editor.getTool",function(i,A){var e=A.tools={};i.getTool=function(B){if(e[B]!=k){return e[B]}else{if(arguments.length==0){return e
}else{return k}}}});h.register("new tools",function(D,F,e,i,A){var E=F.tools;var B=A.initializedId||"";for(var H in h.Tool){var G=h.Tool[H]["__Identity"];if(G){var C=t.getTool(G,A);C.initializedId=B;if(h.available(C,G+B)){E[G]=new h.Tool[H](D,F,C)}}}if(!!i.config.readonly){F.disableToolbar()}});h.module("bind events with tools",function(B,F,e,i){var D=F.tools;var A=function(){var H,J,I,K;H=x.ios||x.android;if(!H){return}for(J in D){I=D[J];if(I.disabledonmobile){K=I.button;K.disable()}}};A();var E=function(L,K){if(L==K){return}for(var I in D){var H=D[I];var J=H.button;if(h.Canvas.__WYSIWYG_MODE==K){J.enable()}else{if(h.Canvas.__WYSIWYG_MODE==L){if(H.wysiwygonly){J.disable()}else{J.enable()}}}}A()};i.observeJob(h.Ev.__CANVAS_MODE_CHANGE,E);i.observeJob(h.Ev.__CANVAS_MODE_INITIALIZE,E);var G=function(J){for(var I in D){var H=D[I];if(J!=H.identity){if(H.button){H.button.release();H.button.decreaseZindex()}if(H.menu&&H.menuFoldAuto){H.menu.release()}}}};i.observeJob(h.Ev.__CANVAS_PANEL_CLICK,G);
i.observeJob(h.Ev.__CANVAS_SOURCE_PANEL_CLICK,G);i.observeJob(h.Ev.__CANVAS_TEXT_PANEL_CLICK,G);F.observeJob(h.Ev.__TOOL_CLICK,G);i.observeKey({ctrlKey:d,altKey:d,shiftKey:d,keyCode:27},G);B.observeKey({ctrlKey:d,altKey:d,shiftKey:d,keyCode:27},G);x.observe(c,"click",function(I){var J=x.element(I);var H=["tx-sidebar","tx-toolbar-basic","tx-toolbar-advanced","tx-sidebar-boundary","tx-toolbar-boundary","tx-toolbar-boundary"];if(h.Util.getMatchedClassName(J,H)){G("-")}},d);var C=function(){B.fireJobs(h.Ev.__SHOULD_CLOSE_MENUS)};F.observeJob(h.Ev.__TOOL_CLICK,C)});h.Tool=h.Class.draft({identity:k,button:k,menu:k,initialize:function(i,A,e){if(!this.constructor.__Identity){throw new Error("[Exception]Trex.Tool : not implement const(__Identity)")}this.identity=this.constructor.__Identity;if(!i){throw new Error("[Exception]Trex.Tool : not exist argument(editor)")}this.editor=i;this.toolbar=A;this.canvas=i.getCanvas();this.config=e;this.wysiwygonly=((e.wysiwygonly!=k)?e.wysiwygonly:y);this.menuFoldAuto=((e.menuFoldAuto!=k)?e.menuFoldAuto:y);
if(e.disabledonmobile!=k){this.disabledonmobile=e.disabledonmobile}this.buttonCfg=t.merge({id:"tx_"+this.identity},e);this.menuCfg=t.merge({id:"tx_"+this.identity+"_menu"},e);this.oninitialized.bind(this)(e)},oninitialized:function(){throw new Error("[Exception]Trex.Tool : not implements function(oninitialized)")},weave:function(C,e,i,F){var B=this;var G=this.identity;var E=this.toolbar;var D=this.canvas;this.button=C;C.tool=this;var A=k;if(!e){C.setCommand(A=function(){E.fireJobs(h.Ev.__TOOL_CLICK,G);return i.apply(B,arguments)})}else{this.menu=e;e.tool=this;e.initHandler=F||function(){};e.cancelHandler=function(){C.setState(d)};e.setCommand(A=function(){var H=arguments;var I=i.apply(B,H);if(I===$stop){C.normalState.apply(C,H)}else{C.updateAfterCommand.apply(C,H)}return I});C.setCommand(function(I){E.fireJobs(h.Ev.__TOOL_CLICK,G,I);if(!C.isPushed()){var J=C.getValue();C.increaseZindex();e.show(J)}else{e.hide()}if(x.msie){var H=D.getProcessor();if(H.restoreRange){setTimeout(function(){H.restoreRange()
},0)}}return y})}this.execute=A},resetWeave:function(){this.button.removeHandler();this.button.normalState();this.button=k;this.menu=k;this.execute=k},forceActivate:function(){if(this.button&&this.menu){this.button.pushedState();this.button.increaseZindex();this.menu.show()}},bindKeyboard:function(A,B){var i=this.toolbar;var e=this.identity;this.canvas.observeKey(A,function(C){B(C);i.fireJobs(h.Ev.__TOOL_SHORTCUT_KEY,e)})}});h.AsyncTool=h.Class.draft({$extend:h.Tool,oninitialized:function(){throw new Error("[Exception]Trex.AsyncTool : not implements function(oninitialized)")},onLoadModule:function(){var e=this.config.asyncUrl;if(/:\/\//.test(e)===false){e=this.getJSBasePath()+e}Editor.editorForAsyncLoad=this.editor;EditorJSLoader.asyncLoadModule({url:t.getUrl(e),callback:function(){}})},getJSBasePath:function(){var A;try{A=EditorJSLoader.getJSBasePath("editor.js")}catch(i){A=EditorJSLoader.getJSBasePath()}return A}});h.Sidebar=h.Class.create({$const:{__REG_ENTRY_ATTR_PAIR_Q:new RegExp('([\\w]+)="([^"]+)"',"g"),__REG_ENTRY_ATTR_PAIR_NQ:new RegExp("([\\w]+)=([\\w]+)","g")},$mixins:[h.I.JobObservable],entryboxRegistry:k,initialize:function(e){var i=e.getCanvas();
this.entryboxRegistry={};this.getFields=function(){var A=[];for(var C in this.entryboxRegistry){var B=this.entryboxRegistry[C];A=A.concat(B.getFields())}return A};this.syncSidebar=function(){var A=i.getContent();for(var B in this.entryboxRegistry){this.entryboxRegistry[B].syncBox(A)}};this.emptyEntries=function(){for(var A in this.entryboxRegistry){this.entryboxRegistry[A].empty()}};i.observeJob(h.Ev.__CANVAS_PANEL_DELETE_SOMETHING,function(){this.syncSidebar()}.bind(this))}});h.EntryBox=h.Class.draft({$mixins:[h.I.JobObservable],autoSeq:0,datalist:[],initialize:function(){throw new Error("[Exception]Trex.EntryBox : not implements function(initialize)")},newSeq:function(){return(++this.autoSeq)},syncSeq:function(e){this.autoSeq=(e>this.autoSeq)?e:this.autoSeq;return e},empty:function(){this.fireJobs(h.Ev.__ENTRYBOX_ALL_ENTRY_REMOVED);this.datalist=[]},append:function(e){this.datalist.push(e);this.fireJobs(h.Ev.__ENTRYBOX_ENTRY_ADDED,e)},modify:function(e){this.fireJobs(h.Ev.__ENTRYBOX_ENTRY_MODIFIED,e)
},remove:function(e){e.deletedMark=y;this.fireJobs(h.Ev.__ENTRYBOX_ENTRY_REMOVED,e)},syncBox:function(e){this.datalist.each(function(i){i.execSync(e)})},getFields:function(){var e=[];this.datalist.each(function(i){e.push(i.getField())});return e.findAll(function(i){return(i!=k)})},getEntries:function(e){if(!e){return this.datalist}var i=[];this.datalist.each(function(A){if(A.type==e){i.push(A)}});return i}});h.Entry=h.Class.draft({$mixins:[h.I.JobObservable],existStage:d,deletedMark:d,initialize:function(){throw new Error("[Exception]Trex.Entry : not implements function(initialize)")},setExistStage:function(e){this.existStage=e},execRegister:function(){this.register();this.entryBox.append(this);this.setExistStage(y)},execReload:function(){if(this.reload){this.reload()}this.entryBox.append(this);this.exchangeHandlerAtReload()},execRemove:function(){this.remove();this.entryBox.remove(this)},execReplace:function(e){this.replace(e);this.entryBox.modify(this);this.setExistStage(y)},execAppend:function(){this.register();
this.setExistStage(y)},execSync:function(e){this.setExistStage(this.checkExisted(e))},checkExisted:function(e){if(this.canvas.isWYSIWYG()){return(e.search(this.regHtml)>-1)}else{return(e.search(this.regText)>-1)}},getChangedContent:function(i,C,B,A){var e=d;if(i.search(C)>-1){e=y;if(this.actor.canResized){i=this.getChangedContentWithAttr(i,C,B,A)}else{i=i.replace(C,B)}}this.setExistStage(e);return i},getChangedContentFromHtml:function(e){return this.getChangedContent(e,this.regHtml,this.dispText,["id","class"])},getChangedContentToHtml:function(e){return this.getChangedContent(e,this.regText,this.dispHtml)},getChangedContentAtSave:function(e){return this.getChangedContent(e,this.regHtml,this.saveHtml,["id","class"])},getChangedContentAtLoad:function(e){return this.getChangedContent(e,this.regLoad,this.dispHtml)},getChangedContentWithAttr:function(C,e,H,D){D=D||[];var A=h.Util.getAllAttributes(H);var E=function(M){var L=h.Util.getMatchValue(/<([a-z]*)/i,H,1);var N=["<"+L.toLowerCase()];var K=h.Util.getAllAttributes(M);
for(var J in A){if(["width","height"].contains(J)){if(!K[J]){N.push(J+'="'+A[J]+'"')}}else{N.push(J+'="'+A[J]+'"')}}for(var J in K){if(!D.contains(J)){if(["width","height"].contains(J)){N.push(J+'="'+K[J]+'"')}else{if(!A[J]){N.push(J+'="'+K[J]+'"')}}}}N.push("/>");return N.join(" ")};var G=C;var B;e.lastIndex=0;while((B=e.exec(G))!=k){var i=B[0];var I=E(i);var F=i.getRegExp();C=C.replace(new RegExp(F,"gmi"),I)}return C},getField:function(){if(!this.field){return k}return{name:this.field.name,value:[this.field.value,this.existStage].join("|")}},exchangeHandlerAtReload:function(){}});h.Actor=h.Class.draft({$mixins:[h.I.JobObservable],isDisabled:d,initialize:function(){throw new Error("[Exception]Trex.Actor : not implements function(initialize)")},execAttach:function(A,i){var e=this.createEntry(this.getDataForEntry(A),i);e.execRegister();this.canvas.fireJobs("canvas."+(i||this.constructor.__Identity)+".added",e)},getDatalist:function(){return this.entryBox.getEntries(this.name)},execReattach:function(C,A){var B=this.getDatalist();
var D=this.getDataForEntry(C);if(B.length<1){var e=this.createEntry(D,A);e.execRegister()}else{var e=B[0];var i={regHtml:e.regHtml,regText:e.regText};e.setProperties(D);e.execReplace(i)}},execReload:function(B,A,i){var e=this.createEntry(this.getDataForEntry(B,A),i);e.execReload()},existEntry:function(){return((this.getDatalist().length==0)?d:y)},getFirstEntryData:function(){var e=this.getDatalist();return((e.length==0)?k:e[0].data)}});h.install("editor.getDocParser",function(B,C,D,i,e){var A=new h.Docparser(B,D,e);B.getDocParser=function(){return A}});h.Docparser=h.Class.create({initialize:function(i,A,e){this.editor=i;this.sidebar=A;this.config=e},filters:{},registerFilter:function(e,i){this.filters[e]=i},getFilter:function(e){return this.filters[e]},executeFilters:function(A,i){var e=this.filters;["before "+A,A,"after "+A].each(function(D){var B,C;for(B in e){if(e.hasOwnProperty(B)){C=e[B];if(C[D]){i=C[D](i)}}}});return i},getContentsAtChangingMode:function(i,e,A){if(e==A){return i}i=i.trim()||"";
return this.executeFilters(e.concat("2").concat(A),i)},convertAtLoad:function(i,e,A){if(A=="original"){i=this.executeFilters(e.concat("@load"),i)}else{if(e!=A){i=this.executeFilters(A.concat("2").concat(e),i)}}return i},convertAtSave:function(A,i,e){if(e=="original"){A=this.executeFilters(i.concat("4save"),A)}else{if(i!=e){A=this.executeFilters(i.concat("2").concat(e),A)}}return A},text2source:function(e){return this.executeFilters("text2source",e)},text2html:function(e){if(e===""){return z.EMPTY_PARAGRAPH_HTML}return this.executeFilters("text2html",e)},source2text:function(e){return this.executeFilters("source2text",e)},source2html:function(e){if(e===""){return z.EMPTY_PARAGRAPH_HTML}return this.executeFilters("source2html",e)},html2text:function(e){return this.executeFilters("html2text",e)},html2source:function(e){return this.executeFilters("html2source",e)}});h.install("editor.getEntryProxy",function(B,C,D,A,i){var e=new h.EntryProxy(B,D,i);B.getEntryProxy=function(){return e}});h.EntryProxy=h.Class.create({initialize:function(i,A,e){this.editor=i;
this.sidebar=A;this.config=e},commands:{},registerCommand:function(e,i){this.commands[e]=i},getcommand:function(e){return this.commands[e]},executeCommand:function(B,A){for(var e in this.commands){var C=this.commands[e];if(C[B]){C[B](A)}}},setAttachments:function(e,A){e=e||[];A=A||"";var i=this.editor.getAttachBox();i.empty();var B=this.sidebar.getAttacher();e.each(function(D){var C=B[D.attacher];if(C){C.execReload(D.data,A,D.type)}})},getAttachments:function(e,i){i=!!i;var A=[];e.each(function(B){if(B.deletedMark){return}if(i||B.existStage){A.push({attacher:B.actor.name,existStage:B.existStage,data:Object.extend(B.data,{tmpSeq:B.dataSeq})})}});return A}});h.install("editor.getForm",function(A,B,C,i,e){var D=new h.FormProxy(A,C,e);A.getForm=function(){return D}});h.FormProxy=h.Class.create({initialize:function(i,B,e){this.editor=i;this.sidebar=B;this.config=e;var A=this.elForm=c.forms[e.form]||c.getElementById(e.form);if(!A){throw new Error("[Exception]Trex.Form : not exist element - "+e.form)
}A.onsubmit=function(){return d}},submit:function(){this.elForm.submit()},createField:function(e){this.elForm.appendChild(e)},getElements:function(){return this.elForm.elements},getElementByName:function(e){return this.elForm[e]},getFormField:function(){var A={};var C=this.getElements();var e;for(var B=0;B<C.length;B++){e=C[B];if(!["select","input","textarea"].contains(e.tagName.toLowerCase())){continue}if(!e.name&&!e.id){continue}if(e.tagName.toLowerCase()=="select"){if(e.selectedIndex>0){A[e.name]=e.options[e.selectedIndex].value}}else{if(e.type=="radio"&&!e.checked){}else{if(e.type=="checkbox"&&!e.checked){}else{A[e.name||e.id]=e.value}}}}return A},setFormField:function(e){if(!e){return}var E=this.getElements();var C;var A;for(var D=0;D<E.length;D++){C=E[D];if(!["select","input","textarea"].contains(C.tagName.toLowerCase())){continue}if(C.name===k||C.name.length===0){continue}if(!e[C.name]){continue}A=e[C.name];if(C.tagName.toLowerCase()=="select"){for(var B=0;B<C.options.length;B++){if(C.options[B].value==A){C.options[B].selected=y;
break}}}else{if(C.type=="radio"||C.type=="checkbox"){if(C.value==A){C.checked=y}}else{C.value=A}}}}});h.install("editor.getSaver & editor.getDataAsJSON & editor.setDataByJSON",function(A,B,C,i,e){var D=new h.Save(A,B,C,i,e);A.getSaver=function(){return D};A.getDataAsJSON=function(){var E=i.getContent();var F=new h.Validator();if(!F.exists(E)){return k}return{inputmode:i.getCurrentPanel().getName(),content:E,attachments:function(){var G=C.getAttachments();return A.getEntryProxy().getAttachments(G,y)}(),resultBox:function(){var H=A.getResultBox();var G=[];H.datalist.each(function(I){G.push(I.data)});return G}(),formfield:A.getForm().getFormField()}};A.setDataByJSON=function(H){if(!H){return}var F=i.mode;var E=H.inputmode||F;if(E=="original"){}else{if(E!=F){i.fireJobs(h.Ev.__CANVAS_MODE_INITIALIZE,F,E);i.changeMode(E)}}var G=H.content;if(H.attachments){A.getEntryProxy().setAttachments(H.attachments,G)}if(G){G=A.getDocParser().convertAtLoad(G,F,E);i.initContent(G)}if(H.resultBox){H.resultBox.each(function(J){var I;
I=C.searchers[J._meta.type];if(I){I.execReload(J,G)}})}C.syncSidebar();if(H.formfield){A.getForm().setFormField(H.formfield)}}});h.Save=h.Class.create({editor:k,toolbar:k,sidebar:k,canvas:k,config:k,form:k,initialize:function(A,B,C,i,e){this.editor=A;this.toolbar=B;this.sidebar=C;this.canvas=i;this.config=e;this.form=A.getForm();this.docparser=A.getDocParser();this.entryproxy=A.getEntryProxy()},save:function(){try{if(typeof validForm=="function"){if(!validForm(this.editor)){return d}}if(typeof setForm=="function"){if(!setForm(this.editor)){return d}}return y}catch(i){this.editor.fireJobs(h.Ev.__RUNTIME_EXCEPTION,i);return d}},submit:function(){if(this.save()){this.editor.fireJobs(h.Ev.__ON_SUBMIT,this.editor);if(this.config.save&&typeof this.config.save.onSave=="function"){var e=this.config.save.onSave;e()}else{this.form.submit()}}},getContent:function(i){var B=this.canvas;var e=B.mode;var C=i||"original";var A=B.getContent();A=this.docparser.convertAtSave(A,e,C);return A},getAttachments:function(i,e){e=e||d;
var A=this.sidebar.getAttachments(i);return this.entryproxy.getAttachments(A,e)},getEmbeddedData:function(e){return this.sidebar.getEmbeddedData(e)},getResults:function(e){return this.sidebar.getResults(e)},load:function(i){if(!i){throw new Error("[Exception]Trex.Save : not exist argument(data)")}if(typeof loadForm=="function"){loadForm(this.editor,i)}try{this.setDataByJSONToEditor(i)}catch(e){alert(" - Error: "+e.message+"\n\uc18c\uc2a4\ubcf4\uae30 \ubaa8\ub4dc\ub85c \uc804\ud658\ud569\ub2c8\ub2e4.\n\uc798\ubabb\ub41c HTML\uc774 \uc788\ub294\uc9c0 \ud655\uc778\ud574\uc8fc\uc138\uc694.");i.inputmode=h.Canvas.__HTML_MODE;this.setDataByJSONToEditor(i)}if(typeof postLoad=="function"){postLoad(this.editor,i)}},setDataByJSONToEditor:function(e){this.editor.setDataByJSON({inputmode:(!e.inputmode||e.inputmode=="html")?"original":e.inputmode,content:function(){var i=e.content;if(typeof i=="string"){return e.content}else{if(i&&i.nodeType&&(i.nodeType==1)){return e.content.value}else{return""}}}(),attachments:e.attachments})
},makeField:function(){var B=this.sidebar;var A=this.form;var e=this.getContent();A.createField(tx.textarea({name:"tx_content",style:{display:"none"}},e));var i=B.getFields();i.each(function(C){A.createField(tx.input({type:"hidden",name:C.name,value:C.value}))})}});h.module("new Trex.Resizer",function(B,C,E,A,i){var F=i.initializedId||"";var e=t.get("resizer",i);var D=k;B.setMinHeight=function(G){return D.setMinHeight(G)};B.restoreMinHeight=function(){return D.restoreMinHeight()};if(h.available(e,"resizer"+F)){D=new h.Resizer(B,e)}});t.add({resizer:{minHeight:200}});h.Resizer=h.Class.create({$const:{__Identity:"resizer"},$mixins:[h.I.JobObservable],initialize:function(A,e){var D=0;if(!A){return}this.config=e;var E=A.getInitializedId();var i=this.elBar=x("tx_resizer"+E);if(!i){return}if(x.msie_ver=="5.5"){i.setAttribute("align","center")}this.resizeHeightAtService=function(F){if(typeof resizeHeight=="function"){resizeHeight(F)}};this.resizingHeightAtService=function(F){if(typeof resizingEditorHeight=="function"){resizingEditorHeight(F)
}};this.minDragHeight=e.minHeight;var C;this.startDrag=function(G){var I=A.getCanvas();var H=I.getCurrentPanel();if(H==k){return}var F=H.getPosition();this.panelHeight=F.height;this.dragStartPosY=G.clientY;this.isDragging=y;x.observe(c,"mousemove",this.documentDraggingHandler);x.observe(c,"mouseup",this.stopDragHandler);if(H.getName()==h.Canvas.__WYSIWYG_MODE){this.panelTop=F.y;C=H.getDocument();if(C==k){return}I.fireJobs("canvas.height.beforechange");x.observe(C,"mousemove",this.wysiwygDraggingHandler);x.observe(C,"mouseup",this.stopDragHandler)}x.stop(G)};this.stopDrag=function(F){var H=A.getCanvas();var G=H.getCurrentPanel();if(G==k){return}this.isDragging=d;x.stopObserving(c,"mousemove",this.documentDraggingHandler);x.stopObserving(c,"mouseup",this.stopDragHandler);if(C==k){return}x.stopObserving(C,"mousemove",this.wysiwygDraggingHandler);x.stopObserving(C,"mouseup",this.stopDragHandler);C=k;this.resizeHeightAtService(D);H.fireJobs("canvas.height.afterchange");x.stop(F)};this.dragingAtDocument=function(G){var I=A.getCanvas();
if(this.isDragging){var H=I.getCurrentPanel();if(H==k){return}try{var F=Math.max((this.panelHeight+G.clientY-this.dragStartPosY),this.minDragHeight.parsePx()).toPx();H.setPanelHeight(F);D=F;I.fireJobs("canvas.height.change",F);this.resizingHeightAtService(F)}catch(J){}}x.stop(G)};this.dragingAtWysiwyg=function(G){var I=A.getCanvas();if(this.isDragging){var H=I.getCurrentPanel();if(H==k){return}try{var K=c.body.scrollTop||q.scrollTop||j.pageYOffset;var F=Math.max((this.panelHeight+G.clientY-this.dragStartPosY+this.panelTop-K),this.minDragHeight.parsePx()).toPx();H.setPanelHeight(F);I.fireJobs("canvas.height.change",F)}catch(J){}}x.stop(G)};this.startDragHandler=this.startDrag.bindAsEventListener(this);this.stopDragHandler=this.stopDrag.bindAsEventListener(this);this.documentDraggingHandler=this.dragingAtDocument.bindAsEventListener(this);this.wysiwygDraggingHandler=this.dragingAtWysiwyg.bindAsEventListener(this);this.isDragging=d;x.observe(i,"mousedown",this.startDragHandler);var B=A.getCanvas();
B.observeJob("canvas.fullscreen.change",function(){x.hide(i)});B.observeJob("canvas.normalscreen.change",function(){x.show(i)})},setMinHeight:function(e){return this.minDragHeight=e.toPx()},restoreMinHeight:function(){return this.minDragHeight=this.config.minHeight||200}});(function(){function e(C,B){while(C.length>=B){C.shift()}}var A=20;h.History=h.Class.create({});h.History.prototype={maxUndoCount:A,canvas:k,undoMementoList:k,redoMementoList:k,currentMemento:k,contentModified:d,initialize:function(B){this.canvas=B;this.setupHistory();this.bindKeyEvent(B)},bindKeyEvent:function(C){var B=this;C.observeJob("canvas.panel.undo",function(){B.undoHandler()});C.observeJob("canvas.panel.redo",function(){B.redoHandler()})},setupHistory:function(){this.initHistory({content:z.EMPTY_PARAGRAPH_HTML,scrollTop:0})},canUndo:function(){return this.undoMementoList.length>0},canRedo:function(){return this.redoMementoList.length>0},setCurrentMemento:function(B){this.currentMemento=B},undoHandler:function(){var C=this;
C.saveHistoryIfEdited();if(!C.canUndo()){return}var B=C.undoMementoList.pop();B.undo();C.redoMementoList.push(B);C.setCurrentMemento(B)},redoHandler:function(){var B=this;B.saveHistoryIfEdited();if(!B.canRedo()){return}var C=B.redoMementoList.pop();C.redo();B.undoMementoList.push(C);B.setCurrentMemento(C)},initHistory:function(E){var C=this;C.undoMementoList=[];C.redoMementoList=[];var D=new i();var B=Object.extend({content:z.EMPTY_PARAGRAPH_HTML,scrollTop:0},E);D.addUndoData(B);D.addHandler(C.getTextHandler());C.setCurrentMemento(D)},saveHistory:function(F,H,E){var C=this;var B=C.undoMementoList;var G=C.currentMemento;C.redoMementoList=[];if(arguments.length==3){G.addUndoRedData(F,H,E)}var I=C.getTextData();G.addRedoData(I);e(B,C.maxUndoCount);B.push(G);var D=new i();D.addHandler(C.getTextHandler());D.addUndoData(I);C.setCurrentMemento(D);C.contentModified=d},injectHistory:function(E,F,D){if(!this.canUndo()){return}var B=this.undoMementoList;var C=B[B.length-1];C.addUndoRedData(E,F,D)},saveHistoryIfEdited:function(){if(this.contentModified){this.saveHistory()
}},saveHistoryByKeyEvent:function(D){var C={code:D.keyCode,ctrl:D.ctrlKey||(D.keyCode===17),alt:D.altKey||(D.keyCode===18),shift:D.shiftKey||(D.keyCode===16)};if(C.code==229){return}var B=this;if(C.code==h.__KEY.ENTER||C.code==h.__KEY.SPACE||C.code==h.__KEY.TAB){B.saveHistoryIfEdited()}else{if(C.code==h.__KEY.DELETE||C.code==h.__KEY.BACKSPACE){B.saveHistory()}else{if((C.code==h.__KEY.PASTE||C.code==h.__KEY.CUT)&&C.ctrl){B.saveHistory()}else{if(((C.code>32&&C.code<41)&&C.shift)||(C.code==65&&C.ctrl)){B.saveHistoryIfEdited()}else{if(C.ctrl||C.alt||(C.shift&&C.code==16)){}else{B.contentModified=y}}}}}},getTextHandler:function(){var B=this.canvas;return function(C){B.setContent(C.content);setTimeout(function(){B.setScrollTop(C.scrollTop)},0)}},getTextData:function(){return{content:this.canvas.getContent(),scrollTop:this.canvas.getScrollTop()}}};var i=h.Class.create({initialize:function(){this.before={};this.after={};this.handlers=[]},addUndoRedData:function(C,D,B){Object.extend(this.before,C);
Object.extend(this.after,D);this.handlers.push(B)},addHandler:function(B){this.handlers.push(B)},addUndoData:function(B){Object.extend(this.before,B)},addRedoData:function(B){Object.extend(this.after,B)},undo:function(){var B=this;B.handlers.each(function(C){C(B.before)})},redo:function(){var B=this;B.handlers.each(function(C){C(B.after)})}})})();(function(i){var A=new x.Set(13,8,32,33,34,37,38,39,40,46);var e=function(B){return A.contains(B)};t.add({canvas:{doctype:"html",mode:["text","html","source"],styles:{color:"#333333",fontFamily:"\ub3cb\uc6c0",fontSize:"9pt",backgroundColor:"#ffffff",lineHeight:"1.5",padding:"8px"},pMarginZero:true,selectedMode:"html",readonly:d,initHeight:400,minHeight:200,ext:"html",param:"",newlinepolicy:"p",showGuideArea:y,convertingText:y}},function(C){var E=t.get("canvas",C);var B=C.events;E.initializedId=C.initializedId;E.useHotKey=B.useHotKey;var F=t.getTool("switcher",C);if(i.available(F,"switcher"+E.initializedId)){E.mode=F.options.pluck("data")}var G=t.getTool("fontfamily",C);
if(i.available(G,"fontfamily"+E.initializedId)){if(G.webfont&&G.webfont.use){E.webfont=G.webfont;E.webfont.options.each(function(H){H.url=t.getUrl(H.url)})}}var D=t.get("resizer",C);if(D){E.minHeight=D.minHeight}E.wysiwygUrl=t.getUrl([(E.wysiwygPath||"#host#path/pages/daumx/"),"wysiwyg_",(E.serviceWysiwyg||""),((E.doctype=="html")?"html":"xhtml"),".",(E.ext?E.ext:"html"),"?prefix="+C.initializedId,"&",E.param].join(""))});t.add({size:{}});i.Canvas=i.Class.create({$const:{__TEXT_MODE:"text",__HTML_MODE:"source",__WYSIWYG_MODE:"html",__WYSIWYG_PADDING:8,__IMAGE_PADDING:5},$mixins:[i.I.JobObservable,i.I.KeyObservable,i.I.ElementObservable,i.I.MouseoverObservable],editor:k,elContainer:k,config:k,history:k,panels:k,initialize:function(B,D){this.editor=B;var C=this.config=t.get("canvas",D);var E=((D.initializedId)?D.initializedId:"");this.elContainer=x("tx_canvas"+E);this.wysiwygEl=x("tx_canvas_wysiwyg_holder"+E);this.sourceEl=x("tx_canvas_source_holder"+E);this.textEl=x("tx_canvas_text_holder"+E);
this.initConfig(D);this.createPanel();this.history=new i.History(this,C);this.setCanvasSize({height:C.initHeight})},initConfig:function(D){var C=this.config;this.getRootConfig=function(){return D};this.getConfig=function(){return C};this.getStyleConfig=function(E){if(E){return C.styles[E]}else{return C.styles}};var B=t.get("size",D);this.measureWrapWidth=function(){B.wrapWidth=this.getContainerWidth()};this.measureWrapWidth();if(!B.contentWidth){B.contentWidth=B.wrapWidth}B.contentPadding=C.styles.padding.parsePx();this.getSizeConfig=function(){return B}},getContainerWidth:function(){return x.getDimensions(this.elContainer).width},createPanel:function(){var E=this;var D=this.config;this.panels={};this.mode=D.selectedMode||i.Canvas.__WYSIWYG_MODE;if((x.ios&&x.ios_ver<5)||x.android){this.mode=i.Canvas.__TEXT_MODE}var C={text:function(F){return new i.Canvas.TextPanel(E,F)},source:function(F){return new i.Canvas.HtmlPanel(E,F)},html:function(F){return new i.Canvas.WysiwygPanel(E,F)}};D.mode.each(function(F){if(C[F]){E.panels[F]=C[F](D)
}});for(var B in E.panels){if(this.mode==B){E.panels[B].show()}else{E.panels[B].hide()}}E.observeJob("canvas.panel.iframe.load",function(F){E.fireJobs(i.Ev.__IFRAME_LOAD_COMPLETE,F)})},changeMode:function(C){var B=this.editor;var G=this.mode;if(G==C){return}var D=this.panels[G];var E=this.panels[C];if(!D||!E){throw new Error("[Exception]Trex.Canvas : not suppored mode")}var I=D.getContent();var F=B.getDocParser().getContentsAtChangingMode(I,G,C);if(G==i.Canvas.__WYSIWYG_MODE){if(x.msie_ver===8){D.hide()}D.setContent("");try{this.focusOnTop()}catch(H){}}try{E.setContent(F)}catch(J){alert(" - Error: "+J.message+"\n\uc5d0\ub514\ud130 \ud0c0\uc785 \ubcc0\uacbd\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.\n\uc798\ubabb\ub41c HTML\uc774 \uc788\ub294\uc9c0 \ud655\uc778\ud574\uc8fc\uc138\uc694.");D.setContent(I);D.show();return}this.mode=C;this.fireJobs(i.Ev.__CANVAS_MODE_CHANGE,G,C);E.setPanelHeight(D.getPanelHeight());D.hide();E.show();try{if(C=="html"&&!this.getPanel("html").designModeActivated&&x.gecko){this.getPanel("html").el.contentDocument.designMode="on";
this.getPanel("html").designModeActivated=y}}catch(H){throw H}},focus:function(){this.panels[this.mode].focus()},focusOnTop:function(){if(!this.isWYSIWYG()){return}this.getProcessor().focusOnTop()},focusOnBottom:function(){if(!this.isWYSIWYG()){return}this.getProcessor().focusOnBottom()},getCanvasPos:function(){var B=x.cumulativeOffset(this.elContainer);return{x:B[0],y:B[1]}},setCanvasSize:function(B){if(this.panels[this.mode]&&B.height){this.panels[this.mode].setPanelHeight(B.height)}else{throw new Error("[Exception]Trex.Canvas : argument has no property - size.height ")}},canHTML:function(){return this.isWYSIWYG()},isWYSIWYG:function(){return this.mode===i.Canvas.__WYSIWYG_MODE},getPanel:function(B){if(this.panels[B]){return this.panels[B]}else{return k}},getCurrentPanel:function(){if(this.panels[this.mode]){return this.panels[this.mode]}else{return k}},getProcessor:function(B){if(!B){return this.panels[this.mode].getProcessor()}else{return this.panels[B].getProcessor()}},getContent:function(){var B=this.panels[this.mode].getContent();
if(B){B=B.replace(i.__WORD_JOINER_REGEXP,"")}return B},getScrollTop:function(){if(!this.isWYSIWYG()){return 0}return this.panels[this.mode].getScrollTop()},setScrollTop:function(B){if(!this.isWYSIWYG()){return}this.panels[this.mode].setScrollTop(B)},setContent:function(B){this.panels[this.mode].setContent(B);this.includeWebfontCss(B)},initContent:function(B){this.history.initHistory({content:B});this.panels[this.mode].setContent(B);this.includeWebfontCss(B);this.fireJobs(i.Ev.__CANVAS_DATA_INITIALIZE,i.Canvas.__WYSIWYG_MODE,k)},includeWebfontCss:function(B){if(!this.isWYSIWYG()){return}return this.panels[this.mode].includeWebfontCss(B)},getUsedWebfont:function(){if(!this.isWYSIWYG()){return[]}return this.panels[this.mode].getUsedWebfont()},runScript:function(B){if(!this.isWYSIWYG()){return[]}this.panels[this.mode].runScript(B)},importScript:function(B,C){if(!this.isWYSIWYG()){return[]}this.panels[this.mode].importScript(B,C)},query:function(C){if(!this.isWYSIWYG()){return k}var B=this.getProcessor();
return C(B)},execute:function(D){var C=this.history;var B=this.getProcessor();if(this.isWYSIWYG()){if(x.msie){setTimeout(function(){B.restoreRange();D(B);C.saveHistory();B.restore()},0)}else{D(B);B.focus();C.saveHistory();B.restore()}}else{D(B)}},moveCaret:function(B){if(!B){return}if(!this.isWYSIWYG()){return}this.getProcessor().moveCaretWith(B)},pasteContent:function(D,B,C){B=B||d;this.execute(function(E){E.pasteContent(D,B,C)})},pasteNode:function(D,B,C){if(!this.isWYSIWYG()){return}B=B||d;this.execute(function(E){E.pasteNode(D,B,C)})},addStyle:function(B){this.panels[this.mode].addStyle(B)},getStyle:function(B){return this.panels[this.mode].getStyle(B)},getPositionByNode:function(B){if(!this.isWYSIWYG()){return{x:0,y:0,width:0,height:0}}return this.panels[this.mode].getPositionByNode(B)},onKeyDown:function(B){this.fireJobs(i.Ev.__CANVAS_PANEL_KEYDOWN,B);if(this.config.useHotKey){this.fireKeys(B)}},onKeyUp:function(B){var C=B.keyCode;if(e(C)){this.getProcessor().clearDummy()}this.history.saveHistoryByKeyEvent(B);
try{this.mayAttachmentChanged=y;this.fireJobs(i.Ev.__CANVAS_PANEL_KEYUP,B);if(this.isWYSIWYG()&&e(C)){this.triggerQueryStatus()}if(C===i.__KEY.DELETE||C===i.__KEY.BACKSPACE){this.fireJobs(i.Ev.__CANVAS_PANEL_DELETE_SOMETHING)}}catch(D){}},onMouseOver:function(B){try{this.fireMouseover(x.element(B));this.fireJobs(i.Ev.__CANVAS_PANEL_MOUSEOVER,B)}catch(C){}},onMouseOut:function(B){try{this.fireJobs(i.Ev.__CANVAS_PANEL_MOUSEOUT,B)}catch(C){}},onMouseDown:function(B){this.getProcessor().clearDummy();try{this.fireElements(x.element(B))}catch(D){}this.fireJobs(i.Ev.__CANVAS_PANEL_MOUSEDOWN,B);var C=this.history;C.saveHistoryIfEdited()},onMouseUp:function(C){try{var B=this;B.fireJobs(i.Ev.__CANVAS_PANEL_MOUSEUP,C);setTimeout(function(){var E=B.getProcessor().createGoogRange();if(E){B.fireJobs(i.Ev.__CANVAS_PANEL_QUERY_STATUS,E)}},20)}catch(D){}},mayAttachmentChanged:d,onClick:function(B){this.fireJobs(i.Ev.__CANVAS_PANEL_CLICK,B)},onDoubleClick:function(B){this.fireJobs(i.Ev.__CANVAS_PANEL_DBLCLICK,B)
},onScroll:function(B){this.fireJobs(i.Ev.__CANVAS_PANEL_SCROLLING,B)},onPaste:function(){this.fireJobs(i.Ev.__CANVAS_PANEL_PASTE)},triggerQueryStatus:function(){this.cancelReservedQueryStatusTrigger();this.reserveQueryStatusTrigger()},reserveQueryStatusTrigger:function(){var B=this;this.reservedQueryStatusTrigger=setTimeout(function(){var C=B.getProcessor().createGoogRange();if(C){B.fireJobs(i.Ev.__CANVAS_PANEL_QUERY_STATUS,C);B.fireElements(B.getProcessor().getNode())}},20)},cancelReservedQueryStatusTrigger:function(){if(this.reservedQueryStatusTrigger){clearTimeout(this.reservedQueryStatusTrigger)}},syncProperty:function(){this.triggerQueryStatus()}})})(h);h.module("focus body @after editor iframe load",function(i,A,B,e){e.observeJob(h.Ev.__IFRAME_LOAD_COMPLETE,function(){if(!e.isWYSIWYG()){return}try{var C=e.getProcessor();C.focusOnTop()}catch(D){}})});h.module("bind canvas events for close external menus",function(A,B,C,i){var e=function(){A.fireJobs(h.Ev.__SHOULD_CLOSE_MENUS)};i.observeJob(h.Ev.__CANVAS_PANEL_CLICK,e);
i.observeJob(h.Ev.__CANVAS_SOURCE_PANEL_CLICK,e);i.observeJob(h.Ev.__CANVAS_TEXT_PANEL_CLICK,e)});h.module("make getter for 'iframeheight' and 'iframetop' size",function(A,B,C,i){var D=0;var e=0;i.observeJob(h.Ev.__CANVAS_HEIGHT_CHANGE,function(E){D=E.parsePx()});i.observeJob("canvas.apply.background",function(){var F=i.getPanel(h.Canvas.__WYSIWYG_MODE);var E=z.getPosition(F.el);e=E.y});i.reserveJob(h.Ev.__IFRAME_LOAD_COMPLETE,function(){var F=i.getPanel(h.Canvas.__WYSIWYG_MODE);D=F.getPanelHeight().parsePx();var E=z.getPosition(F.el);e=E.y},300);i.getIframeHeight=function(){return D};i.getIframeTop=function(){return e}});h.module("sync attachment data periodically",function(i,A,B,e){setTimeout(function(){setInterval(function(){if(e.mayAttachmentChanged){e.fireJobs(h.Ev.__CANVAS_PANEL_DELETE_SOMETHING);e.mayAttachmentChanged=d}},3000)},10000)});h.Canvas.BasedPanel=h.Class.draft({initialize:function(A,i){this.config=i;this.canvas=A;this.elHolder=this.getHolder(i);this.el=this.getPanel(i);
if(!this.el){throw new Error("[Exception]Trex.Canvas.Panel : panel element is not founded")}var e=this.constructor.__MODE;this.getName=function(){return e};this.lastHeight=k},focus:function(){this.el.focus()},show:function(){try{x.show(this.elHolder)}catch(i){}},hide:function(){try{x.hide(this.elHolder)}catch(i){}},getStyle:function(e){if(this.el.style[e]){return this.el.style[e]}else{return k}},addStyle:function(i){for(var e in i){if(this.el.style[e]){this.el.style[e]=i[e]}}},getPosition:function(){return z.getPosition(this.el)},getPanelHeight:function(){return z.getHeight(this.el).toPx()},setPanelHeight:function(e){e=e.toPx();if(this.lastHeight==e){return}z.setHeight(this.el,e);this.lastHeight=e}});(function(){h.WysiwygIframeLoader=h.Class.create({initialize:function(B){this.iframe=B},load:function(C){try{this.loadLocalIframe(C)}catch(B){this.reloadUsingCatalyst(C)}},loadLocalIframe:function(C){var B=this.iframe.contentWindow.document;B.open();B.write(e);B.close();setTimeout(function(){C(B)
},0)},reloadUsingCatalyst:function(E){var B=this;j.__tx_wysiwyg_iframe_load_complete=function(){B.loadLocalIframe(E)};try{var D=EditorJSLoader.getPageBasePath("editor.js")}catch(C){D=EditorJSLoader.getPageBasePath()}this.iframe.src=D+"trex/iframe_loader_catalyst.html?"+document.domain},loadRemoteIframe:function(){var B=this.el;B.setAttribute("src",this.canvasConfig.wysiwygUrl)}});function A(D){var B=c.location;if(D.indexOf("http://")===0){}else{if(D.indexOf("file://")===0){}else{if(D.indexOf("/")===0){D="http://"+B.host+":"+(B.port||"80")+D}else{var C=B.href;var E=C.lastIndexOf("/");D=C.substring(0,E+1)+D}}}return D}var i=A(EditorJSLoader.getCSSBasePath());var e='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="ko"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Daum\uc5d0\ub514\ud130</title><script id="txScriptForEval"><\/script><link rel="stylesheet" href="'+i+'content_view.css" type="text/css"></link><link rel="stylesheet" href="'+i+'content_wysiwyg.css" type="text/css"></link><style id="txStyleForSetRule"></style></head><body class="tx-content-container">'+z.EMPTY_PARAGRAPH_HTML+"</body></html>"
})();(function(){h.WebfontLoader=h.Class.create({initialize:function(i,e){this.doc=i;this.styleCnt=0;this.defWebfont=e.styles.fontFamily;this.useWebfont=(e.webfont&&e.webfont.use);this.webfontCfg=e.webfont||[];this.elStyleSheet=this.getStyleSheet()},load:function(A){if(!x.msie){return}if(!A){return}if(!this.useWebfont){return}var e=[];A+=" // font-family:"+this.defWebfont;A.replace(/font-family\s*:\s*(\w*)/gi,function(C,B){e.push(B);return C});if(e.length==0){return}var i=this;setTimeout(function(){var B=e.uniq().join("||");i.webfontCfg.options.each(function(C){if(C.url&&B.indexOf(C.data)>-1){i.imports(C)}})},10)},getUsed:function(){if(!x.msie){return[]}var e=[];if(!this.useWebfont){return e}this.webfontCfg.options.each(function(i){if(!i.url){e.push(i.data)}});return e},getStyleSheet:function(){return this.doc.styleSheets[this.styleCnt++]},imports:function(i){try{this.elStyleSheet.addImport(i.url,2)}catch(A){this.elStyleSheet=this.getStyleSheet();this.elStyleSheet.addImport(i.url,2)}i.url=k
}})})();(function(){h.ScriptLoader=h.Class.create({$mixins:[h.I.FHRequester],isJsHolding:d,jsQueue:[],imported:[],initialize:function(e){this.win=e},execScript:function(){if(this.jsQueue.length==0){return}if(!this.isJsHolding){this.isJsHolding=y;try{var e=this.jsQueue.shift();if(this.win["eval"]){txEval(e.script,this.win)}else{this.win.document.getElementById("txScriptForEval").text=e.script}}catch(i){}finally{if(typeof(e.callback)==="function"){e.callback()}this.isJsHolding=d}}setTimeout(this.execScript.bind(this),5)},runBy:function(e,i){this.jsQueue.push({script:e,callback:i});this.execScript()},importBy:function(e,i){if(e.indexOf("cia.daum.net")<0&&this.imported.contains(e)){if(typeof(i)==="function"){i()}return}this.imported.push(e);this.sendRequest("get",e,"",d,function(A){this.runBy(A,i)}.bind(this),function(){})}})})();(function(){var e=16;h.WysiwygRelative=h.Class.create({initialize:function(i){this.iframe=i},getRelative:function(A){var G={x:0,y:0,width:0,height:0};var H=this.iframe.contentWindow.document;
if(A){var F=z.getPosition(A,y);var D=z.getHeight(this.iframe);var i=z.getScrollTop(H);if(F.y+F.height<i||F.y>i+D){return G}else{var E=0;var C=0;var I=z.getWidth(this.iframe);var B=z.getScrollLeft(H);G.x=E+((B>0)?0:F.x);G.width=Math.min(I-F.x-e,F.width-((B>0)?B-F.x:0));G.height=F.height;G.y=F.y-i+C}}return G}})})();(function(){h.WysiwygEventBinder=h.Class.create({initialize:function(D,C,B){this.win=D;this.doc=C;this.canvas=B},bindEvents:function(){this.translateDocumentEventToCanvas("keyup","onKeyUp");this.translateDocumentEventToCanvas("keydown","onKeyDown");this.translateDocumentEventToCanvas("mouseover","onMouseOver");this.translateDocumentEventToCanvas("mouseout","onMouseOut");this.translateDocumentEventToCanvas("click","onClick");this.translateDocumentEventToCanvas("dblclick","onDoubleClick");this.translateDocumentEventToCanvas("mousedown","onMouseDown");this.translateDocumentEventToCanvas("mouseup","onMouseUp");this.translateWindowEventToCanvas("scroll","onScroll");this.translateBodyEventToCanvas("paste","onPaste");
this.triggerQueryStatusWhenTenConsecutiveKeyPressesDetected()},translateDocumentEventToCanvas:function(B,C){this.translateEventToCanvas(this.doc,B,C)},translateWindowEventToCanvas:function(B,C){this.translateEventToCanvas(this.win,B,C)},translateBodyEventToCanvas:function(B,C){this.translateEventToCanvas(this.doc.body,B,C)},translateEventToCanvas:function(E,B,D){var C=this.canvas;x.observe(E,B,function(F){C[D](F)},d)},triggerQueryStatusWhenTenConsecutiveKeyPressesDetected:function(){var B=this.canvas;e(this.doc,function(){B.triggerQueryStatus()})}});var e=function(B,C){var E=0,F=-1,D=(x.msie||x.webkit)?"keydown":"keypress";x.observe(B,D,function(H){var G=H.keyCode;if(!A(G)&&F!==G){if(E>=9){C();E=0}else{E++}F=G}},d)};var A=function(B){return i.contains(B)};var i=new x.Set(8,16,17,18,32,33,34,37,38,39,40,46,229)})();(function(){h.Canvas.WysiwygPanel=h.Class.create({$extend:h.Canvas.BasedPanel,$const:{__MODE:h.Canvas.__WYSIWYG_MODE,EVENT_BINDING_DELAY:500},initialize:function(F,G){this.$super.initialize(F,G);
this.canvasConfig=G;this.iframe=this.el;this.wysiwygWindow=this.iframe.contentWindow;var E=this;var H=new h.WysiwygIframeLoader(this.iframe);H.load(function(I){E.wysiwygDoc=I;E.initializeSubModules(I);E.installScripts(E.wysiwygWindow,I);E.makeEditable();E.applyBodyStyles(E.canvasConfig.styles);E.applyCustomCssText(E.canvasConfig.customCssText);E.clearContent();E.bindEvents(F);Editor.__PANEL_LOADED=y;F.fireJobs(h.Ev.__IFRAME_LOAD_COMPLETE,I)})},initializeSubModules:function(F){var E=this.wysiwygWindow;this.processor=new h.Canvas.ProcessorP(E,F);this.webfontLoader=new h.WebfontLoader(F,this.canvasConfig)},makeEditable:function(){if(this.canvasConfig.readonly){return}if(x.msie||x.chrome||x.webkit_ver>=3){this.wysiwygDoc.body.setAttribute("contentEditable",y.toString())}else{var E=this;setTimeout(function(){try{E.wysiwygDoc.designMode="On";if(x.gecko){E.wysiwygDoc.execCommand("enableInlineTableEditing",d,d)}}catch(F){E.designModeActivated=d}},10)}},getName:function(){return this.constructor.__MODE
},getWindow:function(){return this.wysiwygWindow},getDocument:function(){return this.wysiwygDoc},getContent:function(){return this.wysiwygDoc.body.innerHTML},setContent:function(E){E=this.doPreFilter(E);this.setBodyHTML(E);this.doPostFilter(this.wysiwygDoc.body)},doPreFilter:function(E){if(E){E=C(E);E=i(E)}return E},setBodyHTML:function(E){this.wysiwygDoc.body.innerHTML=E||z.EMPTY_PARAGRAPH_HTML},doPostFilter:function(E){B(E)},clearContent:function(){this.setContent("")},getScrollTop:function(){return z.getScrollTop(this.wysiwygDoc)},setScrollTop:function(E){z.setScrollTop(this.wysiwygDoc,E)},getScrollLeft:function(){return z.getScrollLeft(this.wysiwygDoc)},getProcessor:function(){return this.processor},ifProcessorReady:function(E){if(this.processor){E(this.processor)}},getStyle:function(E){return x.getStyle(this.wysiwygDoc.body,E)},addStyle:function(E){x.setStyleProperty(this.wysiwygDoc.body,E)},setBodyStyle:function(G,F){var E=e(F);x.setStyleProperty(G.body,E)},setFontStyle:function(H,F){var G=Object.extend(F,{browser:x.browser,pMarginZero:this.canvasConfig.pMarginZero?"true":"false"});
var E=new Template(["#{if:pMarginZero=='true'}p { margin:0; padding:0; }#{/if:pMarginZero}","body, td, button { color:#{color}; font-size:#{fontSize}; font-family:#{fontFamily}; line-height:#{lineHeight}; }","a, a:hover, a:link, a:active, a:visited { color:#{color}; }","div.txc-search-border { border-color:#{color}; }","div.txc-search-opborder { border-color:#{color}; }","img.tx-unresizable { width: auto !important; height: auto !important; }","button a { text-decoration:none #{if:browser=='firefox'}!important#{/if:browser}; color:#{color} #{if:browser=='firefox'}!important#{/if:browser}; }"].join("\n")).evaluate(G);x.applyCSSText(H,E)},applyBodyStyles:function(E){var G=this.wysiwygDoc;try{this.setFontStyle(G,E);this.setBodyStyle(G,E)}catch(F){}},applyCustomCssText:function(E){if(!E){return}var F=this.wysiwygDoc;try{x.applyCSSText(F,E)}catch(G){}},setRule:function(E,H){var G,F,I;try{G=this.wysiwygDoc.getElementById("txStyleForSetRule");F=G.sheet?G.sheet:G.styleSheet;I=F.cssRules?F.cssRules:F.rules;
if(F.insertRule){if(0<I.length){F.deleteRule(0)}if(E){F.insertRule(E+"{"+H+"}",0)}}else{if(F.addRule){if(0<I.length){F.removeRule(0)}if(E){F.addRule(E,H,0)}}}}catch(J){}},bindEvents:function(E){var F=new h.WysiwygEventBinder(this.wysiwygWindow,this.wysiwygDoc,E,this.processor);setTimeout(function(){F.bindEvents()},this.constructor.EVENT_BINDING_DELAY)},getPanel:function(E){var F=E.initializedId||"";return $must("tx_canvas_wysiwyg"+F,"Trex.Canvas.WysiwygPanel")},getHolder:function(E){var F=E.initializedId||"";return $must("tx_canvas_wysiwyg_holder"+F,"Trex.Canvas.WysiwygPanel")},focus:function(){this.ifProcessorReady(function(E){E.focus()})},show:function(){this.$super.show();this.ifProcessorReady(function(E){setTimeout(function(){try{E.focusOnTop()}catch(F){}},100)})},hide:function(){this.ifProcessorReady(function(E){E.blur()});this.$super.hide()},includeWebfontCss:function(E){this.webfontLoader.load(E)},getUsedWebfont:function(){return this.webfontLoader.getUsed()},getPositionByNode:function(F){var E=new h.WysiwygRelative(this.iframe);
return E.getRelative(F)},runScript:function(E,G){var F=new h.ScriptLoader(this.wysiwygWindow);F.runBy(E,G)},importScript:function(E,G){var F=new h.ScriptLoader(this.wysiwygWindow);F.importBy(E,G)},installScripts:function(){var E=this,G=E.wysiwygWindow,F=E.wysiwygDoc;installHyperscript(G,F);D(G,E);A(G)}});function e(H){var E=["color","fontSize","fontFamily","lineHeight"];var F=Object.clone(H);for(var G=0;G<E.length;G++){delete F[E[G]]}return F}function D(F,E){F.txImportScript=function(G,H){E.importScript(G,H)}}function A(F){var E=function(){};F.UI={toolTip:E};F.ciaCallback=E;F.ShowOrgImage=E}function C(E){return E.replace(h.__WORD_JOINER_REGEXP,"")}function i(E){if(x.msie){E=E.replace(/(<script|<style)/i,h.__WORD_JOINER+"$1")}return E}function B(F){if(x.msie){var I=z.collectAll(F,"p,li");for(var G=0,E=I.length;G<E;G++){var H=I[G];if(z.getLength(H)===0&&H.tagName.toLowerCase()!=="p"){try{H.innerHTML="&nbsp;"}catch(J){}}if(z.getLength(H)===1&&H.innerHTML==="&nbsp;"){H.innerHTML=""}}}}})();
h.Canvas.TextareaPanel=h.Class.create({$extend:h.Canvas.BasedPanel,initialize:function(i,e){this.$super.initialize(i,e);var A=new h.Canvas.TextAreaProcessor(this.el);this.getProcessor=function(){return A};this.lastHeight=(this.lastHeight-9*2).toPx();if(!!e.readonly){this.setReadOnly()}},show:function(){this.$super.show();var i=this.elHolder;var e=this.getProcessor();setTimeout(function(){try{e.focusOnTop()}catch(A){}if(x.msie6){i.style.padding="1px";setTimeout(function(){i.style.padding="0px"},0)}},100)},setContent:function(e){this.el.value=e},getContent:function(){return this.el.value},getPanelHeight:function(){return(z.getHeight(this.el).parsePx()+2).toPx()},setPanelHeight:function(e){this.$super.setPanelHeight((e.parsePx()-2).toPx())},setReadOnly:function(){this.el.readOnly=y}});h.Canvas.HtmlPanel=h.Class.create({$extend:h.Canvas.TextareaPanel,$const:{__MODE:h.Canvas.__HTML_MODE},initialize:function(i,e){this.$super.initialize(i,e);this.bindEvents();if(x.msie_ver=="8"){this.el.setAttribute("style","width: 500px; min-width: 100%; max-width: 100%;")
}if(!e.styles.notApplyBgColorOnSourceMode){if(e.styles.backgroundColor){x.setStyle(this.el,{backgroundColor:e.styles.backgroundColor})}if(e.styles.color){x.setStyle(this.el,{color:e.styles.color})}}},bindEvents:function(){var e={keydown:function(A){this.canvas.fireJobs(h.Ev.__CANVAS_SOURCE_PANEL_KEYDOWN,A)},keyup:function(){var A=this.canvas.getProcessor();if(A&&A.savePosition){A.savePosition()}},mousedown:function(A){this.canvas.fireJobs(h.Ev.__CANVAS_SOURCE_PANEL_MOUSEDOWN,A)},mouseup:function(){var A=this.canvas.getProcessor();if(A&&A.savePosition){A.savePosition()}},click:function(A){this.canvas.fireJobs(h.Ev.__CANVAS_SOURCE_PANEL_CLICK,A)}};for(var i in e){x.observe(this.el,i,e[i].bind(this),y)}},getPanel:function(e){var i=((e.initializedId)?e.initializedId:"");return $must("tx_canvas_source"+i,"Trex.Canvas.HtmlPanel")},getHolder:function(e){var i=((e.initializedId)?e.initializedId:"");return $must("tx_canvas_source_holder"+i,"Trex.Canvas.HtmlPanel")},setContent:function(i){var e=new h.Validator();
if(e.exists(i)){this.$super.setContent(i)}else{this.$super.setContent("")}}});h.Canvas.TextPanel=h.Class.create({$extend:h.Canvas.TextareaPanel,$const:{__MODE:h.Canvas.__TEXT_MODE},initialize:function(i,e){this.$super.initialize(i,e);this.bindEvents()},bindEvents:function(){var e={keydown:function(){},keyup:function(){},mousedown:function(){},mouseup:function(){},click:function(A){this.canvas.fireJobs(h.Ev.__CANVAS_TEXT_PANEL_CLICK,A)}};for(var i in e){x.observe(this.el,i,e[i].bind(this),y)}},getPanel:function(e){var i=((e.initializedId)?e.initializedId:"");return $must("tx_canvas_text"+i,"Trex.Canvas.TextPanel")},getHolder:function(e){var i=((e.initializedId)?e.initializedId:"");return $must("tx_canvas_text_holder"+i,"Trex.Canvas.TextPanel")}});h.module("interrupt enter key action @ text panel",function(i,B,C,e){var A=e.config.newlinepolicy;var D=e.config.insertbr;if(A=="br"&&D){e.observeJob(h.Ev.__CANVAS_SOURCE_PANEL_KEYDOWN,function(E){if(e.isWYSIWYG()){return}e.getProcessor().controlEnter(E)
})}});h.I.Marker={};h.I.Marker.Standard={paste:function(){var e=this.processor.getRange();var E=e.endContainer;var C=e.startContainer;if(E.nodeType==9){E=this.processor.doc.body;C=this.processor.doc.body}var B=this.endMarker=this.processor.create("span",{id:"tx_end_marker"});var i=e.endOffset;if(E.nodeType==3){E.splitText(i);E.parentNode.insertBefore(B,E.nextSibling)}else{E.insertBefore(B,E.childNodes[i])}var D=this.startMarker=this.processor.create("span",{id:"tx_start_marker"});var A=e.startOffset;if(C.nodeType==3){C.splitText(A);C.parentNode.insertBefore(D,C.nextSibling)}else{C.insertBefore(D,C.childNodes[A])}},remove:function(){z.remove(this.startMarker);z.remove(this.endMarker)}};h.I.Marker.Trident={paste:function(){this.clear();var i=this.processor.getRange();var e=this.processor.doc.body;var B=i.duplicate();B.collapse(y);B.pasteHTML('<span id="tx_start_marker"></span>');this.startMarker=z.collect(e,"#tx_start_marker");var A=i.duplicate();A.collapse(d);A.pasteHTML('<span id="tx_end_marker"></span>');
this.endMarker=z.collect(e,"#tx_end_marker")},clear:function(){var e=this.processor.doc.body;z.remove(z.collect(e,"#tx_start_marker"));z.remove(z.collect(e,"#tx_end_marker"))},remove:function(){z.remove(this.startMarker);z.remove(this.endMarker)}};h.Canvas.Marker=h.Class.create({$mixins:[((x.msie)?h.I.Marker.Trident:h.I.Marker.Standard)],initialize:function(e){this.processor=e},backup:function(){this.processor.bookmarkWithMarker(this)},checkCollapsed:function(){return(z.next(this.startMarker)==this.endMarker)}});h.I.Selection={};h.I.Selection.Standard={getSel:function(){return this.win.getSelection()},getText:function(){return this.getSel().toString()},getNode:function(){var e=this.getRange();if(e){var i=e.startContainer;if(i.nodeType==1){if(z.isBody(i)){return(i)}else{return(i.childNodes[e.startOffset])}}else{return(i.parentNode)}}else{return k}},createRange:function(){return this.doc.createRange()},createTextRange:function(){return this.doc.createRange()},getRange:function(A){var i=this.getSel();
if(i&&i.rangeCount>0){if(A==k){if(i.rangeCount==1){return i.getRangeAt(0)}else{return this.mergeRange(i)}}else{var e=i.getRangeAt(0);e.collapse(A);return e}}else{return this.doc.createRange()}},isCollapsed:function(){var e=this.getSel();return(e&&e.isCollapsed)},collapse:function(i){var A=this.getSel();if(A&&A.rangeCount>0){var e=A.getRangeAt(0);e.collapse(i)}},getControl:function(){var i=this.getSel();var e;if(x.opera){e=i.anchorNode.childNodes[i.anchorOffset];if(e==k){return k}if(i.isCollapsed&&e.tagName!="IMG"){return k}}else{if(i.isCollapsed){return k}e=i.anchorNode.childNodes[i.anchorOffset]}if(z.kindOf(e,"%control")){return e}else{return k}},hasControl:function(){return(this.getControl()!=k)},selectControl:function(i){var e=this.createRange();e.selectNode(i);var A=this.getSel();A.removeAllRanges();A.addRange(e)},compareTextPos:function(){var e=this.getRange();if(e){var i=e.startContainer;if(i.nodeType==3){if(i.textContent.trim().length==0){return z.__POSITION.__EMPTY_TEXT}else{if(e.startOffset==0){return z.__POSITION.__START_OF_TEXT
}else{if(e.startOffset==i.textContent.length){return z.__POSITION.__END_OF_TEXT}else{return z.__POSITION.__MIDDLE_OF_TEXT}}}}}return z.__POSITION.__END_OF_TEXT},mergeRange:function(E){try{var D=[];for(var C=0,H=E.rangeCount;C<H;C++){D.push(E.getRangeAt(C))}E.removeAllRanges();var B=D[0].startContainer.childNodes[D[0].startOffset];var G=D[H-1].endContainer.childNodes[D[H-1].endOffset-1];var A=this.doc.createRange();try{A.setStart(B,0)}catch(F){A.collapse(y)}try{A.setEnd(G,G.childNodes.length)}catch(F){}E.addRange(A);return E.getRangeAt(0)}catch(F){return E.getRangeAt(0)}},setStart:function(i,A,C){try{i.setStart(A,C)}catch(B){i.collapse(y);i.setStart(A,C)}},setEnd:function(i,A,C){try{i.setEnd(A,C)}catch(B){i.collapse(d);i.setEnd(A,C)}},selectRange:function(e){var i=this.getSel();i.removeAllRanges();i.addRange(e)}};h.I.Selection.Trident={getSel:function(){return this.doc.selection},getText:function(){return this.getSel().createRange().text},getNode:function(){var i=this.getSel();var e=i.type.toLowerCase();
if(e==="control"){return(i.createRange().item(0))}else{return(i.createRange().parentElement())}},createRange:function(){var e=this.getSel();return e.createRange()},createTextRange:function(){return this.doc.body.createTextRange()},getRange:function(B){var A=this.getSel();var i=A.type.toLowerCase();if(i=="none"){return A.createRange()?A.createRange():function(){var C=this.doc.body.createTextRange();C.collapse(y);C.select();return C}()}if(B==k){return A.createRange()}else{if(i==="text"){var e=A.createRange();e.collapse(B);e.select();return A.createRange()}else{if(i==="control"){A.empty()}return A.createRange()}}},isCollapsed:function(){var A=this.getSel();var i=A.type.toLowerCase();if(i==="none"){return y}else{if(i==="control"){return y}else{if(i==="text"){var e=A.createRange();return e.compareEndPoints("StartToEnd",e)==0}else{return y}}}},collapse:function(A){var B=this.getSel();var i=B.type.toLowerCase();if(i==="text"){var e=B.createRange();e.collapse(A);e.select();return B.createRange()
}else{if(i==="control"){B.empty()}return B.createRange()}},getControl:function(){var A=this.getSel();var e=A.type.toLowerCase();if(e==="control"){var i=A.createRange().item(0);if(z.kindOf(i,"%control")){return i}else{return k}}else{return k}},hasControl:function(){var i=this.getSel();var e=i.type.toLowerCase();if(e==="control"){return y}else{return d}},selectControl:function(i){var e=this.doc.body.createControlRange();e.add(i);e.select()},compareTextPos:function(){var A=this.getSel();var i=A.type.toLowerCase();if(i==="none"){var e=A.createRange();var B=e.duplicate();B.moveToElementText(e.parentElement());if(B.text.trim().replace(h.__WORD_JOINER_REGEXP,"").length==0){return z.__POSITION.__EMPTY_TEXT}else{if(e.compareEndPoints("StartToStart",B)==0){return z.__POSITION.__START_OF_TEXT}else{if(e.compareEndPoints("EndToEnd",B)==0){return z.__POSITION.__END_OF_TEXT}else{return z.__POSITION.__MIDDLE_OF_TEXT}}}}return z.__POSITION.__END_OF_TEXT},transTextRange:function(e,C,D,A){var B=this.createTextRange();
var i=this.win.span(h.__WORD_JOINER);z.insertAt(i,C);B.moveToElementText(i);z.remove(i);B.collapse(y);B.moveStart("character",D);if(A){e.setEndPoint("StartToStart",B)}else{e.setEndPoint("EndToEnd",B)}return e},setStart:function(i,A,C){try{this.transTextRange(i,A,C,y)}catch(B){console.log(B)}return i},setEnd:function(i,A,C){try{this.transTextRange(i,A,C,d)}catch(B){console.log(B)}return i},selectRange:function(e){e.select()}};h.I.Selection.Gecko={};h.I.Selection.Webkit={getControl:function(){var B=this.getSel();if(B.isCollapsed){return k}if(z.isElement(B.anchorNode)){var A=B.anchorNode.childNodes[B.anchorOffset];if(z.kindOf(A,"%control")){return A}else{return k}}var i=z.previous(B.focusNode);var e=z.next(B.anchorNode);if(i==e){return z.first(i,"%control")}else{return k}},selectControl:function(i){var e=this.createRange();e.selectNode(i);var A=this.getSel();A.removeAllRanges();A.addRange(e)}};h.I.Selection.Presto={};h.Canvas.Selection=h.Class.create({$mixins:[h.I.Selection.Standard,((x.msie)?h.I.Selection.Trident:{}),((x.gecko)?h.I.Selection.Gecko:{}),((x.webkit)?h.I.Selection.Webkit:{}),((x.presto)?h.I.Selection.Presto:{})],initialize:function(e){this.processor=e;
this.win=e.win;this.doc=e.doc}});h.Canvas.Bookmark=h.Class.create({startContainer:k,startOffset:0,endContainer:k,endOffset:0,initialize:function(e){this.processor=e;this.win=e.win;this.doc=e.doc;this.dummy=function(){return e.newDummy()}},collapse:function(e){if(e){this.updateEnd(this.startContainer,this.startOffset)}else{this.updateStart(this.endContainer,this.endOffset)}},save:function(e){this.updateStart(e.startContainer,e.startOffset);this.updateEnd(e.endContainer,e.endOffset)},saveAroundNode:function(e){this.updateStartBefore(z.top(e));this.updateEndAfter(z.bottom(e))},saveIntoFirst:function(i){var e=z.top(i);this.updateEndBefore(e);this.collapse(d)},saveIntoLast:function(i){var e=z.bottom(i);this.updateEndBefore(e);this.collapse(d)},savePreviousTo:function(i){if(z.previous(i)){var e=z.top(z.previous(i));this.updateEndAfter(e)}else{this.updateEndBefore(i)}this.collapse(d)},saveNextTo:function(i){if(z.next(i)){var e=z.top(z.next(i));this.updateEndBefore(e)}else{this.updateEndAfter(i)
}this.collapse(d)},saveWithMarker:function(e){if(e.checkCollapsed()){this.updateEndAfter(e.endMarker);this.collapse(d)}else{this.updateStartBefore(e.startMarker);this.updateEndAfter(e.endMarker)}},select:function(B){if(this.isValid()){var i=B.createTextRange();try{B.setStart(i,this.startContainer,this.startOffset);B.setEnd(i,this.endContainer,this.endOffset)}catch(A){console.log(A)}B.selectRange(i)}this.reset()},isValid:function(){return this.isValidStartContainer()&&this.isValidEndContainer()},isValidStartContainer:function(){return this.doc.body===z.body(this.startContainer)},isValidEndContainer:function(){return this.doc.body===z.body(this.endContainer)},updateStart:function(e,i){this.startContainer=e;this.startOffset=i},updateStartBefore:function(i){var e=this.dummy();z.insertAt(e,i);this.startContainer=e;this.startOffset=0},updateStartAfter:function(i){var e=this.dummy();z.insertNext(e,i);this.startContainer=e;this.startOffset=0},updateEnd:function(e,i){this.endContainer=e;this.endOffset=i
},updateEndBefore:function(i){var e=this.dummy();if(i.nodeName&&i.nodeName.toUpperCase()=="P"&&!i.nodeValue){z.append(i,e)}else{z.insertAt(e,i)}this.endContainer=e;this.endOffset=0},updateEndAfter:function(i){var e=this.dummy();z.insertNext(e,i);this.endContainer=e;this.endOffset=0},reset:function(){this.startContainer=k;this.startOffset=0;this.endContainer=k;this.endOffset=0}});h.Canvas.TextAreaProcessor=h.Class.create({$mixins:[],initialize:function(e){this.el=e},focus:function(){this.el.focus()},focusOnTop:function(){var e=this.el;if(e.createTextRange){var i=e.createTextRange();i.collapse(y);i.moveStart("character",0);i.moveEnd("character",0);i.select()}else{if(e.setSelectionRange){e.select();e.setSelectionRange(0,0)}else{e.focus()}}},blur:function(){j.focus()},savePosition:function(){if(this.el.createTextRange){this.currentPos=c.selection.createRange().duplicate()}},controlEnter:function(){var e=this;e.insertTag("<br/>","")},insertTag:function(e,i){this.pasteContent(e+i);return y},pasteContent:function(e){this.el.value+=e
}});h.I.Processor={};h.I.Processor.Standard={txSelection:k,initialize:function(i,e){this.win=i;this.doc=e;this.txSelection=new h.Canvas.Selection(this);this.bookmark=new h.Canvas.Bookmark(this)},getTxSel:function(){return this.txSelection},getSel:function(){return this.txSelection.getSel()},getRange:function(){return this.txSelection.getRange()},getBookmark:function(){return this.bookmark},isCollapsed:function(){return this.txSelection.isCollapsed()},getNode:function(){return this.txSelection.getNode()},getControl:function(){return this.txSelection.getControl()},hasControl:function(){return this.txSelection.hasControl()},selectControl:function(e){return this.txSelection.selectControl(e)},getText:function(){return this.txSelection.getText()},compareTextPos:function(){return this.txSelection.compareTextPos()},findNode:function(i){try{return z.find(this.getNode(),i)}catch(A){return k}},queryStyle:function(A,i){if(!A){return k}i=((i=="float")?((A.style.styleFloat===u)?"cssFloat":"styleFloat"):i);
if(A.style&&A.style[i]){return A.style[i]}else{if(A.currentStyle&&A.currentStyle[i]){return A.currentStyle[i]}else{if(j.getComputedStyle){var e=this.doc.defaultView.getComputedStyle(A,k);return((e)?e[i]:k)}}}return k},queryAttr:function(i,e){if(!i){return k}return z.getAttribute(i,e)},queryCommandState:function(A){try{return this.doc.queryCommandState(A)}catch(i){return d}},queryCommandValue:function(A){try{return this.doc.queryCommandValue(A)}catch(i){return""}},execCommand:function(B,i){if(x.gecko){try{this.doc.execCommand("styleWithCSS",d,d)}catch(A){}}try{this.doc.execCommand(B,d,i)}catch(A){}},execWithMarker:function(A){var i=new h.Canvas.Marker(this);this.bookmarkTo();try{i.paste();i.backup();A(i)}catch(B){console.log(B,B.stack)}finally{i.remove()}},focus:function(){this.win.focus()},blur:function(){j.focus()},focusOnTop:function(){this.win.focus();this.selectFirstText(this.doc.body);this.doc.body.scrollTop=0},selectFirstText:function(i){var A=z.top(i);var e=this.createGoogRangeFromNodes(A,0,A,0);
e.select()},focusOnBottom:function(){this.win.focus();this.moveCaretTo(this.doc.body,d);this.doc.body.scrollTop=this.doc.body.scrollHeight},moveCaretTo:function(i,e){if(!i){return}this.bookmarkInto(i,e);this.bookmark.select(this.txSelection)},moveCaretWith:function(i){if(!i){return}var e=this.findNode(i);if(e){this.bookmark.saveNextTo(e);this.bookmark.select(this.txSelection)}},selectAround:function(e){if(!e){return}this.bookmark.saveAroundNode(e);this.bookmark.select(this.txSelection)},bookmarkInto:function(i,e){if(!i){return}e=(e==k)?y:e;if(e){this.bookmark.saveIntoFirst(i)}else{this.bookmark.saveIntoLast(i)}},bookmarkToPrevious:function(e){if(!e){return}this.bookmark.savePreviousTo(e)},bookmarkToNext:function(e){if(!e){return}this.bookmark.saveNextTo(e)},bookmarkTo:function(e){e=e||this.txSelection.getRange();this.bookmark.save({startContainer:e.startContainer,startOffset:e.startOffset,endContainer:e.endContainer,endOffset:e.endOffset})},bookmarkWithMarker:function(e){this.bookmark.saveWithMarker(e)
},restore:function(){this.bookmark.select(this.txSelection)},create:function(){var B=arguments[0];var D=this.newNode(B);for(var C=1;C<arguments.length;C++){var e=arguments[C];if(e.nodeType){z.append(D,e)}else{if(typeof(e)=="string"||typeof(e)=="number"){D.innerHTML+=e}else{if(typeof(e)=="array"){for(var A=0;A<e.length;A++){z.append(D,e[A])}}else{z.applyAttributes(D,e)}}}}return D},pasteNode:function(C,B,E){if(!C){return}if(!C.length){C=[].concat(C)}this.txSelection.collapse(d);if(B){var A,i,e;var D=this;this.execWithMarker(function(F){e=z.divideParagraph(F.endMarker);var G=z.kindOf(e,"p,li,dd,dt,h1,h2,h3,h4,h5,h6");if(G){A=z.previous(e);i=z.clone(e)}else{e=D.newNode("p");z.insertAt(e,F.endMarker);i=D.newNode("p")}z.insertAt(i,e);C.each(function(H){z.append(i,H)});if(E){z.applyAttributes(i,E)}});if(A){if(!z.hasData(A)){this.stuffNode(A)}}this.stuffNode(e);this.bookmark.saveIntoFirst(e)}else{this.execWithMarker(function(F){C.each(function(G){z.insertNext(G,F.endMarker)})})}return C[0]},pasteContent:function(A,i,C){var e=this.create("div");
e.innerHTML=A;var B=z.children(e);return this.pasteNode(B,i,C)},replace:function(A,e,i){this.bookmark.saveAroundNode(A);return z.replace(A,this.create(e,i))},blocks:function(A){var C=[];var B=A();if(this.hasControl()){var i=this.getControl();if(z.kindOf(i.parentNode,B)){C.push(i.parentNode)}}else{var e=this;this.execWithMarker(function(D){var F=e.getBlockRangeIterator(B,D.startMarker,D.endMarker);var E;while(F.hasNext()){E=F.next();if(z.kindOf(E,"#tx_start_marker,#tx_end_marker")){}else{C.push(E)}}})}return C},inlines:function(B){var E=[];var C=B();var A=this;var D=function(){return A.create(z.inlineOf())};if(this.hasControl()){var i=this.getControl();if(z.kindOf(i,C)){E.push(i)}else{var e=D();z.insertNext(e,i);z.append(e,i)}}else{this.execWithMarker(function(G){if(G.checkCollapsed()){var F=D();z.append(F,A.newDummy());z.insertNext(F,G.startMarker);A.bookmarkTo({startContainer:F,startOffset:1,endContainer:F,endOffset:1});E.push(F)}else{var I=A.getInlineRangeIterator(C,G.startMarker,G.endMarker);
var H;while(I.hasNext()){H=I.next();if(z.kindOf(H,"#tx_start_marker,#tx_end_marker")){}else{if(z.kindOf(H,"br")){}else{E.push(H)}}}}})}return E},controls:function(e){var i=[];if(this.hasControl()){if(z.kindOf(this.getControl(),e())){i.push(this.getControl())}}return i},addDummyNbsp:function(){},apply:function(i,e){if(!i){return k}if(!i.length){i=[].concat(i)}i.each(function(A){z.applyAttributes(A,e)});return i},wrap:function(A,e,i){if(!A){return k}if(!A.length){A=[].concat(A)}i=i||{};return z.wrap(this.create(e,i),A)},unwrap:function(e){if(!e){return k}this.bookmark.saveAroundNode(e);return z.unwrap(e)},createGoogRange:function(){return g.dom.Range.createFromWindow(this.win)},createGoogRangeFromNodes:function(B,i,e,A){return g.dom.Range.createFromNodes(B,i,e,A)},executeUsingCaret:function(i){try{var e=this.createGoogRange();var A=e.saveUsingCarets();return i(e,A)}finally{if(!A.isDisposed()){A.restore()}}}};h.module("observe that @when control elements are focused at",function(i,A,B,e){if(x.webkit||x.presto){e.observeJob(h.Ev.__CANVAS_PANEL_MOUSEDOWN,function(E){var D=e.getProcessor();
var C=x.element(E);if(z.kindOf(C,"img,hr,iframe,table")){var F=z.find(C,"button");if(F){D.selectControl(F)}else{D.selectControl(C)}}else{if(z.kindOf(C,"button")){D.selectControl(C)}}})}});h.I.Processor.Trident={stuffNode:function(e){if(z.getLength(e)==0){e.innerHTML="&nbsp;"}return e},controlEnterByParagraph:function(){var i=this.findNode("div");var e;if(!i){throw $propagate}var A=this.findNode("%paragraph");if(z.kindOf(A,"p")){if(z.first(i,"p")==A){this.execWithMarker(function(B){e=z.divideParagraph(B.endMarker)});this.stuffNode(A);this.stuffNode(e);this.moveCaretTo(e)}else{throw $propagate}}else{if(z.kindOf(A,"li,td,th,dd,dt")){throw $propagate}else{e=this.newParagraph("p");this.execWithMarker(function(B){z.insertNext(e,B.endMarker)});this.moveCaretTo(e)}}}};h.module("delete image element @when backspace key event fires",function(i,A,B,e){if(x.msie){e.observeKey({ctrlKey:d,altKey:d,shiftKey:d,keyCode:h.__KEY.BACKSPACE},function(){var D=e.getProcessor();if(D.hasControl()&&D.getControl()){try{var C=D.getControl();
z.remove(C)}catch(E){}throw $stop}throw $propagate})}});h.module("delete table element @when backspace key event fires",function(i,A,B,e){if(x.msie){var C;e.observeKey({ctrlKey:d,altKey:d,shiftKey:d,keyCode:h.__KEY.BACKSPACE},function(){var E=e.getProcessor();var D=E.getRange();try{if(C==D.boundingLeft){var G=z.previous(E.getNode());if(z.kindOf(G,"table")){z.remove(G)}}}catch(F){}C=D.boundingLeft;throw $propagate})}});Object.extend(h.I.Processor.Trident,{lastRange:k,shouldHandleOnActivate:y,restoreRange:function(){if(!this.shouldHandleOnActivate){return}if(this.lastRange){try{this.lastRange.select()}catch(C){var B=this.getSel();var A=B.type.toLowerCase();if(A==="control"){B.empty();var i=B.createRange();i.collapse(d);i.select()}}finally{this.lastRange=k}}}});h.module("bind iframe activate or deactivate event",function(i,A,B,e){if(x.msie){e.observeJob(h.Ev.__IFRAME_LOAD_COMPLETE,function(C){var D=e.getProcessor(h.Canvas.__WYSIWYG_MODE);x.observe(C,"beforedeactivate",function(G){var E=G.toElement;
if(E){D.shouldHandleOnActivate=d;D.lastRange=k}else{var F=x.element(G);if(!F||!z.isElement(F)){return}D.shouldHandleOnActivate=!z.kindOf(F,"iframe,object");D.lastRange=D.getRange()}});x.observe(C,"activate",function(){D.lastRange=k})})}});h.I.Processor.Gecko={stuffNode:function(e){return z.stuff(e,this.newNode("br"))},controlEnterByParagraph:function(){throw $propagate}};h.I.Processor.Webkit={stuffNode:function(e){return z.stuff(e,this.newNode("br"))},controlEnterByParagraph:function(){throw $propagate},findParagraph:function(A){var e=function(B){return z.kindOf(B,"div,p,blockquote")};var i=function(B){return z.kindOf(B,"body,li,%tablegroup")};return z.findAncestor(A,e,i)},findAncestorListItem:function(A){var e=function(B){return z.kindOf(B,"li")};var i=function(B){return z.kindOf(B,"body,%tablegroup")};return z.findAncestor(A,e,i)},divideListItem:function(e){var A,i=this;i.execWithMarker(function(B){A=z.divideTree(e,B.endMarker)});if(!z.hasUsefulChildren(e,y)){e.innerHTML=""}if(!z.hasUsefulChildren(A,y)){A.innerHTML=""
}i.stuffNode(e);i.stuffNode(A);i.moveCaretTo(A)},queryCommandState:function(C){var i=this.getRange();if(this.hasControl()&&i.collapsed===d&&i.endOffset-i.startOffset===1){if(C==="bold"||C==="underline"||C==="italic"||C==="strikethrough"){var A=this.getControl();if(A.tagName==="IMG"||A.tagName==="BUTTON"){return d}}}try{return this.doc.queryCommandState(C)}catch(B){return d}},addDummyNbsp:function(e){var i;if(e.length===1){i=e[0];if(i.tagName.toLowerCase()==="span"&&i.childNodes.length===1&&i.firstChild.nodeType===3&&i.firstChild.data===""){i.firstChild.data="\u00A0"}}}};h.I.Processor.Presto={stuffNode:function(e){return z.stuff(e,this.newNode("br"))},controlEnterByParagraph:function(e){throw $propagate}};h.I.Processor.StandardP={putBogusParagraph:function(){var A=this.doc.body;var i=z.last(A);if(i&&z.kindOf(i,"p")){return}var e=this.newParagraph("p");if(z.kindOf(i,"br")){z.replace(i,e)}else{z.append(A,e)}}};h.module("put bogus paragraph @when any key event fires",function(i,A,B,e){if(x.msie){return
}if(e.config.newlinepolicy=="p"){e.reserveJob(h.Ev.__CANVAS_PANEL_KEYUP,function(){if(!e.isWYSIWYG()){return}var C=e.getProcessor();C.putBogusParagraph()},10)}});h.module("interrupt enter key action @ wysiwyg panel",function(i,A,C,e){var B=t.get("canvas");if(B.newlinepolicy!="p"){return}e.observeKey({ctrlKey:d,altKey:d,shiftKey:d,keyCode:h.__KEY.ENTER},function(E){if(!e.isWYSIWYG()){return}var D=e.getProcessor();try{D.getTxSel().collapse(d);D.controlEnterByParagraph(E)}catch(F){if(F==$propagate){throw F}}})});h.I.Processor.TridentP={};h.I.Processor.GeckoP={};h.I.Processor.WebkitP={};h.I.Processor.PrestoP={};(function(){var e=h.Class.create({initialize:function(B,A,C,i){this.processor=B;this.start=C;this.end=i||this.start;this.current=this.start;this.wTranslator=z.translate(A).extract("%wrapper");this.pTranslator=z.translate(A).extract("%paragraph")},hasNext:function(){return !!this.current},next:function(){var A=this.current;A=this.find(A);var i=A;if(z.include(A,this.end)){i=k}else{while(i&&!z.next(i)){i=z.parent(i);
if(z.isBody(i)){i=k}}if(i){i=z.next(i)}}if(i==this.end){i=k}this.current=i;return A},find:function(D){var B;var C=D;if(!z.hasContent(C)){return C}while(C){B=C;if(z.isBody(C)||z.kindOf(C,"%tablegroup")){break}if(z.kindOf(C,this.wTranslator.getExpression())){return C}if(z.kindOf(C,"%wrapper,%outergroup")){C=z.descendant(B,this.pTranslator.getExpression());if(C){return C}C=z.descendant(B,"%paragraph");if(C){B=C;break}}if(z.kindOf(C,this.pTranslator.getExpression())){return C}C=C.parentNode}var A=z.paragraphOf(z.getName(B));var E=this.processor.newNode(A);var i=z.extract(B,D,"%text,%inline,img,object,embed,hr");z.wrap(E,i);this.processor.stuffNode(E);return E}});Object.extend(h.I.Processor.Standard,{getBlockRangeIterator:function(A,B,i){return new e(this,A,B,i)}})})();(function(){var e=h.Class.create({initialize:function(B,A,C,i){this.processor=B;this.start=C;this.end=i||this.start;this.current=this.start;this.iTranslator=z.translate(A).extract("%inline")},hasNext:function(){return !!this.current
},next:function(){var A=this.current;A=this.find(A);var i=A;if(A==this.end){i=k}else{while(i&&!z.next(i)){i=z.parent(i);if(z.isBody(i)){i=k}}if(i){i=z.next(i)}}if(z.include(i,this.end)){i=z.top(i,y)}this.current=i;return A},find:function(D){var C=D;if(z.kindOf(C,"%paragraph,%outergroup,%block")||z.isBody(C)){var B=C;C=z.top(B,y);if(!C){var A=z.inlineOf();var i=this.processor.create(A);z.append(B,i);return i}}if(z.kindOf(C,"br")){return C}else{if(!z.hasContent(C)){return C}}if(z.kindOf(C,this.iTranslator.getExpression())){return C}var A=z.inlineOf();var i=this.processor.create(A);z.insertAt(i,C);if(C){z.append(i,C)}return i}});Object.extend(h.I.Processor.Standard,{getInlineRangeIterator:function(A,B,i){return new e(this,A,B,i)}})})();(function(){var e=k;var i={};var A={};Object.extend(h.I.Processor.Standard,{newNode:function(B){if(e!=this.doc){i={};e=this.doc}if(!i[B]){i[B]=this.win[B]()}return z.clone(i[B],d)},newText:function(B){return this.doc.createTextNode(B)},newParagraph:function(B){if(e!=this.doc){A={};
e=this.doc}if(!A[B]){A[B]=this.stuffNode(this.newNode(B))}return z.clone(A[B],y)}})})();(function(){var e=k;var i=k;var B=d;var A=[];Object.extend(h.I.Processor.Standard,{newDummy:function(C){if(e!=this.doc){i=k;A=[];e=this.doc}if(!i){i=this.doc.createTextNode(h.__WORD_JOINER)}var D=z.clone(i);if(!C){A.push(D);B=y}return D},clearDummy:function(){if(!B){return}var E,G;try{E=this.createGoogRange();G=E&&E.getStartNode()}catch(D){}var J=k;for(var H=0,C=A.length-1;H<C;H++){try{var F=A.shift();if(F&&F.nodeValue){if(F.nodeValue==h.__WORD_JOINER){if(G!=F){z.remove(F)}else{J=F}}else{F.nodeValue=F.nodeValue.replace(h.__WORD_JOINER_REGEXP,"")}}else{}}catch(I){}}J&&A.splice(0,0,J);B=d}})})();h.Canvas.Processor=h.Class.draft({$mixins:[h.I.Processor.Standard,((x.msie)?h.I.Processor.Trident:{}),((x.gecko)?h.I.Processor.Gecko:{}),((x.webkit)?h.I.Processor.Webkit:{}),((x.presto)?h.I.Processor.Presto:{})]});h.Canvas.ProcessorP=h.Class.create({$extend:h.Canvas.Processor,$mixins:[h.I.Processor.StandardP,((x.msie)?h.I.Processor.TridentP:{}),((x.gecko)?h.I.Processor.GeckoP:{}),((x.webkit)?h.I.Processor.WebkitP:{}),((x.presto)?h.I.Processor.PrestoP:{})]});
h.register("filter > mode change",function(G,H,e,B,D){function A(L){var M=[[new RegExp("<head[^>]*>.*?<\\/head>","gi"),""],[new RegExp("<script[^>]*>.*?<\\/script>","gi"),""],[new RegExp("<style[^>]*>.*?<\\/style>","gi"),""],[new RegExp("<!--.*?-->","gi"),""],[new RegExp("<h[1-6][^>]*>(.+?)<\\/h[1-6]>","gi"),"\n$1\n\n"],[new RegExp("\r\n(<p[^>]*>|<div[^>]*>|<ul[^>]*>|<ol[^>]*>|<li[^>]*>)","gi"),"$1"],[new RegExp("(<p[^>]*>(.+?)<\\/p>)","gi"),"$1\n"],[new RegExp("<br[^>]*>\\n","gi"),"\n"],[new RegExp("<br[^>]*>","gi"),"\n"],[new RegExp("(<ul[^>]*>|<\\/ul>|<ol[^>]*>|<\\/ol>|<\\/table>)","gi"),"\n\n"],[new RegExp("<td[^>]*>(.+?)<\\/td>\n?","gi"),"\t$1"],[new RegExp("<th[^>]*>(.+?)<\\/th>\n?","gi")," \t$1"],[new RegExp("<\\/tr>\n?","gi"),""],[new RegExp("<tr[^>]*>\n?","gi"),"\n"],[new RegExp("(<li[^>]*>(.+?)<\\/li>)","gi"),"\t$1\n"],[new RegExp("<[\\/a-zA-Z!]+[^>]*>","g"),""],[new RegExp("&nbsp;?","g")," "],[new RegExp("&quot;?","g"),'"'],[new RegExp("&gt;?","g"),">"],[new RegExp("&lt;?","g"),"<"],[new RegExp("&amp;?","g"),"&"],[new RegExp("&copy;?","g"),"(c)"],[new RegExp("&trade;?","g"),"(tm)"],[new RegExp("&#8220;?","g"),'"'],[new RegExp("&#8221;?","g"),'"'],[new RegExp("&#8211;?","g"),"_"],[new RegExp("&#8217;?","g"),"'"],[new RegExp("&#38;?","g"),"&"],[new RegExp("&#169;?","g"),"(c)"],[new RegExp("&#8482;?","g"),"(tm)"],[new RegExp("&#151;?","g"),"--"],[new RegExp("&#039;?","g"),"'"],[new RegExp("&#147;?","g"),'"'],[new RegExp("&#148;?","g"),'"'],[new RegExp("&#149;?","g"),"*"],[new RegExp("&reg;?","g"),"(R]"],[new RegExp("&bull;?","g"),"*"]];
var K=L;for(var J=0;J<M.length;J++){K=K.replace(M[J][0],M[J][1])}return K}function F(J){return J.replace(new RegExp("<br[^>]*>\\n","gi"),"\n")}function E(J){if(J!==k&&J.length!==0){J=J.replace(/&/g,"&amp;");J=J.replace(/ /g,"&nbsp;");J=J.replace(/\"/g,"&quot;");J=J.replace(/>/g,"&gt;");J=J.replace(/</g,"&lt;");if(J.lastIndexOf("\n")===J.length-1){J=J.substr(0,J.length-1)}if(J.lastIndexOf("\r")===J.length-1){J=J.substr(0,J.length-1)}J=J.replace(/\r\n|\r|\n/g,"<br>\n")}return J}function C(J){return x.msie?J:J.replace(/(\n*<p>)/gi,"\n$1").replace(/^\n/,"")}function I(J){return x.msie?J:J.replace(/\n+(<p>)/gi,"$1")}var i=G.getDocParser();i.registerFilter("filter/converting",{"text@load":function(J){return A(J)},"source@load":function(J){return J},"html@load":function(J){return J},text4save:function(K){var J;if(D.canvas.escapeTextModeContents){J=E(K)}else{J=K}try{J=F(J)}catch(L){}return J},source4save:function(J){return J},html4save:function(J){return J},text2source:function(J){return E(J)},text2html:function(J){return E(J)
},source2text:function(J){return A(I(J))},source2html:function(J){return I(J)},html2text:function(J){return A(J)},html2source:function(J){return C(J)}})});h.register("filter > clear redundancy",function(A){function e(D){var B=function(K,H,G){var J=0;var F=function(L,M,N){J++;if(N.length==0||N.trim().length==0){return""}else{return['<span style="',H,":",M,';">',N,"</span>"].join("")}};var I=new RegExp('(?:<span[^>;]*style="'+H+':[^";]*;?"[^>;]*>){'+G+"}<span\\s*style=['\"]?"+H+":\\s*(\\w+)[;'\"]*>([\\S\\s]*?)</span>(?:</span>){"+G+"}","gi");do{J=0;K=K.replace(I,F)}while(J>0);return K};D=D.replace(/<(span|font)([^>]*)><\/\1>/gi,function(H,F,G){if(/ (?:id|class)=/i.test(G)){return H}return""});var E=["font-size","font-family"];for(var C=0;C<E.length;C++){D=B(D,E[C],2);D=B(D,E[C],1)}return D}var i=A.getDocParser();i.registerFilter("filter/redundancy",{"text@load":function(B){return B},"source@load":function(B){return e(B)},"html@load":function(B){return e(B)},text4save:function(B){return B},source4save:function(B){return B
},html4save:function(B){return B},text2source:function(B){return B},text2html:function(B){return B},source2text:function(B){return B},source2html:function(B){return B},html2text:function(B){return B},html2source:function(B){return e(B)}})});l.addMsg({"@attacher.only.wysiwyg.alert":"\uc5d0\ub514\ud130 \uc0c1\ud0dc\uc5d0\uc11c\ub9cc \ubcf8\ubb38\uc5d0 \uc0bd\uc785\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n\uc5d0\ub514\ud130\ubaa8\ub4dc\uc5d0\uc11c \ucca8\ubd80\ubc15\uc2a4\uc758 \uc378\ub124\uc77c\uc744 \ud074\ub9ad\ud574\uc11c \uc0bd\uc785\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."});h.Attachment=h.Class.draft({$extend:h.Entry,isChecked:d,focused:d,attrs:{align:"left"},initialize:function(e,i){this.actor=e;this.canvas=e.canvas;this.entryBox=e.entryBox;this.type=this.constructor.__Identity;this.setProperties(i);if(this.oninitialized){this.oninitialized(e,i)}},setFocused:function(e){if(this.focused!==e){this.focused=e}},setExistStage:function(e){this.existStage=e;if(this.entryBox.changeState){this.entryBox.changeState(this)
}},remove:function(){var e=this.canvas.getContent();if(this.canvas.isWYSIWYG()){if(e.search(this.regHtml)>-1){e=e.replace(this.regHtml,"");this.canvas.setContent(e)}}else{if(e.search(this.regText)>-1){e=e.replace(this.regText,"");this.canvas.setContent(e)}}},register:function(){if(Editor.getSidebar().addOnlyBox){return}var A=this.actor;if(A.boxonly){return}if(this.canvas.isWYSIWYG()){var C=this.pastescope;var D=this.dispHtml;var B="img";var i=D.match(/<(\w+)/);if(i&&i[1]){B=i[1]}var E=new RegExp("<"+B+" ","i");if(this.objectStyle){D=D.replace(E,"<"+B+' style="'+h.Util.toStyleString(this.objectStyle)+'" ')}if(this.objectAttr){D=D.replace(E,"<"+B+" "+h.Util.toAttrString(this.objectAttr)+" ")}var e=this.paragraphStyle||{};this.canvas.execute(function(F){F.moveCaretWith(C);F.pasteContent(D,y,{style:e})})}else{if(this.actor.wysiwygonly){alert(TXMSG("@attacher.only.wysiwyg.alert"))}else{this.canvas.getProcessor().insertTag("",this.dispText)}}},replace:function(B){var A=this.canvas;var i=A.getContent();
var e=this.actor;if(!e.boxonly){if(A.isWYSIWYG()){if(i.search(B.regHtml)>-1){i=i.replace(B.regHtml,this.dispHtml);A.setContent(i)}else{A.pasteContent(this.dispHtml,y)}}else{if(i.search(B.regText)>-1){i=i.replace(B.regText,"");A.setContent(i)}alert(TXMSG("@attacher.only.wysiwyg.alert"))}}},setProperties:function(i){var e=i;this.data=e;this.key=this.actor.getKey(e)||"K"+h.Util.generateKey();this.field=this.getFieldAttr(e);this.boxAttr=this.getBoxAttr(e);this.objectAttr=this.getObjectAttr.bind(this)(e);this.objectStyle=this.getObjectStyle.bind(this)(e);this.paragraphStyle=this.getParaStyle.bind(this)(e);this.saveHtml=this.getSaveHtml.bind(this)(e);this.dispHtml=this.getDispHtml.bind(this)(e);this.dispText=this.getDispText.bind(this)(e);this.regLoad=this.getRegLoad.bind(this)(e);this.regHtml=this.getRegHtml.bind(this)(e);this.regText=this.getRegText.bind(this)(e)},refreshProperties:function(){this.setProperties(this.data)},getObjectAttr:function(){return this.actor.config.objattr},getObjectStyle:function(){var e={};
if(this.actor.config.objstyle){e=Object.extend(e,this.actor.config.objstyle)}return e},getParaStyle:function(e){var i=Object.extend({},this.actor.config.parastyle||this.actor.config.defaultstyle);return i}});t.addSidebar("attachbox",{show:d,destroy:d});h.AttachBox=h.Class.create({$extend:h.EntryBox,isChecked:d,initialize:function(){},checkAvailableCapacity:function(){return y},getAvailableCapacity:function(){return y},checkInsertableSize:function(){return y}});h.install("editor.getAttachBox & sidebar.getAttachments",function(B,C,D,A,i){var e=new h.AttachBox(i,B);D.entryboxRegistry.attachbox=e;B.getAttachBox=function(){return e};D.getAttachments=e.getEntries.bind(e)});h.register("filter > attachers",function(A){var e=A.getAttachBox();var i=A.getDocParser();i.registerFilter("filter/attachments",{"text@load":function(C){var B=e.datalist;B.each(function(D){if(D.loadDataByContent){D.loadDataByContent("text@load",C)}C=D.getChangedContent(C,D.regLoad,"")});return C},"source@load":function(C){var B=e.datalist;
B.each(function(D){if(D.loadDataByContent){D.loadDataByContent("source@load",C)}C=D.getChangedContent(C,D.regLoad,D.dispText)});return C},"html@load":function(C){var B=e.datalist;B.each(function(D){if(D.loadDataByContent){D.loadDataByContent("html@load",C)}C=D.getChangedContent(C,D.regLoad,D.dispHtml)});return C},text4save:function(C){var B=e.datalist;B.each(function(D){if(D.loadDataByContent){D.loadDataByContent("text4save",C)}C=D.getChangedContent(C,D.regText,"")});return C},source4save:function(C){var B=e.datalist;B.each(function(D){if(D.loadDataByContent){D.loadDataByContent("source4save",C)}C=D.getChangedContent(C,D.regText,D.saveHtml,["id","class"])});return C},html4save:function(C){var B=e.datalist;B.each(function(D){if(D.loadDataByContent){D.loadDataByContent("html4save",C)}C=D.getChangedContent(C,D.regHtml,D.saveHtml,["id","class"])});return C},text2source:function(B){return B},text2html:function(B){return B},source2text:function(C){var B=e.datalist;B.each(function(D){if(D.loadDataByContent){D.loadDataByContent("source2text",C)
}C=D.getChangedContent(C,D.regText,"")});return C},source2html:function(C){var B=e.datalist;B.each(function(D){if(D.loadDataByContent){D.loadDataByContent("source2html",C)}C=D.getChangedContent(C,D.regText,D.dispHtml)});return C},html2text:function(C){var B=e.datalist;B.each(function(D){if(D.loadDataByContent){D.loadDataByContent("html2text",C)}C=D.getChangedContent(C,D.regHtml,"")});return C},html2source:function(C){var B=e.datalist;B.each(function(D){if(D.loadDataByContent){D.loadDataByContent("html2source",C)}C=D.getChangedContent(C,D.regHtml,D.dispText,["id","class"])});return C}})});h.module("push history @when entrybox has changes",function(A,B,C,i){var e=A.getAttachBox();e.observeJob(h.Ev.__ENTRYBOX_ENTRY_REMOVED,function(E){i.history.saveHistory({deleted:d},{deleted:y},function(F){E.deletedMark=F.deleted;e.fireJobs(h.Ev.__ENTRYBOX_ENTRY_REFRESH,E)})});var D=function(E){if(x.msie){setTimeout(function(){E()},0)}else{E()}};e.observeJob(h.Ev.__ENTRYBOX_ENTRY_ADDED,function(E){D(function(){i.history.injectHistory({deleted:y},{deleted:d},function(F){E.deletedMark=F.deleted;
e.fireJobs(h.Ev.__ENTRYBOX_ENTRY_REFRESH,E)})})})});l.addMsg({"@attacher.ins":"\uc0bd\uc785","@attacher.del":"\uc0ad\uc81c","@attacher.preview.image":"#iconpath/pn_preview.gif","@attacher.delete.confirm":"\uc0ad\uc81c\ud558\uc2dc\uba74 \ubcf8\ubb38\uc5d0\uc11c\ub3c4 \uc0ad\uc81c\ub429\ub2c8\ub2e4. \uacc4\uc18d\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?","@attacher.delete.all.confirm":"\uc120\ud0dd\ud55c \ucca8\ubd80\ud30c\uc77c\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \uc0ad\uc81c\ud558\uc2dc\uba74 \ubcf8\ubb38\uc5d0\uc11c\ub3c4 \uc0ad\uc81c\ub429\ub2c8\ub2e4.","@attacher.exist.alert":"\uc774\ubbf8 \ubcf8\ubb38\uc5d0 \uc0bd\uc785\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4."});h.install("attachbox.onAttachBoxInitialized @if config.sidebar.attachbox.show = true",function(B,C,D,A,i){var e=B.getAttachBox();if(i.sidebar.attachbox.show==y){Object.extend(e,h.I.AttachBox);e.onAttachBoxInitialized(i,A,B)}});h.I.AttachBox={useBox:y,isDisplay:d,lastSelectedEntry:k,onAttachBoxInitialized:function(D,C){var H=this;
this.canvas=C;var E=((D.initializedId)?D.initializedId:"");this.elBox=$must("tx_attach_div"+E,"Trex.I.AttachBox");this.elList=$must("tx_attach_list"+E,"Trex.I.AttachBox");var I=$must("tx_attach_preview"+E,"Trex.I.AttachBox");this.elPreviewKind=z.collect(I,"p");var i=this.elPreviewImg=z.collect(I,"img");this.imageResizer=new h.ImageResizer(i,{maxWidth:147,maxHeight:108,defImgUrl:TXMSG("@attacher.preview.image"),onComplete:function(K,J){i.style.marginTop=Math.floor((108-J)/2).toPx()}});this.elDelete=z.collect("#tx_attach_delete"+E+" a");x.observe(this.elDelete,"click",this.onDeleteAll.bind(this));if(typeof showAttachBox=="function"){this.observeJob(h.Ev.__ATTACHBOX_SHOW,function(){showAttachBox()})}if(typeof hideAttachBox=="function"){this.observeJob(h.Ev.__ATTACHBOX_HIDE,function(){hideAttachBox()})}var e=this.elProgress=$must("tx_upload_progress"+E,"Trex.I.AttachBox");this.elProgressPercent=z.collect(e,"div");this.elProgressTicker=z.collect(e,"p");this.observeJob(h.Ev.__ENTRYBOX_ENTRY_ADDED,function(J){H.registerEntryNode(J);
H.displayBox()});this.observeJob(h.Ev.__ENTRYBOX_ENTRY_MODIFIED,function(J){H.modifyEntryNode(J);H.refreshPreview()});this.observeJob(h.Ev.__ENTRYBOX_ENTRY_REMOVED,function(J){H.removeEntryNode(J);H.displayBox();if(H.lastSelectedEntry&&H.lastSelectedEntry.key==J.key){H.refreshPreview()}});this.observeJob(h.Ev.__ENTRYBOX_ALL_ENTRY_REMOVED,function(){H.datalist.each(function(J){H.removeEntryNode(J,y)});H.displayBox();if(H.lastSelectedEntry){H.refreshPreview()}});this.observeJob(h.Ev.__ENTRYBOX_ENTRY_REFRESH,function(J){H.displayBox();H.refreshEntryNode(J)});var F=x("tx_attach_up_size"+E),G=x("tx_attach_max_size"+E),B=x("tx_attach_group_used_size"+E),A=x("tx_attach_group_max_size"+E);this.observeJob(h.Ev.__ENTRYBOX_CAPACITY_UPDATE,function(){var J=D.sidebar.capacity;if(J.show==d){return}if(F){F.innerText=J.uploaded.toByteUnit()}if(G){G.innerText=J.available.toByteUnit()}if(J.group){if(B){B.innerText=(J.group.used+J.uploaded).toByteUnit()}if(A){A.innerText=J.group.maximum.toByteUnit()}}})},onDeleteAll:function(e){if(this.datalist.length===0){return
}if(!e&&!confirm(TXMSG("@attacher.delete.all.confirm"))){return}this.datalist.each(function(i){if(i.deletedMark==d){i.execRemove()}});this.initPreviewImage()},checkDisplay:function(){return this.isDisplay},setDisplay:function(e){this.isDisplay=e},displayBox:function(){var e=d;for(var A=0;A<this.datalist.length;A++){if(this.datalist[A].deletedMark==d){e=y}}if(this.isDisplay==e){return}if(e){x.show(this.elBox);this.fireJobs(h.Ev.__ATTACHBOX_SHOW,y)}else{x.hide(this.elBox);this.fireJobs(h.Ev.__ATTACHBOX_HIDE,d)}this.isDisplay=e},registerEntryNode:function(B){var D=tx.li();this.elList.appendChild(D);B.elData=D;B.makeSelection=function(F){if(F){this.showEntryThumb(B)}else{this.hideEntryThumb(B)}}.bind(this);x.observe(D,"mouseover",this.onEntryMouseOver.bind(this,B));x.observe(D,"mouseout",this.onEntryMouseOut.bind(this,B));var C=tx.dl();D.appendChild(C);var i=B.elName=tx.dt({className:"tx-name",unselectable:"on"},B.boxAttr.name);C.appendChild(i);x.observe(D,"click",function(F){var G=x.element(F);
if(G.className=="tx-delete"||G.className=="tx-insert"){return}if(F.ctrlKey){this.clickEntryWithCtrl(B)}else{if(F.shiftKey){this.clickEntryWithShift(B)}else{this.clickEntry(B)}}if(B.actor.name=="image"){if(!B.data.width||!B.data.height){new h.ImageScale(B.data)}}}.bind(this),d);var A=tx.dd({className:"tx-button"});C.appendChild(A);var e=tx.a({className:"tx-delete"},TXMSG("@attacher.del"));A.appendChild(e);x.observe(e,"click",function(){if(!confirm(TXMSG("@attacher.delete.confirm"))){return}B.execRemove()},d);var E=B.elInsert=tx.a({className:"tx-insert"},TXMSG("@attacher.ins"));A.appendChild(E);x.observe(E,"click",function(){if(B.existStage&&!B.actor.config.multipleuse){alert(TXMSG("@attacher.exist.alert"))}else{B.execAppend()}},d)},changeState:function(i){var e=i.existStage;if(e&&!i.actor.config.multipleuse){x.addClassName(i.elData,"tx-existed")}else{x.removeClassName(i.elData,"tx-existed")}},modifyEntryNode:function(e){e.elName.innerText=e.boxAttr.name},removeEntryNode:function(e,i){if(i){e.elData.parentNode.removeChild(e.elData)
}else{if(e.deletedMark){x.hide(e.elData)}}},refreshEntryNode:function(e){if(e.deletedMark){x.hide(e.elData)}else{x.show(e.elData)}},refreshPreview:function(){for(var A=0,e=this.datalist.length-1;A<e;++A){var B=this.datalist[A];if(this.lastSelectedEntry&&this.lastSelectedEntry.key==B.key&&B.deleteMark==false){this.setPreivewImage(B);return y}}for(var A=0,e=this.datalist.length-1;A<e;++A){var B=this.datalist[A];if(B.deletedMark==false&&x.hasClassName(B.elData,"tx-clicked")){this.setPreivewImage(B);return y}}this.initPreviewImage();return d},setPreivewImage:function(e){this.imageResizer.execResize(e.boxAttr.image);this.lastSelectedEntry=e},initPreviewImage:function(){this.imageResizer.execResize(TXMSG("@attacher.preview.image"));this.lastSelectedEntry=k},showEntryThumb:function(e){x.addClassName(e.elData,"tx-clicked");x.removeClassName(e.elData,"tx-hovered")},hideEntryThumb:function(e){x.removeClassName(e.elData,"tx-clicked")},onEntryMouseOver:function(e){x.addClassName(e.elData,"tx-hovered")
},onEntryMouseOut:function(e){x.removeClassName(e.elData,"tx-hovered")},startUpload:function(){this.elProgressPercent.style.width="0".toPx();x.setStyle(this.elList,{opacity:0.3});x.show(this.elProgress)},doUpload:function(i){var e=300;this.elProgressPercent.style.width=Math.floor(e*(isNaN(i)?0:parseFloat(i)*0.01)).toPx();this.elProgressTicker.innerText=Math.floor((isNaN(i)?0:parseFloat(i)))+"%"},endUpload:function(){x.hide(this.elProgress);x.setStyle(this.elList,{opacity:1})},clickEntry:function(e){if(this.lastSelectedEntry){if(this.lastSelectedEntry.key==e.key){return}this.datalist.each(function(i){i.makeSelection(d)})}this.elPreviewKind.className=((e.boxAttr.className)?e.boxAttr.className:"");e.makeSelection(y);this.setPreivewImage(e)},clickEntryWithCtrl:function(e){if(x.hasClassName(e.elData,"tx-clicked")){e.makeSelection(d);this.refreshPreview()}else{this.elPreviewKind.className=((e.boxAttr.className)?e.boxAttr.className:"");e.makeSelection(y);this.setPreivewImage(e)}},clickEntryWithShift:function(B){if(x.hasClassName(B.elData,"tx-clicked")){B.makeSelection(d);
this.lastSelectedEntry=k}else{var e=this.getIndexOf(B);var C;if(this.lastSelectedEntry){C=this.getIndexOf(this.lastSelectedEntry)}var E=C,D=e;if(e==C){E=D=e}else{if(e<C){E=e;D=C}}this.elPreviewKind.className=((B.boxAttr.className)?B.boxAttr.className:"");for(var A=E;A<D+1;A++){this.datalist[A].makeSelection(y)}this.setPreivewImage(B)}},getIndexOf:function(B){var A,e;for(A=0;A<this.datalist.length;A++){if(this.datalist[A]===B){e=y;break}}return e?A:-1},getSelectedList:function(i){var A=[];var e;if(i){e=this.getAttachments(i)}else{e=this.datalist}e.each(function(B){if(x.hasClassName(B.elData,"tx-clicked")){A.push(B)}});return A},removeSelection:function(e){e.each(function(i){x.removeClassName(i.elData,"tx-clicked")})}};h.install("attachbox.onFileCapacityInitialized @if sidebar.capacity.show = true",function(B,C,D,A,i){var e=B.getAttachBox();if(i.sidebar.capacity.show===y){Object.extend(e,h.I.FileCapacity);e.onFileCapacityInitialized(i,A)}});t.addSidebar("capacity",{show:y,maximum:3145728,filter:{use:"",sound:{title:"sound file",maximum:3145728,extensions:",mp3,wav,ogg,wma,mp4,ape,wmv,asf,ra,ram,"},movie:{title:"movie file",maximum:3145728,extensions:",wmv,mpg,avi,"}}});
h.I.FileCapacity={onFileCapacityInitialized:function(B,A){var C=(B.initializedId)?B.initializedId:"";var D=B.sidebar.capacity;D.uploaded=0;D.available=D.maximum;D.uploadedFileNum=0;var E=function(J,K){K=parseInt(K,10);if(isNaN(K)||D[J]==u){return d}if(D.group&&J=="available"){D[J]=Math.min(K,D.maximum,D.group.maximum-D.group.used)}else{D[J]=K}return D[J]};this.checkAvailableCapacity=function(){return(D.uploaded<D.available)};this.checkInsertableSize=function(J){return(parseInt(D.uploaded,10)+parseInt(J,10)<=parseInt(D.available,10))};this.getCapacity=function(J){return(D[J]||0)};this.changeAvailableCapacity=function(J){if(E("available",J)){H();return J}return d};var G=function(K){var J=D.uploaded+K;if(J<0){J=0}D.uploaded=J};var F=function(J){G(-1*J);D.uploadedFileNum-=1};var i=function(J){G(J);D.uploadedFileNum+=1};var e={};if(D.filter.use.length>0){D.filter.use.split(",").each(function(J){if(D.filter[J]){e[J]=Object.extend({},D.filter[J])}})}this.getFiltersNameByExt=function(K){var L=[];
for(var J in e){if(e[J].extensions.indexOf(","+K.toLowerCase()+",")>-1){L.push(J)}}return L};this.getFilterExtensions=function(J){if(e[J]){return e[J].extensions}else{return k}};this.getFilterMaximum=function(J){if(e[J]){return e[J].maximum}else{return k}};this.getUploadedSizeByFilter=function(K){var L=0;var J=e[K].extensions;this.datalist.each(function(N){if(N.data&&N.data.filename){var M=N.data.filename.split(".").pop().toLowerCase();if(J.indexOf(","+M+",")>-1){L+=N.data.filesize}}});return L};if(D.group){E("available",Math.min(D.maximum,D.group.maximum-D.group.used))}this.getGroupCapacity=function(J){return((D.group)?(D.group[J]||0):0)};this.observeJob(h.Ev.__ENTRYBOX_ENTRY_ADDED,function(J){if(J.actor.isCheckSize){i(J.data.filesize||0);H()}});this.observeJob(h.Ev.__ENTRYBOX_ENTRY_REMOVED,function(J){if(J.actor.isCheckSize){F(J.data.filesize||0);H()}});this.observeJob(h.Ev.__ENTRYBOX_ALL_ENTRY_REMOVED,function(){D.uploaded=0;D.uploadedFileNum=0;H()});this.observeJob(h.Ev.__ENTRYBOX_ENTRY_REFRESH,function(K){if(!K.actor.isCheckSize){return
}var J=K.data.filesize||0;if(K.deletedMark){F(J)}else{i(J)}H()});var I=this;var H=function(){var J={uploaded:D.uploaded,available:D.available,maximum:D.maximum,uploadedFileNum:D.uploadedFileNum,group:D.group};I.fireJobs(h.Ev.__ENTRYBOX_CAPACITY_UPDATE,J)}}};l.addMsg({"@attacher.can.modify.alert":"\uae30\uc874\uc5d0 \ub4f1\ub85d\ub41c #{title}\uc744(\ub97c) \uc218\uc815\ud560 \uc218 \uc788\ub294 \ud654\uba74\uc73c\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4.","@attacher.can.modify.confirm":"#{title}\uc740(\ub294) \ud558\ub098\ub9cc \ub4f1\ub85d\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\ub2e4\uc2dc \uc62c\ub9ac\uc2dc\uba74 \uae30\uc874\uc758 #{title}\uc774(\uac00) \uc0ad\uc81c\ub429\ub2c8\ub2e4. \uacc4\uc18d\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?","@attacher.insert.alert":"\uc5d0\ub514\ud130 \uc0c1\ud0dc\uc5d0\uc11c\ub9cc \uc0bd\uc785\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.","@attacher.capacity.alert":"\uc6a9\ub7c9\uc744 \ucd08\uacfc\ud558\uc600\uc2b5\ub2c8\ub2e4.","@attacher.size.alert":"\uc6a9\ub7c9\uc744 \ucd08\uacfc\ud558\uc5ec \ub354\uc774\uc0c1 \ub4f1\ub85d\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."});
h.install("sidebar.getAttacher & sidebar.getUploadAdaptor",function(i,A,B){var e=B.attachers={};B.getAttacher=function(C){if(e[C]!=k){return e[C]}else{if(arguments.length==0){return e}else{return k}}}});h.register("new attachers",function(E,G,e,A,B){var F=E.getAttachBox();var D=e.attachers;for(var C in h.Attacher){var H=h.Attacher[C]["__Identity"];if(H){D[H]=new h.Attacher[C](E,F,B)}}if(D.file){e.getUploadAdaptor=function(){return D.file.getAdaptor()}}});h.Attacher=h.Class.draft({$extend:h.Actor,canModified:d,canResized:d,initialize:function(i,B,e){this.editor=i;this.canvas=i.getCanvas();this.entryBox=B;var A=this.config=t.getAttacher(this.constructor.__Identity,e);if(e.pvpage&&!!A.usepvpage){this.pvUrl=t.getUrl(e.pvpage,{pvname:this.name})}this.boxonly=((A.boxonly!=k)?A.boxonly:d);this.isMultiple=((A.multiple!=k)?A.multiple:d);this.isCheckSize=((A.checksize!=k)?A.checksize:d);this.wysiwygonly=((A.wysiwygonly!=k)?A.wysiwygonly:y);this.pastescope=A.pastescope;if(this.oninitialized){this.oninitialized(e)
}this.attachHandler=this.attachHandler.bind(this)},execute:function(E){if(this.wysiwygonly&&!this.canvas.isWYSIWYG()){alert(TXMSG("@attacher.insert.alert"));return}if(this.isCheckSize&&!this.entryBox.checkAvailableCapacity()){alert(TXMSG("@attacher.capacity.alert"));return}if(!this.checkInsertable()){if(this.canModified){var A=new Template(TXMSG("@attacher.can.modify.alert"));alert(A.evaluate({title:this.title}))}else{var A=new Template(TXMSG("@attacher.can.modify.confirm"));if(!confirm(A.evaluate({title:this.title}))){return}}}if(this.clickHandler){this.clickHandler()}else{try{var i=this.config.popPageUrl;if(E){i=i+((i.indexOf("?")>-1)?"&":"?")+E}var B=(document.location.hostname!=document.domain);if(B){i=i+((i.indexOf("?")>-1)?"&":"?")+"xssDomain="+document.domain}i=(this.pvUrl?this.pvUrl+((this.pvUrl.indexOf("?")>-1)?"&":"?")+"u="+escape(i):i);var D=j.open(i,"at"+this.name,this.config.features);D.focus()}catch(C){}}},attachHandler:function(i,e){if(this.checkInsertable()){if(this.isCheckSize&&!this.entryBox.checkInsertableSize(i.filesize)){alert(TXMSG("@attacher.size.alert"));
return}this.execAttach(i,e)}else{this.execReattach(i,e)}},createEntry:function(i,e){return this.createAttachment(i,e)},createAttachment:function(A,i){var e=this.constructor.__Identity;if(i){e=i}return new h.Attachment[e.capitalize()](this,A)},checkInsertable:function(){return(this.isMultiple||this.getDatalist().length===0)}});l.addMsg({"@embeder.alert":"\uc5d0\ub514\ud130 \uc0c1\ud0dc\uc5d0\uc11c\ub9cc \uc0bd\uc785\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."});h.EmbedBox=h.Class.create({$extend:h.EntryBox,initialize:function(){}});h.install("editor.getEmbedBox & sidebar.getEmbeder & sidebar.getEmbeddedData",function(B,C,D,A,i){var E=new h.EmbedBox(i,A,B);D.entryboxRegistry.embedbox=E;B.getEmbedBox=function(){return E};D.getEmbeddedData=E.getEntries.bind(E);var e=D.embeders={};D.getEmbeder=function(F){if(e[F]!=k){return e[F]}else{if(arguments.length==0){return e}else{return k}}}});h.register("new embeders",function(D,F,e,A,B){var H=D.getEmbedBox();var E=e.embeders;for(var C in h.Embeder){var G=h.Embeder[C]["__Identity"];
if(G){if(!F.tools[G]){}E[G]=new h.Embeder[C](D,H,B)}}});h.Embeder=h.Class.draft({$extend:h.Actor,canResized:d,initialize:function(i,B,e){this.editor=i;this.canvas=i.getCanvas();var A=this.config=t.getEmbeder(this.constructor.__Identity,e);if(e.pvpage&&!!A.usepvpage){this.pvUrl=t.getUrl(e.pvpage,{pvname:this.name})}this.wysiwygonly=((A.wysiwygonly!=k)?A.wysiwygonly:y);this.pastescope=A.pastescope;this.embedHandler=this.embedHandler.bind(this);if(this.oninitialized){this.oninitialized.bind(this)(e)}},execute:function(){if(this.wysiwygonly&&!this.canvas.isWYSIWYG()){alert(TXMSG("@embeder.alert"));return}if(this.clickHandler){this.clickHandler()}else{try{var i=this.config.popPageUrl;var A=(document.location.hostname!=document.domain);if(A){i=i+((i.indexOf("?")>-1)?"&":"?")+"xssDomain="+document.domain}i=(this.pvUrl?this.pvUrl+((this.pvUrl.indexOf("?")>-1)?"&":"?")+"u="+escape(i):i);var C=j.open(i,"at"+this.name,this.config.features);C.focus()}catch(B){}}},embedHandler:function(e){this.execAttach(e)
},createEntry:function(A,i){var e=this.constructor.__Identity;if(i){e=i}return new h.EmbedEntry[e.capitalize()](this,A)},execAttach:function(B){var A=this.pastescope;var i=this.getCreatedHtml(B);var e=this.config.parastyle||this.config.defaultstyle||{};this.canvas.execute(function(C){C.moveCaretWith(A);C.pasteContent(i,y,e)})},execReattach:function(){},execReload:function(){},getReloadContent:function(B,A){if(!B.dispElId){return A}var e=this.getCreatedHtml(B);var i=new RegExp('<(?:img|IMG)[^>]*id="?'+B.dispElId+'"?[^>]*/?>',"gm");if(A.search(i)>-1){return A.replace(i,e)}return A}});h.EmbedEntry=h.Class.create({$extend:h.Entry,attrs:{align:"left"},initialize:function(e,i){this.actor=e;this.canvas=e.canvas;this.entryBox=e.entryBox;this.setProperties(i)},register:function(){if(this.canvas.isWYSIWYG()){var e=this.actor.config.defaultstyle;if(e){this.canvas.pasteContent(this.dispHtml,y,{style:e})}else{this.canvas.pasteContent(this.dispHtml,y)}}else{this.canvas.getProcessor().insertTag("",this.dispText)
}},setProperties:function(i){this.type=this.constructor.__Identity;var e=this.data=i;this.key=e.key;this.dispHtml=this.getDispHtml(e);this.saveHtml=this.dispText=this.getDispText(e);this.regHtml=this.getRegHtml(e);this.regLoad=this.regText=this.getRegText(e)}});h.I.ButtonFontTool=h.Mixin.create({oninitialized:function(i){var e=this;e.button=new h.Button(e.buttonCfg);e.weave(e.button,k,e.handler);if(i.sync){e.startSyncButtonWithStyle()}e.bindKeyboard(i.hotKey,e.handler.bind(e))},rangeExecutor:function(e){e.execCommand(this.getQueryCommandName())},onAfterHandler:function(i){var e=this.canvas;if(e.triggerQueryStatus){e.triggerQueryStatus()}},startSyncButtonWithStyle:function(){var e=this;e.canvas.observeJob(h.Ev.__CANVAS_PANEL_QUERY_STATUS,function(i){e.syncButton(e.queryCurrentStyle(i))})},queryCurrentStyle:function(i){var e=this;var A=e.canvas.query(function(B){var D=e.getQueryCommandName();if(D&&!x.opera&&!x.gecko){return B.queryCommandState(D)}else{var C=e.findQueryingNode(i);return !!C&&e.isStyleApplied(C)
}});return A},computeNewStyle:function(){return k},cachedProperty:d,syncButton:function(e){if(this.cachedProperty!=e){this.button.setState(e);this.cachedProperty=e}}});h.I.MenuFontTool=h.Mixin.create({oninitialized:function(A){var i=this;i.beforeOnInitialized(A);var e=i.menuInitHandler&&i.menuInitHandler.bind(i);i.weave(i.createButton(),i.createMenu(),i.handler,e);if(A.sync){i.startSyncButtonWithStyle()}},rangeExecutor:function(i,A,e){this.wrapTextAsStyledSpan(i,A,e)},startSyncButtonWithStyle:function(){var e=this;e.canvas.observeJob(h.Ev.__CANVAS_PANEL_QUERY_STATUS,function(i){e.syncButton(e.queryCurrentStyle(i))})},queryCurrentStyle:function(i){var e=this;var B=e.queryCommandValue();if(e.reliableQueriedValue(B)&&B&&e.getTextByValue(B)){return e.getTextByValue(B)}var A=e.canvas.query(function(C){var D;if(x.msie&&i.isCollapsed()){D=C.getNode()}else{D=e.findQueryingNode(i)}return e.queryElementCurrentStyle(D)});if(A&&e.getTextByValue(A)){return e.getTextByValue(A)}return B||A||e.getTextByValue(e.getDefaultProperty())
},queryCommandValue:function(){var e=this;return e.canvas.query(function(i){return i.queryCommandValue(e.getQueryCommandName())})},reliableQueriedValue:function(e){return y},queryElementCurrentStyle:function(C){var A=this.getCssPropertyName();var F=C;var E=10;for(var B=0;B<E&&z.kindOf(F,"%inline");B++){var e=F.style[A];if(e){return e}if(z.kindOf(F,"font")&&z.getAttribute(this.getFontTagAttribute())){return z.getAttribute(this.getFontTagAttribute())}F=F.parentNode}var D=this.canvas.getProcessor();if(C){return D.queryStyle(C,A)}else{return k}},computeNewStyle:function(i){var e={};e[this.getCssPropertyName()]=i;return e},cachedProperty:d,syncButton:function(i){var e=this;e.button.setText(i);if(e.cachedProperty!=i){e.button.setText(i);e.cachedProperty=i}}});h.I.FontTool=h.Mixin.create({initialize:function(i,A,e){this.$super.initialize(i,A,e)},handler:function(e){this.onBeforeHandler(e);this.doHandle(e);this.onAfterHandler(e)},onBeforeHandler:function(){},doHandle:function(B){var i=this,e,A=i.computeNewStyle(B);
i.canvas.execute(function(D){var C=(D.table)?D.table.getTdArr():[];if(C.length>0){e=g.dom.Range.createFromNodeContents(C[0]);D.executeUsingCaret(function(){i.tableCellsExecutor(D,A,C)})}else{e=D.createGoogRange();if(e){i.rangeExecutor(D,A,e)}}})},onAfterHandler:function(){},tableCellsExecutor:function(A,B,i){var e=this;i.each(function(C){var D=g.dom.Range.createFromNodeContents(C);D.select();e.rangeExecutor(A,B,D)})},findQueryingNode:function(i){if(i){var B;try{B=this.findFirst(i.__iterator__(),function(C){return C.nodeType==3&&C.nodeValue.trim()})}catch(e){}if(B){return B.parentNode}else{var A=i.getStartNode();if(A&&A.nodeType==3){return A.parentNode}return A}}},findFirst:function(i,B){try{return g.iter.filter(i,B).next()}catch(A){return null}}});h.I.WrappingSpanFontTool=h.Mixin.create({wrapTextAsStyledSpan:function(C,E,G){var F;if(C.isCollapsed()){var A=G.getStartNode();if(A.nodeType==3){A=A.parentNode}var H=this.findOrCreateDummySpan(A,C,G);var i=H.firstChild;C.createGoogRangeFromNodes(i,i.length,i,i.length).select();
F=[H]}else{C.executeUsingCaret(function(J,M){var K=B(M);var L=e(K);F=I(L)})}C.apply(F,{style:E});function B(L){var K=L.getCaret(y),J=L.getCaret(d);return new g.dom.TextRangeIterator(K,0,J,0)}function e(K){var J=[];g.iter.forEach(K,function(L){if(L.nodeType==3&&!z.kindOf(L.parentNode,"table,thead,tbody,tr,ul,ol")){J.push(L)}});return J}function I(K){var J=[];K.each(function(N){var L=N.parentNode;if(L.nodeName=="SPAN"&&D(L)){J.push(L)}else{var M=C.create("span");z.wrap(M,N);J.push(M)}});return J}function D(M){var N=M.childNodes;var K=N.length;if(K>3){return d}for(var L=0,J=K;L<J;L++){if(z.isGoogRangeCaret(N[L])){K=K-1}}return K==1}},findOrCreateDummySpan:function(A,i,e){var B=(A.tagName=="SPAN"&&A.childNodes.length==1&&A.firstChild.nodeType==3&&A.firstChild.nodeValue==h.__WORD_JOINER);if(B){return A}else{return this.createDummySpan(A,i,e)}},createDummySpan:function(e,B,i){var A=null;if(e.tagName=="SPAN"){A=z.clone(e)}else{A=B.create("span")}A.appendChild(B.newDummy());A=i.insertNode(A);z.removeEmptyTextNode(A.previousSibling);
z.removeEmptyTextNode(A.nextSibling);return A}});l.addMsg({"@switcher.wysiwyg":"\uc5d0\ub514\ud130","@switcher.source":"HTML","@switcher.text":"\ud14d\uc2a4\ud2b8"});t.addTool("switcher",{wysiwygonly:d,status:y,options:[{label:TXMSG("@switcher.wysiwyg"),title:TXMSG("@switcher.wysiwyg"),data:"html"},{label:TXMSG("@switcher.source"),title:TXMSG("@switcher.source"),data:"source"},{label:TXMSG("@switcher.text"),title:TXMSG("@switcher.text"),data:"text"}]});h.Tool.Switcher=h.Class.create({$const:{__Identity:"switcher"},$extend:h.Tool,oninitialized:function(i){var F=this.canvas;var A={};i.options.each(function(H){A[H.data]={title:H.title}});var e="";var D=i.options[0];var E=function(H){if(H==="text"){if(F.mode!=="text"){return y}}return d};var B=function(){var I,J,H;I=F.getContent();J=I.toLowerCase().trim();H=z.EMPTY_PARAGRAPH_HTML.toLowerCase().trim();if(J&&J!==H&&J!=="&nbsp;"){return y}return d};var C=function(H){if(i.changeModeConfirmMsg){if(E(H)){if(B()){if(d===confirm(i.changeModeConfirmMsg)){return $stop
}}}}F.changeMode(H)};var G=function(I,H){if(I==H){return}if(e==H){return}if(!A[H]){return}this.button.setValue(H);this.button.setText(A[H].title);e=H}.bind(this);F.observeJob(h.Ev.__CANVAS_MODE_CHANGE,G);F.observeJob(h.Ev.__CANVAS_MODE_INITIALIZE,G);this.weave.bind(this)(new h.Button.Select(t.merge(this.buttonCfg,{selectedValue:D.data,selectedText:D.label})),new h.Menu.Select(this.menuCfg),C)}});t.addTool("switchertoggle",{wysiwygonly:d,sync:y,status:y,options:[{label:"\uc5d0\ub514\ud130",title:"\uc5d0\ub514\ud130",data:"html"},{label:"HTML",title:"HTML",data:"source"}]});h.Tool.SwitcherToggle=h.Class.create({$const:{__Identity:"switchertoggle"},$extend:h.Tool,oninitialized:function(){var A=this.canvas;var i=function(){switch(A.mode){case"html":A.changeMode("source");break;case"source":A.changeMode("html");break}return d};this.weave.bind(this)(new h.Button.Toggle(t.merge(this.buttonCfg,{borderClass:"tx-switchtoggle"})),k,i);var e=function(C,B){this.button.setValue(B=="source")}.bind(this);
A.observeJob(h.Ev.__CANVAS_MODE_CHANGE,e);A.observeJob(h.Ev.__CANVAS_MODE_INITIALIZE,e)}});l.addMsg({"@fontfamily.gulim":"\uad74\ub9bc","@fontfamily.batang":"\ubc14\ud0d5","@fontfamily.dotum":"\ub3cb\uc6c0","@fontfamily.gungsuh":"\uad81\uc11c"});t.addTool("fontfamily",{sync:y,status:y,useFavorite:y,options:[{label:TXMSG("@fontfamily.gulim")+' (<span class="tx-txt">\uac00\ub098\ub2e4\ub77c</span>)',title:TXMSG("@fontfamily.gulim"),data:"Gulim,\uad74\ub9bc,AppleGothic,sans-serif",klass:"tx-gulim"},{label:TXMSG("@fontfamily.batang")+' (<span class="tx-txt">\uac00\ub098\ub2e4\ub77c</span>)',title:TXMSG("@fontfamily.batang"),data:"Batang,\ubc14\ud0d5",klass:"tx-batang"},{label:TXMSG("@fontfamily.dotum")+' (<span class="tx-txt">\uac00\ub098\ub2e4\ub77c</span>)',title:TXMSG("@fontfamily.dotum"),data:"Dotum,\ub3cb\uc6c0",klass:"tx-dotum"},{label:TXMSG("@fontfamily.gungsuh")+' (<span class="tx-txt">\uac00\ub098\ub2e4\ub77c</span>)',title:TXMSG("@fontfamily.gungsuh"),data:"Gungsuh,\uad81\uc11c",klass:"tx-gungseo"},{label:'Arial (<span class="tx-txt">abcde</span>)',title:"Arial",data:"Arial",klass:"tx-arial"},{label:'Verdana (<span class="tx-txt">abcde</span>)',title:"Verdana",data:"Verdana",klass:"tx-verdana"}]});
h.Tool.FontFamily=h.Class.create({$const:{__Identity:"fontfamily"},$extend:h.Tool,$mixins:[h.I.CookieBaker,h.I.FontTool,h.I.MenuFontTool,h.I.WrappingSpanFontTool],beforeOnInitialized:function(A){function i(C){e.usedWebFonts=((x.msie&&C.webfont&&C.webfont.use)?C.webfont.options:[]);e.usedFonts=C.options.concat(e.usedWebFonts)}function B(C){if(C.useFavorite&&e.usedWebFonts.length>0){e.useFavorite=y;e.initCookie("txFontFamilyFavorite")}else{e.useFavorite=d}}var e=this;e.focusLoosed=d;i(A);B(A);e.createFontFamilyMap(e.usedFonts)},createFontFamilyMap:function(A){var i=this,e={};this.fontFamilyMap=e;A.each(function(E){var B,F,D,C;B=E.data.split(",");F=E.title;for(D=0;D<B.length;D+=1){C=i.preprocessFontFamily(B[D]);e[C]=F}if(!e[F.toLowerCase()]){e[F.toLowerCase()]=F}})},createButton:function(){var e=new h.Button.Select(this.buttonCfg);this.button=e;e.setValue(this.getDefaultProperty());e.setText(this.getTextByValue(this.getDefaultProperty()));return e},createMenu:function(){var e=this;var i=new h.Menu.Select(t.merge(e.menuCfg,{options:e.usedFonts}));
this.menu=i;i.generateListItem=function(E){var B=[],D,F,C;for(D=0;D<E.length;D+=1){F=E[D];C=F.label;F.label=F.label.replace(/<span class="tx\-txt">/,'<span class="tx-txt" style="font-family:'+F.data+';">');B.push(h.MarkupTemplate.get("menu.select.item").evaluate(F));F.label=C}return B.join("")};if(e.usedWebFonts.length>0){x.addClassName(i.elMenu,"tx-fontfamily-webfont-menu");var A=tx.input({type:"text",className:"tx-dummyfocus"});z.append(i.elMenu,A);x.observe(i.elMenu,"mousedown",function(B){if(B.offsetX<e.menu.elMenu.clientWidth){return}A.style.top=B.offsetY.toPx();if(!e.focusLoosed){A.focus();A.blur();e.menu.elMenu.focus();e.focusLoosed=y}})}return i},menuInitHandler:function(){var i=this;var B=i.menu;i.focusLoosed=d;if(!i.useFavorite){return[]}B.elMenu.scrollTop=0;var A=z.collect(B.elMenu,"ul.tx-menu-favlist");if(A){z.remove(A)}var e=i.extractOptions(i.usedFonts,i.readCookie());A=B.generateList(e);z.insertFirst(B.elMenu,A);x.addClassName(A,"tx-menu-favlist");return e},onBeforeHandler:function(e){this.canvas.includeWebfontCss("font-family: "+e)
},onAfterHandler:function(i){var e=this;if(e.useFavorite){e.writeCookie(e.mergeValues(e.readCookie(),i))}},getDefaultProperty:function(){return this.canvas.getStyleConfig().fontFamily},getRelatedCssPropertyNames:function(){return["font",this.getCssPropertyName()]},getCssPropertyName:function(){return"fontFamily"},getQueryCommandName:function(){return"fontname"},getFontTagAttribute:function(){return"face"},preprocessFontFamily:function(e){return e.toLowerCase().replace(/'|"/g,"").replace(/_?9$/,"")},getTextByValue:function(e){if(e.include(",")){e=e.split(",")[0]}e=this.preprocessFontFamily(e);return this.fontFamilyMap[e]}});t.addTool("fontsize",{sync:y,status:y,options:[{label:"\uac00\ub098\ub2e4\ub77c\ub9c8\ubc14\uc0ac (8pt)",title:"8pt",data:"8pt",klass:"tx-8pt"},{label:"\uac00\ub098\ub2e4\ub77c\ub9c8\ubc14\uc0ac (9pt)",title:"9pt",data:"9pt",klass:"tx-9pt"},{label:"\uac00\ub098\ub2e4\ub77c\ub9c8\ubc14\uc0ac (10pt)",title:"10pt",data:"10pt",klass:"tx-10pt"},{label:"\uac00\ub098\ub2e4\ub77c\ub9c8\ubc14\uc0ac (11pt)",title:"11pt",data:"11pt",klass:"tx-11pt"},{label:"\uac00\ub098\ub2e4\ub77c\ub9c8\ubc14\uc0ac (12pt)",title:"12pt",data:"12pt",klass:"tx-12pt"},{label:"\uac00\ub098\ub2e4\ub77c\ub9c8\ubc14\uc0ac (14pt)",title:"14pt",data:"14pt",klass:"tx-14pt"},{label:"\uac00\ub098\ub2e4\ub77c\ub9c8\ubc14\uc0ac (18pt)",title:"18pt",data:"18pt",klass:"tx-18pt"},{label:"\uac00\ub098\ub2e4\ub77c\ub9c8 (24pt)",title:"24pt",data:"24pt",klass:"tx-24pt"},{label:"\uac00\ub098\ub2e4 (36pt)",title:"36pt",data:"36pt",klass:"tx-36pt"}]});
h.Tool.FontSize=h.Class.create({$const:{__Identity:"fontsize"},$extend:h.Tool,$mixins:[h.I.FontTool,h.I.MenuFontTool,h.I.WrappingSpanFontTool],beforeOnInitialized:function(e){this.createFontSizeMap(e)},createButton:function(){var i=this.getDefaultProperty();var e=this.button=new h.Button.Select(this.buttonCfg);e.setValue(i);e.setText(this.getTextByValue(i));return e},createMenu:function(){return new h.Menu.Select(this.menuCfg)},createFontSizeMap:function(e){var i=this.fontSizeMap={};e.options.each(function(A){i[A.data]=A.title});[{title:"8pt",data:"1"},{title:"10pt",data:"2"},{title:"12pt",data:"3"},{title:"14pt",data:"4"},{title:"18pt",data:"5"},{title:"24pt",data:"6"},{title:"36pt",data:"7"},{title:"7.5pt",data:"10px"},{title:"8pt",data:"11px"},{title:"9pt",data:"12px"},{title:"10pt",data:"13px"},{title:"11pt",data:"15px"},{title:"12pt",data:"16px"},{title:"14pt",data:"19px"},{title:"18pt",data:"24px"},{title:"24pt",data:"32px"},{title:"36pt",data:"48px"},{title:"8pt",data:"x-small"},{title:"10pt",data:"small"},{title:"12pt",data:"medium"},{title:"14pt",data:"large"},{title:"18pt",data:"x-large"},{title:"24pt",data:"xx-large"},{title:"36pt",data:"-webkit-xxx-large"}].each(function(A){i[A.data]=A.title
})},reliableQueriedValue:function(e){return x.webkit===false},getTextByValue:function(A){var i=this.fontSizeMap[A];if(!i){var e=Math.round(parseFloat(A)).toPx();i=this.fontSizeMap[e]}return i},getRelatedCssPropertyNames:function(){return["font",this.getCssPropertyName()]},getCssPropertyName:function(){return"fontSize"},getQueryCommandName:function(){return"fontsize"},getDefaultProperty:function(){return this.canvas.getStyleConfig().fontSize},getFontTagAttribute:function(){return"size"}});t.addTool("bold",{wysiwygonly:y,sync:y,status:y,hotKey:{ctrlKey:y,keyCode:66}});h.Tool.Bold=h.Class.create({$const:{__Identity:"bold"},$extend:h.Tool,$mixins:[h.I.FontTool,h.I.ButtonFontTool],getRelatedCssPropertyNames:function(){return["font",this.getCssPropertyName()]},getCssPropertyName:function(){return"fontWeight"},getQueryCommandName:function(){return"bold"},isStyleApplied:function(e){return["bold","700"].contains(x.getStyle(e,"fontWeight"))}});t.addTool("underline",{wysiwygonly:y,sync:y,status:y,hotKey:{ctrlKey:y,keyCode:85}});
h.Tool.Underline=h.Class.create({$const:{__Identity:"underline"},$extend:h.Tool,$mixins:[h.I.FontTool,h.I.ButtonFontTool],getRelatedCssPropertyNames:function(){return[this.getCssPropertyName()]},getCssPropertyName:function(){return"textDecoration"},getQueryCommandName:function(){return"underline"},isStyleApplied:function(e){return x.getStyle(e,"textDecoration").include("underline")}});t.addTool("italic",{wysiwygonly:y,sync:y,status:y,hotKey:{ctrlKey:y,keyCode:73}});h.Tool.Italic=h.Class.create({$const:{__Identity:"italic"},$extend:h.Tool,$mixins:[h.I.FontTool,h.I.ButtonFontTool],getRelatedCssPropertyNames:function(){return["font",this.getCssPropertyName()]},getCssPropertyName:function(){return"fontStyle"},getQueryCommandName:function(){return"italic"},isStyleApplied:function(e){return x.getStyle(e,"fontStyle")=="italic"}});t.addTool("strike",{wysiwygonly:y,sync:y,status:y,hotKey:{ctrlKey:y,keyCode:68}});h.Tool.Strike=h.Class.create({$const:{__Identity:"strike"},$extend:h.Tool,$mixins:[h.I.FontTool,h.I.ButtonFontTool],getRelatedCssPropertyNames:function(){return[this.getCssPropertyName()]
},getCssPropertyName:function(){return"textDecoration"},getQueryCommandName:function(){return"strikethrough"},isStyleApplied:function(e){return x.getStyle(e,"textDecoration").include("line-through")}});t.addTool("forecolor",{defaultcolor:"#7c84ef",wysiwygonly:y,sync:d,status:y,useFavorite:y,thumbs:h.__CONFIG_COMMON.thumbs,needRevert:y});h.Tool.ForeColor=h.Class.create({$const:{__Identity:"forecolor"},$extend:h.Tool,$mixins:[h.I.CookieBaker,h.I.FontTool,h.I.MenuFontTool,h.I.WrappingSpanFontTool],beforeOnInitialized:function(e){this.useFavorite=!!e.useFavorite;if(this.useFavorite){this.initCookie("txForeColorFavorite")}},createButton:function(){var i=this.readCookie()||this.getDefaultProperty();var e=this.button=new h.Button.Splits(this.buttonCfg);e.setValue(i);this.syncButton(i);return e},createMenu:function(){return new h.Menu.ColorPallete(this.menuCfg)},onAfterHandler:function(e){this.syncButton(e);if(this.useFavorite){this.writeCookie(e)}},getDefaultProperty:function(){return this.canvas.getStyleConfig().color
},getRelatedCssPropertyNames:function(){return[this.getCssPropertyName()]},getCssPropertyName:function(){return"color"},getQueryCommandName:function(){return"forecolor"},computeNewStyle:function(i){var e={};e[this.getCssPropertyName()]=i||this.getDefaultProperty();return e},syncButton:function(i){try{if(i){x.setStyle(this.button.elButton,{backgroundColor:i})}}catch(A){}}});t.addTool("backcolor",{defaultcolor:"#9aa5ea",wysiwygonly:y,sync:d,status:y,useFavorite:y,texts:{options:[{color:"#ff0000",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#e545d0",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#000000",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#ff5e00",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#7c43b1",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#848484",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#ffbb00",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#4673ff",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#66e8ff",text:"#000000",label:"\uac00\ub098\ub2e4"},{color:"#ffe400",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#1fafda",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#8cfccb",text:"#000000",label:"\uac00\ub098\ub2e4"},{color:"#a8c40d",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#009999",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#ffffff",text:"#000000",label:"\uac00\ub098\ub2e4"}]},thumbs:h.__CONFIG_COMMON.thumbs,needRevert:y,needTrans:d});
h.Tool.BackColor=h.Class.create({$const:{__Identity:"backcolor"},$extend:h.Tool,$mixins:[h.I.CookieBaker,h.I.FontTool,h.I.MenuFontTool,h.I.WrappingSpanFontTool],beforeOnInitialized:function(e){this.useFavorite=!!e.useFavorite;if(this.useFavorite){this.initCookie("txBackColorFavorite")}},createButton:function(){var i=this.readCookie()||this.getDefaultProperty();var e=this.button=new h.Button.Splits(this.buttonCfg);e.setValue(i);this.syncButton(i);return e},createMenu:function(){return new h.Menu.ColorPallete(this.menuCfg)},onAfterHandler:function(e){this.syncButton(e);if(this.useFavorite){this.writeCookie(e)}},getDefaultProperty:function(){return this.config.defaultcolor},syncButton:function(A){try{var i=A?A.split("|")[0]:k;if(i){x.setStyle(this.button.elButton,{backgroundColor:i})}}catch(B){}},getRelatedCssPropertyNames:function(){return["color",this.getCssPropertyName()]},getCssPropertyName:function(){return"backgroundColor"},getQueryCommandName:function(){return(x.gecko||x.opera)?"hilitecolor":"backcolor"
},computeNewStyle:function(i){if(this.shouldRevert(i)||this.includeTextColor(i)){var e=i?i.split("|"):[];return{backgroundColor:e[0],color:e[1]}}return{backgroundColor:i}},shouldRevert:function(e){return e==k},includeTextColor:function(e){return e&&(e.indexOf("|")>-1)}});t.addTool("indent",{sync:d,status:d,hotKey:{keyCode:9}});h.Tool.Indent=h.Class.create({$const:{__Identity:"indent"},$extend:h.Tool,oninitialized:function(e){this.weave(new h.Button(this.buttonCfg),k,this.handler);this.bindKeyboard(e.hotKey,this.tabKeyHandler.bind(this));this.createHandlers()},handler:function(){var e=this,i=e.canvas;i.execute(function(A){e.onIndentClicked.handle(A)})},tabKeyHandler:function(){var e=this;this.canvas.execute(function(i){e.onTabPressed.handle(i)})},createHandlers:function(){var D=h.Tool.Indent;var C=D.Judge;var i=D.Operation;var A=D.Handler;var E=h.ChainHandler;var e=E.connect([new E(C.ListItem,i.IndentListItem),new E(C.BlockNode,i.IndentBlockNode)]);var B=E.connect([new E(C.And(C.HeadOfParagraph,C.ListItem),i.IndentListItem),new E(C.ChildOfLastTableCell,i.GoToBelowTable),new E(C.ChildOfTableCell,i.GoToNextCell),new E(C.And(C.HeadOfParagraph,C.BlockNode),i.IndentBlockNode),new E(C.AlwaysTrue,i.AddFourSpaces)]);
this.onTabPressed=new A(B,e,e);this.onIndentClicked=new A(e,e,e)}});h.Tool.Indent.Handler=h.Class.create({initialize:function(e,A,D){var B=h.Tool.Indent;var C=B.RangeIndenter;var i=B.TableCellIndenter;this.collapsedRange=new C(e),this.selectedRange=new C(A),this.tableCellSelected=new i(D)},handle:function(e){var i=(e.table)?e.table.getTdArr():[];if(i.length>0){this.tableCellSelected.indent(e)}else{if(e.isCollapsed()){this.collapsedRange.indent(e)}else{this.selectedRange.indent(e)}}}});h.ChainHandler=h.Class.create({$const:{connect:function(e){var B=e[0];for(var A=1;A<e.length;A++){e[A-1].setNext(e[A])}return B}},initialize:function(e,i){this.judge=e;this.executor=i;return this},setNext:function(e){this.successor=e;return this.successor},handle:function(){var e=arguments;if(this.judge.apply(this,e)){this.executor.apply(this,e)}else{if(this.successor){this.successor.handle.apply(this.successor,e)}}}});(function(){h.Tool.Indent.Helper={findBlocksToIndentFromRange:function(C,F,H){var D=H.getCaret(y);
var B=H.getCaret(d);if(F.isCollapsed()){C.getStartNode();C.getStartOffset();var G=this.findBlockToIndent(D,F);var A=(G.tagName=="P"&&G.firstChild==D&&G.lastChild==B);if(A){F.stuffNode(G)}H.restoreInternal();return[G]}else{var E=new g.dom.TextRangeIterator(D,0,B,0);return this.findBlocksToIndentFromIterator(F,E)}},findBlocksToIndentFromIterator:function(F,E){var B=this;var D=B.collectAllNodes(E);var C=B.selectLeafNodes(D);var A=B.filterUnableToIndent(C);var G=A.map(function(H){return B.findBlockToIndent(H,F)});G=G.compact().uniq();return G},collectAllNodes:function(B){var A=[];g.iter.forEach(B,function(C){if(!A.contains(C)){A.push(C)}});return A},selectLeafNodes:function(A){var B=[];A.each(function(C){if(C.childNodes.length==0){B.push(C)}});return B},filterUnableToIndent:function(B){var A=[];B.each(function(C){if(z.kindOf(C,"ul,ol,dl")){z.removeListIfEmpty(C)}else{if(z.kindOf(C.parentNode,"table")&&z.isText(C)){}else{if(z.kindOf(C.parentNode,"thead,tbody,tfooter")&&!z.kindOf(C,"tr")){}else{if(z.kindOf(C.parentNode,"tr")&&!z.kindOf(C,"th,td")){}else{if(z.kindOf(C.parentNode,"ul,ol,dl")&&!z.kindOf(C,"li,dd,dt")){}else{A.push(C)
}}}}}});return A},findBlockToIndent:function(A){var B=this.findOrCreateBlockForNode(A);return this.findIndentableHigherBlock(B)},findOrCreateBlockForNode:function(B){if(z.isText(B)||z.kindOf(B,"%inline,img")){var A=z.ancestor(B,"p,li,dd,dt,h1,h2,h3,h4,h5,h6,div");if(A&&z.children(A,"%block").length==0){return A}else{A=z.ancestor(B,"%paragraph,pre,noscript,form,hr,address,fieldset,blockquote");return z.wrapInlinesWithP(B,A)}}else{return B}},findIndentableHigherBlock:function(C){var A=k;var B=C;while(B&&B.tagName!="BODY"){if(!A&&z.kindOf(B,"p,div,h1,h2,h3,h4,h5,h6")){A=B}else{if(z.kindOf(B,"li,dd,dt")){return B}else{if(A&&z.kindOf(B,"td,th")){return A}}}B=B.parentNode}return A},findAncestorTableCell:function(A){return z.ancestor(A,"td,th")},findNextCell:function(C){var D=this.findCurrentCell(C);var B=z.next(D,"td,th");if(!B){var A=z.next(z.parent(D),"tr");if(A){B=z.first(A,"td,th")}}return B},findPreviousCell:function(B){var C=this.findCurrentCell(B);var A=z.previous(C,"td,th");if(!A){var D=z.previous(z.parent(C),"tr");
if(D){A=z.last(D,"td,th")}}return A},findCurrentCell:function(A){return z.kindOf(A,"td,th")?A:this.findAncestorTableCell(A)},isCaretOnStartOf:function(F,C){var D=C.getStartNode();var A=C.getStartOffset();while(z.isElement(D)&&D.childNodes.length>0){D=D.childNodes[A];A=0}var E=new g.dom.TextRangeIterator(F,0,D,A);var B=d;g.iter.forEach(E,function(G){if(G.nodeType==3&&!z.kindOf(G.parentNode,"script,style")){var H=(G===D)?G.nodeValue.substring(0,A):G.nodeValue;H=H.replace(h.__WORD_JOINER_REGEXP,"");B=z.removeMeaninglessSpace(H).length>0}else{if(z.isElement(G)){if(z.kindOf(G,"img,embed,iframe")){B=y}}}if(B){throw g.iter.StopIteration}});return !B}};var e=h.Tool.Indent.Helper;var i={};h.Tool.Indent.RangeIndenter=h.Class.create({initialize:function(A){this.handler=A},indent:function(B){var A=this;B.executeUsingCaret(function(C,E){var D=e.findBlocksToIndentFromRange(C,B,E);D.each(function(F){try{A.handler.handle(F,B,C)}catch(G){if(G==i){E.dispose()}else{throw G}}})})}});h.Tool.Indent.TableCellIndenter=h.Class.create({initialize:function(A){this.handler=A
},indent:function(B){var A=this;var C=(B.table)?B.table.getTdArr():[];C.each(function(D){var F=new g.dom.TagIterator(D);var E=e.findBlocksToIndentFromIterator(B,F);E.each(function(G){A.handler.handle(G,B,k)})})}});h.Tool.Indent.Judge={ChildOfFirstTableCell:function(A){var B=e.findAncestorTableCell(A);return B&&!e.findPreviousCell(B)},ChildOfLastTableCell:function(A){var B=e.findAncestorTableCell(A);return B&&!e.findNextCell(B)},ChildOfTableCell:function(A){return e.findAncestorTableCell(A)},ListItem:function(A){return z.kindOf(A,"li")&&z.kindOf(A.parentNode,"ol,ul")},OneDepthList:function(B){if(z.kindOf(B,"li")){var A=new h.Tool.StyledList.ListBuilder();if(A.countDepthOfList(B)==1){return y}}return d},IndentedBlockNode:function(A){return z.kindOf(A,"%block")&&A.style&&A.style.marginLeft!=""},BlockNode:function(A){return z.kindOf(A,"%block")},HeadOfParagraph:function(C,B,A){return e.isCaretOnStartOf(C,A)},And:function(B,A){return function(){return B.apply(this,arguments)&&A.apply(this,arguments)
}},AlwaysTrue:function(){return y}};h.Tool.Indent.Operation={GoToBelowTable:function(C,A){var B=z.ancestor(C,"table");A.bookmarkToNext(B);throw i},GoToNextCell:function(C,B){var A=e.findNextCell(C);if(A){B.selectFirstText(A);throw i}},IndentListItem:function(C){var A=z.ancestor(C,"ul,ol,dl");if(A){var B=z.previous(C);var D=z.next(C);if(z.kindOf(B,"ul,ol,dl")){z.append(B,C)}else{var E=z.clone(A);z.applyStyles(E,{marginLeft:k,paddingLeft:k});z.wrap(E,C)}if(z.kindOf(D,"ul,ol,dl")){z.moveChild(D,C.parentNode);z.remove(D)}}},getChildrenAsElement:function(C){var E=[];var D=C.childNodes;for(var B=0,A=D.length;B<A;B++){var G=D[B];if(z.isText(G)){var F=z.wrapInlinesWithP(G,C);E.push(F)}else{if(z.isElement(G)){E.push(G)}}}return E},IndentBlockNode:function(A){z.applyStyles(A,{marginLeft:"+2em"})},AddFourSpaces:function(B,A){A.pasteContent("&nbsp;&nbsp;&nbsp;&nbsp;",d)},GoToAboveTable:function(C,A){var B=z.ancestor(C,"table");A.bookmarkToPrevious(B);throw i},GoToPreviousCell:function(C,A){var B=e.findPreviousCell(C);
if(B){A.moveCaretTo(B,y);throw i}},OutdentListItem:function(E,D){var F=z.ancestor(E,"ul,ol,dl");if(!F){return}var A=F.parentNode;if(z.kindOf(A,"li")){z.unwrap(A);A=F.parentNode}var H=z.kindOf(A,"ul,ol,dl")?A:k;var C;if(H){C=z.divideNode(F,z.indexOf(E));z.insertAt(E,C)}else{C=z.divideNode(F,z.indexOf(E));var B=z.getStyleText(E);var G=D.newNode("p");z.setStyleText(G,B);z.replace(E,G);z.insertAt(G,C)}z.removeListIfEmpty(F);z.removeListIfEmpty(C)},OutdentBlockNode:function(A){z.applyStyles(A,{marginLeft:"-2em"})},Propagate:function(){throw $propagate}}})();t.addTool("outdent",{sync:d,status:d,hotKey:{shiftKey:y,keyCode:9}});h.Tool.Outdent=h.Class.create({$const:{__Identity:"outdent"},$extend:h.Tool,oninitialized:function(e){this.weave(new h.Button(this.buttonCfg),k,this.handler);this.createHandlers();this.observeBackspace();this.bindKeyboard(e.hotKey,this.shiftTabKeyHandler.bind(this))},handler:function(){var e=this;this.canvas.execute(function(i){e.onOutdentClicked.handle(i)})},shiftTabKeyHandler:function(){var e=this;
this.canvas.execute(function(i){e.onShiftTabPressed.handle(i)})},observeBackspace:function(){var i=this.canvas;var e=this;i.observeKey({keyCode:h.__KEY.BACKSPACE},function(){i.query(function(A){e.onBackspace.handle(A)})})},createHandlers:function(){var e=h.Tool.Indent;var A=e.Judge;var i=e.Operation;var C=e.Handler;var F=h.ChainHandler;var D=F.connect([new F(A.ListItem,i.OutdentListItem),new F(A.BlockNode,i.OutdentBlockNode)]);var B=F.connect([new F(A.AlwaysTrue,i.Propagate)]);var G=F.connect([new F(A.ListItem,i.OutdentListItem),new F(A.ChildOfFirstTableCell,i.GoToAboveTable),new F(A.ChildOfTableCell,i.GoToPreviousCell),new F(A.BlockNode,i.OutdentBlockNode)]);var E=F.connect([new F(A.And(A.HeadOfParagraph,A.OneDepthList),i.Propagate),new F(A.And(A.HeadOfParagraph,A.ListItem),i.OutdentListItem),new F(A.And(A.HeadOfParagraph,A.IndentedBlockNode),i.OutdentBlockNode),new F(A.AlwaysTrue,i.Propagate)]);this.onShiftTabPressed=new C(G,D,D);this.onOutdentClicked=new C(D,D,D);this.onBackspace=new C(E,B,B)
}});h.I.AlignExecution=h.Mixin.create({executeAlignImageMode:function(A){var C=this.constructor.__ImageModeProps.image;var i=A.getControl();if(!i){return}A.apply(i,C);var e=this.constructor.__ImageModeProps.paragraph;if(e){var B=z.find(i,"%paragraph");A.apply(B,e)}},executeAlignTextMode:function(C){var e=this.constructor.__TextModeProps.paragraph;var A=C.getControl();if(A&&z.kindOf(A,"button")){var E=z.find(A,"%paragraph");if(E){C.apply(E,e)}var i=z.collect(A,"blockquote");if(i){i.style.margin=this.constructor.__TextModeProps.button["style"]["margin"]}}else{var D=C.blocks(function(){return"%paragraph"});C.apply(D,e);var B=[];D.each(function(G){var F;F=z.collectAll(G,"table,hr");F.each(function(H){B.push(H)})});C.apply(B,{align:e.style["textAlign"]})}},queryImageFloat:function(i){var e=i.getControl();if(e){return i.queryStyle(e,"float")}else{return k}},queryParaFloat:function(A){var e,i=A.findNode("%paragraph");if(i){e=A.queryStyle(i,"float")}return e||k},queryTextAlign:function(A){var i=A.findNode("%paragraph");
var e=A.queryStyle(i,"textAlign");if(!e){e=A.queryAttr(i,"align")}if(!e||e=="start"||e=="auto"||e=="-webkit-auto"){e="left"}return e},queryControlAlign:function(e){var i=e.getControl();return e.queryAttr(i,"align")},executeAlign:function(i){var e=this;var A=e.getAlignMode(i);if(A=="tableCell"){e.executeTableCellMode(i)}else{if(A=="image"){e.executeAlignImageMode(i)}else{e.executeAlignTextMode(i)}}},getAlignMode:function(i){var e=(i.table)?i.table.getTdArr():[];if(e.length>0){return"tableCell"}else{if(this.imageAlignMode){return"image"}else{return"text"}}},executeTableCellMode:function(B){if(!this.indenter){var C=h.Tool.Indent.Judge;var D=h.ChainHandler;var i=this;function e(E){z.applyAttributes(E,i.constructor.__TextModeProps.paragraph)}var A=D.connect([new D(C.ListItem,e),new D(C.BlockNode,e)]);this.indenter=new h.Tool.Indent.TableCellIndenter(A)}this.indenter.indent(B)},syncButtonState:function(){var e=this;var i=e.canvas.query(function(A){return e.queryCurrentStyle(A)});e.button.setState(i)
},queryCurrentStyle:function(e){if(this.imageAlignMode){return this.queryImageMode(e)}return this.queryTextMode(e)},queryImageMode:function(A){var e=this.constructor.__ImageModeProps;var B=this.queryImageFloat(A);if(B&&B!="none"){if(e.image&&e.image.style["float"]){return(B==e.image.style["float"])}}var C=this.queryParaFloat(A);if(C&&C!="none"){if(e.paragraph&&e.paragraph.style["float"]){return(C==e.paragraph.style["float"])}}var i=this.queryTextAlign(A);if(e.paragraph&&e.paragraph.style.textAlign){return(i==e.paragraph.style.textAlign)}return d},queryTextMode:function(A){var B=this.constructor.__TextModeProps;var i=B.paragraph.style.textAlign;var e=this.queryControlAlign(A);if(e==k){var C=this.queryTextAlign(A)||"left";return(C==i)}else{return(e==i)}}});(function(){t.addTool("alignleft",{sync:y,status:y,hotKey:{ctrlKey:y,keyCode:188}});var A="left";var e="none";var B="none";var i={align:k,style:{textAlign:A}};h.Tool.AlignLeft=h.Class.create({$const:{__Identity:"alignleft",__ImageModeProps:{paragraph:i,image:{style:{clear:B,"float":e,marginLeft:"",marginRight:""}}},__TextModeProps:{paragraph:i,button:{style:{margin:"0"}}}},$extend:h.Tool,$mixins:[h.I.AlignExecution],oninitialized:function(D){var C=this;
C.imageAlignMode=d;C.weave(new h.Button(C.buttonCfg),k,C.handler);C.bindKeyboard(D.hotKey,C.handler.bind(C));C.startSyncButtonWithStyle()},handler:function(){var C=this;var D=C.canvas;var E=C.toolbar;D.execute(function(F){C.executeAlign(F);var G=C.getAlignMode(F);if(G=="image"){E.fireJobs(h.Ev.__CMD_ALIGN_IMG_LEFT)}else{if(G=="text"){E.fireJobs(h.Ev.__CMD_ALIGN_LEFT)}}});D.triggerQueryStatus()},startSyncButtonWithStyle:function(){var C=this;C.canvas.observeJob(h.Ev.__CANVAS_PANEL_QUERY_STATUS,function(){C.syncButtonState()})}})})();(function(){t.addTool("aligncenter",{sync:y,status:y,hotKey:{ctrlKey:y,keyCode:190}});var A="center";var e="none";var B="none";var i={align:k,style:{textAlign:A}};h.Tool.AlignCenter=h.Class.create({$const:{__Identity:"aligncenter",__ImageModeProps:{paragraph:i,image:{style:{clear:B,"float":e,marginLeft:"",marginRight:""}}},__TextModeProps:{paragraph:i,button:{style:{margin:"0 auto"}}}},$extend:h.Tool,$mixins:[h.I.AlignExecution],oninitialized:function(D){var C=this;
C.imageAlignMode=d;C.weave(new h.Button(C.buttonCfg),k,C.handler);C.bindKeyboard(D.hotKey,C.handler.bind(C));C.startSyncButtonWithStyle()},handler:function(){var C=this;var D=C.canvas;var E=C.toolbar;D.execute(function(F){C.executeAlign(F);var G=C.getAlignMode(F);if(G=="image"){E.fireJobs(h.Ev.__CMD_ALIGN_IMG_CENTER)}else{if(G=="text"){E.fireJobs(h.Ev.__CMD_ALIGN_CENTER)}}});D.triggerQueryStatus()},startSyncButtonWithStyle:function(){var C=this;C.canvas.observeJob(h.Ev.__CANVAS_PANEL_QUERY_STATUS,function(){C.syncButtonState()})}})})();(function(){t.addTool("alignright",{sync:y,status:y,hotKey:{ctrlKey:y,keyCode:191}});var A="right";var e="left";var B="both";var C="8px";var i="";h.Tool.AlignRight=h.Class.create({$const:{__Identity:"alignright",__ImageModeProps:{image:{style:{clear:B,"float":e,marginLeft:i,marginRight:C}}},__TextModeProps:{paragraph:{align:k,style:{textAlign:A}},button:{style:{margin:"0 0 0 auto"}}}},$extend:h.Tool,$mixins:[h.I.AlignExecution],oninitialized:function(E){var D=this;
D.imageAlignMode=d;D.weave(new h.Button(D.buttonCfg),k,D.handler);D.bindKeyboard(E.hotKey,D.handler.bind(D));D.startSyncButtonWithStyle()},handler:function(){var D=this;var E=D.canvas;var F=D.toolbar;E.execute(function(G){D.executeAlign(G);var H=D.getAlignMode(G);if(H=="image"){F.fireJobs(h.Ev.__CMD_ALIGN_IMG_FLOAT_LEFT)}else{if(H=="text"){F.fireJobs(h.Ev.__CMD_ALIGN_RIGHT)}}});E.triggerQueryStatus()},startSyncButtonWithStyle:function(){var D=this;D.canvas.observeJob(h.Ev.__CANVAS_PANEL_QUERY_STATUS,function(){D.syncButtonState()})}})})();(function(){t.addTool("alignfull",{sync:y,status:y});var A="justify";var e="right";var B="both";var C="8px";var i="";h.Tool.AlignFull=h.Class.create({$const:{__Identity:"alignfull",__ImageModeProps:{image:{style:{clear:B,"float":e,marginLeft:C,marginRight:i}}},__TextModeProps:{paragraph:{align:k,style:{textAlign:A}},button:{style:{margin:"0"}}}},$extend:h.Tool,$mixins:[h.I.AlignExecution],oninitialized:function(){var D=this;D.imageAlignMode=d;D.weave(new h.Button(D.buttonCfg),k,D.handler);
D.startSyncButtonWithStyle()},handler:function(){var D=this;var E=D.canvas;var F=D.toolbar;E.execute(function(G){D.executeAlign(G);var H=D.getAlignMode(G);if(H=="image"){F.fireJobs(h.Ev.__CMD_ALIGN_IMG_FLOAT_RIGHT)}else{if(H=="text"){F.fireJobs(h.Ev.__CMD_ALIGN_FULL)}}});E.triggerQueryStatus()},startSyncButtonWithStyle:function(){var D=this;D.canvas.observeJob(h.Ev.__CANVAS_PANEL_QUERY_STATUS,function(){D.syncButtonState()})}})})();t.addTool("insertcells",{sync:d,status:y,options:[{label:"\uc704\ub85c \uc0bd\uc785",title:"\uc704\ub85c \uc0bd\uc785",data:"addRowUpper",klass:"tx-insertcells-1"},{label:"\uc544\ub798 \uc0bd\uc785",title:"\uc544\ub798 \uc0bd\uc785",data:"addRowBelow",klass:"tx-insertcells-2"},{label:"\uc67c\ucabd \uc0bd\uc785",title:"\uc67c\ucabd \uc0bd\uc785",data:"addColLeft",klass:"tx-insertcells-3"},{label:"\uc624\ub978\ucabd \uc0bd\uc785",title:"\uc624\ub978\ucabd \uc0bd\uc785",data:"addColRight",klass:"tx-insertcells-4"}]});h.Tool.Insertcells=h.Class.create({$const:{__Identity:"insertcells"},$extend:h.Tool,oninitialized:function(e){var B=this.canvas;
var D=B.getStyleConfig().insert;var i=(e.options||[]);var C={};i.each(function(E){C[E.data]=E.title});var A=function(E){B.query(function(F){if(F.table){switch(E){case"addRowUpper":F.table.insertRowAbove();break;case"addRowBelow":F.table.insertRowBelow();break;case"addColLeft":F.table.insertColLeft();break;case"addColRight":F.table.insertColRight();break}}})};this.weave.bind(this)(new h.Button.Select(t.merge(this.buttonCfg,{selectedValue:D})),new h.Menu.Select(this.menuCfg),A)}});t.addTool("deletecells",{sync:d,status:y,options:[{label:"\ud589 \uc0ad\uc81c",title:"\ud589 \uc0ad\uc81c",data:"deleteRow",klass:"tx-deletecells-1"},{label:"\uc5f4 \uc0ad\uc81c",title:"\uc5f4 \uc0ad\uc81c",data:"deleteCol",klass:"tx-deletecells-2"}]});h.Tool.deletecells=h.Class.create({$const:{__Identity:"deletecells"},$extend:h.Tool,oninitialized:function(e){var A=this.canvas;var B=A.getStyleConfig().insert;var i=function(C){A.query(function(D){if(D.table){switch(C){case"deleteRow":D.table.deleteRow();break;case"deleteCol":D.table.deleteCol();
break}}})};this.weave.bind(this)(new h.Button.Select(t.merge(this.buttonCfg,{selectedValue:B})),new h.Menu.Select(this.menuCfg),i)}});t.addTool("mergecells",{sync:d,status:y,options:[{label:"\ubcd1\ud569",title:"\ubcd1\ud569",data:"merge",klass:"tx-mergecells-1"},{label:"\ubd84\ud560",title:"\ubd84\ud560",data:"cancelmerge",klass:"tx-mergecells-2"}]});h.Tool.Mergecells=h.Class.create({$const:{__Identity:"mergecells"},$extend:h.Tool,oninitialized:function(){var i=this.canvas;var A=i.getStyleConfig().insert;var e=function(B){i.query(function(C){if(C.table){switch(B){case"merge":C.table.merge();break;case"cancelmerge":C.table.resetMerge();break}}})};this.weave.bind(this)(new h.Button.Select(t.merge(this.buttonCfg,{selectedValue:A})),new h.Menu.Select(this.menuCfg),e)}});l.addMsg({"@cellslineheight.subtitle1":"1pt","@cellslineheight.subtitle2":"2pt","@cellslineheight.subtitle3":"3pt","@cellslineheight.subtitle4":"4pt","@cellslineheight.subtitle5":"5pt"});t.addTool("cellslineheight",{sync:d,status:y,options:[{label:TXMSG("@cellslineheight.subtitle1"),title:"1pt",data:1,klass:"tx-cellslineheight-1"},{label:TXMSG("@cellslineheight.subtitle2"),title:"2pt",data:2,klass:"tx-cellslineheight-2"},{label:TXMSG("@cellslineheight.subtitle3"),title:"3pt",data:3,klass:"tx-cellslineheight-3"},{label:TXMSG("@cellslineheight.subtitle4"),title:"4pt",data:4,klass:"tx-cellslineheight-4"},{label:TXMSG("@cellslineheight.subtitle5"),title:"5pt",data:5,klass:"tx-cellslineheight-5"}]});
h.Tool.Cellslineheight=h.Class.create({$const:{__Identity:"cellslineheight"},$extend:h.Tool,oninitialized:function(i){var e=this;e.createListStyleMap(i);e.weave(new h.Button.CellslineheightList(e.buttonCfg),new h.Menu.Select(e.menuCfg),e.handler)},createListStyleMap:function(e){var i=this.listStyleMap={};e.options.each(function(A){i[A.data]={type:A.type,klass:A.klass}})},handler:function(i){var e=this;if(!e.listStyleMap[i]){return}e.canvas.query(function(A){if(A.table){A.table.setBorderHeight(i)}})},getButtonClassByValue:function(i){var e=this.listStyleMap;if(e[i]){return e[i].klass}else{return e[this.getDefaultProperty()].klass}}});h.Button.CellslineheightList=h.Class.create({$extend:h.Button.Select});t.addTool("cellslinecolor",{defaultcolor:"#7c84ef",wysiwygonly:y,sync:d,status:y,useFavorite:y,thumbs:h.__CONFIG_COMMON.thumbs,needRevert:y});h.Tool.Cellslinecolor=h.Class.create({$const:{__Identity:"cellslinecolor"},$extend:h.Tool,oninitialized:function(){var i=this.canvas;var e=this;this.button=new h.Button(this.buttonCfg);
var A=function(C){B(C);i.query(function(D){if(D.table){D.table.setBorderColor(C)}})};var B=function(C){if(C){try{x.setStyle(e.button.elButton,{backgroundColor:C})}catch(D){}}};B(this.config.defaultcolor);this.weave.bind(this)(e.button,new h.Menu.ColorPallete(this.menuCfg),A)}});l.addMsg({"@cellslinestyle.subtitle1":"\ud14c\ub450\ub9ac \uc5c6\uc74c","@cellslinestyle.subtitle2":"\uc2e4\uc120","@cellslinestyle.subtitle3":"\uc810\uc120","@cellslinestyle.subtitle4":"\uc791\uc740 \uc810\uc120"});t.addTool("cellslinestyle",{sync:d,status:y,options:[{label:TXMSG("@cellslinestyle.subtitle1"),title:"\ud14c\ub450\ub9ac \uc5c6\uc74c",data:"none",klass:"tx-cellslinestyle-1"},{label:TXMSG("@cellslinestyle.subtitle2"),title:"\uc2e4\uc120",data:"solid",klass:"tx-cellslinestyle-2"},{label:TXMSG("@cellslinestyle.subtitle3"),title:"\uc810\uc120",data:"dotted",klass:"tx-cellslinestyle-3"},{label:TXMSG("@cellslinestyle.subtitle4"),title:"\uc791\uc740 \uc810\uc120",data:"dashed",klass:"tx-cellslinestyle-4"}]});
h.Tool.Cellslinestyle=h.Class.create({$const:{__Identity:"cellslinestyle"},$extend:h.Tool,oninitialized:function(i){var e=this;e.createListStyleMap(i);e.weave(new h.Button.CellsLineStyledList(e.buttonCfg),new h.Menu.Select(e.menuCfg),e.handler)},createListStyleMap:function(e){var i=this.listStyleMap={};e.options.each(function(A){i[A.data]={type:A.type,klass:A.klass}})},handler:function(i){var e=this;if(!e.listStyleMap[i]){return}e.canvas.query(function(A){if(A.table){A.table.setBorderType(i)}})},getDefaultProperty:function(){return 1}});h.Button.CellsLineStyledList=h.Class.create({$extend:h.Button.Select});t.addTool("cellsoutline",{sync:d,status:y,options:[{label:"\ubaa8\ub4e0 \ud14c\ub450\ub9ac",title:"\ubaa8\ub4e0 \ud14c\ub450\ub9ac",data:"all",klass:"tx-cellsoutline-1"},{label:"\ubc14\uae65 \ud14c\ub450\ub9ac",title:"\ubc14\uae65 \ud14c\ub450\ub9ac",data:"out",klass:"tx-cellsoutline-2"},{label:"\uc548\ucabd \ud14c\ub450\ub9ac",title:"\uc548\ucabd \ud14c\ub450\ub9ac",data:"in",klass:"tx-cellsoutline-3"},{label:"\uc704\ucabd \ud14c\ub450\ub9ac",title:"\uc704\ucabd \ud14c\ub450\ub9ac",data:"top",klass:"tx-cellsoutline-4"},{label:"\uc544\ub798\ucabd \ud14c\ub450\ub9ac",title:"\uc544\ub798\ucabd \ud14c\ub450\ub9ac",data:"bottom",klass:"tx-cellsoutline-5"},{label:"\uc67c\ucabd \ud14c\ub450\ub9ac",title:"\uc67c\ucabd \ud14c\ub450\ub9ac",data:"left",klass:"tx-cellsoutline-6"},{label:"\uc624\ub978\ucabd \ud14c\ub450\ub9ac",title:"\uc624\ub978\ucabd \ud14c\ub450\ub9ac",data:"right",klass:"tx-cellsoutline-7"},{label:"\ud14c\ub450\ub9ac \uc5c6\uc74c",title:"\ud14c\ub450\ub9ac \uc5c6\uc74c",data:"none",klass:"tx-cellsoutline-8"}]});
h.Tool.Cellsoutline=h.Class.create({$const:{__Identity:"cellsoutline"},$extend:h.Tool,oninitialized:function(i){var e=this;this.twinkleCount=0;this.twinkleTimer=k;e.createListStyleMap(i);e.weave(new h.Button.CellsoutlineList(e.buttonCfg),new h.Menu.Select(e.menuCfg),e.handler);this.toolbar.observeJob(h.Ev.__TOOL_CELL_LINE_CHANGE,function(A){if(A.fromInit!=y){e.twinkleButton()}})},createListStyleMap:function(e){var i=this.listStyleMap={};e.options.each(function(A){i[A.data]={type:A.type,klass:A.klass}})},handler:function(i){var e=this;if(!e.listStyleMap[i]){return}e.canvas.query(function(A){if(A.table){A.table.setBorderRange(i)}});e.canvas.execute(function(A){if(A.table){if(i=="none"){A.table.setNoBorder()}else{A.table.applyBorder()}}})},twinkleButton:function(){var e;e=this;if(this.twinkleTimer){clearInterval(this.twinkleTimer);this.twinkleTimer=k}this.twinkleCount=4;this.twinkleTimer=setInterval(function(){if(0<e.twinkleCount){e.twinkleCount-=1;if(e.button.currentState()=="hovered"){e.button.normalState()
}else{e.button.hoveredState()}}else{e.button.normalState();clearInterval(e.twinkleTimer);e.twinkleTimer=k}},500)}});h.Button.CellsoutlineList=h.Class.create({$extend:h.Button.Select});h.MarkupTemplate.add("cellsline.preview",['<table width="#{width}" cellPadding="0" style="line-height:0"><tbody><tr>','<td valign="center" height="#{height}">','<div style="border-bottom:#{value};width:#{width}px;height:2px;overflow:hidden;"></div>',"</td>","</tr></tbody></table>"].join(""));t.addTool("cellslinepreview",{sync:d,status:y,options:[{label:h.MarkupTemplate.get("cellsline.preview").evaluate({value:"1pt solid #ccc",width:70,height:14}),title:"1pt solid #ccc",data:"#ccc 1 solid"},{label:h.MarkupTemplate.get("cellsline.preview").evaluate({value:"2pt solid #c54",width:70,height:14}),title:"2pt solid #c54",data:"#c54 2 solid"},{label:h.MarkupTemplate.get("cellsline.preview").evaluate({value:"2pt solid #67f",width:70,height:14}),title:"2pt solid #67f",data:"#67f 2 solid"},{label:h.MarkupTemplate.get("cellsline.preview").evaluate({value:"3pt solid #000",width:70,height:14}),title:"3pt solid #000",data:"#000 3 solid"},{label:h.MarkupTemplate.get("cellsline.preview").evaluate({value:"1pt dashed #d4c",width:70,height:14}),title:"1pt dashed #d4c",data:"#d4c 1 dashed"}]});
h.Tool.Cellslinepreview=h.Class.create({$const:{__Identity:"cellslinepreview"},$extend:h.Tool,oninitialized:function(i){var e=this;this.data={color:"",height:0,type:""};this.weave(new h.Button.CellslinepreviewList(this.buttonCfg),new h.Menu.Select(this.menuCfg),this.handler);this.toolbar.observeJob(h.Ev.__TOOL_CELL_LINE_CHANGE,function(A){e.setData(A);e.refreshPreview()})},setData:function(e){if("color" in e){this.data.color=e.color}if("height" in e){this.data.height=e.height}if("type" in e){this.data.type=e.type}},refreshPreview:function(){var e;e=this.data;text=e.height+"pt "+e.type+" "+e.color;this.setPreview(text)},setPreview:function(e){this.button.elText.innerHTML=h.MarkupTemplate.get("cellsline.preview").evaluate({value:e,width:43,height:14})},addBorderHistory:function(e){this.setData(e);this.refreshPreview()},handler:function(A,B){var e=this,i=e.canvas;i.execute(function(D){var C;if(D.table){C=A.split(" ");D.table.setBorderButtons(C[0],C[1],C[2])}})}});h.Button.CellslinepreviewList=h.Class.create({$extend:h.Button.Select,setText:function(e){this.tool.setPreview(e)
}});t.addTool("tablebackcolor",{defaultcolor:"#9aa5ea",wysiwygonly:y,sync:d,status:y,useFavorite:y,thumbs:h.__CONFIG_COMMON.thumbs,needRevert:y});h.Tool.Tablebackcolor=h.Class.create({$const:{__Identity:"tablebackcolor"},$extend:h.Tool,oninitialized:function(){var A=this.canvas;var e=this;e.button=new h.Button(this.buttonCfg);var i=function(C){A.query(function(D){if(D.table){D.table.tableBackground(C)}});B(C)};var B=function(C){try{if(C){x.setStyle(e.button.elButton,{backgroundColor:C})}}catch(D){}};this.weave.bind(this)(e.button,new h.Menu.ColorPallete(this.menuCfg),i)}});t.addTool("tableedittool",{sync:d,status:y,opened:d});h.Tool.TableEditTool=h.Class.create({$const:{__Identity:"tableedittool"},$extend:h.Tool,oninitialized:function(i){var e=this.toolbar;var D=e.el;var C=z.collect(D.parentNode,"div.tx-toolbar-advanced");if(!C){return}e.observeJob("toolbar.advanced.fold",function(){x.hide(C);x.removeClassName(D,"tx-toolbar-basic-open")});e.observeJob("toolbar.advanced.spread",function(){x.show(C);
x.addClassName(D,"tx-toolbar-basic-open")});var B=d;var A=function(){if(B){e.fireJobs("toolbar.advanced.fold")}else{e.fireJobs("toolbar.advanced.spread")}B=!B};this.weave.bind(this)(new h.Button(this.buttonCfg),k,A);if(i.opened==y){C.show();x.addClassName(D,"tx-toolbar-basic-open");B=y}}});t.addTool("tabletemplate",{sync:d,status:y,rows:5,cols:9,options:[{label:"image",data:1,klass:"tx-tabletemplate-1"},{label:"image",data:2,klass:"tx-tabletemplate-2"},{label:"image",data:3,klass:"tx-tabletemplate-3"},{label:"image",data:4,klass:"tx-tabletemplate-4"},{label:"image",data:5,klass:"tx-tabletemplate-5"},{label:"image",data:6,klass:"tx-tabletemplate-6"},{label:"image",data:7,klass:"tx-tabletemplate-7"},{label:"image",data:8,klass:"tx-tabletemplate-8"},{label:"image",data:9,klass:"tx-tabletemplate-9"},{label:"image",data:10,klass:"tx-tabletemplate-10"},{label:"image",data:11,klass:"tx-tabletemplate-11"},{label:"image",data:12,klass:"tx-tabletemplate-12"},{label:"image",data:13,klass:"tx-tabletemplate-13"},{label:"image",data:14,klass:"tx-tabletemplate-14"},{label:"image",data:15,klass:"tx-tabletemplate-15"},{label:"image",data:16,klass:"tx-tabletemplate-16"},{label:"image",data:17,klass:"tx-tabletemplate-17"},{label:"image",data:18,klass:"tx-tabletemplate-18"},{label:"image",data:19,klass:"tx-tabletemplate-19"},{label:"image",data:20,klass:"tx-tabletemplate-20"},{label:"image",data:21,klass:"tx-tabletemplate-21"},{label:"image",data:22,klass:"tx-tabletemplate-22"},{label:"image",data:23,klass:"tx-tabletemplate-23"},{label:"image",data:24,klass:"tx-tabletemplate-24"},{label:"image",data:25,klass:"tx-tabletemplate-25"},{label:"image",data:26,klass:"tx-tabletemplate-26"},{label:"image",data:27,klass:"tx-tabletemplate-27"},{label:"image",data:28,klass:"tx-tabletemplate-28"},{label:"image",data:29,klass:"tx-tabletemplate-29"},{label:"image",data:30,klass:"tx-tabletemplate-30"},{label:"image",data:31,klass:"tx-tabletemplate-31"},{label:"image",data:32,klass:"tx-tabletemplate-32"},{label:"image",data:33,klass:"tx-tabletemplate-33"},{label:"image",data:34,klass:"tx-tabletemplate-34"},{label:"image",data:35,klass:"tx-tabletemplate-35"},{label:"image",data:36,klass:"tx-tabletemplate-36"},{label:"image",data:37,klass:"tx-tabletemplate-37"},{label:"image",data:38,klass:"tx-tabletemplate-38"},{label:"image",data:39,klass:"tx-tabletemplate-39"},{label:"image",data:40,klass:"tx-tabletemplate-40"},{label:"image",data:41,klass:"tx-tabletemplate-41"},{label:"image",data:42,klass:"tx-tabletemplate-42"},{label:"image",data:43,klass:"tx-tabletemplate-43"},{label:"image",data:44,klass:"tx-tabletemplate-44"},{label:"image",data:45,klass:"tx-tabletemplate-45"}]});
h.Tool.Tabletemplate=h.Class.create({$const:{__Identity:"tabletemplate"},$extend:h.Tool,oninitialized:function(i){var e=this;var B=this.canvas;var C={};i.options.each(function(D){C[D.data]={type:D.type}});var A=function(E){if(!C[E]){return}var D=k;B.execute(function(F){if(F.table){D=F.findNode("table");F.table.setTemplateStyle(D,E)}})};this.weave.bind(this)(new h.Button(this.buttonCfg),new h.Menu.List(this.menuCfg),A)}});t.addTool("lineheight",{sync:d,status:y,options:[{label:"50%",title:"50%",data:"0.5"},{label:"80%",title:"80%",data:"0.8"},{label:"100%",title:"100%",data:"1.0"},{label:"120%",title:"120%",data:"1.2"},{label:"150%",title:"150%",data:"1.5"},{label:"180%",title:"180%",data:"1.8"},{label:"200%",title:"200%",data:"2.0"}]});h.Tool.LineHeight=h.Class.create({$const:{__Identity:"lineheight"},$extend:h.Tool,oninitialized:function(e){var B=this.canvas;var D=B.getStyleConfig().lineHeight;var i=(e.options||[]);var C={};i.each(function(E){C[E.data]=E.title});var A=function(E){B.execute(function(F){var G=F.blocks(function(){return"%paragraph"
});F.apply(G,{style:{lineHeight:E}})})};this.weave.bind(this)(new h.Button.Select(t.merge(this.buttonCfg,{selectedValue:D})),new h.Menu.Select(this.menuCfg),A)}});l.addMsg({"@styledlist.subtitle1":"\ucde8\uc18c","@styledlist.subtitle2":"\ub3d9\uadf8\ub77c\ubbf8","@styledlist.subtitle3":"\ub124\ubaa8","@styledlist.subtitle4":"\uc22b\uc790","@styledlist.subtitle5":"\ub85c\ub9c8\uc22b\uc790","@styledlist.subtitle6":"\uc54c\ud30c\ubcb3"});t.addTool("styledlist",{status:y,options:[{label:TXMSG("@styledlist.subtitle1"),title:"cancel",type:"cancel",data:"cancel",klass:"tx-styledlist-0"},{label:TXMSG("@styledlist.subtitle2"),title:"disc",type:"ul",data:"disc",klass:"tx-styledlist-1"},{label:TXMSG("@styledlist.subtitle3"),title:"square",type:"ul",data:"square",klass:"tx-styledlist-2"},{label:TXMSG("@styledlist.subtitle4"),title:"decimal",type:"ol",data:"decimal",klass:"tx-styledlist-3"},{label:TXMSG("@styledlist.subtitle5"),title:"upper-roman",type:"ol",data:"upper-roman",klass:"tx-styledlist-4"},{label:TXMSG("@styledlist.subtitle6"),title:"upper-alpha",type:"ol",data:"upper-alpha",klass:"tx-styledlist-5"}],hotKey:{ul:{ctrlKey:y,altKey:y,keyCode:85},ol:{ctrlKey:y,altKey:y,keyCode:79}}});
h.Tool.StyledList=h.Class.create({$const:{__Identity:"styledlist"},$extend:h.Tool,oninitialized:function(i){var e=this;e.createListStyleMap(i);e.weave(new h.Button.StyledList(e.buttonCfg),new h.Menu.Select(e.menuCfg),e.handler,e.menuInitHandler.bind(e));e.indentHelper=h.Tool.Indent.Helper;e.bindKeyboard(i.hotKey.ul,e.handler.bind(e,"disc"));e.bindKeyboard(i.hotKey.ol,e.handler.bind(e,"decimal"));e.startSyncButtonWithStyle()},createListStyleMap:function(e){var i=this.listStyleMap={};e.options.each(function(A){i[A.data]={type:A.type,klass:A.klass}})},handler:function(A){var i=this;if(!i.listStyleMap[A]){return}var e=i.listStyleMap[A].type;var B={listStyleType:A};i.canvas.execute(function(C){if(e=="cancel"){i.outdentListItem(C)}else{i.createListFromSelection(C,e,B)}})},outdentListItem:function(e){e.executeUsingCaret(function(i,B){var A=h.Tool.Indent.Helper.findBlocksToIndentFromRange(i,e,B);A.each(function(C){h.Tool.Indent.Operation.OutdentListItem(C,e)})})},createListFromSelection:function(A,i,B){var e=this;
A.executeUsingCaret(function(C,F){var E=e.indentHelper.findBlocksToIndentFromRange(C,A,F);var D=e.groupEachList(E);D.each(function(H){var G=new h.Tool.StyledList.ListBuilder(A,i,B);G.createListForNodes(H)})})},groupEachList:function(i){var e=this.indentHelper;var C=[];var B=[];var A=k;i.each(function(D){var E=e.findCurrentCell(D);if(E!=A){if(B.length>0){C.push(B);B=[]}A=E}B.push(D)});if(B.length>0){C.push(B)}return C},menuInitHandler:function(){var e=this.canvas.query(function(A){return !!A.findNode("%listhead")});var i=z.collect(this.menu.elMenu,"li");if(e){x.show(i)}else{x.hide(i)}},startSyncButtonWithStyle:function(){var e=this;var i=e.canvas;var A=e.getDefaultProperty();i.observeJob(h.Ev.__CANVAS_PANEL_QUERY_STATUS,function(){var C=i.query(function(D){var E=D.findNode("%listhead");return D.queryStyle(E,"listStyleType")});C=C||e.getDefaultProperty();if(A==C){return}var B=e.getButtonClassByValue(C);e.button.setText(B);A=C})},getDefaultProperty:function(){return"decimal"},getButtonClassByValue:function(i){var e=this.listStyleMap;
if(e[i]){return e[i].klass}else{return e[this.getDefaultProperty()].klass}}});h.Button.StyledList=h.Class.create({$extend:h.Button.Select,setText:function(e){this.elIcon.className="tx-icon "+e}});h.Tool.StyledList.ListBuilder=h.Class.create({currentDepth:k,prepared:d,listElement:k,uselessListCandidate:[],processor:k,initialize:function(i,e,A){this.processor=i;this.listTag=e;this.listStyle=A},createListForNodes:function(i){var e=this;var A=e.getNodeDepthList(i);A.each(function(B){var C=B.node;var D=B.depth;if(!e.prepared){e.prepareRootList(C,D)}e.adjustDepth(C,D);e.appendAsListItem(C)});e.cleanupEmptyList()},getNodeDepthList:function(i){var e=this;return i.map(function(A){return{node:A,depth:e.countDepthOfList(A)}})},countDepthOfList:function(A){var i=0;var e=z.parent(A);while(e&&!z.isBody(e)){if(z.kindOf(e,"ol,ul")){i++}else{if(z.kindOf(e,"th,td")){break}}e=z.parent(e)}return(i||1)},prepareRootList:function(A,B){var e=this;e.listElement=e.createNewList();var i;if(A.tagName=="LI"){e.uselessListCandidate.push(A.parentNode);
i=z.divideNode(A.parentNode,z.indexOf(A))}else{i=A}z.insertAt(e.listElement,i);e.currentDepth=B;e.listDepth=B;e.prepared=y},adjustDepth:function(i,A){var e=this;while(A!=e.currentDepth){if(A>e.currentDepth){e.increaseDepth()}else{e.decreaseDepth()}}},increaseDepth:function(){var i=this;var A=i.listElement;i.currentDepth++;var e=i.createNewList();A.appendChild(e);i.listElement=e},decreaseDepth:function(){var e=this;var A=e.listElement;e.currentDepth--;if(e.listDepth>e.currentDepth){e.uselessListCandidate.push(A.parentNode);var B=z.divideNode(A.parentNode,z.indexOf(A));var i=e.createNewList();z.insertAt(i,B);i.appendChild(A)}e.listElement=A.parentNode},createNewList:function(){var e=this;var i=e.processor.newNode(e.listTag);x.setStyle(i,e.listStyle);return i},cleanupEmptyList:function(){this.uselessListCandidate.each(function(e){z.removeListIfEmpty(e)})},wrapWithListItem:function(A){if(A.tagName=="LI"){return A}else{if(A.tagName=="P"||(x.webkit&&A.tagName=="DIV")){var i=this.createListItem();
z.applyStyles(A,{marginLeft:k});if(z.getStyleText(A)){z.wrap(i,A);return i}else{return z.replace(A,i)}}else{var e=this.createListItem();e.appendChild(A);return e}}},createListItem:function(){return this.processor.newNode("li")},appendAsListItem:function(i){var e=this.wrapWithListItem(i);if(z.kindOf(i.parentNode,"%listhead")){this.uselessListCandidate.push(i.parentNode)}this.listElement.appendChild(e)}});t.addTool("link",{wysiwygonly:y,sync:d,status:y});l.addMsg({"@insertlink.cancel.image":"#iconpath/btn_cancel.gif?v=2","@insertlink.confirm.image":"#iconpath/btn_confirm.gif?v=2","@insertlink.invalid.url":"'HTTP://'\ub85c \uc2dc\uc791\ud558\ub294 URL\uc744 \uc785\ub825\ud574\uc8fc\uc2ed\uc2dc\uc624.","@insertlink.link.alt":"[#{title}]\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4.","@insertlink.remove.image":"#iconpath/btn_remove.gif?v=2","@insertlink.title":"\uc120\ud0dd\ub41c \ubd80\ubd84\uc5d0 \uac78\ub9b4 URL\uc8fc\uc18c\ub97c \ub123\uc5b4\uc8fc\uc138\uc694.","@insertlink.onclick.target":"\ud074\ub9ad \uc2dc","@insertlink.target.blank":"\uc0c8 \ucc3d","@insertlink.target.self":"\ud604\uc7ac\ucc3d","@insertlink.class.name":"tx-link"});
h.Tool.Link=h.Class.create({$const:{__Identity:"link"},$extend:h.Tool,oninitialized:function(){var e=this;var D=this.canvas;var B=function(E){if(D.isWYSIWYG()){if(E){D.execute(function(F){var I={href:E.link,target:E.target?E.target:"_blank",className:E.className};var H,G;if(F.findNode("a")){H=F.findNode("a");z.applyAttributes(H,I)}else{if(F.hasControl()){G=F.controls(function(){return"img"});z.wrap(F.create("a",I),G)}else{if(F.isCollapsed()){H=F.create("a",I);H.innerHTML=E.link;F.pasteNode(H,d)}else{G=F.inlines(function(){return"%text,img,a,%inline"});G.each(function(J){if(z.hasUsefulChildren(J,y)){if(z.kindOf(J,"a")){z.applyAttributes(J,I)}else{if(z.kindOf(J,"img")){z.wrap(F.create("a",I),[J])}else{var L=z.getStyleText(J);var M=z.collectAll(J,"a");M.each(function(N){z.moveChildToParent(N);z.remove(N)});var K=F.create("a",I);z.setStyleText(K,L);z.replace(J,K)}}}else{z.remove(J)}})}}}})}else{D.execute(function(G){var F=G.findNode("a");if(F){G.unwrap(F)}})}}else{D.execute(function(F){F.insertTag('<a href="'+E.link+'" target="'+E.target+'" >',"</a>")
})}};var A="";var i=function(){if(D.isWYSIWYG()){return D.query(function(E){var F,G,H,I;F=E.findNode("a");if(F){G=z.getAttribute(F,"href");if(G){H=z.getAttribute(F,"target");return{exist:y,value:G,target:H}}}else{I=E.getText();if(/^(?:(?:http|https|ftp):\/\/)?[\w\d\-_\.]+[\w\d\-_]+(?::[0-9]+)?(?:\/.*)?$/i.test(I)){return{exist:d,value:I}}}return{exist:d,value:A}})}else{return{exist:d,value:A}}};this.weave.bind(this)(new h.Button(this.buttonCfg),new h.Menu.Link(this.menuCfg),B,i);var C=function(E){e.button.onMouseDown(E)};this.bindKeyboard({ctrlKey:y,keyCode:75},C)}});h.MarkupTemplate.add("menu.insertlink",['<div class="tx-menu-inner">',"    <dl>","        <dt>","            @insertlink.title","        </dt>","        <dd>",'            <input type="text" class="tx-text-input"/>',"        </dd>",'        <dd class="tx-rp">','            <span class="tx-text tx-first">@insertlink.onclick.target</span>','            <span><input type="radio" name="tx-insertlink-win" value="_blank"/><span class="tx-text">@insertlink.target.blank</span></span>','            <span><input type="radio" name="tx-insertlink-win" value="_top"/><span class="tx-text">@insertlink.target.self</span></span>',"        </dd>",'        <dd class="tx-hr">',"            <hr/>","        </dd>","        <dd>",'            <img width="32" height="21" src="@insertlink.confirm.image"/>','            <img width="32" height="21" src="@insertlink.cancel.image"/>','            <img width="51" height="21" src="@insertlink.remove.image" style="display: none;"/>',"        </dd>","    </dl>","</div>"].join(""));
h.Menu.Link=h.Class.create({$extend:h.Menu,ongenerated:function(){var E=this.elMenu;h.MarkupTemplate.get("menu.insertlink").evaluateToDom({},E);var e=z.collectAll(E,".tx-rp input");var i=this.newInput=e[0];x.observe(i,"click",function(){i.checked="checked";C.checked=""});var C=this.currInput=e[1];x.observe(C,"click",function(){C.checked="checked";i.checked=""});var B=function(G){if(!G){return d}G=G.trim();if(G.length==0){return d}if(!/http[s]?:\/\//.test(G)){return"http://"+G}else{return G}};var D=this.elInput=z.collect(E,"input.tx-text-input");x.observe(D,"keydown",function(H){if(H.keyCode==13){var I=B(D.value);if(!I){alert(TXMSG("@insertlink.invalid.url"));x.stop(H);return}var G=i.checked?i.value:C.value;this.onSelect(H,{link:I,target:G,className:TXMSG("@insertlink.class.name")});x.stop(H)}}.bindAsEventListener(this));var F=z.collectAll(E,"img");x.observe(F[0],"click",function(H){var I=B(D.value);if(!I){alert(TXMSG("@insertlink.invalid.url"));x.stop(H);return}var G=i.checked?i.value:C.value;
this.onSelect(H,{link:I,target:G,className:TXMSG("@insertlink.class.name")});x.stop(H)}.bind(this));x.observe(F[1],"click",function(){this.onCancel()}.bindAsEventListener(this));var A=x(F[2]);x.observe(A,"click",function(G){this.onSelect(G,k)}.bindAsEventListener(this));this.toggleRemoveBtn=function(G){A.style.display=((G)?"":"none")}},onregenerated:function(){var i=this.elInput;var e=this.initHandler();i.value=e.value;if(e.target=="_self"||e.target=="_top"){this.currInput.checked="checked";this.newInput.checked=""}else{this.newInput.checked="checked";this.currInput.checked=""}this.toggleRemoveBtn(e.exist);i.focus();if(x.msie){setTimeout(function(){try{i.focus();var A=c.selection.createRange();A.move("character",i.value.length);A.select()}catch(B){}},100)}}});t.addTool("richtextbox",{sync:d,status:y,rows:4,cols:6,borderwidth:1,bordercolor:"#cbcbcb",bgcolor:"#ffffff",padding:"10px",styles:[{klass:"",image:"#iconpath/textbox/thum_line01.gif?v=2",data:"solid"},{klass:"",image:"#iconpath/textbox/thum_line02.gif?v=2",data:"double"},{klass:"",image:"#iconpath/textbox/thum_line03.gif?v=2",data:"dashed"},{klass:"",image:"#iconpath/textbox/thum_line04.gif?v=2",data:"none"}],options:h.__CONFIG_COMMON.textbox.options,thumbs:h.__CONFIG_COMMON.thumbs});
l.addMsg({"@richtextbox.add":"\ub354\ud558\uae30","@richtextbox.sub":"\ube7c\uae30","@richtextbox.alert":"1 \uc774\uc0c1 20 \uc774\ud558\uc758 \uc22b\uc790\ub9cc \uc785\ub825 \uac00\ub2a5\ud569\ub2c8\ub2e4.","@richtextbox.bg.color":"\ubc30\uacbd\uc0c9","@richtextbox.border.color":"\uc120 \uc0c9","@richtextbox.border.style":"\uc120 \uc2a4\ud0c0\uc77c","@richtextbox.border.width":"\uc120 \uad75\uae30"});h.Tool.RichTextBox=h.Class.create({$const:{__Identity:"richtextbox"},$extend:h.Tool,oninitialized:function(){var B=this.canvas;var i=this.toolbar;var e=this;var A=this.handler=function(){var D=e.menu;var C={borderStyle:D.elPreview.style.borderStyle,borderWidth:D.elPreview.style.borderWidth,borderColor:D.elPreview.style.borderColor,backgroundColor:D.elPreview.style.backgroundColor,padding:D.padding};B.execute(function(F){var G=F.blocks(function(){return"%wrapper,p,dd,dt,h1,h2,h3,h4,h5,h6,div,caption"});var E=F.wrap(G,"div",{className:"txc-textbox",style:C});i.fireJobs("cmd.textbox.added",E)
})};this.weave.bind(this)(new h.Button(this.buttonCfg),new h.Menu.RichTextbox(this.menuCfg),A)}});h.MarkupTemplate.add("richtextbox.colorpallete",['<dd class="#{wrapClass}">','	<div class="tx-color-box">','		<a href="javascript:;" class="tx-color-bg-thumb" style="background-color:#{color}"></a>',"	</div>",'	<a href="javascript:;" class="tx-color-arrow-down"></a>','	<div class="tx-colorpallete" unselectable="on" style="display:none;z-index:15000;"></div>',"</dd>"].join(""));h.Menu.RichTextbox=h.Class.create({$extend:h.Menu,ongenerated:function(S){var G=this;var C={};S.options.each(function(V){C[V.data]=V.style});this.borderWidth=S.borderWidth||1;this.borderColor=S.borderColor||"#cbcbcb";this.bgColor=S.bgColor||"#ffffff";this.padding=S.padding;var R=this.generateBorderStyle.bind(this);var J=this.generateBorderWidth.bind(this);var M=this.generateBorderColor.bind(this);var F=this.generateBgColor.bind(this);var E=this.elMenu;var Q=z.collect(E,"div.tx-menu-header");var A=z.collect(Q,"div.tx-menu-preview-area");
this.elPreview=z.collect(A,"div.tx-menu-preview");var U=this.elSwitch=z.collect(Q,"div.tx-menu-switch");var N=z.collect(U,"div.tx-menu-simple");var P=z.collect(U,"div.tx-menu-advanced");var i=z.collect(E,"div.tx-menu-inner");var H=z.collect(E,"div.tx-menu-footer");var K=z.collect(H,"img.tx-menu-confirm");var e=z.collect(H,"img.tx-menu-cancel");(function L(){var X=G.simplePalette=tx.div({className:"tx-menu-list"});i.appendChild(X);var V=S.rows;var W=S.cols;X.innerHTML=h.HtmlCreator.createTableMarkup(V,W,S.options);x.observe(X,"click",function(Y){var Z=x.element(Y);m.fire(Z,{span:function(){var ab;if(Z.firstChild&&Z.firstChild.nodeType==1&&Z.firstChild.tagName.toLowerCase()=="img"){ab=Z.firstChild.title}else{ab=Z.innerText}var aa=C[ab];D(aa)}});x.stop(Y)})})();(function B(){var V=G.advancedPalette=tx.div({className:"tx-advanced-list"});i.appendChild(V);V.appendChild(tx.dl({style:{height:"24px"}},tx.dt(TXMSG("@richtextbox.border.style")),R()));V.appendChild(tx.dl(tx.dt(TXMSG("@richtextbox.border.width")),J()));
V.appendChild(tx.dl(tx.dt(TXMSG("@richtextbox.border.color")),M()));V.appendChild(tx.dl(tx.dt(TXMSG("@richtextbox.bg.color")),F()))})();var O=function(){G.borderWidthInput.value=parseInt(G.elPreview.style.borderWidth);G.borderColorInput.style.backgroundColor=G.elPreview.style.borderTopColor;G.bgColorInput.style.backgroundColor=G.elPreview.style.backgroundColor};var D=function(V){G.elPreview.style.border=V.border;G.elPreview.style.backgroundColor=V.backgroundColor};var T=function(V){if(V=="simple"){x.addClassName(N,"tx-selected");x.show(G.simplePalette);x.removeClassName(P,"tx-selected");x.hide(G.advancedPalette)}else{if(V=="advanced"){x.removeClassName(N,"tx-selected");x.hide(G.simplePalette);x.addClassName(P,"tx-selected");x.show(G.advancedPalette);O()}}};(function I(){x.observe(N,"click",T.bind(G,"simple"));x.observe(P,"click",T.bind(G,"advanced"));x.observe(K,"click",G.onSelect.bind(G));x.observe(e,"click",function(){G.onCancel()})})();T("simple");D(C["txc-textbox13"])},generateBorderStyle:function(){var i=this;
var e=tx.dd({className:"tx-border-area"});x.observe(e,"click",function(A){var B=x.element(A);m.fire(B,{img:function(C){var D=C.getAttribute("data");i.elPreview.style.borderStyle=D;if(D=="double"&&i.borderWidthInput.value.toNumber()<3){i.elPreview.style.borderWidth="3px";i.borderWidthInput.value="3"}}});x.stop(A)});e.innerHTML=h.HtmlCreator.createTableMarkup(1,4,this.config.styles);return e},generateBorderWidth:function(){var D=this;var i=tx.dd({className:"tx-border-area"});var C=this.borderWidthInput=tx.input({type:"text",value:this.borderWidth});i.appendChild(C);var A=function(E){if(E>20){alert(TXMSG("@richtextbox.alert"));C.value=20}else{if(E<1){alert(TXMSG("@richtextbox.alert"));C.value=1}else{D.elPreview.style.borderWidth=E+"px";C.value=E}}};x.observe(C,"blur",function(E){A(C.value.toNumber(),E)});x.observe(C,"keydown",function(E){if(E.keyCode==x.KEY_RETURN){x.stop(E)}});var B=tx.a({href:"javascript:;",className:"btn_add"},TXMSG("@richtextbox.add"));i.appendChild(B);x.observe(B,"click",function(E){A(C.value.toNumber()+1);
x.stop(E)});var e=tx.a({href:"javascript:;",className:"btn_sub"},TXMSG("@richtextbox.sub"));i.appendChild(e);x.observe(e,"click",function(E){A(C.value.toNumber()-1);x.stop(E)});return i},generateBorderColor:function(){var F=this;var B=h.MarkupTemplate.get("richtextbox.colorpallete").evaluateAsDom({color:this.borderColor,wrapClass:"tx-color-wrap"});var C=z.collect(B,"div.tx-colorpallete");var e=function(G){F.elPreview.style.borderColor=E.style.backgroundColor=F.borderColor=G};var A=k;var D=function(){if(A==k){A=F.createColorPallete(C,e);A.show()}else{if(!x.visible(C)){A.show()}else{A.hide()}}};this.externalBorderColorToggler=function(){if(x.visible(C)){A.hide()}};var E=this.borderColorInput=z.collect(B,".tx-color-box a");x.observe(E,"click",function(G){F.externalBgColorToggler();D();x.stop(G)});var i=z.collect(B,"a.tx-color-arrow-down");x.observe(i,"click",function(G){F.externalBgColorToggler();D();x.stop(G)});return B},createColorPallete:function(e,A){var i=new h.Menu.ColorPallete({el:e,thumbs:this.config.thumbs});
i.setCommand(A);return i},generateBgColor:function(){var F=this;var A=h.MarkupTemplate.get("richtextbox.colorpallete").evaluateAsDom({color:this.bgColor});var B=z.collect(A,"div.tx-colorpallete");var D=function(G){F.elPreview.style.backgroundColor=E.style.backgroundColor=F.bgColor=G};var i=k;var C=function(){if(i==k){i=F.createColorPallete(B,D);i.show()}else{if(!x.visible(B)){i.show()}else{i.hide()}}};this.externalBgColorToggler=function(){if(x.visible(B)){i.hide()}};var E=this.bgColorInput=z.collect(A,".tx-color-box a");x.observe(E,"click",function(G){F.externalBorderColorToggler();C();x.stop(G)});var e=z.collect(A,"a.tx-color-arrow-down");x.observe(e,"click",function(G){F.externalBorderColorToggler();C();x.stop(G)});return A}});t.addTool("quote",{sync:d,status:y,rows:2,cols:3,options:[{type:"image",data:"tx-quote1",image:"#iconpath/quote/citation01.gif?v=2"},{type:"image",data:"tx-quote2",image:"#iconpath/quote/citation02.gif?v=2"},{type:"image",data:"tx-quote3",image:"#iconpath/quote/citation03.gif?v=2"},{type:"image",data:"tx-quote4",image:"#iconpath/quote/citation04.gif?v=2"},{type:"image",data:"tx-quote5",image:"#iconpath/quote/citation05.gif?v=2"},{type:"cancel",data:"tx-quote6",image:"#iconpath/quote/citation06.gif?v=2"}]},function(e){var i=t.getTool("quote",e);
i.options.each(function(A){A.image=t.getIconPath(A.image,"quote")})});h.Tool.Quote=h.Class.create({$const:{__Identity:"quote"},$extend:h.Tool,oninitialized:function(i){var e=this;var C=this.canvas;var D={};i.options.each(function(E){D[E.data]={type:E.type}});var A=function(G){if(!D[G]){return}var F=D[G].type;var E="blockquote";var H={className:G};if(C.isWYSIWYG()){C.execute(function(J){var I=J.findNode(E);if(I){if(F=="cancel"){J.unwrap(I)}else{J.apply(I,H)}}else{if(F!="cancel"){var K=J.blocks(function(){return"%wrapper,%paragraph"});K=K.findAll(function(L){if(z.kindOf(L,"%innergroup")){J.wrap(z.children(L),E,H);return d}else{return y}});J.wrap(K,E,H)}}})}else{C.execute(function(I){I.insertTag("<blockquote>","</blockquote>")})}};this.weave.bind(this)(new h.Button(this.buttonCfg),new h.Menu.List(this.menuCfg),A);var B=function(E){e.button.onMouseDown(E)};this.bindKeyboard({ctrlKey:y,keyCode:81},B)}});t.addTool("table",{borderStyle:"1px solid #ccc",sync:d,status:y},function(i){var e=t.get("canvas",i).styles.backgroundColor;
if(e!="transparent"){t.getTool("table",i).bgcolor=e}});l.addMsg({"@table.alert":"1 \uc774\uc0c1 99 \uc774\ud558\uc758 \uc22b\uc790\ub9cc \uc785\ub825 \uac00\ub2a5\ud569\ub2c8\ub2e4."});h.Tool.Table=h.Class.create({$const:{__Identity:"table",__DEFAULT_TABLE_PROPERTY:{cellSpacing:0,cellPadding:1,border:0,style:{border:"none",borderCollapse:"collapse"}},__DEFAULT_TABLE_PROPERTY_STR:'cellspacing="0" cellpadding="0" border="0"',__DEFAULT_TABLE_STYLE:"border:none;border-collapse:collapse;",__DEFAULT_TABLE_CLASS:"txc-table"},$extend:h.Tool,oninitialized:function(i){var e=this;this.tableSize={row:0,col:0};var B=this.canvas;var A=this.handler=function(D){var C=e.makeEmptyTable(D.row,D.col);B.execute(function(F){var E=F.pasteContent(C,y);F.bookmarkInto(E);if(e.toolbar.tools.advanced){e.toolbar.tools.advanced.forceOpen()}})};this.weave.bind(this)(new h.Button(this.buttonCfg),new h.Menu.Table(this.menuCfg),A)},makeEmptyTable:function(I,e){var H=[];var F=this._createDefaultTableWidth();H.push('<table class="'+h.Tool.Table.__DEFAULT_TABLE_CLASS+'" width="'+F+'" ');
H.push(h.Tool.Table.__DEFAULT_TABLE_PROPERTY_STR);H.push(' style="');H.push(h.Tool.Table.__DEFAULT_TABLE_STYLE);H.push(";font-family:");H.push(this.editor.canvas.getStyle("fontFamily"));H.push(";font-size:");H.push(this.editor.canvas.getStyle("fontSize"));H.push('"><tbody>');var G=this.config.borderStyle;var E=parseInt(F/e);var A=["border-bottom:",G,";border-right:",G,";"].join("");for(var D=0;D<I;D++){H.push("<tr>");for(var C=0;C<e;C++){var B=[A];H.push('<td style="width:');H.push(E);H.push(";");H.push("height:",24,";");H.push(A);if(D==0){H.push("border-top:",G,";")}if(C==0){H.push("border-left:",G,";")}H.push(';">&nbsp;</td>\n')}H.push("</tr>\n")}H.push("</tbody></table>");return H.join("")},_createDefaultTableWidth:function(){var e=this.config.tableWidth;if(!e){var i=this.canvas.getSizeConfig().contentPadding||8;e=(this.canvas.getSizeConfig().contentWidth||600)-i*2-20}return e}});h.Tool.Table.TemplateWizard=h.Class.create({initialize:function(){this.templateList=(typeof getTableTemplateList=="function")?getTableTemplateList():[{klass:"ex1",common:{backgroundColor:"transparent",borderTop:"none",borderLeft:"none",borderRight:"1px solid #d9d9d9",borderBottom:"1px solid #d9d9d9"},firstRow:{borderTop:"1px solid #000"},firstCol:{borderLeft:"1px solid #000"},lastCol:{borderRight:"1px solid #000"},lastRow:{borderBottom:"1px solid #000"},evenRow:{},oddRow:{}}];
this.currentTemplate=k},applyStyle:function(D,C){if(isNaN(C)){return}var B=new h.Tool.Table.TableCellMatrixer(D);var E=B.getTdMatrix();this.currentTemplate=this.templateList[C];for(var A=0;A<E.length;A++){for(var e=0;e<E[A].length;e++){this.setCellStyle(E[A][e],{isEvenRow:(A%2)==1,isFirstRow:A==0,isLastRow:A==E.length-1,isFirstCol:e==0,isLastCol:(e==E[A].length-1)})}}},setCellStyle:function(i,e){var A=this.currentTemplate;var B=Object.extend({},A.common);Object.extend(B,(e.isEvenRow)?A.evenRow:A.oddRow);Object.extend(B,(e.isFirstRow)?A.firstRow:(e.isLastRow)?A.lastRow:{});Object.extend(B,(e.isLastCol)?A.lastCol:{});Object.extend(B,(e.isFirstCol)?A.firstCol:{});txlib.setStyle(i,B)},getTemplateList:function(){return this.templateList}});h.Tool.Table.TableCellMatrixer=h.Class.create({initialize:function(C){this.rowSize=this.initRowSize(C);this.colSize=this.initColSize(C);var B=z.first(C,"tbody")||C;this.tdMatrix=this.createTdMatrix(B);for(var A=0;A<this.tdMatrix.length;A++){for(var e=0;e<this.tdMatrix[A].length;
e++){var D=this.tdMatrix[A][e];if(D.cols>1){D.cols--;this.tdMatrix[A].splice(e+1,0,D)}}}for(var A=0;A<this.tdMatrix.length;A++){for(var e=0;e<this.tdMatrix[A].length;e++){var D=this.tdMatrix[A][e];if(D.rows>1){D.rows--;this.tdMatrix[A+1].splice(e,0,D)}}}},createTdMatrix:function(A){var C=[];var D=z.children(A,"tr");for(var B=0,e=D.length;B<e;B++){C.push(this.createTdArray(D[B]))}return C},createTdArray:function(D){var C=[];var B=z.children(D,"td");for(var A=0,e=B.length;A<e;A++){C.push(this.decorateSingleTd(B[A]))}return C},decorateSingleTd:function(A){var i=parseInt(A.getAttribute("colSpan")||1);var e=parseInt(A.getAttribute("rowSpan")||1);A.cols=i;A.rows=(e-1)*i+1;return A},initRowSize:function(e){return e.rows.length},initColSize:function(i){var e=0;var A=z.children(z.collect(i,"tr"),"td");A.each(function(B){e+=parseInt(B.getAttribute("colSpan")||1)});return e},getRowSize:function(){return this.rowSize},getColSize:function(){return this.colSize},getTdMatrix:function(){return this.tdMatrix
}});l.addMsg({"@table.title.insert":"\ud45c\uc0bd\uc785 &nbsp;","@table.title.setDirectly":"\ud45c \uc9c1\uc811\uc124\uc815","@table.title.row":"\uc5f4 \uac1c\uc218","@table.title.col":"\ud589 \uac1c\uc218"});h.MarkupTemplate.add("menu.table.direct",["<div>@table.title.setDirectly</div>",'<div class="tx-table-input-area">','<div class="tx-field tx-col-field">@table.title.row<input type="text" value="1"><a class="tx-btn tx-btn-add" href="javascript:;">@table.title.row+</a><a class="tx-btn tx-btn-sub" href="javascript:;">@table.title.row-</a></div>','<div class="tx-field tx-row-field">@table.title.col<input type="text" value="1"><a class="tx-btn tx-btn-add" href="javascript:;">@table.title.col+</a><a class="tx-btn tx-btn-sub" href="javascript:;">@table.title.col-</a></div>',"</div>"].join(""));h.Menu.Table=h.Class.create({$const:{MAX_ROW:99,MAX_COL:99},$extend:h.Menu,ongenerated:function(){this.rowSize=1;this.colSize=1;this.elInnerPreview=z.collect(this.elMenu,"div.tx-menu-inner .tx-menu-preview");
this.dynamicSizer=this.generateDynamicSizer(this.elInnerPreview);this.elInnerRowCol=z.collect(this.elMenu,"div.tx-menu-inner .tx-menu-rowcol");this.generateTextSizer(this.elInnerRowCol);this.elButtonArea=z.collect(this.elMenu,"div.tx-menu-inner .tx-menu-enter");this.generateButtonArea(this.elButtonArea)},onregenerated:function(){this.showDynamicSizer()},showDynamicSizer:function(){this.dynamicSizer.clear();x.show(this.elInnerPreview);x.hide(this.elInnerRowCol);x.hide(this.elButtonArea)},showTextSizer:function(){x.hide(this.elInnerPreview);x.show(this.elInnerRowCol);x.show(this.elButtonArea)},generateDynamicSizer:function(B){var i=this;var E=tx.span();var C=tx.div({className:"tx-dynamic-sizer-display"},TXMSG("@table.title.insert"),E);B.appendChild(C);var D=new h.DynamicSizer({el:B,clickHandler:this.onSelect.bind(this),moveHandler:function(G,F){E.innerHTML=G+"x"+F}});var e=tx.a({href:"javascript:;"},TXMSG("@table.title.setDirectly"));x.observe(e,"click",function(F){i.showTextSizer();x.stop(F)
});var A=tx.div({className:"tx-more-button"});A.appendChild(e);B.appendChild(A);return D},generateTextSizer:function(i){var e=this;h.MarkupTemplate.get("menu.table.direct").evaluateToDom({},i);var B={calculate:function(F,D,E){F=parseInt(F);if(F+E>D||F+E<1){alert(TXMSG("@table.alert"));return F}else{return F+E}},getValidValue:function(F,E,D){if(F<0||F>D){alert(TXMSG("@table.alert"));return E}else{return F}}};var A=z.collect(i,"div.tx-col-field input");x.observe(A,"blur",function(){A.value=e.colSize=B.getValidValue(A.value,e.colSize,h.Menu.Table.MAX_COL)});x.observe(z.collect(i,"div.tx-col-field a.tx-btn-add"),"click",function(){A.value=e.colSize=B.calculate(e.colSize,h.Menu.Table.MAX_COL,1);return d});x.observe(z.collect(i,"div.tx-col-field a.tx-btn-sub"),"click",function(){A.value=e.colSize=B.calculate(e.colSize,h.Menu.Table.MAX_COL,-1);return d});var C=z.collect(i,"div.tx-row-field input");x.observe(C,"blur",function(){C.value=e.rowSize=B.getValidValue(C.value,e.rowSize,h.Menu.Table.MAX_ROW)
});x.observe(z.collect(i,"div.tx-row-field a.tx-btn-add"),"click",function(){C.value=e.rowSize=B.calculate(e.rowSize,h.Menu.Table.MAX_ROW,1);return d});x.observe(z.collect(i,"div.tx-row-field a.tx-btn-sub"),"click",function(){C.value=e.rowSize=B.calculate(e.rowSize,h.Menu.Table.MAX_ROW,-1);return d})},generateButtonArea:function(A){var e=this;var B=tx.div();var C=tx.a({href:"javascript:;",className:"tx-btn-confirm"},"\ud655\uc778");var i=tx.a({href:"javascript:;",className:"tx-btn-cancel"},"\ucde8\uc18c");x.observe(C,"click",function(D){e.onSelect(D,{row:e.rowSize,col:e.colSize})});x.observe(i,"click",function(){this.onCancel();return d}.bindAsEventListener(this));B.appendChild(C);B.appendChild(i);A.appendChild(B)}});(function(){l.addMsg({"@emoticon.subtitle.person":"\uc0ac\ub78c","@emoticon.subtitle.animal":"\ub3d9\uc2dd\ubb3c","@emoticon.subtitle.thing":"\uc0ac\ubb3c","@emoticon.subtitle.etc":"\uae30\ud0c0"});var e=function(C,B){var D=[];for(var A=1;A<=B;A++){D.push("#decopath/emoticon/"+C+"_"+i(A)+".gif?v=2")
}return D};var i=function(A){return(A<10)?"0"+A:String(A)};t.addTool("emoticon",{sync:d,status:y,rows:5,cols:7,matrices:[{title:TXMSG("@emoticon.subtitle.person"),klass:"tx-menu-matrix-per",options:e("per",29)},{title:TXMSG("@emoticon.subtitle.animal"),klass:"tx-menu-matrix-ani",options:e("ani",28)},{title:TXMSG("@emoticon.subtitle.thing"),klass:"tx-menu-matrix-things",options:e("things",35),defaultshow:y},{title:TXMSG("@emoticon.subtitle.etc"),klass:"tx-menu-matrix-etc",options:e("etc",29)}],asyncUrl:"trex/tool/async/emoticon.js"},function(A){var B=t.getTool("emoticon",A);B.matrices.each(function(D){for(var E=0,C=D.options.length;E<C;E++){D.options[E]=t.getDecoPath(D.options[E])}})});h.Tool.Emoticon=h.Class.create({$const:{__Identity:"emoticon"},$extend:h.AsyncTool,oninitialized:function(){this.weave.bind(this)(new h.Button(this.buttonCfg),k,this.onLoadModule)}})})();t.addTool("redo",{sync:d,status:d});h.Tool.ReDo=h.Class.create({$const:{__Identity:"redo"},$extend:h.Tool,oninitialized:function(){var i=this.canvas;
var e=function(){i.getProcessor().blur();i.focus();setTimeout(function(){i.fireJobs("canvas.panel.redo")},0)};this.weave.bind(this)(new h.Button(this.buttonCfg),k,e);this.bindKeyboard({ctrlKey:y,keyCode:89},function(){i.fireJobs("canvas.panel.redo");i.triggerQueryStatus()})}});t.addTool("undo",{sync:d,status:d});h.Tool.UnDo=h.Class.create({$const:{__Identity:"undo"},$extend:h.Tool,oninitialized:function(){var i=this.canvas;var e=function(){i.getProcessor().blur();i.focus();setTimeout(function(){i.fireJobs("canvas.panel.undo")},20)};this.weave.bind(this)(new h.Button(this.buttonCfg),k,e);this.bindKeyboard({ctrlKey:y,keyCode:90},function(){i.fireJobs("canvas.panel.undo");i.triggerQueryStatus()})}});t.addTool("horizontalrule",{wysiwygonly:y,sync:d,status:y,top:k,left:k,options:[{data:"tx-hr-border-1",image:"#iconpath/horizontalrule/line01.gif?v=2",html:'<hr style="border: black 0 none; border-top: black 1px solid; height: 1px"/>'},{data:"tx-hr-border-2",image:"#iconpath/horizontalrule/line02.gif?v=2",html:'<hr style="border: black 0 none; border-top: black 1px solid; border-bottom: black 3px solid; height: 7px"/>'},{data:"tx-hr-border-3",image:"#iconpath/horizontalrule/line04.gif?v=2",html:'<hr style="border: black 0 none; border-top: black 1px dotted; height: 1px"/>'},{data:"tx-hr-image-1",image:"#iconpath/horizontalrule/line03.gif?v=2",html:'<div style="background: url(#decopath/horizontalrule/line03.gif?v=2) repeat-x scroll left;  width: 99%; height: 15px"><hr style="border: black 0 none; left: -9999px; position: relative; top: -9999px"></div>'},{data:"tx-hr-image-2",image:"#iconpath/horizontalrule/line05.gif?v=2",html:'<div style="background: url(#decopath/horizontalrule/line05.gif?v=2) repeat-x scroll left;  width: 99%; height: 15px"><hr style="border: black 0 none; left: -9999px; position: relative; top: -9999px"></div>'},{data:"tx-hr-image-3",image:"#iconpath/horizontalrule/line06.gif?v=2",html:'<div style="background: url(#decopath/horizontalrule/line06.gif?v=2) repeat-x scroll left;  width: 99%; height: 15px"><hr style="border: black 0 none; left: -9999px; position: relative; top: -9999px"></div>'},{data:"tx-hr-image-4",image:"#iconpath/horizontalrule/line07.gif?v=2",html:'<div style="background: url(#decopath/horizontalrule/line08.gif?v=2) repeat-x scroll left;  width: 99%; height: 15px"><hr style="border: black 0 none; left: -9999px; position: relative; top: -9999px"></div>'}]},function(e){var i=t.getTool("horizontalrule",e);
i.options.each(function(A){A.image=t.getIconPath(A.image);if(A.html){A.html=t.getDecoPath(A.html)}})});h.Tool.HorizontalRule=h.Class.create({$const:{__Identity:"horizontalrule"},$extend:h.Tool,oninitialized:function(e){var A=this.canvas;var B={};e.options.each(function(C){B[C.data]={html:C.html}});var i=function(D){if(!B[D]){return}var C=B[D];if(A.isWYSIWYG()){A.execute(function(E){E.pasteContent(C.html,y)})}else{A.execute(function(E){E.insertTag("",C.html)})}};this.weave.bind(this)(new h.Button(this.buttonCfg),new h.Menu.List(this.menuCfg),i)}});(function(){l.addMsg({"@specialchar.subtitle1":"\uc77c\ubc18\uae30\ud638","@specialchar.subtitle2":"\uc218\ud559\ubd80\ud638, \ud1b5\ud654\ub2e8\uc704","@specialchar.subtitle3":"\uc6d0 \uae30\ud638, \uad04\ud638","@specialchar.subtitle4":"\uc77c\ubcf8\uc5b4","@specialchar.subtitle5":"\ub85c\ub9c8\uc790, \uadf8\ub9ac\uc2a4"});t.addTool("specialchar",{sync:d,status:y,rows:9,cols:20,top:k,left:k,matrices:[{title:TXMSG("@specialchar.subtitle1"),options:["\uff03","\uff06","\uff0a","\uff20","\xa7","\u203b","\u2606","\u2605","\u25cb","\u25cf","\u25ce","\u25c7","\u25c6","\u25a1","\u25a0","\u25b3","\u25b2","\u25bd","\u25bc","\u2192","\u2190","\u2191","\u2193","\u2194","\u3013","\u25c1","\u25c0","\u25b7","\u25b6","\u2664","\u2660","\u2661","\u2665","\u2667","\u2663","\u2299","\u25c8","\u25a3","\u25d0","\u25d1","\u2592","\u25a4","\u25a5","\u25a8","\u25a7","\u25a6","\u25a9","\u2668","\u260f","\u260e","\u261c","\u261e","\xb6","\u2020","\u2021","\u2195","\u2197","\u2199","\u2196","\u2198","\u266d","\u2669","\u266a","\u266c","\u327f","\u321c","\u2116","\u33c7","\u2122","\u33c2","\u33d8","\u2121","\xae","\xaa","\xba","\uff02","\uff08","\uff09","\uff3b","\uff3d","\uff5b","\uff5d","\u2018","\u2019","\u201c","\u201d","\u3014","\u3015","\u3008","\u3009","\u300a","\u300b","\u300c","\u300d","\u300e","\u300f","\u3010","\u3011","\uff01","\uff07","\uff0c","\uff0e","\uff0f","\uff1a","\uff1b","\uff1f","\uff3e","\uff3f","\uff40","\uff5c","\uffe3","\u3001","\u3002","\xb7","\u2025","\u2026","\xa8","\u3003","\u2015","\u2225","\uff3c","\u223c","\xb4","\uff5e","\u02c7","\u02d8","\u02dd","\u02da","\u02d9","\xb8","\u02db","\xa1","\xbf","\u02d0"]},{title:TXMSG("@specialchar.subtitle2"),options:["\uff0b","\uff0d","\uff1c","\uff1d","\uff1e","\xb1","\xd7","\xf7","\u2260","\u2264","\u2265","\u221e","\u2234","\u2642","\u2640","\u2220","\u22a5","\u2312","\u2202","\u2207","\u2261","\u2252","\u226a","\u226b","\u221a","\u223d","\u221d","\u2235","\u222b","\u222c","\u2208","\u220b","\u2286","\u2287","\u2282","\u2283","\u222a","\u2229","\u2227","\u2228","\uffe2","\u21d2","\u21d4","\u2200","\u2203","\u222e","\u2211","\u220f","\uff04","\uff05","\uffe6","\uff26","\u2032","\u2033","\u2103","\u212b","\uffe0","\uffe1","\uffe5","\xa4","\u2109","\u2030","?","\u3395","\u3396","\u3397","\u2113","\u3398","\u33c4","\u33a3","\u33a4","\u33a5","\u33a5","\u33a6","\u3399","\u339a","\u339b","\u339c","\u339d","\u339e","\u339f","\u33a0","\u33a1","\u33a2","\u33ca","\u338d","\u338e","\u338f","\u33cf","\u3388","\u3389","\u33c8","\u33a7","\u33a8","\u33b0","\u33b1","\u33b2","\u33b3","\u33b4","\u33b5","\u33b6","\u33b7","\u33b8","\u33b9","\u3380","\u3381","\u3382","\u3383","\u3384","\u33ba","\u33bb","\u33bc","\u33bd","\u33be","\u33bf","\u3390","\u3391","\u3392","\u3393","\u3394","\u2126","\u33c0","\u33c1","\u338a","\u338b","\u338c","\u33d6","\u33c5","\u33ad","\u33ae","\u33af","\u33db","\u33a9","\u33aa","\u33ab","\u33ac","\u33dd","\u33d0","\u33d3","\u33c3","\u33c9","\u33dc","\u33c6"]},{title:TXMSG("@specialchar.subtitle3"),options:["\u3260","\u3261","\u3262","\u3263","\u3264","\u3265","\u3266","\u3267","\u3268","\u3269","\u326a","\u326b","\u326c","\u326d","\u326e","\u326f","\u3270","\u3271","\u3272","\u3273","\u3274","\u3275","\u3276","\u3277","\u3278","\u3279","\u327a","\u327b","\u3200","\u3201","\u3202","\u3203","\u3204","\u3205","\u3206","\u3207","\u3208","\u3209","\u320a","\u320b","\u320c","\u320d","\u320e","\u320f","\u3210","\u3211","\u3212","\u3213","\u3214","\u3215","\u3216","\u3217","\u3218","\u3219","\u321a","\u321b","\u24d0","\u24d1","\u24d2","\u24d3","\u24d4","\u24d5","\u24d6","\u24d7","\u24d8","\u24d9","\u24da","\u24db","\u24dc","\u24dd","\u24de","\u24df","\u24e0","\u24e1","\u24e2","\u24e3","\u24e4","\u24e5","\u24e6","\u24e7","\u24e8","\u24e9","\u2460","\u2461","\u2462","\u2463","\u2464","\u2465","\u2466","\u2467","\u2468","\u2469","\u246a","\u246b","\u246c","\u246d","\u246e","\u249c","\u249d","\u249e","\u249f","\u24a0","\u24a1","\u24a2","\u24a3","\u24a4","\u24a5","\u24a6","\u24a7","\u24a8","\u24a9","\u24aa","\u24ab","\u24ac","\u24ad","\u24ae","\u24af","\u24b0","\u24b1","\u24b2","\u24b3","\u24b4","\u24b5","\u2474","\u2475","\u2476","\u2477","\u2478","\u2479","\u247a","\u247b","\u247c","\u247d","\u247e","\u247f","\u2480","\u2481","\u2482"]},{title:TXMSG("@specialchar.subtitle4"),options:["\u3041","\u3042","\u3043","\u3044","\u3045","\u3046","\u3047","\u3048","\u3049","\u304a","\u304b","\u304c","\u304d","\u304e","\u304f","\u3050","\u3051","\u3049","\u3053","\u3054","\u3055","\u3056","\u3057","\u3058","\u3059","\u305a","\u305b","\u305c","\u305d","\u305e","\u305f","\u3060","\u3061","\u3062","\u3063","\u3064","\u3065","\u3066","\u3067","\u3068","\u3069","\u306a","\u306b","\u306c","\u306d","\u306e","\u306f","\u3070","\u3071","\u3072","\u3073","\u3074","\u3075","\u3076","\u3077","\u3078","\u3079","\u307a","\u307b","\u307c","\u307d","\u307e","\u307f","\u3080","\u3081","\u3082","\u3083","\u3084","\u3085","\u3086","\u3087","\u3088","\u3089","\u308a","\u308b","\u308c","\u308d","\u308e","\u308f","\u3090","\u3091","\u3092","\u3093","\u30a1","\u30a2","\u30a3","\u30a4","\u30a5","\u30a6","\u30a7","\u30a8","\u30a9","\u30aa","\u30ab","\u30ac","\u30ad","\u30ae","\u30af","\u30b0","\u30b1","\u30b2","\u30b3","\u30b4","\u30b5","\u30b6","\u30b7","\u30b8","\u30b9","\u30ba","\u30bb","\u30bc","\u30bd","\u30be","\u30bf","\u30c0","\u30c1","\u30c2","\u30c3","\u30c4","\u30c5","\u30c6","\u30c7","\u30c8","\u30c9","\u30ca","\u30cb","\u30cc","\u30cd","\u30ce","\u30cf","\u30d0","\u30d1","\u30d2","\u30d3","\u30d4","\u30d5","\u30d6","\u30d7","\u30d8","\u30d9","\u30da","\u30db","\u30dc","\u30dd","\u30de","\u30df","\u30e0","\u30e1","\u30e2","\u30e3","\u30e4","\u30e5","\u30e6","\u30e7","\u30e8","\u30e9","\u30ea","\u30eb","\u30ec","\u30ed","\u30ee","\u30ef","\u30f0","\u30f1","\u30f2","\u30f3","\u30f4","\u30f5","\u30f6"]},{title:TXMSG("@specialchar.subtitle5"),options:["\uff10","\uff11","\uff12","\uff13","\uff14","\uff15","\uff16","\uff17","\uff18","\uff19","\u2170","\u2171","\u2172","\u2173","\u2174","\u2175","\u2176","\u2177","\u2178","\u2179","\u2160","\u2161","\u2162","\u2163","\u2164","\u2165","\u2166","\u2167","\u2168","\u2169","\u0391","\u0392","\u0393","\u0394","\u0395","\u0396","\u0397","\u0398","\u0399","\u039a","\u039b","\u039c","\u039d","\u039e","\u039f","\u03a0","\u03a1","\u03a3","\u03a4","\u03a5","\u03a6","\u03a7","\u03a8","\u03a9","\u03b1","\u03b2","\u03b3","\u03b4","\u03b5","\u03b6","\u03b7","\u03b8","\u03b9\u03ba","\u03bb","\u03bc","\u03bd","\u03be","\u03bf","\u03c0","\u03c1","\u03c3","\u03c4","\u03c5","\u03c6","\u03c7","\u03c8","\u03c9"]}],asyncUrl:"trex/tool/async/specialchar.js"});
h.Tool.SpecialChar=h.Class.create({$const:{__Identity:"specialchar"},$extend:h.AsyncTool,oninitialized:function(e){this.config=e;this.weave.bind(this)(new h.Button(this.buttonCfg),k,this.onLoadModule)}})})();t.addTool("dictionary",{url:"http://engdic.daum.net/dicen/small_view_top.do",sync:d,status:d});h.Tool.Dictionary=h.Class.create({$const:{__Identity:"dictionary"},$extend:h.Tool,oninitialized:function(e){var A=this.canvas;var i=function(){var D=A.query(function(E){return encodeURI(E.getText())});var B=(D.length>0)?"http://engdic.daum.net/dicen/small_search.do":e.url;var C=j.open(B+"?q="+D,"dicWin","width=410,height=550,scrollbars=yes");C.focus()};this.weave.bind(this)(new h.Button(this.buttonCfg),k,i)}});(function(){t.addTool("background",{wysiwygonly:y,sync:d,status:y,thumbs:h.__CONFIG_COMMON.thumbs});var e;h.Tool.Background=h.Class.create({$const:{__Identity:"background"},$extend:h.Tool,oninitialized:function(){this.weave(new h.Button(this.buttonCfg),new h.Menu.ColorPallete(this.menuCfg),this.handler)
},handler:function(A){var i=this;var B=i.canvas;B.fireJobs("canvas.apply.backgroundcolor",A);B.history.saveHistory({backgroundColor:e,backgroundImage:B.getStyle("backgroundImage")},{backgroundColor:A,backgroundImage:B.getStyle("backgroundImage")},function(C){i._restoreColor(C)});B.addStyle({backgroundColor:A,backgroundImage:""});e=A;B.getConfig().hasUserBgcolor=y},_restoreColor:function(A){var i=this.canvas;i.addStyle({backgroundColor:A.backgroundColor});if(A.backgroundImage){i.addStyle({backgroundImage:A.backgroundImage})}e=A.backgroundColor}});h.install("canvas.getBgColor & canvas.setBgColor & editor.getContentWithBg",function(C,D,E,B,A){e=A.canvas.styles.backgroundColor;B.getBgColor=function(){var F=e||B.getPanel("html").getStyle("backgroundColor");if(F){return h.Color.getHexColor(F)}else{return""}};B.setBgColor=function(F){B.getPanel("html").addStyle({backgroundColor:F||"transparent"})};C.getContentWithBg=function(){var F=B.getBgColor().toLowerCase();if(F=="transparent"){return C.getContent()
}else{return['<table class="txc-wrapper" border="0" cellspacing="0" cellpadding="0"><tr>','<td bgcolor="',F,'">',C.getContent(),"</td>","</tr></table>"].join("")}};var i=B.initContent.bind(B);B.initContent=function(G){if(G.search(/<table[^>]*txc-wrapper[^>]*>/i)>-1){var F;G=G.replace(/<table[^>]*txc-wrapper[^>]*><tr><td([^>]*)>([\s\S]*?)<\/td><\/tr><\/table>/i,function(J,H,I){F=H.replace(/\sbgcolor="([#\w]*)"/,"$1");return I});B.setBgColor(F)}i(G)};B.history.initHistory({backgroundColor:A.canvas.styles.backgroundColor,backgroundImage:A.canvas.styles.backgroundImage||"none"});B.reserveJob(h.Ev.__IFRAME_LOAD_COMPLETE,function(){var F=B.config.articleBackgroundColor;if(F&&F!="transparent"){B.addStyle({backgroundColor:F,backgroundImage:""})}});B.observeJob("canvas.apply.letterpaper",function(F){if(F.id){B.getPanel("html").addStyle({backgroundColor:"transparent"})}})})})();t.addTool("advanced",{sync:d,status:y,opened:d});h.Tool.Advanced=h.Class.create({$const:{__Identity:"advanced"},$extend:h.Tool,oninitialized:function(A){var e=this;
var i=this.toolbar;var D=i.el;e.opened=d;var C=z.collect(D.parentNode,"div.tx-toolbar-advanced");if(!C){return}i.observeJob("toolbar.advanced.fold",function(){x.hide(C);x.removeClassName(D,"tx-toolbar-basic-open")});i.observeJob("toolbar.advanced.spread",function(){x.show(C);x.addClassName(D,"tx-toolbar-basic-open")});var B=function(){if(e.opened){i.fireJobs("toolbar.advanced.fold")}else{i.fireJobs("toolbar.advanced.spread")}e.opened=!e.opened};this.weave.bind(this)(new h.Button(this.buttonCfg),k,B);if(A.opened==y){C.show();x.addClassName(D,"tx-toolbar-basic-open");e.opened=y}},forceOpen:function(){this.button.pushedState();this.toolbar.fireJobs("toolbar.advanced.spread");this.opened=y}});h.module("add drop-down menu button if extra buttons exist.",function(i,A,B,e){e.observeJob(h.Ev.__IFRAME_LOAD_COMPLETE,function(){var C=z.collectAll(i.getWrapper(),"li.tx-list-extra div.tx-extra");if(C.length==0){return}C.each(function(E){var D=z.next(E,".tx-extra-menu");if(!D){return}A.makeWidget(new h.Button({el:E,sync:d,status:y}),new h.Menu({el:D}),function(){})
})})});(function(){t.addTool("fullscreen",{wysiwygonly:d,status:d,switched:d,minHeight:200,minWidth:766,asyncUrl:"trex/tool/async/fullscreen.js"});h.Tool.FullScreen=h.Class.create({$const:{__Identity:"fullscreen"},$extend:h.AsyncTool,oninitialized:function(e){this.weave.bind(this)(new h.Button(this.buttonCfg),k,this.onLoadModule)}})})();t.addTool("image",{disabledonmobile:y,wysiwygonly:y,sync:d,status:d});l.addMsg({"@image.title":"\uc0ac\uc9c4"});h.Tool.Image=h.Class.create({$const:{__Identity:"image"},$extend:h.Tool,oninitialized:function(){var e=this.editor;this.weave.bind(this)(new h.Button(this.buttonCfg),k,function(){e.getSidebar().getAttacher("image").execute()})}});t.addAttacher("image",{multiple:y,multipleuse:d,checksize:d,boxonly:d,wysiwygonly:y,objattr:{},features:{left:250,top:65,width:797,height:644},popPageUrl:"#host#path/pages/trex/image.html"},function(e){var i=t.getAttacher("image",e);i.popPageUrl=t.getUrl(i.popPageUrl);i.features=t.getPopFeatures(i.features)});h.Attacher.Image=h.Class.create({$const:{__Identity:"image"},$extend:h.Attacher,name:"image",title:TXMSG("@image.title"),canModified:d,canResized:y,oninitialized:function(){},getKey:function(e){return e.imageurl
},getDataForEntry:function(A){A.imageurl=this.encodeSpaceInUrl(A.imageurl);A.originalurl=this.encodeSpaceInUrl(A.originalurl);A.attachurl=this.encodeSpaceInUrl(A.attachurl);A.thumburl=A.thumburl||A.imageurl.replace(/\/image\//gm,"/P150x100/");if(!A.dispElId){A.dispElId=h.Util.getDispElId()}var e=((A.tmpSeq)?this.entryBox.syncSeq(A.tmpSeq):this.entryBox.newSeq());var i=Object.extend({dataSeq:e},A);return i},createEntry:function(i,e){return this.createAttachment(i,e)},encodeSpaceInUrl:function(e){if(!e){return}return e.replace(/ /g,"%20")},execAttach:function(A,i){var e=this.createEntry(this.getDataForEntry(A),i);e.execRegister()},execReload:function(B,A,i){var e=this.createEntry(this.getDataForEntry(B,A),i);e.execReload()}});h.Attachment.Image=h.Class.create({$const:{__Identity:"image"},$extend:h.Attachment,getFieldAttr:function(e){return{name:"tx_attach_image",value:[e.thumburl,e.imageurl,e.originalurl,e.exifurl,e.filename,e.filesize].join("|")}},getBoxAttr:function(i){var e=i.width?i.width+"x"+i.height+" / ":"";
return{name:i.filename+" ("+e+i.filesize.toByteUnit()+")",image:i.thumburl}},getObjectAttr:function(i){var e=Object.extend({},this.actor.config.objattr);if(i.width){if(!e.width||e.width>i.width){e.width=i.width}}else{e.width=k}if(i.height){if(!e.height||e.height>i.height){e.height=i.height}}else{e.height=k}return e},getObjectStyle:function(A){var i={};if(this.actor.config.objstyle){i=Object.extend(i,this.actor.config.objstyle)}if(A.imagealign){var e={L:h.Tool.AlignLeft,C:h.Tool.AlignCenter,FL:h.Tool.AlignRight,FR:h.Tool.AlignFull}[A.imagealign];if(e&&e.__ImageModeProps&&e.__ImageModeProps.image){i=Object.extend(i,e.__ImageModeProps.image["style"])}}return i},getParaStyle:function(i){var A=Object.extend({},this.actor.config.parastyle||this.actor.config.defaultstyle);if(i.imagealign){var e={L:h.Tool.AlignLeft,C:h.Tool.AlignCenter,FL:h.Tool.AlignRight,FR:h.Tool.AlignFull}[i.imagealign];if(e&&e.__ImageModeProps&&e.__ImageModeProps.paragraph){A=Object.extend(A,e.__ImageModeProps.paragraph["style"])
}}return A},getSaveHtml:function(e){return'<img src="'+e.imageurl+'" class="txc-image"/>'},getDispHtml:function(e){return'<img id="'+e.dispElId+'" src="'+e.imageurl+'" class="txc-image"/>'},getDispText:function(e){return'<img src="'+e.imageurl+'" class="txc-image"/>'},getRegLoad:function(e){return new RegExp('<(?:img|IMG)[^>]*src="?'+e.imageurl.getRegExp()+'"?[^>]*/?>',"gim")},getRegHtml:function(e){return new RegExp('<(?:img|IMG)[^>]*src="?'+e.imageurl.getRegExp()+'"?[^>]*/?>',"gim")},getRegText:function(e){return new RegExp('<(?:img|IMG)[^>]*src="?'+e.imageurl.getRegExp()+'"?[^>]*/?>',"gim")}});t.addTool("file",{disabledonmobile:y,wysiwygonly:y,sync:d,status:d});l.addMsg({"@file.title":"\ud30c\uc77c"});h.Tool.File=h.Class.create({$const:{__Identity:"file"},$extend:h.Tool,oninitialized:function(){var e=this.editor;this.weave.bind(this)(new h.Button(this.buttonCfg),k,function(){e.getSidebar().getAttacher("file").execute()})}});t.addAttacher("file",{multiple:y,multipleuse:d,checksize:y,boxonly:d,wysiwygonly:d,features:{left:250,top:65,width:450,height:404},popPageUrl:"#host#path/pages/trex/file.html"},function(e){var i=t.getAttacher("file",e);
i.popPageUrl=t.getUrl(i.popPageUrl);i.features=t.getPopFeatures(i.features)});h.Attacher.File=h.Class.create({$const:{__Identity:"file"},$extend:h.Attacher,name:"file",title:TXMSG("@file.title"),canModified:y,canResized:d,oninitialized:function(){},getKey:function(e){return e.key||e.attachurl},getDataForEntry:function(C){if(!C.dispElId){C.dispElId=h.Util.getDispElId()}var e=((C.tmpSeq)?this.entryBox.syncSeq(C.tmpSeq):this.entryBox.newSeq());var B=C.filename.split(".").pop().toLowerCase();var i;switch(B){case"jpg":case"gif":case"png":case"bmp":i=C.attachurl.replace("/attach/","/thumbnail/");break;default:i=h.Util.thumburl(B)}var A=Object.extend({dataSeq:e,thumburl:i,prevurl:h.Util.prevurl(C.filename.split(".").pop().toLowerCase())},C);return A}});h.Attachment.File=h.Class.create({$const:{__Identity:"file"},$extend:h.Attachment,getFieldAttr:function(e){return{name:"tx_attach_file",value:[e.attachurl,e.filesize,e.filename].join("|")}},getBoxAttr:function(C){var i=56;var A=C.filename;if(A.getRealLength()>i){var D=A.split(".");
var B=D.pop();var e=D.join(".").cutRealLength(i-2);A=e+"."+B}return{name:A+" ("+C.filesize.toByteUnit()+")",image:C.thumburl}},getObjectStyle:function(A){var i={};if(this.actor.config.objstyle){i=Object.extend(i,this.actor.config.objstyle)}if(A.imagealign){var e={L:h.Tool.AlignLeft,C:h.Tool.AlignCenter,FL:h.Tool.AlignRight,FR:h.Tool.AlignFull}[A.imagealign];if(e&&e.__TextModeProps&&e.__TextModeProps.image){i=Object.extend(i,e.__TextModeProps.button["style"])}}return i},getParaStyle:function(i){var A=Object.extend({},this.actor.config.parastyle||this.actor.config.defaultstyle);if(i.imagealign){var e={L:h.Tool.AlignLeft,C:h.Tool.AlignCenter,FL:h.Tool.AlignFull,FR:h.Tool.AlignRight}[i.imagealign];if(e&&e.__TextModeProps&&e.__TextModeProps.paragraph){A=Object.extend(A,e.__TextModeProps.paragraph["style"])}}return A},getSaveHtml:function(e){return'<a href="'+e.attachurl+'"><img src="'+e.prevurl+'"/> '+e.filename+"</a>"},getDispHtml:function(e){return'<button id="'+e.dispElId+'" class="txc-file"><img class="tx-unresizable" src="'+e.prevurl+'" ld="'+e.attachurl+'"/> '+e.filename+"</button>"
},getDispText:function(e){return"["+TXMSG("@file.title")+":"+e.dataSeq+"]"},getRegLoad:function(e){return new RegExp('<(?:a|A)\\s*href="?'+e.attachurl.getRegExp()+'[^"]*"?[^>]*><(?:img|IMG)[^>]*/?>[\\S\\s]*?</(?:a|A)>',"gm")},getRegHtml:function(e){return new RegExp('<(?:button|BUTTON)[^>]*id="?'+e.dispElId+'"?[^>]*>[\\S\\s]*?'+e.attachurl.getRegExp()+"[\\S\\s]*?</(?:button|BUTTON)>","gm")},getRegText:function(e){return new RegExp("\\["+TXMSG("@file.title")+":"+e.dataSeq+"\\]","gm")}});t.addTool("media",{wysiwygonly:y,sync:d,status:d});l.addMsg({"@media.title":"\uba40\ud2f0\ubbf8\ub514\uc5b4","@media.prev.url":"#iconpath/spacer2.gif?v=2","@media.prev.url.tvpot":"#iconpath/img_multi_tvpot.gif?v=2","@media.prev.url.wmp":"#iconpath/spacer2.gif?v=2"});h.Tool.Media=h.Class.create({$const:{__Identity:"media"},$extend:h.Tool,oninitialized:function(){var e=this.editor;this.weave.bind(this)(new h.Button(this.buttonCfg),k,function(){e.getSidebar().getEmbeder("media").execute()})}});t.addEmbeder("media",{wysiwygonly:y,useCC:d,features:{left:250,top:65,width:458,height:568,resizable:"yes"},popPageUrl:"#host#path/pages/trex/multimedia.html",allowNetworkingFilter:y,allowNetworkingSites:[{host:"www.youtube.com"},{host:"youtube.com"},{host:"api.v.daum.net"},{host:"tvpot.daum.net"},{host:"flvs.daum.net"},{host:"photo-contents.daum-img.net"},{host:"serviceapi.nmv.naver.com"},{host:"v.nate.com"},{host:"flvr.pandora.tv"}]},function(e){var i=e.sidebar.embeder.media;
i.popPageUrl=t.getUrl(i.popPageUrl);i.features=t.getPopFeatures(i.features)});(function(){h.Embeder.Media=h.Class.create({$const:{__Identity:"media"},$extend:h.Embeder,name:"media",title:TXMSG("@media.title"),canResized:y,getCreatedHtml:function(I){var H=I.code||e(I.url,this.config);return D(H)},getDataForEntry:function(){}});h.register("filter > media ",function(H,I,K){var J=K.embeders.media.config;H.getDocParser().registerFilter("filter/embeder/media",{"text@load":function(L){return L},"source@load":function(L){return D(L)},"html@load":function(L){return D(L)},text4save:function(L){return L},source4save:function(L){L=F(L);L=B(L,J);return L},html4save:function(L){L=F(L);L=B(L,J);return L},text2source:function(L){return L},text2html:function(L){return L},source2text:function(L){return L},source2html:function(L){return D(L)},html2text:function(L){return F(L)},html2source:function(L){return F(L)}})});function C(K,J){var I,M,L,H;M="";I=/[\/]*\/\/([^\/]+)\//i.exec(K);if(I&&I[1]){M=I[1]}H=J.allowNetworkingSites.length;
for(L=0;L<H;L+=1){if(M==J.allowNetworkingSites[L].host){return y}}return d}function B(J,I){var H;if(I.allowNetworkingFilter==d){return J}H=J.replace(/(<object[^>]*>)((?:\n|.)*?)(<\/object>)/gi,function(M,P,O,K){var L,N;L=/<param[^>]*=[^\w]*movie[^\w]+[^>]*>/i.exec(O);if(L&&L[0]){N=/\s+value=["']?([^\s"']*)["']?/i.exec(L[0]);if(N&&N[1]){if(C(N[1],I)){return P+O+K}}}L=/<param[^>]*=[^\w]*src[^\w]+[^>]*>/i.exec(O);if(L&&L[0]){N=/\s+value=["']?([^\s"']*)["']?/i.exec(L[0]);if(N&&N[1]){if(C(N[1],I)){return P+O+K}}}O=O.replace(/<param[^>]*=[^\w]*allowNetworking[^\w]+[^>]*>/i,"");O='<param name="allowNetworking" value="internal" />'.concat(O);return P+O+K});H=H.replace(/(<embed)([^>]*)(><\/embed>|\/>)/gi,function(N,O,K,L){var M=/\s+src=["']?([^\s"']*)["']?/i.exec(K);if(M&&M[1]){if(C(M[1],I)){return O+K+L}}K=K.replace(/\s+allowNetworking=["']?[\w]*["']?/i,"").concat(' allowNetworking="internal"');return O+K+L});return H}function F(M){var J;var L=new RegExp("<(?:img|IMG)[^>]*txc-media[^>]*/?>","gim");
var K=M;while((J=L.exec(K))!=k){var I=J[0];var H=i(I);if(!x.msie&&H.indexOf("$")>-1){H=H.replace(/\$/g,"$$$$")}M=M.replace(I,H)}return M}function D(O){if(x.msie){O=O.replace(/<iframe[^>]*src=("|'|)https?:\/\/www\.youtube\.com\/embed\/(\w+)\1[^>]*><\/iframe>/i,function(T,S,R){var Q,U,P;Q=T.match(/\swidth=['"]?(\d+)/);U=(Q&&Q[1])||"560";Q=T.match(/\sheight=['"]?(\d+)/);P=(Q&&Q[1])||"315";return'<object width="'+U+'" height="'+P+'"><param name="movie" value="https://www.youtube.com/v/'+R+'?version=3&amp;hl=ko_KR"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><param name="wmode" value="transparent"></param><embed src="https://www.youtube.com/v/'+R+'?version=3&amp;hl=ko_KR" type="application/x-shockwave-flash" width="'+U+'" height="'+P+'" allowscriptaccess="always" allowfullscreen="true" wmode="transparent"></embed></object>'});O=O.replace(/(<object[^>]*>)((?:\n|.)*?)(<\/object>)/gi,function(Q,S,R,P){R=R.replace(/<param[^>]*=[^\w]*wmode[^\w]+[^>]*>/i,"");
R=R.replace(/<param[^>]*=[^\w]*play[^\w]+[^>]*>/i,"");R='<param name="wmode" value="transparent" />'.concat(R);return S+R+P});O=O.replace(/(<embed)([^>]*)(>)/gi,function(R,S,P,Q){P=P.replace(/\s+wmode=("|'|)\w*\1/i,"");P+=" wmode=transparent";return S+P+Q});return O}else{var K,H,J,M;var L=O;var I=new RegExp("<(?:script)[^>]*>[\\S\\s]*?(<(?:embed|EMBED)[^>]*src=[^>]*>)[\\S\\s]*?</(?:script)>","gim");while((K=I.exec(L))!=k){H=K[0];J=H.replace(/<embed/i,"<xxembed");O=O.replace(H,J)}var N=new RegExp("<(?:object|OBJECT)[^>]*>[\\S\\s]*?(<(?:embed|EMBED)[^>]*src=[^>]*>)[\\S\\s]*?</(?:object|OBJECT)>","gim");while((K=N.exec(L))!=k){H=K[0];M=K[1];J=G(H,M);O=O.replace(H,J)}N=new RegExp("<(?:embed|EMBED)[^>]*src=[^>]*(?:/?>|></(?:embed|EMBED)>)","gim");while((K=N.exec(L))!=k){H=K[0];M=K[0];J=G(H,M);O=O.replace(H,J)}O=O.replace(/<xxembed/i,"<embed");return O}}function G(J,R){var I=h.Util.getAllAttributesFromEmbed(R);var M=I.src;var N=(I.width||" ").parsePx();var O=(I.height||" ").parsePx();if(isNaN(N)||isNaN(O)){var S=A(M);
N=S.width;O=S.height}var L="<embed";for(var K in I){L+=" "+K+'="'+I[K]+'"'}L+=">";var Q=J.split(R);J=Q[0]+L;for(var P=1;P<Q.length;P++){J+=Q[P]}var H=E(M);return'<img src="'+H.imageSrc+'" width="'+N+'" height="'+O+'" border="0" class="tx-entry-embed txc-media'+H.className+'" ld="'+encodeURIComponent(J)+'"/>'}function i(M){var H=h.Util.getAllAttributes(M);var L=H.ld;if(!L||L.length==0){return""}var J=H.width;var K=H.height;var N=decodeURIComponent(L);var Q=N;if(N.indexOf("object")>-1||N.indexOf("OBJECT")>-1){var O;var R=new RegExp("<(?:embed|EMBED)[^>]*src=[^>]*(?:/?>|></(?:embed|EMBED)>)","gim");while((O=R.exec(N))!=k){Q=O[0]}}H=h.Util.getAllAttributes(Q);var I=H.src;var P=A(I);if(isNaN(J)){N=h.String.changeAttribute(N,"width",' width="'+P.width+'"')}else{N=h.String.changeAttribute(N,"width",' width="'+J+'"')}if(isNaN(K)){N=h.String.changeAttribute(N,"height",' height="'+P.height+'"')}else{N=h.String.changeAttribute(N,"height",' height="'+K+'"')}return N}function e(L,K){var M,I,N,J,H;M=L.split(".").pop().split("?")[0].toLowerCase();
I=A(L);if(L.indexOf("http://flvs.daum.net")==0){N=" allowScriptAccess='always'"}else{N=" allowScriptAccess='never'";if(K.allowNetworkingFilter&&C(L,K)==d){N+=" allowNetworking='internal'"}}J="http://tvpot.daum.net/clip/ClipViewByVid.do?vid=";if(L.indexOf(J)==0){H=L.substr(J.length);L="http://flvs.daum.net/flvPlayer.swf?vid="+H;M="swf";N=" allowScriptAccess='always'"}switch(M){case"swf":return'<embed src="'+L+"\" quality='high' "+N+" type='application/x-shockwave-flash' allowfullscreen='true' pluginspage='http://www.macromedia.com/go/getflashplayer' wmode='transparent' width='"+I.width+"' height='"+I.height+"'></embed>";case"mp3":case"wma":case"asf":case"asx":case"mpg":case"mpeg":case"wmv":case"avi":return'<embed src="'+L+'" type="application/x-mplayer2" pluginspage="http://www.microsoft.com/Windows/MediaPlayer/" width=\''+I.width+"' height='"+I.height+"'></embed>";case"mov":return'<embed src="'+L+'" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/indext.html" width=\''+I.width+"' height='"+I.height+"'></embed>";
case"jpg":case"bmp":case"gif":case"png":return'<img src="'+L+'" border="0"/>';default:return'<embed src="'+L+"\" width='"+I.width+"' height='"+I.height+"' "+N+" ></embed>"}}function A(I){var H,J;if(I.indexOf("api.bloggernews.media.daum.net/static/recombox1")>-1){H=400;J=80}else{if(I.indexOf("flvs.daum.net/flvPlayer")>-1){H=502;J=399}else{var K=I.split(".").pop().split("?")[0].toLowerCase();switch(K){case"mp3":case"wma":case"asf":case"asx":H=280;J=45;break;case"mpg":case"mpeg":case"wmv":case"avi":H=320;J=285;break;default:H=400;J=300;break}}}return{width:H,height:J}}function E(J){var H="";var I="";if(J.indexOf("api.bloggernews.media.daum.net/static/recombox1")>-1){H="";I=TXMSG("@media.prev.url")}else{if(J.indexOf("flvs.daum.net/flvPlayer")>-1){H=" txc-media-tvpot";I=TXMSG("@media.prev.url.tvpot")}else{var K=J.split(".").pop().split("?")[0].toLowerCase();switch(K){case"mp3":case"wma":case"asf":case"asx":H=" txc-media-wmp";I=TXMSG("@media.prev.url.wmp");break;case"mpg":case"mpeg":case"wmv":case"avi":H=" txc-media-wmp";
I=TXMSG("@media.prev.url.wmp");break;default:H="";I=TXMSG("@media.prev.url");break}}}return{className:H,imageSrc:I}}})();l.addMsg({"@canvas.unload.message":"\uc791\uc131\ud558\uc2e0 \ub0b4\uc6a9\uc774 \uc800\uc7a5\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4. \ud398\uc774\uc9c0\ub97c \ub5a0\ub098\uc2dc\uaca0\uc2b5\ub2c8\uae4c?","@canvas.unload.message.at.modify":"\uc791\uc131\ud558\uc2e0 \ub0b4\uc6a9\uc774 \uc800\uc7a5\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4. \ud398\uc774\uc9c0\ub97c \ub5a0\ub098\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"});h.install("editor.isDisableUnloadHandler & editor.setDisableUnloadHandler",function(e){var i=y;e.isDisableUnloadHandler=function(){return i};e.setDisableUnloadHandler=function(){i=d};e.setEnableUnloadHandler=function(){i=y}});h.module("observing beforeunload event",function(C,D,E,A,i){var e=i.events;var B=new h.Validator();x.observe(window,"beforeunload",function(F){if(C.isDisableUnloadHandler()){if(e.preventUnload){A.fireJobs(h.Ev.__CANVAS_BEFORE_UNLOAD);if(B.exists(A.getContent())){F.returnValue=TXMSG("@canvas.unload.message");
return TXMSG("@canvas.unload.message")}}}},d)});l.addMsg({"@align.image.align.center":"\uac00\uc6b4\ub370\uc815\ub82c","@align.image.align.full":"\uc624\ub978\ucabd\uae00\ud750\ub984","@align.image.align.left":"\uc67c\ucabd\uc815\ub82c","@align.image.align.right":"\uc67c\ucabd\uae00\ud750\ub984","@align.text.align.center":"\uac00\uc6b4\ub370\uc815\ub82c (Ctrl+.)","@align.text.align.full":"\uc591\ucabd\uc815\ub82c","@align.text.align.left":"\uc67c\ucabd\uc815\ub82c (Ctrl+,)","@align.text.align.right":"\uc624\ub978\ucabd\uc815\ub82c (Ctrl+/)"});h.module("Register an eventhandler in order to change align icons upon toolbar when user click a specific image or not.",function(B,D,E,A){var F="tx-selected-image";var i=[D.tools.alignleft,D.tools.aligncenter,D.tools.alignright,D.tools.alignfull];var e=["txc-2image-c","txc-3image-c","txc-footnote","txc-jukebox","txc-movie","txc-gallery","txc-imazing","txc-map","txc-file","txc-emo","tx-entry-embed","txc-bgm","txc-pie"];var C=function(G){var H=function(I,K,M){var L=k;
var J=k;if(!L){L=z.find(I.button.elButton,"li")}if(!J){J=x(I.button.elIcon)}J.title=M;if(K=="image"){if(!x.hasClassName(L,F)){x.addClassName(L,F)}I.imageAlignMode=y}else{if(x.hasClassName(L,F)){x.removeClassName(L,F)}I.imageAlignMode=d}};H(i[0],G,G=="image"?TXMSG("@align.image.align.left"):TXMSG("@align.text.align.left"));H(i[1],G,G=="image"?TXMSG("@align.image.align.center"):TXMSG("@align.text.align.center"));H(i[2],G,G=="image"?TXMSG("@align.image.align.right"):TXMSG("@align.text.align.right"));H(i[3],G,G=="image"?TXMSG("@align.image.align.full"):TXMSG("@align.text.align.full"))};A.observeElement([{tag:"body"},{tag:"table"},{tag:"hr"}],function(){C("text")});A.observeElement({tag:"img"},function(H){var G=h.Util.getMatchedClassName(H,e);if(G){C("text")}else{if(z.find(H,"button")){C("text")}else{C("image")}}})});h.module("make padding area inside Canvas with editor width",function(D,N,P,B){var J=B.getPanel(h.Canvas.__WYSIWYG_MODE);if(!J){return}var S=J.el;var R=5;var O=16;var G=28;var W=2;
var H;var A;var E;var V;var Z=B.getSizeConfig();var Y=B.getContainerWidth();var T=Z.contentWidth.toNumber();var X=Z.contentPadding.toNumber();var C=(Y>T);B.observeJob("canvas.apply.background",function(ac){ab({top:(ac&&ac.topLeftHeight)?ac.topLeftHeight.parsePx():0,right:(ac&&ac.midRightWidth)?ac.midRightWidth.parsePx():0,bottom:(ac&&ac.botLeftHeight)?ac.botLeftHeight.parsePx():0,left:(ac&&ac.midLeftWidth)?ac.midLeftWidth.parsePx():0})});B.observeJob("canvas.apply.letterpaper",function(ac){ab({top:(ac&&ac.topHeight)?ac.topHeight.parsePx():0,right:(ac&&(ac.midColor||ac.midUrl))?X:0,bottom:(ac&&ac.botHeight)?ac.botHeight.parsePx():0,left:(ac&&(ac.midColor||ac.midUrl))?X:0})});if(C){B.observeJob(h.Ev.__IFRAME_LOAD_COMPLETE,function(){ab();e();I()});B.observeJob(h.Ev.__CANVAS_MODE_CHANGE,function(ad,ac){K();I()});B.observeJob(h.Ev.__CANVAS_WRAP_WIDTH_CHANGE,F);B.observeJob("canvas.normalscreen.change",F);B.observeJob("canvas.fullscreen.change",F);B.getCanvasGuideSize=function(){return L().leftWidth.parsePx()
};if(!x.msie){if(x.gecko){x.setStyle(S,{overflowX:"auto",overflowY:"auto"})}else{x.setStyle(S,{overflowX:"auto",overflowY:"scroll"})}}}function ab(ac){J.addStyle(Q(ac))}function Q(ac){var af={};var ag=["top","bottom","left","right"];for(var ae=0;ae<ag.length;ae++){var ad=ag[ae];af[ad]=(ac&&ac[ad])||X}if(C){af.left=Math.max(Math.ceil(i()),0);af.right=Math.max(Math.floor(i()),0);return{width:T,paddingLeft:"0",paddingRight:"0",paddingTop:af.top.toPx(),paddingBottom:af.bottom.toPx(),marginLeft:af.left.toPx(),marginRight:af.right.toPx()}}else{return{paddingTop:af.top.toPx(),paddingRight:af.right.toPx(),paddingBottom:af.bottom.toPx(),paddingLeft:af.left.toPx()}}}function i(){return(Y-T-W-O)/2}function L(){var ac=i();if(ac<G){return{leftWidth:"0",rightWidth:"0",rightPos:"0"}}else{return{leftWidth:Math.ceil(ac-X).toPx(),rightWidth:Math.max(0,(Math.floor(ac-X))).toPx(),rightPos:(T+Math.ceil(ac+X)).toPx()}}}function aa(){return H&&A}var M;function F(){clearTimeout(M);M=setTimeout(function(){Y=B.getContainerWidth();
U()},4)}function U(){ab();K();I()}function e(){var ac=B.getStyleConfig().color;H=tx.div({className:"tx-wysiwyg-padding"});E=tx.div({className:"tx-wysiwyg-padding-divL",style:{borderColor:ac}});A=tx.div({className:"tx-wysiwyg-padding"});V=tx.div({className:"tx-wysiwyg-padding-divR",style:{borderColor:ac}});var ad=B.wysiwygEl;H.appendChild(E);ad.insertBefore(H,S);A.appendChild(V);ad.insertBefore(A,S);K()}function K(){if(aa()){var ad=L();x.setStyle(H,{width:ad.leftWidth});x.setStyle(A,{width:ad.rightWidth,left:ad.rightPos});var ac=ad.leftWidth.parsePx()>G;var ae=B.getConfig().showGuideArea;var af=ac&&ae?"1px solid":"0 none";x.setStyle(E,{borderRight:af,borderBottom:af});x.setStyle(V,{borderLeft:af,borderBottom:af})}}function I(){if(aa()){if(B.mode==h.Canvas.__WYSIWYG_MODE){x.show(H);x.show(A)}else{x.hide(H);x.hide(A)}}}});h.module("Register an eventhandler in order to resize block and edit search results & some images in wysiwig panel.",function(B,C,D,i){if(x.msie){var e=function(E){if(E.onresizestart==k){E.onresizestart=function(){return d
}}};i.observeElement({tag:"img",klass:"tx-unresizable"},e);i.observeElement({tag:"img",klass:"tx-entry-attach"},e);i.observeElement({tag:"img",klass:"txc-footnote"},e);i.observeElement({tag:"iframe",klass:"txc-map"},e)}var A;if(x.msie){A=function(E){E.setAttribute("unselectable","on");$A(E.getElementsByTagName("*")).each(function(G){if(G.nodeName.charAt(0)!="/"){G.setAttribute("unselectable","on")}});var F=i.getProcessor();F.selectControl(E)}}else{A=function(E){var F=i.getProcessor();F.selectControl(E);throw $stop}}i.observeElement({tag:"button"},A);i.observeElement({tag:"img"},function(E){var F=z.find(E,"button");if(F){A(F);throw $stop}})});h.module("in order to save history for image resizing on IE",function(B,C,D,i){var A=i.history;var e={};var E=k;i.observeJob(h.Ev.__CANVAS_PANEL_MOUSEDOWN,function(G){var F=x.element(G);if(F&&F.tagName&&F.tagName.toLowerCase()=="img"){E=F;e=z.getPosition(F)}});i.observeJob(h.Ev.__CANVAS_PANEL_MOUSEUP,function(){if(E){var G=d;try{var H=z.getPosition(E);
for(var F in H){if(H[F]!=e[F]){G=y}}if(G){A.saveHistory()}}catch(I){}finally{E=k}}})});(function(){var A={getEventElement:function(C){var B=x.findElement(C,"td");if(B&&B.tagName&&B.tagName.toUpperCase()=="TD"){return B}else{return k}},getMaxCoord:function(D){var B=this.getXCoords(D);var C=this.getYCoords(D);return{x:B[B.length-1],y:C[C.length-1]}},getMinCoord:function(D){var B=this.getXCoords(D);var C=this.getYCoords(D);return{x:B[0],y:C[0]}},getYCoords:function(B){return this.getCoordsByKey(B,"row")},getXCoords:function(B){return this.getCoordsByKey(B,"col")},getCoordsByKey:function(E,C){var D=new RegExp(C+"(\\d+)","gim");var F=[];var B=E.getAttribute(C+"Class");B.trim().replace(D,function(G,H){F.push(H.toNumber())});return F},setSelect:function(B){x.setStyle(B,{backgroundImage:"url(http://i1.daumcdn.net/icon/editor/table_focus_50.png)"})},setUnselect:function(B){x.setStyle(B,{backgroundImage:""})},clearContent:function(B){B.setAttribute("unselectable","on");B.innerHTML="-"},clearCoords:function(B){B.setAttribute("colClass","");
B.setAttribute("rowClass","")},setCoords:function(C,J,B){var G=J+1;var H=this.getRowSpan(C);var D="row ".times(H).replace(/(row)/g,function(K,L){return L+(G++)});var E=B+1;var I=this.getColSpan(C);var F="col ".times(I).replace(/(col)/g,function(K,L){return L+(E++)});C.setAttribute("colClass",F);C.setAttribute("rowClass",D)},getColSpan:function(B){return parseInt(B.getAttribute("colSpan")||1)},getRowSpan:function(B){return parseInt(B.getAttribute("rowSpan")||1)}};var e={start:{x:-1,y:-1},top:-1,left:-1,bottom:-1,right:-1,init:function(B,C){this.start.x=this.left=this.right=B;this.start.y=this.top=this.bottom=C},clear:function(){this.top=this.left=this.bottom=this.right=this.start.x=this.start.y=-1},changeBoundary:function(B,C){this.top=Math.min(this.start.y,C);this.bottom=Math.max(this.start.y,C);this.left=Math.min(this.start.x,B);this.right=Math.max(this.start.x,B)},getRectCoord:function(){return{sx:this.left,sy:this.top,ex:this.right,ey:this.bottom}}};var i={canMerge:function(B,D){var C;
for(C=B.sy;C<B.ey+1;C++){if(A.getMinCoord(D[C][B.sx]).x-1!=B.sx||A.getMaxCoord(D[C][B.ex]).x-1!=B.ex){return d}}for(C=B.sx;C<B.ex+1;C++){if(A.getMinCoord(D[B.sy][C]).y-1!=B.sy||A.getMaxCoord(D[B.ey][C]).y-1!=B.ey){return d}}return y},canSplit:function(C,E){var D=A.getMinCoord(E[C.sy][C.sx]);var B=A.getMinCoord(E[C.ey][C.ex]);return(D.x==B.x&&D.y==B.y&&D.x>0&&D.y>0)},isMergedCell:function(C,D){var B=A.getMaxCoord(D[C.sy][C.sx]);var E=A.getMinCoord(D[C.sy][C.sx]);if(B.x!=E.x||B.y!=E.y){return y}else{return d}},canRemoveRow:function(C,F){var B=C.sy;var G=C.ey;var E=F[0].length;for(var D=0;D<E;D++){if(B!=A.getMinCoord(F[C.sy][D]).y-1){return d}if(G!=A.getMaxCoord(F[C.ey][D]).y-1){return d}}return y},canRemoveCol:function(B,G){var F=B.sx;var E=B.ex;var D=G.length;for(var C=0;C<D;C++){if(F!=A.getMinCoord(G[C][B.sx]).x-1){return d}if(E!=A.getMaxCoord(G[C][B.ex]).x-1){return d}}return y},isAllRowSelected:function(B,C){return(C.length<=B.ey-B.sy+1)?y:d},isAllColSelected:function(B,C){return(C[0].length<=B.ex-B.sx+1)?y:d
},canAddUpperRow:function(D,C){for(var B=0;B<C[0].length;B++){if(C[D-1][B]==C[D][B]){return d}}return y},canAddBelowRow:function(D,C){for(var B=0;B<C[0].length;B++){if(C[D+1][B]==C[D][B]){return d}}return y},canAddLeftCol:function(B,D){for(var C=0;C<D.length;C++){if(D[C][B-1]==D[C][B]){return d}}return y},canAddRightCol:function(B,D){for(var C=0;C<D.length;C++){if(D[C][B+1]==D[C][B]){return d}}return y}};h.MarkupTemplate.add("table.edit",'<div class="tx-table-edit">			<ul class="tx-tab tx-tab-menu1">				<li><a href="javascript:;">\ud45c\uad6c\uc131</a></li>				<li><a href="javascript:;">\ub514\uc790\uc778</a></li>				<li><a href="javascript:;">\uc11c\uc2dd</a></li>			</ul>			<div class="tx-table-edit-layout">			<div class="tx-table-edit-layout-wrapper">				<div class="tx-table-edit-layout-insert">					<h4>\uc0bd\uc785</h4>					<ul class="tx-2cell">						<li class="tx-left"><a href="javascript:;" class="tx-up" title="\uc704\uc5d0 \ucd94\uac00">\uc704</a></li>						<li class="tx-right"><a href="javascript:;" class="tx-down" title="\uc544\ub798\uc5d0 \ucd94\uac00">\uc544\ub798</a></li>					</ul>					<ul class="tx-2cell">						<li class="tx-left"><a href="javascript:;" class="tx-left" title="\uc67c\ucabd\uc5d0 \ucd94\uac00">\uc67c\ucabd</a></li>						<li class="tx-right"><a href="javascript:;" class="tx-right" title="\uc624\ub978\ucabd \ucd94\uac00">\uc624\ub978</a></li>					</ul>				</div>				<div class="tx-table-edit-layout-cell">					<h4>\uc0ad\uc81c</h4>					<ul class="tx-2cell">						<li class="tx-left"><a href="javascript:;" class="tx-col" title="\uc5f4\uc0ad\uc81c">\uc5f4</a></li>						<li class="tx-right"><a href="javascript:;" class="tx-row" title="\ud589\uc0ad\uc81c">\ud589</a></li>					</ul>					<h4 style="width:50px">\ubcd1\ud569/\ubd84\ud560</h4>					<ul class="tx-2cell">						<li class="tx-left"><a href="javascript:;" class="tx-merge" title="\ubcd1\ud569">\ud569</a></li>						<li class="tx-right"><a href="javascript:;" class="tx-split" title="\ubd84\ud560">\ubd84</a></li>					</ul>				</div>				<div class="tx-table-edit-layout-align">					<h4>\uc815\ub82c</h4>					<ul class="tx-3cell">						<li class="tx-left"><a href="javascript:;" class="tx-top" title="\uc0c1\ub2e8">\uc0c1</a></li>						<li class="tx-center"><a href="javascript:;" class="tx-middle" title="\uc911\ub2e8">\uc911</a></li>						<li class="tx-right"><a href="javascript:;" class="tx-bottom" title="\ud558\ub2e8">\ud558</a></li>					</ul>					<ul class="tx-3cell">						<li class="tx-left"><a href="javascript:;" class="tx-alignleft" title="\uc67c\ucabd \uc815\ub82c">\uc88c</a></li>						<li class="tx-center"><a href="javascript:;" class="tx-aligncenter" title="\uac00\uc6b4\ub370 \uc815\ub82c">\uc911</a></li>						<li class="tx-right"><a href="javascript:;" class="tx-alignright" title="\uc624\ub978\ucabd \uc815\ub82c">\uc6b0</a></li>					</ul>				</div>				</div>			</div>			<div class="tx-table-edit-design">			<div class="tx-table-edit-design-wrapper">				<dl>					<dt>\ud14c\ub450\ub9ac\uc120\ud0dd</dt>					<dd class="tx-table-edit-borderrange tx-btn-widget">						<a href="javascript:;" class="tx-icon">\ud14c\ub450\ub9ac</a>						<a href="javascript:;" class="tx-arrow">\ud14c\ub450\ub9ac</a>						<div class="tx-menu"></div>					</dd>					<dt>\uc120</dt>					<dd class="tx-table-edit-bordercolor tx-btn-widget-tbg">						<a href="javascript:;" class="tx-icon">\uc120\uc0c9</a>						<a href="javascript:;" class="tx-arrow">\uc120\uc0c9</a>						<div class="tx-colorpallete"></div>					</dd>					<dd class="tx-table-edit-borderwidth tx-btn-widget">						<a href="javascript:;" class="tx-icon">\uad75\uae30</a>						<a href="javascript:;" class="tx-arrow">\uad75\uae30</a>						<div class="tx-menu"></div>					</dd>					<dd class="tx-table-edit-borderstyle tx-btn-widget">						<a href="javascript:;" class="tx-icon">\uc2a4\ud0c0\uc77c</a>						<a href="javascript:;" class="tx-arrow">\uc2a4\ud0c0\uc77c</a>						<div class="tx-menu"></div>					</dd>					<dt>\ubc30\uacbd\uc0c9</dt>					<dd class="tx-table-edit-backcolor tx-btn-widget-brbg">						<a href="javascript:;" class="tx-icon">\ubc30\uacbd\uc0c9</a>						<a href="javascript:;" class="tx-arrow">\ubc30\uacbd\uc0c9</a>						<div class="tx-colorpallete" unselectable="on"></div>					</dd>				</dl>			</div>			</div>			<div class="tx-table-edit-template">			<div class="tx-table-edit-template-wrapper">				<ul>					<!--li class="tx-ex1"><a href="javascript:"></a></li-->				</ul>				<a href="javascript:;" class="tx-button-on">\ub354\ubcf4\uae30</a>				<ul class="tx-table-edit-template-all">					<!--li class="tx-ex1"><a href="javascript:"></a></li-->				</ul>			</div>			</div>			<div class="tx-table-edit-main">				<a href="javascript:;" class="tx-confirm">\ud655\uc778</a>				<a href="javascript:;" class="tx-cancel">\ucde8\uc18c</a>			</div>		</div>');
h.Menu.Table.TableEdit=h.Class.create({$const:{__OPTIONS:{WIDTH:[{label:"1pt",title:"1px",klass:"tx-1px",data:"1"},{label:"2pt",title:"2px",klass:"tx-2px",data:"2"},{label:"3pt",title:"3px",klass:"tx-3px",data:"3"},{label:"4pt",title:"4px",klass:"tx-4px",data:"4"},{label:"5pt",title:"5px",klass:"tx-5px",data:"5"},{label:"6pt",title:"6px",klass:"tx-6px",data:"6"},{label:"7pt",title:"7px",klass:"tx-7px",data:"7"}],RANGE:[{label:"\ubaa8\ub4e0 \ud14c\ub450\ub9ac",title:"\uc804\uccb4",klass:"tx-all",data:"all"},{label:"\ubc14\uae65 \ud14c\ub450\ub9ac",title:"\ubc14\uae65\ucabd",klass:"tx-out",data:"out"},{label:"\uc548\ucabd \ud14c\ub450\ub9ac",title:"\uc548\ucabd",klass:"tx-in",data:"in"},{label:"\uc704\ucabd \ud14c\ub450\ub9ac",title:"\uc704\ucabd",klass:"tx-top",data:"top"},{label:"\uc544\ub798\ucabd \ud14c\ub450\ub9ac",title:"\uc544\ub7ab\ucabd",klass:"tx-bottom",data:"bottom"},{label:"\uc67c\ucabd \ud14c\ub450\ub9ac",title:"\uc67c\ucabd",klass:"tx-left",data:"left"},{label:"\uc624\ub978\ucabd \ud14c\ub450\ub9ac",title:"\uc624\ub978\ucabd",klass:"tx-right",data:"right"}],STYLE:[{label:"\uc5c6\uc74c",title:"\uc5c6\uc74c",klass:"tx-none",data:"none"},{label:"\uc2e4\uc120",title:"\uc2e4\uc120",klass:"tx-solid",data:"solid"},{label:"\uad75\uc740\uc810\uc120",title:"\uad75\uc740\uc810\uc120",klass:"tx-dashed",data:"dashed"},{label:"\uc810\uc120",title:"\uc810\uc120",klass:"tx-dotted",data:"dotted"}]}},initialize:function(B){if(!B.table){alert("\ud3b8\uc9d1\ud560 \ud14c\uc774\ube14\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");
return}var C=this.config=x.extend({},B);this.previewTable=new h.Menu.Table.TableEdit.PreviewTable(C);this.realTable=new h.Menu.Table.TableEdit.TableEditor(C);this.elContainer=this.elPreviewArea=k;this.createTableEditLayer();this.blackBox=B.editor.getBlackBox();this.blackBox.show(this.elContainer);this.eventBinding();this.showMenu(0);this.borderRange="all"},createTableEditLayer:function(){this.elPreviewArea=tx.div({className:"tx-preview"});this.elPreviewArea.appendChild(this.previewTable.getTable());this.elContainer=tx.div({className:"tx-table-edit-container"});this.elContainer.appendChild(this.elPreviewArea);this.elMenu=h.MarkupTemplate.get("table.edit").evaluateAsDom({});this.elContainer.appendChild(this.elMenu);var B=tx.div({style:{clear:"both"}});B.style.clear="both";this.elContainer.appendChild(B)},_eventBindingTab:function(){var B=this.showMenu=function(I){if(isNaN(I)){return}for(var H=0;H<D.length;H++){x.removeClassName(F,"tx-tab-menu"+(H+1));x.hide(E[H])}x.addClassName(F,"tx-tab-menu"+(I+1));
x.show(E[I])};var F=z.collect(this.elMenu,"ul.tx-tab");var D=z.collectAll(F,"li");var E=[z.collect(this.elContainer,"div.tx-table-edit-layout"),z.collect(this.elContainer,"div.tx-table-edit-design"),z.collect(this.elContainer,"div.tx-table-edit-template")];var G=function(I,H){B(H);return d};for(var C=0;C<D.length;C++){x.observe(D[C],"click",G.bindAsEventListener(this,C))}},_eventBindingLayoutMenu:function(){var C=this;var F=z.collectAll(z.collect(this.elMenu,".tx-table-edit-layout"),"a");var B=["addRowUpper","addRowBelow","addColLeft","addColRight","removeCol","removeRow","merge","split","changeTextValignTop","changeTextValignMiddle","changeTextValignBottom","changeTextAlignLeft","changeTextAlignCenter","changeTextAlignRight"];var H=function(L){var K=x.findElement(L,"li");var J=K.parentNode;if(K){var I=x.classNames(K)[0].replace("tx","");J.className=J.className+I}};var E=function(J){var I=x.findElement(J,"ul");if(I){I.className=I.className.replace(/-right|-center|-left/,"")}};var G=function(J,I){x.stop(J);
C[B[I]]();return d};for(var D=0;D<F.length;D++){x.observe(F[D],"click",G.bindAsEventListener(this,D));x.observe(F[D],"mouseover",H);x.observe(F[D],"mouseout",E)}},_eventBindingDesignMenu:function(){var B=this;var D=z.collect(this.elMenu,"div.tx-table-edit-design");var C=this.config.editor.toolbar;var E=z.collect(D,"dd.tx-table-edit-backcolor a.tx-icon");C.makeWidget(new h.Button.ColorWidget({status:y,el:z.collect(D,"dd.tx-table-edit-backcolor")}),new h.Menu.ColorPallete({el:z.collect(this.elMenu,"dd.tx-table-edit-backcolor div.tx-colorpallete"),thumbs:h.__CONFIG_COMMON.thumbs}),function(H){if(!x.hasClassName(E,"tx-selected")){x.addClassName(E,"tx-selected")}B.changeCellStyle("changeBackColor",H)});var F=z.collect(D,"dd.tx-table-edit-borderrange a.tx-icon");C.makeWidget(new h.Button.Widget({status:y,el:z.collect(D,"dd.tx-table-edit-borderrange")}),new h.Menu.Select({el:z.collect(D,"dd.tx-table-edit-borderrange div.tx-menu"),options:h.Menu.Table.TableEdit.__OPTIONS.RANGE}),function(H){x.removeClassName(F,F.previousClassName||"tx-range");
F.previousClassName="tx-range-"+H;x.addClassName(F,"tx-range-"+H);B.setBorderRange(H)});var G=z.collect(D,"dd.tx-table-edit-bordercolor a.tx-icon");C.makeWidget(new h.Button.ColorWidget({status:y,el:z.collect(D,"dd.tx-table-edit-bordercolor")}),new h.Menu.ColorPallete({el:z.collect(this.elMenu,"dd.tx-table-edit-bordercolor div.tx-colorpallete"),thumbs:h.__CONFIG_COMMON.thumbs}),function(H){if(!x.hasClassName(G,"tx-selected")){x.addClassName(G,"tx-selected")}B.changeCellStyle("changeBorderColor",H)});C.makeWidget(new h.Button.Widget({status:y,el:z.collect(D,"dd.tx-table-edit-borderwidth")}),new h.Menu.Select({el:z.collect(D,"dd.tx-table-edit-borderwidth div.tx-menu"),options:h.Menu.Table.TableEdit.__OPTIONS.WIDTH}),function(I){var H=I.toPx();B.changeCellStyle("changeBorderWidth",H)});C.makeWidget(new h.Button.Widget({status:y,el:z.collect(D,"dd.tx-table-edit-borderstyle")}),new h.Menu.Select({el:z.collect(D,"dd.tx-table-edit-borderstyle div.tx-menu"),options:h.Menu.Table.TableEdit.__OPTIONS.STYLE}),function(H){B.changeCellStyle("changeBorderType",H)
})},_eventBidingTemplateMenu:function(){var H=z.collectAll(this.elMenu,"div.tx-table-edit-template ul");var G=H[0];var D=H[1];var E=(new h.Tool.Table.TemplateWizard()).getTemplateList();var B=this;var C=function(M,L,N){for(var K=0;K<M.length;K++){var J=tx.li({className:"tx-"+M[K].klass});var O=tx.a({href:"javascript:;"});var I=tx.span(" ");x.observe(O,"click",function(P){return function(){B.applyTemplateStyle(P);return d}}(K+N));O.appendChild(I);J.appendChild(O);L.appendChild(J)}};C(E.slice(10),D,10);C(E.slice(1,10),G,1);var F=z.collect(this.elMenu,"a.tx-button-on");x.observe(F,"click",function(){F.className=x.hasClassName(F,"tx-button")?"tx-button-on":"tx-button";x.toggle(D);return d})},_eventBindingMainMenu:function(){var D=this;var C=z.collect(this.elContainer,"div.tx-table-edit-main");var E=z.collect(C,"a.tx-confirm");x.observe(E,"click",function(){D.done();return d});var B=z.collect(C,"a.tx-cancel");x.observe(B,"click",function(){D.cancel();return d})},eventBinding:function(){this._eventBindingTab();
this._eventBidingTemplateMenu();this._eventBindingLayoutMenu();this._eventBindingDesignMenu();this._eventBindingMainMenu()},getContainer:function(){return this.elContainer},_executeLayoutCommand:function(B,C){this.previewTable.clearSelection();this.previewTable[B](C);this.previewTable.refreshCoord();this.realTable[B](C);this.previewTable.clearBoundary()},addRowUpper:function(){var B=this.previewTable.getSelectedRectCoord().sy;if(B<0){alert("\ucd94\uac00\ub420 \ud589\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");return}if(B!=0&&!i.canAddUpperRow(B,this.previewTable.getTdMatrix())){alert("\uc88c\uc6b0\uce21\uc5d0 \ud569\uccd0\uc9c4 \ud589\uc774 \uc788\uc5b4\uc11c \ud589\uc744 \ucd94\uac00\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");return}this._executeLayoutCommand("addRowUpper",B)},addRowBelow:function(){var B=this.previewTable.getSelectedRectCoord().ey;if(B<0){alert("\ucd94\uac00\ub420 \ud589\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");return}if(this.previewTable.getTdMatrix().length-1!=B&&!i.canAddBelowRow(B,this.previewTable.getTdMatrix())){alert("\uc88c\uc6b0\uce21\uc5d0 \ud569\uccd0\uc9c4 \ud589\uc774 \uc788\uc5b4\uc11c \ud589\uc744 \ucd94\uac00\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");
return}this._executeLayoutCommand("addRowBelow",B)},addColLeft:function(){var B=this.previewTable.getSelectedRectCoord().sx;if(B<0){alert("\ucd94\uac00\ub420 \uc5f4\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");return}if(0!=B&&!i.canAddLeftCol(B,this.previewTable.getTdMatrix())){alert("\uc704\uc544\ub798\uc5d0 \ud569\uccd0\uc9c4 \uc5f4\uc774 \uc788\uc5b4\uc11c \uc5f4\uc744 \ucd94\uac00\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");return}this._executeLayoutCommand("addColLeft",B)},addColRight:function(){var B=this.previewTable.getSelectedRectCoord().ex;if(B<0){alert("\ucd94\uac00\ub420 \uc5f4\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");return}if(this.previewTable.getTdMatrix()[0].length-1!=B&&!i.canAddRightCol(B,this.previewTable.getTdMatrix())){alert("\uc704\uc544\ub798\uc5d0 \ud569\uccd0\uc9c4 \uc5f4\uc774 \uc788\uc5b4\uc11c \uc5f4\uc744 \ucd94\uac00\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");return}this._executeLayoutCommand("addColRight",B)},removeRow:function(){var B=this.previewTable.getSelectedRectCoord();
var D=B.sy;var C=B.ey;if(D<0){alert("\uc0ad\uc81c\ud560 \ud589\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");return}if(!i.canRemoveRow(B,this.previewTable.getTdMatrix())){alert("\uc0ad\uc81c\ud560 \uc218 \uc5c6\ub294 \ud589\uc774 \ud3ec\ud568\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.");return}if(i.isAllRowSelected(B,this.previewTable.getTdMatrix())){alert("\ubaa8\ub4e0 \ud589\uc744 \uc0ad\uc81c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");return}this.previewTable.clearSelection();for(var E=D;E<=C;E++){this.previewTable.removeRow(D);this.realTable.removeRow(D)}this.previewTable.refreshCoord();this.previewTable.clearBoundary()},removeCol:function(){var B=this.previewTable.getSelectedRectCoord();var E=B.sx;var D=B.ex;if(E<0){alert("\uc0ad\uc81c\ud560 \uc5f4\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");return}if(!i.canRemoveCol(B,this.previewTable.getTdMatrix())){alert("\uc0ad\uc81c\ud560 \uc218 \uc5c6\ub294 \uc5f4\uc774 \ud3ec\ud568\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.");return}if(i.isAllColSelected(B,this.previewTable.getTdMatrix())){alert("\ubaa8\ub4e0 \uc5f4\uc744 \uc0ad\uc81c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");
return}for(var C=E;C<=D;C++){this._executeLayoutCommand("removeCol",E)}},merge:function(){var B=this.previewTable.getSelectedRectCoord();if(B.sx<0||B.sy<0){alert("\ud569\uce60 \uce78\ub4e4\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");return d}if(this.previewTable.getTdMatrix()[B.sy][B.sx]==this.previewTable.getTdMatrix()[B.ey][B.ex]){alert("\ud569\uce60\uce78\uc744 \ub450\uce78\uc774\uc0c1 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");return d}if(!i.canMerge(B,this.previewTable.getTdMatrix())){alert("\ud569\uce58\uae30\ub97c \uc218\ud589\ud560 \uc218 \uc5c6\ub294 \uc120\ud0dd\uc601\uc5ed\uc785\ub2c8\ub2e4.");return d}this.previewTable.clearSelection();this.previewTable.merge(B);this.previewTable.refreshCoord();this.realTable.merge(B);this.previewTable.clearBoundary()},split:function(){var B=this.previewTable.getSelectedRectCoord();if(B.sx<0||B.sy<0){alert("\ub098\ub20c \uce78\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");return d}if(!i.canSplit(B,this.previewTable.getTdMatrix())){alert("\ub098\ub204\uc5b4\uc9c8 \uce78\uc744 \ud55c\uce78\ub9cc \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");
return d}if(!i.isMergedCell(B,this.previewTable.getTdMatrix())){alert("\ub354\uc774\uc0c1 \ub098\ub20c \uc218 \uc5c6\ub294 \uce78\uc785\ub2c8\ub2e4. \ub450\uce78\uc774\uc0c1 \ud569\uccd0\uc9c4 \uce78\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");return d}this.previewTable.clearSelection();this.previewTable.split(B);this.previewTable.refreshCoord();this.realTable.split(B);this.previewTable.clearBoundary()},changeCellStyle:function(D,C){var B=this.previewTable.getSelectedRectCoord();this.previewTable[D](B,C,this.borderRange);this.realTable[D](B,C,this.borderRange)},_changeTextAlign:function(C){var B=this.previewTable.getSelectedRectCoord();this.previewTable.changeTextAlign(B,C);this.realTable.changeTextAlign(B,C)},changeTextAlignLeft:function(){this._changeTextAlign("left")},changeTextAlignCenter:function(){this._changeTextAlign("center")},changeTextAlignRight:function(){this._changeTextAlign("right")},_changeTextValign:function(C){var B=this.previewTable.getSelectedRectCoord();this.previewTable.changeTextValign(B,C);
this.realTable.changeTextValign(B,C)},changeTextValignTop:function(){this._changeTextValign("top")},changeTextValignMiddle:function(){this._changeTextValign("middle")},changeTextValignBottom:function(){this._changeTextValign("bottom")},applyTemplateStyle:function(B){if(isNaN(B)){return}this.previewTable.applyTemplateStyle(B);this.realTable.applyTemplateStyle(B)},setBorderRange:function(B){this.borderRange=B},cancel:function(){this.blackBox.hide()},done:function(){z.insertAt(this.realTable.getTable(),this.config.table);z.remove(this.config.table);this.blackBox.hide()}});h.Menu.Table.TableEdit.TableEditor=h.Class.create({$const:{BORDER_STYLE:"1px solid #ccc"},initialize:function(C){this.elTable=this.createTable(C.table);this.initTdMatrix();this.tableConfig={};var B=C.editor.getCanvas();this.doc=B.getCurrentPanel().getDocument()},initTdMatrix:function(){var B=new h.Tool.Table.TableCellMatrixer(this.elTable);this.tdMatrix=B.getTdMatrix();this.rowSize=B.getRowSize();this.colSize=B.getColSize()
},createTable:function(B){return B.cloneNode(y)},setTdBorderStyle:function(D,C,E){var B=h.Menu.Table.TableEdit.TableEditor.BORDER_STYLE;x.setStyle(D,{borderRight:B,borderBottom:B,borderTop:(C)?B:"",borderLeft:(E)?B:""})},createTd:function(C){var D=this.doc.createElement("td");D.innerHTML="&nbsp;";for(var B in C){D.setAttribute(B,C[B])}return D},createTr:function(){var C=this.doc.createElement("tr");for(var B=0;B<this.colSize;B++){var D=this.createTd({});this.setTdBorderStyle(D,d,(B==0));C.appendChild(D)}return C},addRowUpper:function(B){this._addRow(B);if(B==0){for(var C=0;C<this.colSize;C++){x.setStyle(this.tdMatrix[0][C],{borderTop:"1px solid #000"});x.setStyle(this.tdMatrix[1][C],{borderTop:"none"})}}},addRowBelow:function(B){this._addRow(B,y)},_addRow:function(E,C){var F=dGetties(this.elTable,"tr");var D=F[E];var B=this.createTr();z[(C)?"insertNext":"insertAt"](B,D);if(C){E++}this.tdMatrix.splice(E,0,z.collectAll(B,"td"));this.rowSize++},addColLeft:function(B){this._addCol(B);if(B==0){for(var C=0;
C<this.rowSize;C++){x.setStyle(this.tdMatrix[C][1],{borderLeft:"none"})}}},addColRight:function(B){this._addCol(B,y)},_resizeAllCellWidth:function(){var D=x.getStyle(this.elTable,"width")||this.elTable.getAttribute("width")||389;D=parseInt(D);if(!D){return}var E=Math.round(D/this.colSize,0);for(var C=0;C<this.rowSize;C++){for(var B=0;B<this.colSize;B++){x.setStyle(this.tdMatrix[C][B],{width:(E*A.getColSpan(this.tdMatrix[C][B])).toPx()})}}},_addCol:function(D,H){var C=[];var G=k;var F=function(M,J,L,K){var I=J;while(L[M][I]&&C.contains(L[M][I])){I+=(K)?-1:1}C.push(L[M][I]);return L[M][I]};for(var E=0;E<this.rowSize;E++){G=F(E,D,this.tdMatrix,H);var B=this.createTd({});this.setTdBorderStyle(B,E==0,D==0);z[(!H)?"insertAt":"insertNext"](B,G);this.tdMatrix[E].splice(H?D+1:D,0,B)}this.colSize++;this._resizeAllCellWidth()},removeRow:function(B){var D=this.tdMatrix[B][0].parentNode;z.remove(D);this.tdMatrix.splice(B,1);this.rowSize--;if(B==0){for(var C=0;C<this.colSize;C++){this.setTdBorderStyle(this.tdMatrix[0][C],B==0,C==0)
}}},removeCol:function(B){var C;for(C=0;C<this.rowSize;C++){z.remove(this.tdMatrix[C][B]);this.tdMatrix[C].splice(B,1)}this.colSize--;for(C=0;C<this.rowSize;C++){if(this.tdMatrix[C][B]){this.setTdBorderStyle(this.tdMatrix[C][B],C==0,B==0)}}},merge:function(L){var M=0,G;for(G=L.sx;G<=L.ex;G){var H=A.getColSpan(this.tdMatrix[L.sy][G]);M+=H;G+=H}var C=0;for(G=L.sy;G<=L.ey;G){var J=A.getRowSpan(this.tdMatrix[G][L.sx]);C+=J;G+=J}var K=this.createTd({rowSpan:C,colSpan:M});var I=function(N){return(N.parentNode&&N.parentNode.nodeType!="11")};this.setTdBorderStyle(K,L.sy==0,L.sx==0);var B=this.tdMatrix[L.sy][L.sx];z.insertAt(K,B);var D="";for(G=L.sy;G<=L.ey;G++){var F="";for(var E=L.sx;E<=L.ex;E++){if(I(this.tdMatrix[G][E])){z.remove(this.tdMatrix[G][E]);F+=this.tdMatrix[G][E].innerHTML+""}this.tdMatrix[G][E]=K}D+=F+""}K.innerHTML=D;this._resizeAllCellWidth()},split:function(O){var N=this;var C=function(Q,P){if(!N.tdMatrix[Q][P-1]){return k}else{if(A.getRowSpan(N.tdMatrix[Q][P-1])>1){return C(Q,P-1)
}else{return N.tdMatrix[Q][P-1]}}};var I=O.sy;var D=O.sx;var E=this.tdMatrix[I][D];var K=E.innerHTML;var M=A.getRowSpan(E);var J=A.getColSpan(E);var L=z.collectAll(this.elTable,"tr");for(var H=I;H<I+M;H++){for(var G=D;G<D+J;G++){var F=this.createTd({});this.setTdBorderStyle(F,H==0,G==0);var B=C(H,G);if(B){z.insertNext(F,B)}else{z.insertFirst(L[H],F)}this.tdMatrix[H][G]=F}}this.tdMatrix[I][D].innerHTML=K;z.remove(E);this._resizeAllCellWidth()},_changeTopBorderStyle:function(C,F,G){var E={};E[(C.sy==0)?"borderTop"+F:"borderBottom"+F]=G;var B=(C.sy==0)?0:C.sy-1;for(var D=C.sx;D<=C.ex;D++){x.setStyle(this.tdMatrix[B][D],E)}},_changeBottomBorderStyle:function(C,F,G){var E={};E["borderBottom"+F]=G;var B=C.ey;for(var D=C.sx;D<=C.ex;D++){x.setStyle(this.tdMatrix[B][D],E)}},_changeLeftBorderStyle:function(B,F,G){var E={};E[(B.sx==0)?"borderLeft"+F:"borderRight"+F]=G;var C=(B.sx==0)?0:B.sx-1;for(var D=B.sy;D<=B.ey;D++){x.setStyle(this.tdMatrix[D][C],E)}},_changeRightBorderStyle:function(B,F,G){var E={};
E["borderRight"+F]=G;var C=B.ex;for(var D=B.sy;D<=B.ey;D++){x.setStyle(this.tdMatrix[D][C],E)}},_changeInBorderStyle:function(B,F,G){var E={};for(var D=B.sy;D<=B.ey;D++){for(var C=B.sx;C<=B.ex;C++){E={};if(D!=B.ey){E["borderBottom"+F]=G}if(C!=B.ex){E["borderRight"+F]=G}x.setStyle(this.tdMatrix[D][C],E)}}},_changeOutBorderStyle:function(B,C,D){this._changeTopBorderStyle(B,C,D);this._changeBottomBorderStyle(B,C,D);this._changeLeftBorderStyle(B,C,D);this._changeRightBorderStyle(B,C,D)},_changeBorderStyle:function(F,C,D,E){var B=this._getValidRectCoord(F);this._removeTableBorderProperty();this._removeTableSpacingProperty();switch(E){case"top":this._changeTopBorderStyle(B,C,D);break;case"bottom":this._changeBottomBorderStyle(B,C,D);break;case"left":this._changeLeftBorderStyle(B,C,D);break;case"right":this._changeRightBorderStyle(B,C,D);break;case"in":this._changeInBorderStyle(B,C,D);break;case"out":this._changeOutBorderStyle(B,C,D);break;case"all":this._changeInBorderStyle(B,C,D);this._changeOutBorderStyle(B,C,D);
break;default:break}},_getValidRectCoord:function(B){return{sy:(B.sy<0)?0:B.sy,ex:(B.ex<0)?this.colSize-1:B.ex,ey:(B.ey<0)?this.rowSize-1:B.ey,sx:(B.sx<0)?0:B.sx}},_removeTableBorderProperty:function(){var C=parseInt(this.elTable.getAttribute("border"));if(C>0){this.elTable.setAttribute("border","0");var B=new h.Tool.Table.TemplateWizard();B.applyStyle(this.elTable,0)}},_removeTableSpacingProperty:function(){this.elTable.setAttribute("cellSpacing","0")},changeBorderColor:function(B,D,C){this._changeBorderStyle(B,"Color",D,C)},changeBorderType:function(B,D,C){this._changeBorderStyle(B,"Style",D,C)},changeBorderWidth:function(B,E,C){var D=E.toPx();this._changeBorderStyle(B,"Width",D,C)},_changeCellStyle:function(B,D,G){var H=this._getValidRectCoord(B);var F={};F[D]=G;for(var E=H.sy;E<=H.ey;E++){for(var C=H.sx;C<=H.ex;C++){x.setStyle(this.tdMatrix[E][C],F)}}},changeBackColor:function(B,C){this._changeCellStyle(B,"backgroundColor",C)},changeTextAlign:function(B,C){this._changeCellStyle(B,"textAlign",C)
},changeTextValign:function(B,C){this._changeCellStyle(B,"verticalAlign",C)},applyTemplateStyle:function(C){this._removeTableBorderProperty();this._removeTableSpacingProperty();var B=new h.Tool.Table.TemplateWizard();B.applyStyle(this.elTable,C)},getTdMatrix:function(){return this.tdMatrix},getTable:function(){return this.elTable}});h.Menu.Table.TableEdit.PreviewTable=h.Class.create({$extend:h.Menu.Table.TableEdit.TableEditor,initialize:function(B){this.$super.initialize(B);this.tableConfig={};this.countOfExcuteResizeToParentClientWidth=0;this.boundary=e;this.boundary.clear();this.refreshCoord();this.clearTable();this.eventBinding()},createTd:function(B){return tx.td(B,"+")},createTr:function(){var C=tx.tr();for(var B=0;B<this.colSize;B++){var D=this.createTd({});this.setTdBorderStyle(D,d,(B==0));C.appendChild(D)}return C},createTable:function(B){if(x.msie||x.opera){var C=tx.div();C.innerHTML=B.outerHTML;return C.firstChild}else{return B.cloneNode(y)}},clearTable:function(){if(x.gecko){x.setStyle(this.elTable,{borderCollapse:"separate"})
}this.elTable.setAttribute("width","");for(var C=0;C<this.rowSize;C++){for(var B=0;B<this.colSize;B++){A.clearContent(this.tdMatrix[C][B])}}this._resizeAllCellWidth()},clearSelection:function(){var D=this.boundary;if(D.top<0||D.left<0){return}for(var C=D.top;C<=D.bottom;C++){for(var B=D.left;B<=D.right;B++){A.setUnselect(this.tdMatrix[C][B])}}},setSelection:function(){var D=this.boundary;for(var C=D.top;C<=D.bottom;C++){for(var B=D.left;B<=D.right;B++){A.setSelect(this.tdMatrix[C][B])}}},_clearCoord:function(){for(var C=0;C<this.rowSize;C++){for(var B=0;B<this.colSize;B++){A.clearCoords(this.tdMatrix[C][B])}}},refreshCoord:function(){this._clearCoord();for(var C=0;C<this.rowSize;C++){for(var B=0;B<this.colSize;B++){var D=this.tdMatrix[C][B].getAttribute("colClass");if(!D){A.setCoords(this.tdMatrix[C][B],C,B)}}}this.resizeToParentClientWidth()},resizeToParentClientWidth:function(){var C,B;C=this;B=this.elTable.parentNode;if(B&&0<B.clientWidth){this.elTable.style.width=B.clientWidth+"px"}else{if(this.countOfExcuteResizeToParentClientWidth<30){this.countOfExcuteResizeToParentClientWidth+=1;
setTimeout(function(){C.resizeToParentClientWidth()},16);return}}this.countOfExcuteResizeToParentClientWidth=0},getSelectedRectCoord:function(){return this.boundary.getRectCoord()},clearBoundary:function(){this.boundary.clear()},eventBinding:function(){var C=this;var E=k;var B=function(I){var H=A.getEventElement(I,y);if(H){var G=A.getMinCoord(H);var J=A.getMaxCoord(H);C.clearSelection();C.boundary.init(G.x-1,G.y-1);C.boundary.changeBoundary(J.x-1,J.y-1);E=H}};var F=function(H){if(E){var G=A.getEventElement(H);if(G&&E!=G){var I=A.getMinCoord(G);E=G;C.clearSelection();C.boundary.changeBoundary(I.x-1,I.y-1);C.setSelection()}}};var D=function(H){x.stop(H);var G=A.getEventElement(H);if(E){if(G==E){C.setSelection()}E=k}};setTimeout(function(){var H=z.collect(".tx-table-edit-container");var I=function(L){var M=x.element(L);if(M&&M.tagName){var J=M.className||"";var K=M.tagName.toLowerCase()||"";if(K=="div"&&(J.indexOf("tx-table-edit")>-1||J.indexOf("tx-preview")>-1)){C.clearSelection();C.boundary.clear();
x.stop(L)}}};x.observe(H,"click",I);var G=function(){if(E){E=k}};x.observe(H,"mouseup",G)},1000);x.observe(this.elTable,"mousedown",B);x.observe(this.elTable,"mouseover",F);x.observe(this.elTable,"mouseup",D)}})}());h.module("Add layer to display notice message on editor area before editing",function(A,B,C,i,e){if(e.initializedMessage){i.observeJob(h.Ev.__IFRAME_LOAD_COMPLETE,function(){var E=tx.div({id:"tx-canvas-notice",className:"tx-canvas-notice"},e.initializedMessage);x("tx_canvas").insertBefore(E,x("tx_loading"));var D=function(){if(x("tx-canvas-notice")){x("tx_canvas").removeChild(E);if(A.focus){A.focus()}}};x.observe(E,"click",D);i.observeJob(h.Ev.__CANVAS_DATA_INITIALIZE,D);B.observeJob(h.Ev.__TOOL_CLICK,D)})}});h.MarkupTemplate.add("table.col.resize.dragger",'<div class="tx-table-col-resize-dragger" style="position:absolute; overflow:hidden; top: 0; left: 0; width: 3px; height: 100%; cursor:col-resize;"></div>');h.MarkupTemplate.add("table.row.resize.dragger",'<div class="tx-table-row-resize-dragger" style="position:absolute; overflow:hidden; top: 0; left: 0; width: 100%; height: 3px; cursor:row-resize;"></div>');
l.addMsg({"@table.noselect.alert":"\ud14c\uc774\ube14\uc744 \uc120\ud0dd\ud558\uc2e0 \ud6c4 \uc0ac\uc6a9\uac00\ub2a5\ud569\ub2c8\ub2e4."});h.Table={};h.module("table selector",function(B,C,D,A,i){var e;e=function(G){var F,E,H;F=h.MarkupTemplate.get("table.col.resize.dragger").evaluateAsDom({});E=h.MarkupTemplate.get("table.row.resize.dragger").evaluateAsDom({});H=G.wysiwygEl;z.insertFirst(H,F);z.insertFirst(H,E);x.hide(F);x.hide(E)};A.observeJob(h.Ev.__IFRAME_LOAD_COMPLETE,function(){var K,F,H,J,M,G;K=new h.Table.Selector(B,i);F=new h.Table.Merge(B,i);H=new h.Table.Insert(B,i);J=new h.Table.Delete(B,i);M=new h.Table.Border(B,i);G=new h.Table.TemplateLoader();e(A);var P=A.getPanel(h.Canvas.__WYSIWYG_MODE);var I=P.getProcessor();var L=function(){var Q,R;if(K.getSelected().isValid()===d){Q=I.getNode();R=h.TableUtil.getClosestByTagNames(["td","th"],Q);if(R){K.selectByTd(R,R)}}};A.observeElement({tag:"table"},function(Q){if(C.tools.advanced){C.tools.advanced.forceOpen()}});var E={range:"all",color:"",height:1,type:"solid"};
var O=function(){var Q=C.tools.cellslinecolor;if(Q){E.color=Q.config.defaultcolor}};O();var N=function(){alert(TXMSG("@table.noselect.alert"))};I.table={getTdArr:function(){return K.getSelectedTdArr()},isDuringSelection:function(){return K.isDuringSelection()},execute:function(R,Q){if(!Q){L()}if(K.getSelected().isValid()){R();A.history.saveHistory()}else{N()}},merge:function(){this.execute(function(){F.merge(K)},y)},resetMerge:function(){this.execute(function(){F.resetMerge(K)})},insertRowAbove:function(){this.execute(function(){H.insertRowAbove(K)})},insertRowBelow:function(){this.execute(function(){H.insertRowBelow(K)})},insertColLeft:function(){this.execute(function(){H.insertColLeft(K)})},insertColRight:function(){this.execute(function(){H.insertColRight(K)})},deleteRow:function(){this.execute(function(){J.deleteRow(K)})},deleteCol:function(){this.execute(function(){J.deleteCol(K)})},setBorderRange:function(Q){E.range=Q},setBorderColor:function(Q){E.color=Q;C.fireJobs(h.Ev.__TOOL_CELL_LINE_CHANGE,{color:Q})
},setBorderHeight:function(Q){E.height=Q;C.fireJobs(h.Ev.__TOOL_CELL_LINE_CHANGE,{height:Q})},setBorderType:function(Q){E.type=Q;C.fireJobs(h.Ev.__TOOL_CELL_LINE_CHANGE,{type:Q})},setNoBorder:function(){var Q=this;this.execute(function(){M.setTableSelect(K);M.setBorderRange("all");M.changeBorderColor(Q.getTdArr(),"");M.changeBorderHeight(Q.getTdArr(),"0");M.changeBorderType(Q.getTdArr(),"none")})},setBorderButtons:function(R,Q,T){var S;S=C.tools.cellslinecolor;if(S){S.execute(R)}S=C.tools.cellslineheight;if(S){S.execute(Q)}S=C.tools.cellslinestyle;if(S){S.execute(T)}},getBorderProperty:function(){return{color:E.color,height:E.height,type:E.type}},applyBorder:function(){var Q=this;this.execute(function(){M.setTableSelect(K);M.setBorderRange(E.range);M.changeBorderColor(Q.getTdArr(),E.color);M.changeBorderHeight(Q.getTdArr(),E.height);M.changeBorderType(Q.getTdArr(),E.type);Q.addBorderHistory()})},addBorderHistory:function(){var Q;Q=C.tools.cellslinepreview;if(Q){Q.addBorderHistory(E)}},tableBackground:function(R){var Q=this;
this.execute(function(){var U,V,T,S;U={backgroundColor:R};V=Q.getTdArr();S=V.length;for(T=0;T<S;T+=1){x.setStyle(V[T],U)}K.reset()})},setTemplateStyle:function(R,Q){if(R){G.getTemplate(Q,function(S){S.apply(R);K.reset()})}else{N()}}};C.fireJobs(h.Ev.__TOOL_CELL_LINE_CHANGE,{color:E.color,height:E.height,type:E.type,fromInit:y});C.observeJob(h.Ev.__TOOL_CLICK,function(Q){if(["fontfamily","fontsize","bold","underline","italic","strike","forecolor","backcolor","indent","outdent","alignleft","aligncenter","alignright","alignfull","mergecells","splitcells","insertcells","deletecells","cellsoutline","cellslinecolor","cellslineheight","cellslinestyle","cellslinepreview","tablebackcolor","tabletemplate"].contains(Q)===d){K.reset()}if(Q==="tablebackcolor"){L()}})})});h.Table.Selector=h.Class.create({SELECTED_CLASS_NAME:"tx_table_selected_cell",SELECTED_CSS_TEXT:"{background:#e9eeff !important}",initialize:function(e){this.canvas=e.getCanvas();this.wysiwygPanel=this.canvas.getPanel(h.Canvas.__WYSIWYG_MODE);
this.htmlBody=this.getHtmlBody();this.isDragging=d;this.currentTable=k;this.currentTd=k;this.paintedTdArr=[];this.startCellBoundary=new h.TableUtil.Boundary();this.endCellBoundary=this.startCellBoundary;this.selectedBoundary=new h.TableUtil.Boundary();this.tableIndexer=k;this.applyCss();this.observeEvent()},getHtmlBody:function(){var e;e=this.wysiwygPanel.getDocument();return e.body},applyCss:function(){var e;e=this.wysiwygPanel.getDocument();x.applyCSSText(e,"."+this.SELECTED_CLASS_NAME+this.SELECTED_CSS_TEXT)},observeEvent:function(){var e;e=this;this.canvas.observeJob(h.Ev.__CANVAS_PANEL_MOUSEDOWN,function(A){var i;i=x.element(A);e.onmousedown(i)});x.observe(this.htmlBody,"mousemove",function(A){var i;i=x.element(A);e.onmousemove(i)});this.canvas.observeJob(h.Ev.__CANVAS_PANEL_MOUSEUP,function(i){e.onmouseup()});x.observe(j.top,"mouseup",function(i){e.onmouseup()});this.canvas.observeJob(h.Ev.__CANVAS_PANEL_KEYDOWN,function(i){if(e.isDragging){x.stop(i);e.reset()}else{e.onkeydown(i.ctrlKey,i.keyCode)
}});this.canvas.observeJob(h.Ev.__CANVAS_DATA_INITIALIZE,function(i){if(i===h.Canvas.__WYSIWYG_MODE){e.clearSelected()}})},onmousedown:function(i){var A,e;this.reset();if(this.canvas.config.readonly===d){A=h.TableUtil.getClosestByTagNames(["td","th"],i);e=z.find(A,".txc-info");if(A&&!e){this.selectStart(A);this.turnOnDragging()}}},onmousemove:function(i){var B,e,A;if(this.isDragging){B=h.TableUtil.getClosestByTagNames(["td","th"],i);if(B){e=h.TableUtil.getClosestByTagNames(["table"],B);if(e===this.currentTable&&B!==this.currentTd){this.selectEnd(B);this.applySelected();h.TableUtil.collapseCaret(this.wysiwygPanel,i)}}else{A=(this.endCellBoundary===this.startCellBoundary);if(this.currentTd&&A){this.selectEnd(this.currentTd);this.applySelected();h.TableUtil.collapseCaret(this.wysiwygPanel,i)}}}},onmouseup:function(){if(this.isDragging){this.turnOffDragging()}},onkeydown:function(D,C){var B,e,A;if(D===d){if(C===x.KEY_DELETE){B=this.getSelectedTdArr();e=B.length;for(A=0;A<e;A+=1){h.TableUtil.emptyTd(B[A])
}}this.reset()}},selectStart:function(e){this.currentTable=h.TableUtil.getClosestByTagNames(["table"],e);this.tableIndexer=new h.TableUtil.Indexer(this.currentTable);this.startCellBoundary=this.tableIndexer.getBoundary(e);this.endCellBoundary=this.startCellBoundary;this.currentTd=e},selectEnd:function(e){this.endCellBoundary=this.tableIndexer.getBoundary(e);this.currentTd=e},applySelected:function(){this.calculateSelectedBoundary();this.extendSelectedBoundary();this.paint()},calculateSelectedBoundary:function(){this.selectedBoundary=new h.TableUtil.Boundary();this.selectedBoundary.merge(this.startCellBoundary);this.selectedBoundary.merge(this.endCellBoundary)},extendSelectedBoundary:function(){var e;e=this.selectedBoundary.isValid();while(e){e=this.oneTimeExtendBoundary()}},oneTimeExtendBoundary:function(){var C,B,A,D,e;C=this.tableIndexer.getTdArr(this.selectedBoundary);A=C.length;for(B=0;B<A;B+=1){D=this.tableIndexer.getBoundary(C[B]);e=this.selectedBoundary.merge(D);if(e){return y}}return d
},paint:function(){var i,e;i=this.tableIndexer.getTdArr(this.selectedBoundary);e=Array.prototype.without.apply(this.paintedTdArr,i);this.paintSelected(i);this.eraseSelected(e)},paintSelected:function(i){var e;e=this;this.paintedTdArr=[];i.each(function(A){x.addClassName(A,e.SELECTED_CLASS_NAME);e.paintedTdArr.push(A)})},eraseSelected:function(e){this.removeClassName(e);this.paintedTdArr=Array.prototype.without.apply(this.paintedTdArr,e)},removeClassName:function(i){var e;e=this;i.each(function(B){var A;x.removeClassName(B,e.SELECTED_CLASS_NAME);if(B.className===""){A=B.removeAttribute("class");if(A===d){B.removeAttribute("className")}}})},clearSelected:function(){var e;e=z.collectAll(this.htmlBody,"."+this.SELECTED_CLASS_NAME);this.removeClassName(e);this.paintedTdArr=[]},resetBoundary:function(){this.startCellBoundary=new h.TableUtil.Boundary();this.endCellBoundary=this.startCellBoundary;this.selectedBoundary=new h.TableUtil.Boundary()},turnOnDragging:function(){this.isDragging=y},turnOffDragging:function(){this.isDragging=d
},resetDragging:function(){this.isDragging=d;this.currentTable=k;this.currentTd=k},isDuringSelection:function(){return this.isDragging},getIndexer:function(){return this.tableIndexer},getSelected:function(){return this.selectedBoundary},getSelectedTdArr:function(){if(this.selectedBoundary.isValid()){return this.tableIndexer.getTdArr(this.selectedBoundary)}return[]},selectByBoundary:function(e){this.resetBoundary();this.selectedBoundary=e;this.paint()},selectByTd:function(e,i){this.selectStart(e);this.selectEnd(i);this.applySelected()},reset:function(){this.clearSelected();this.resetBoundary();this.resetDragging();this.reloadIndexer()},reloadIndexer:function(){if(this.tableIndexer){this.tableIndexer.reload()}},getSizeOfSelected:function(){var i,A,B,e,C;i=this.getSelectedTdArr();if(0<i.length){A=i[0];B=i[i.length-1];e=z.getPosition(A);C=z.getPosition(B);return{width:C.x+C.width-e.x,height:C.y+C.height-e.y}}return{width:0,height:0}}});h.Table.Merge=h.Class.create({initialize:function(i){var e;
e=i.getCanvas();this.wysiwygPanel=e.getPanel(h.Canvas.__WYSIWYG_MODE)},merge:function(A){var i,B,e;A.reloadIndexer();i=A.getSelectedTdArr();if(1<i.length){e=A.getSizeOfSelected();B=i[0];this.deleteCellForMerge(i);this.extendCellForMerge(B,A,e);A.reset();A.selectByTd(B,B);h.TableUtil.collapseCaret(this.wysiwygPanel,B)}else{alert("\ub450\uac1c \uc774\uc0c1\uc758 \uc140\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.")}},deleteCellForMerge:function(C){var B,D,A,e;B=C[0].innerHTML;e=C.length;for(A=1;A<e;A+=1){D=B.replace(h.__WORD_JOINER_REGEXP,"").trim();if(D===""||D==="&nbsp;"){B=C[A].innerHTML}z.remove(C[A])}C[0].innerHTML=B},extendCellForMerge:function(B,A,i){var e;e=A.getSelected();B.colSpan=e.right-e.left+1;B.rowSpan=e.bottom-e.top+1;if(B.style.width){z.setWidth(B,i.width+"px")}if(B.style.height){z.setHeight(B,i.height+"px")}},resetMerge:function(A){var i,e;A.reloadIndexer();i=this.splitCol(A);A.reloadIndexer();e=this.splitRow(A);if(i===d&&e===d){alert("\uc774\ubbf8 \ud569\uccd0\uc9c4 \uc140\ub9cc \ubd84\ud560 \uac00\ub2a5\ud569\ub2c8\ub2e4.")
}else{A.reloadIndexer()}},splitCol:function(D){var E,C,F,B,e,A;E=d;C=D.getSelectedTdArr();e=C.length;if(0<e){for(B=0;B<e;B+=1){F=C[B];A=this.splitTdByColSpan(F);E=E||A}}return E},splitRow:function(D){var E,C,F,B,e,A;E=d;C=D.getSelectedTdArr();e=C.length;if(0<e){for(B=0;B<e;B+=1){F=C[B];A=this.splitTdByRowSpan(F);E=E||A}}return E},splitTdByColSpan:function(B){var i,e,A;i=B.colSpan-1;A=0<i;h.TableUtil.splitWidthByColSpan(B);B.colSpan=1;while(0<i){e=h.TableUtil.cloneNodeForEmptyTd(B);z.insertNext(e,B);i-=1}return A},splitTdByRowSpan:function(A){var i,e;e=A.rowSpan-1;i=0<e;h.TableUtil.splitHeightByRowSpan(A);while(0<e){this.splitTdOneByOne(A);e-=1}return i},splitTdOneByOne:function(B){var e,i,A;e=this.getTrForInsert(B);i=this.getTdForInsert(B,e);A=h.TableUtil.cloneNodeForEmptyTd(B);A.rowSpan=1;B.rowSpan-=1;if(i){z.insertAt(A,i)}else{z.append(e,A)}},getTrForInsert:function(C){var B,e,A;A=z.parent(C);e=C.rowSpan-1;for(B=0;B<e;B+=1){A=z.next(A,"tr")}return A},getTdForInsert:function(B,F){var D,H,A,I,E,C,G,e;
D=h.TableUtil.getTableIndexerFromTd(B);H=D.getBoundary(B);A=H.left;I=F.cells;E=I.length;for(C=0;C<E;C+=1){G=I[C];e=D.getBoundary(G);if(A<=e.left){return G}}return k}});h.Table.Insert=h.Class.create({COL_DIRECTION:{LEFT:"left",RIGHT:"right"},initialize:function(i){var e;e=i.getCanvas();this.wysiwygPanel=e.getPanel(h.Canvas.__WYSIWYG_MODE)},insertRowAbove:function(i){var A,e;i.reloadIndexer();A=i.getSelected();if(A.isValid()){e=i.getIndexer();this.insertRowAboveByBoundary(A,e);i.reset()}},insertRowAboveByBoundary:function(E,A){var B,i,e,C,D;B=A.table;i=E.bottom-E.top+1;e=E.top;C=A.getTdArr(new h.TableUtil.Boundary({top:E.top,right:A.getColSize()-1,bottom:E.top,left:0}));D=A.getTdArrHasTop(E.top);this.addRow(B,i,e,C,D)},addRow:function(E,B,e,F,G){var D,C,A;D=function(H){var i;if(G.contains(H)){i=h.TableUtil.cloneNodeForEmptyTd(H);h.TableUtil.splitHeightByRowSpan(i);i.rowSpan=1;A.appendChild(i)}else{H.rowSpan+=1}};for(C=0;C<B;C+=1){A=E.insertRow(e);F.each(D)}},insertRowBelow:function(i){var A,e;
i.reloadIndexer();A=i.getSelected();if(A.isValid()){e=i.getIndexer();this.insertRowBelowByBoundary(A,e);i.reset()}},insertRowBelowByBoundary:function(E,A){var B,i,e,C,D;B=A.table;i=E.bottom-E.top+1;e=E.bottom+1;C=A.getTdArr(new h.TableUtil.Boundary({top:E.bottom,right:A.getColSize()-1,bottom:E.bottom,left:0}));D=A.getTdArrHasBottom(E.bottom);this.addRow(B,i,e,C,D)},insertColLeft:function(i){var A,e;i.reloadIndexer();A=i.getSelected();if(A.isValid()){e=i.getIndexer();this.insertColLeftByBoundary(A,e);i.reset()}},insertColLeftByBoundary:function(C,e){var i,A,B;i=C.right-C.left+1;A=e.getTdArr(new h.TableUtil.Boundary({top:0,right:C.left,bottom:e.getRowSize()-1,left:C.left}));B=e.getTdArrHasLeft(C.left);this.addCol(i,A,B,this.COL_DIRECTION.LEFT)},addCol:function(C,D,F,E){var e,B,A;e=this;B=function(G){var i;if(F.contains(G)){i=h.TableUtil.cloneNodeForEmptyTd(G);h.TableUtil.splitWidthByColSpan(i);i.colSpan=1;if(E===e.COL_DIRECTION.LEFT){z.insertAt(i,G)}else{z.insertNext(i,G)}}else{G.colSpan+=1
}};for(A=0;A<C;A+=1){D.each(B)}},insertColRight:function(i){var A,e;i.reloadIndexer();A=i.getSelected();if(A.isValid()){e=i.getIndexer();this.insertColRightByBoundary(A,e);i.reset()}},insertColRightByBoundary:function(C,e){var i,A,B;i=C.right-C.left+1;A=e.getTdArr(new h.TableUtil.Boundary({top:0,right:C.right,bottom:e.getRowSize()-1,left:C.right}));B=e.getTdArrHasRight(C.right);this.addCol(i,A,B,this.COL_DIRECTION.RIGHT)}});h.Table.Delete=h.Class.create({initialize:function(i){var e;e=i.getCanvas();this.wysiwygPanel=e.getPanel(h.Canvas.__WYSIWYG_MODE)},deleteRow:function(e){var i;i=e.getSelected();if(i.isValid()){this.deleteRowOneByOne(e);e.reset();this.deleteEmptyTableByTableSelector(e)}},deleteRowOneByOne:function(B){var e,A,C,i;C=B.getSelected();e=C.top;A=C.bottom-C.top+1;while(0<A){B.reloadIndexer();i=B.getIndexer();this.deleteRowByIndex(i,e);A-=1}if(e===0){this.drawTopBorder(B)}},drawTopBorder:function(D){var B,C,e,A,E;D.reloadIndexer();B=D.getIndexer();C=B.getTdArrHasTop(0);e=C.length;
for(A=0;A<e;A+=1){E=C[A];if(E.style.borderTop===""&&E.style.borderBottom!==""){E.style.borderTop=E.style.borderBottom}}},deleteRowByIndex:function(B,A){var D,i,e,C;D=this.getTdArrByRowIndex(B,A);i=this.getTdArrByHasTop(B,A);e=D.length;if(0<e){C=z.parent(D[0]);this.deleteTdInDeleteRow(D,i,C,B);z.remove(C)}},getTdArrByRowIndex:function(i,e){return i.getTdArr(new h.TableUtil.Boundary({top:e,right:i.getColSize()-1,bottom:e,left:0}))},getTdArrByHasTop:function(i,e){return i.getTdArrHasTop(e)},deleteTdInDeleteRow:function(E,A,D,C){var e,B,F;e=E.length;for(B=0;B<e;B+=1){F=E[B];if(1<F.rowSpan){F.rowSpan-=1;this.reduceHeightAsRow(F,D);if(A.contains(F)){this.shiftRowOfTd(F,C)}}else{z.remove(F)}}},reduceHeightAsRow:function(B,i){var A,e;if(B.style.height){A=parseInt(B.style.height,10);e=A-i.offsetHeight;if(0<e){z.setStyles(B,{height:e+"px"},y)}}},shiftRowOfTd:function(C,A){var B,e,i;B=z.parent(C);e=z.next(B,"tr");i=this.getTdForInsert(C,e,A);if(i){z.insertAt(C,i)}else{z.append(e,C)}},getTdForInsert:function(B,F,D){var H,A,I,E,C,G,e;
H=D.getBoundary(B);A=H.left;I=F.cells;E=I.length;for(C=0;C<E;C+=1){G=I[C];e=D.getBoundary(G);if(A<=e.left){return G}}return k},deleteEmptyTableByTableSelector:function(A){var e,i;e=A.getIndexer();i=e.table;if(i.rows.length===0){z.remove(i)}},deleteCol:function(e){var i;i=e.getSelected();if(i.isValid()){this.deleteColOneByOne(e);e.reset();this.deleteEmptyTableByTableSelector(e)}},deleteColOneByOne:function(B){var e,A,C,i;C=B.getSelected();e=C.left;A=C.right-C.left+1;while(0<A){B.reloadIndexer();i=B.getIndexer();this.deleteColByIndex(i,e);A-=1}if(e===0){this.drawLeftBorder(B)}},drawLeftBorder:function(D){var B,C,e,A,E;D.reloadIndexer();B=D.getIndexer();C=B.getTdArrHasLeft(0);e=C.length;for(A=0;A<e;A+=1){E=C[A];if(E.style.borderLeft===""&&E.style.borderRight!==""){E.style.borderLeft=E.style.borderRight}}},deleteColByIndex:function(C,A){var D,e,B,E;D=this.getTdArrByColIndex(C,A);e=D.length;for(B=0;B<e;B+=1){E=D[B];if(1<E.colSpan){E.colSpan-=1}else{z.remove(E)}}},getTdArrByColIndex:function(i,e){return i.getTdArr(new h.TableUtil.Boundary({top:0,right:e,bottom:i.getRowSize()-1,left:e}))
}});h.Table.Border=h.Class.create({$const:{BORDER_STYLE:"1px solid #ccc"},initialize:function(A,i){var e;e=A.getCanvas();this.wysiwygPanel=e.getPanel(h.Canvas.__WYSIWYG_MODE);this.borderRange="all";this.borderColor="#4174D9";this.tableSelect=k;this.selectedBoundary=k},setBorderRange:function(e){this.borderRange=e},setTableSelect:function(e){this.tableSelect=e;this.selectedBoundary=e.getSelected()},changeTopBorderStyle:function(D,H,G){var A={};var B=this.selectedBoundary;var I,e;var F=this.tableSelect.getIndexer();var C;if(B.top==0){I="borderTop"+H;C=new h.TableUtil.Boundary({top:B.top,bottom:B.top,left:B.left,right:B.right})}else{I="borderBottom"+H;C=new h.TableUtil.Boundary({top:B.top-1,bottom:B.top-1,left:B.left,right:B.right})}e=F.getTdArr(C);A[I]=G;for(var E=0;E<e.length;E++){x.setStyle(e[E],A)}},changeBottomBorderStyle:function(C,H,G){var A={};var B=this.selectedBoundary;var I,e,D;var F=this.tableSelect.getIndexer();I="borderBottom"+H;D=new h.TableUtil.Boundary({top:B.bottom,bottom:B.bottom,left:B.left,right:B.right});
e=F.getTdArr(D);A[I]=G;for(var E=0;E<e.length;E++){x.setStyle(e[E],A)}},changeLeftBorderStyle:function(D,H,G){var A={};var B=this.selectedBoundary;var I,e;var F=this.tableSelect.getIndexer();var C;if(B.left==0){I="borderLeft"+H;C=new h.TableUtil.Boundary({top:B.top,bottom:B.bottom,left:B.left,right:B.left})}else{I="borderRight"+H;C=new h.TableUtil.Boundary({top:B.top,bottom:B.bottom,left:B.left-1,right:B.left-1})}e=F.getTdArr(C);A[I]=G;for(var E=0;E<e.length;E++){x.setStyle(e[E],A)}},changeRightBorderStyle:function(D,H,G){var A={};var B=this.selectedBoundary;var I,e;var F=this.tableSelect.getIndexer();var C;I="borderRight"+H;C=new h.TableUtil.Boundary({top:B.top,bottom:B.bottom,left:B.right,right:B.right});e=F.getTdArr(C);A[I]=G;for(var E=0;E<e.length;E++){x.setStyle(e[E],A)}},changeInBorderStyle:function(F,L,K){var G={};var D={};var C=this.selectedBoundary;var M,e,J,B;var E,A;var I=this.tableSelect.getIndexer();J="borderBottom"+L;E=new h.TableUtil.Boundary({top:C.top,bottom:C.bottom-1,left:C.left,right:C.right});
M=I.getTdArr(E);G[J]=K;for(var H=0;H<M.length;H++){x.setStyle(M[H],G)}B="borderRight"+L;A=new h.TableUtil.Boundary({top:C.top,bottom:C.bottom,left:C.left,right:C.right-1});e=I.getTdArr(A);D[B]=K;for(var H=0;H<e.length;H++){x.setStyle(e[H],D)}},changeOutBorderStyle:function(A,e,i){this.changeTopBorderStyle(A,e,i);this.changeBottomBorderStyle(A,e,i);this.changeLeftBorderStyle(A,e,i);this.changeRightBorderStyle(A,e,i)},changeNoneBorderStyle:function(A,e,i){},changeBorderStyle:function(A,e,i){var B=this.borderRange;switch(B){case"top":this.changeTopBorderStyle(A,e,i);break;case"bottom":this.changeBottomBorderStyle(A,e,i);break;case"left":this.changeLeftBorderStyle(A,e,i);break;case"right":this.changeRightBorderStyle(A,e,i);break;case"in":this.changeInBorderStyle(A,e,i);break;case"out":this.changeOutBorderStyle(A,e,i);break;case"all":this.changeInBorderStyle(A,e,i);this.changeOutBorderStyle(A,e,i);break;case"none":this.changeInBorderStyle(A,e,i);this.changeOutBorderStyle(A,e,i);break;default:break
}},changeBorderColor:function(i,e){if(e!=k){this.borderColor=e}this.changeBorderStyle(i,"Color",this.borderColor)},changeBorderType:function(i,e){this.changeBorderStyle(i,"Style",e);this.changeBorderColor(i)},changeBorderHeight:function(A,i){var e=i.toPx();this.changeBorderStyle(A,"Width",e);this.changeBorderColor(A)}});(function(){h.Table.TemplateLoader=h.Class.create({initialize:function(){this.templateList=k},getTemplate:function(A,B){if(isNaN(A)){return}if(this.templateList){B(new e(this.templateList[A]))}else{var i=this;this.loadTemplate(function(C){i.templateList=C;B(new e(i.templateList[A]))})}},loadTemplate:function(A){var i=this.getJSBasePath()+"trex/modules/table/async/template_data.js";EditorJSLoader.asyncLoadModule({url:t.getUrl(i),callback:function(){var B=getTableTemplateList();A(B)}})},getJSBasePath:function(){var A;try{A=EditorJSLoader.getJSBasePath("editor.js")}catch(i){A=EditorJSLoader.getJSBasePath()}return A}});var e=h.Class.create({initialize:function(i){this.templateData=i
},apply:function(E){var D=new h.Tool.Table.TableCellMatrixer(E);var F=D.getTdMatrix();var A=this;for(var C=0;C<F.length;C++){for(var B=0;B<F[C].length;B++){A.setCellStyle(F[C][B],{isEvenRow:(C%2)==1,isFirstRow:C==0,isLastRow:C==F.length-1,isFirstCol:B==0,isLastCol:(B==F[C].length-1)})}}},setCellStyle:function(A,i){var B=this.templateData;var C=Object.extend({},B.common);Object.extend(C,(i.isEvenRow)?B.evenRow:B.oddRow);Object.extend(C,(i.isFirstRow)?B.firstRow:(i.isLastRow)?B.lastRow:{});Object.extend(C,(i.isLastCol)?B.lastCol:{});Object.extend(C,(i.isFirstCol)?B.firstCol:{});txlib.setStyle(A,C)}})})();h.module("table resize dragger",function(i,A,B,e){e.observeJob(h.Ev.__IFRAME_LOAD_COMPLETE,function(){var aa=e.getPanel(h.Canvas.__WYSIWYG_MODE);var L=aa.getDocument();var aG=aa.getWindow();var af=L.body;var aJ=20;var aD;var aR=z.collect(e.wysiwygEl,".tx-table-col-resize-dragger");var aP=z.collect(e.wysiwygEl,".tx-table-row-resize-dragger");var ac=d;var aO,ab,ax,au;var aN,aS,aM;var ar,T,S;
var aE,C;var H,F;var V,aC,aH;var am,N,ae;var Z,Y,aK;var aL={TOP:"EDGE_TOP",BOTTOM:"EDGE_BOTTOM",LEFT:"EDGE_LEFT",RIGHT:"EDGE_RIGHT",NONE:"NONE"};var ah=aL.NONE;var O=function(){ac=d;aE=k;C=k;aO=ab=k;ax=au=k;aC=V=aH=k;am=N=ae=k;H=F=0;ar=T=S=0;aN=aS=aM=0};var ak=function(){aO=z.find(aE,"table");if(aO==k){return k}ac=y;ar=aO.offsetWidth;if(ah!=aL.NONE){x.stop(aK);G()}switch(ah){case aL.LEFT:aA();al();break;case aL.RIGHT:aI();al();break;case aL.TOP:P();aB();break;case aL.BOTTOM:I();aB();break}};var aA=function(){var aU=new h.TableUtil.Indexer(aO);var aT=aU.getBoundary(aE);if(aT.left>0){V=aU.getTdArrHasRight(aT.left-1);aC=aU.getTdArrHasLeft(aT.left)}};var aI=function(){var aU=new h.TableUtil.Indexer(aO);var aT=aU.getBoundary(aE);var aV=aU.getColSize();V=aU.getTdArrHasRight(aT.right);if(aT.right<aV-1){aC=aU.getTdArrHasLeft(aT.right+1)}};var P=function(){var aU=new h.TableUtil.Indexer(aO);var aT=aU.getBoundary(aE);aH=aU.getTdArrHasBottom(aT.top-1)};var I=function(){var aU=new h.TableUtil.Indexer(aO);
var aT=aU.getBoundary(aE);aH=aU.getTdArrHasTop(aT.bottom)};var aw=function(){switch(ah){case aL.LEFT:case aL.RIGHT:J();break;case aL.TOP:case aL.BOTTOM:R();break}if(ah!=aL.NONE){e.history.saveHistory()}};var U=function(){if(ac){C=K();av()}else{ad()}};var av=function(){switch(ah){case aL.LEFT:case aL.RIGHT:ap();break;case aL.TOP:case aL.BOTTOM:aF();break}};var ad=function(){var aU=z.find(x.element(aK),"td");var aT=z.find(aU,".txc-info");if(aU&&!aT){aE=aU;ah=W(aE);G()}else{ah=aL.NONE;G()}};var K=function(){var aT=k;switch(ah){case aL.LEFT:case aL.RIGHT:aT=aR;break;case aL.TOP:case aL.BOTTOM:aT=aP;break}return aT};var al=function(){ac=y;am=[];N=[];var aT=0;if(V){for(aT=0;aT<V.length;aT++){am.push(V[aT].offsetWidth)}aN=aQ(am);for(aT=0;aT<V.length;aT++){if(aN==am[aT]){ax=V[aT];break}}}if(aC){for(aT=0;aT<aC.length;aT++){N.push(aC[aT].offsetWidth)}aS=aQ(N);for(aT=0;aT<aC.length;aT++){if(aS==N[aT]){au=aC[aT];break}}}T=x.getCoordsTarget(C).left};var ap=function(){if(ac){var aT=parseInt(Z-z.getScrollLeft(L)-T);
var aU;if(ax&&au){aU=E(ax,aT)}if(ax&&au==k){aU=ao(ax,aT)}if(ax==k&&au){aU=az(au,aT)}if(aU){x.setStyle(C,{left:aU.toPx()})}}};var E=function(aV,aU){var aX,aY,aT,aW,aZ;aX=aN+aS;aY=aN+aU;aT=aS-aU;aW=x.getCoordsTarget(aV);if(aY>=aJ&&aT>=aJ){aZ=Z-z.getScrollLeft(L)}else{if(aY<=aJ){aY=aJ;aT=aX-aY;aZ=aW.left-z.getScrollLeft(L)+aY}else{if(aT<=aJ){aT=aJ;aY=aX-aT;aZ=aW.left-z.getScrollLeft(L)+aY}}}H=aY-aN;return aZ};var ao=function(aU,aT){var aW,aV,aX;aW=aN+aT;aV=x.getCoordsTarget(aU);if(aW<aJ){aW=aJ}aX=aV.left-z.getScrollLeft(L)+aW;H=aW-aN;return aX};var az=function(aW,aU){var aT,aV,aX;aT=aS-aU;aV=x.getCoordsTarget(aW);if(aT<aJ){aT=aJ}aX=aV.left+aT;H=aS-aT;return aX};var J=function(){M();O()};var M=function(){var aT;if(V){for(aT=0;aT<V.length;aT++){V[aT].style.width=am[aT]+H}}if(aC){for(aT=0;aT<aC.length;aT++){aC[aT].style.width=N[aT]-H}}if(V&&aC==k){Q()}};var aB=function(){ac=y;aM=aE.offsetHeight;ae=[];if(aH){var aT;for(aT=0;aT<aH.length;aT++){ae.push(parseInt(aH[aT].offsetHeight))}aM=aQ(ae);for(aT=0;
aT<aH.length;aT++){if(aM==ae[aT]){ab=aH[aT]}}}S=x.getCoordsTarget(C).top};var aF=function(){if(ac){var aT=Y-z.getScrollTop(L)-S;var aU=aM+parseInt(aT);var aV=x.getCoordsTarget(ab);var aW=k;if(aU<0){aU=0;aW=aV.top+aU-z.getScrollTop(L)}else{aW=Y-z.getScrollTop(L)}if(aW){x.setStyle(C,{top:aW.toPx()})}F=aU-aM}};var R=function(){ag();O()};var ag=function(){if(aH){for(var aU=0;aU<aH.length;aU++){var aT=ae[aU]+F;if(aT<0){aT=20}aH[aU].style.height=aT.toPx()}}};(function X(){var aT=L.createElement("div");af.appendChild(aT);aT.style.width=aT.style.paddingLeft="1px";aD=aT.offsetWidth===2;af.removeChild(aT)})();var W=function(aW){var a5,a7=aL.NONE;if("getBoundingClientRect" in document.documentElement){try{var a6=aW.ownerDocument,aU=a6.documentElement,a0=a6.body;var aZ=aW.getBoundingClientRect(),a1=a6.defaultView||a6.parentWindow,aY=aU.clientTop||a0.clientTop||0,a3=aU.clientLeft||a0.clientLeft||0,aT=a1.pageYOffset||aD&&aU.scrollTop||a0.scrollTop,aX=a1.pageXOffset||aD&&aU.scrollLeft||a0.scrollLeft,a4=aZ.top+aT-aY,aV=aZ.left+aX-a3;
a5={top:a4,left:aV,bottom:a4+aW.offsetHeight,right:aV+aW.offsetWidth}}catch(a2){a5=k}}if(!a5){a5=x.getCoordsTarget(aW)}if((Z-a5.left)<5&&aW.cellIndex!=0){a7=aL.LEFT}else{if((a5.right-5)<Z){a7=aL.RIGHT}else{if((Y-a5.top)<5&&aW.parentNode.rowIndex!=0){a7=aL.TOP}else{if((a5.bottom-5)<Y){a7=aL.BOTTOM}}}}return a7};var G=function(){e.query(function(aT){if(aT.table){if(aT.table.isDuringSelection()||e.config.readonly){ah=aL.NONE}switch(ah){case aL.LEFT:case aL.RIGHT:x.hide(aP);x.show(aR);aj(aR);C=aR;break;case aL.TOP:case aL.BOTTOM:x.hide(aR);x.show(aP);ai(aP);C=aP;break;case aL.NONE:x.hide(aR);x.hide(aP);break}}})};var aj=function(aU){if(aU==k){return}var aT;if(ac){aT=x.getCoordsTarget(aU).left;x.setStyle(aU,{width:"2px",height:aa.el.clientHeight,border:"1px dotted #81aFFC",background:"",left:aT.toPx()});x.setOpacity(aR,1)}else{aT=Z-z.getScrollLeft(L);x.setStyle(aU,{width:"2px",height:aa.el.clientHeight,border:"",background:"#fff",left:aT.toPx()});x.setOpacity(aR,0)}};var ai=function(aU){if(aU==k){return
}var aT=k;if(ac){aT=x.getCoordsTarget(aU).top;x.setStyle(aU,{height:"2px",border:"1px dotted #81aFFC",background:"",top:aT.toPx()});x.setOpacity(aP,1)}else{aT=Y-z.getScrollTop(L);x.setStyle(aU,{height:"2px",border:"",background:"#fff",top:aT.toPx()});x.setOpacity(aP,0)}};var Q=function(){var aT=0;if(ar){aT=parseInt(ar)+H;aO.width=aT;aO.style.width=aT.toPx()}};var D=function(){x.observe(c.body,"mouseup",function(aT){ay(aT);aw()});if(x.msie){x.observe(af,"mousemove",function(aT){ay(aT);U()});x.observe(af,"mouseup",function(aT){ay(aT);aw()})}else{x.observe(aG,"mousemove",function(aT){ay(aT);U()});x.observe(aG,"mouseup",function(aT){ay(aT);aw()})}if(x.safari){x.observe(c.body,"mousemove",function(aT){if(ac){an(aT);U()}})}x.observe(aR,"mousedown",function(aT){ay(aT);ak()});x.observe(aP,"mousedown",function(aT){ay(aT);ak()})};var ay=function(aT){aK=aT;Z=at(aK);Y=aq(aK)};var an=function(aT){aK=aT;Z=at(aK)-x.getCoords(e.wysiwygEl).left+L.body.scrollLeft;Y=aq(aK)-x.getCoords(e.wysiwygEl).top+L.body.scrollTop
};var at=function(aU){var aT=0;aU=aU||aG.event;if(aU.pageX){aT=aU.pageX}else{if(aU.clientX){aT=aU.clientX+L.body.scrollLeft+L.documentElement.scrollLeft}}return aT};var aq=function(aT){var aU=0;aT=aT||aG.event;if(aT.pageY){aU=aT.pageY}else{if(aT.clientY){aU=aT.clientY+L.body.scrollTop+L.documentElement.scrollTop}}return aU};function aQ(aT){return Math.min.apply(Math,aT)}O();D()})});if(typeof Editor!=="undefined"){Editor.version="7.3.17"}try{EditorJSLoader.readyState="complete";EditorJSLoader.finish()}catch(w){}})();